var t4=Object.defineProperty;var i9=t=>{throw TypeError(t)};var n4=(t,e,n)=>e in t?t4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var vt=(t,e,n)=>n4(t,typeof e!="symbol"?e+"":e,n),s9=(t,e,n)=>e.has(t)||i9("Cannot "+n);var Pf=(t,e,n)=>(s9(t,e,"read from private field"),n?n.call(t):e.get(t)),a9=(t,e,n)=>e.has(t)?i9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),o9=(t,e,n,r)=>(s9(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const b3=!1;var S2=Array.isArray,P2=Array.from,r4=Object.defineProperty,Yl=Object.getOwnPropertyDescriptor,w3=Object.getOwnPropertyDescriptors,i4=Object.prototype,s4=Array.prototype,ih=Object.getPrototypeOf;function a4(t){return typeof(t==null?void 0:t.then)=="function"}function o4(t){return t()}function q_(t){for(var e=0;e<t.length;e++)t[e]()}const Ts=2,S3=4,zu=8,E2=16,ns=32,Gu=64,Go=128,sh=256,ii=512,Xa=1024,Xu=2048,ws=4096,Wu=8192,l4=16384,C2=32768,P3=65536,c4=1<<18,E3=1<<19,ra=Symbol("$state"),u4=Symbol("legacy props"),f4=Symbol("");function C3(t){return t===this.v}function d4(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function T2(t){return!d4(t,this.v)}function h4(t){throw new Error("effect_in_teardown")}function p4(){throw new Error("effect_in_unowned_derived")}function m4(t){throw new Error("effect_orphan")}function v4(){throw new Error("effect_update_depth_exceeded")}function g4(t){throw new Error("props_invalid_value")}function y4(){throw new Error("state_descriptors_fixed")}function _4(){throw new Error("state_prototype_fixed")}function x4(){throw new Error("state_unsafe_local_read")}function b4(){throw new Error("state_unsafe_mutation")}let _c=!1;function w4(){_c=!0}function Ar(t){return{f:0,v:t,reactions:null,equals:C3,version:0}}function jt(t){return T3(Ar(t))}function Au(t,e=!1){var r;const n=Ar(t);return e||(n.equals=T2),_c&&Xn!==null&&Xn.l!==null&&((r=Xn.l).s??(r.s=[])).push(n),n}function S4(t,e=!1){return T3(Au(t,e))}function T3(t){return On!==null&&On.f&Ts&&(Ss===null?z4([t]):Ss.push(t)),t}function l9(t,e){return st(t,Wa(()=>Q(t))),e}function st(t,e){return On!==null&&ju()&&On.f&(Ts|E2)&&(Ss===null||!Ss.includes(t))&&b4(),jl(t,e)}function jl(t,e){return t.equals(e)||(t.v=e,t.version=X3(),A3(t,Xa),ju()&&gn!==null&&gn.f&ii&&!(gn.f&ns)&&(Mr!==null&&Mr.includes(t)?(Rs(gn,Xa),Dh(gn)):Ha===null?G4([t]):Ha.push(t))),e}function A3(t,e){var n=t.reactions;if(n!==null)for(var r=ju(),i=n.length,s=0;s<i;s++){var a=n[s],o=a.f;o&Xa||!r&&a===gn||(Rs(a,e),o&(ii|Go)&&(o&Ts?A3(a,Xu):Dh(a)))}}const A2=1,M2=2,M3=4,P4=8,E4=16,C4=1,T4=2,A4=4,M4=8,R4=16,I4=1,L4=2,ai=Symbol();let R3=!1;function Ct(t,e=null,n){if(typeof t!="object"||t===null||ra in t)return t;const r=ih(t);if(r!==i4&&r!==s4)return t;var i=new Map,s=S2(t),a=Ar(0);s&&i.set("length",Ar(t.length));var o;return new Proxy(t,{defineProperty(l,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&y4();var h=i.get(u);return h===void 0?(h=Ar(f.value),i.set(u,h)):st(h,Ct(f.value,o)),!0},deleteProperty(l,u){var f=i.get(u);if(f===void 0)u in l&&i.set(u,Ar(ai));else{if(s&&typeof u=="string"){var h=i.get("length"),p=Number(u);Number.isInteger(p)&&p<h.v&&st(h,p)}st(f,ai),c9(a)}return!0},get(l,u,f){var P;if(u===ra)return t;var h=i.get(u),p=u in l;if(h===void 0&&(!p||(P=Yl(l,u))!=null&&P.writable)&&(h=Ar(Ct(p?l[u]:ai,o)),i.set(u,h)),h!==void 0){var v=Q(h);return v===ai?void 0:v}return Reflect.get(l,u,f)},getOwnPropertyDescriptor(l,u){var f=Reflect.getOwnPropertyDescriptor(l,u);if(f&&"value"in f){var h=i.get(u);h&&(f.value=Q(h))}else if(f===void 0){var p=i.get(u),v=p==null?void 0:p.v;if(p!==void 0&&v!==ai)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return f},has(l,u){var v;if(u===ra)return!0;var f=i.get(u),h=f!==void 0&&f.v!==ai||Reflect.has(l,u);if(f!==void 0||gn!==null&&(!h||(v=Yl(l,u))!=null&&v.writable)){f===void 0&&(f=Ar(h?Ct(l[u],o):ai),i.set(u,f));var p=Q(f);if(p===ai)return!1}return h},set(l,u,f,h){var w;var p=i.get(u),v=u in l;if(s&&u==="length")for(var P=f;P<p.v;P+=1){var S=i.get(P+"");S!==void 0?st(S,ai):P in l&&(S=Ar(ai),i.set(P+"",S))}p===void 0?(!v||(w=Yl(l,u))!=null&&w.writable)&&(p=Ar(void 0),st(p,Ct(f,o)),i.set(u,p)):(v=p.v!==ai,st(p,Ct(f,o)));var g=Reflect.getOwnPropertyDescriptor(l,u);if(g!=null&&g.set&&g.set.call(h,f),!v){if(s&&typeof u=="string"){var m=i.get("length"),x=Number(u);Number.isInteger(x)&&x>=m.v&&st(m,x+1)}c9(a)}return!0},ownKeys(l){Q(a);var u=Reflect.ownKeys(l).filter(p=>{var v=i.get(p);return v===void 0||v.v!==ai});for(var[f,h]of i)h.v!==ai&&!(f in l)&&u.push(f);return u},setPrototypeOf(){_4()}})}function c9(t,e=1){st(t,t.v+e)}function u9(t){return t!==null&&typeof t=="object"&&ra in t?t[ra]:t}function O4(t,e){return Object.is(u9(t),u9(e))}var f9,I3,L3;function N4(){if(f9===void 0){f9=window;var t=Element.prototype,e=Node.prototype;I3=Yl(e,"firstChild").get,L3=Yl(e,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function R2(t=""){return document.createTextNode(t)}function ic(t){return I3.call(t)}function Ih(t){return L3.call(t)}function bt(t,e){return ic(t)}function tr(t,e){{var n=ic(t);return n instanceof Comment&&n.data===""?Ih(n):n}}function je(t,e=1,n=!1){let r=t;for(;e--;)r=Ih(r);return r}function D4(t){t.textContent=""}function Yt(t){var e=Ts|Xa;gn===null?e|=Go:gn.f|=E3;const n={children:null,ctx:Xn,deps:null,equals:C3,f:e,fn:t,reactions:null,v:null,version:0,parent:gn};if(On!==null&&On.f&Ts){var r=On;(r.children??(r.children=[])).push(n)}return n}function H_(t){const e=Yt(t);return e.equals=T2,e}function O3(t){var e=t.children;if(e!==null){t.children=null;for(var n=0;n<e.length;n+=1){var r=e[n];r.f&Ts?I2(r):Xo(r)}}}function N3(t){var e,n=gn;Ii(t.parent);try{O3(t),e=W3(t)}finally{Ii(n)}return e}function D3(t){var e=N3(t),n=($l||t.f&Go)&&t.deps!==null?Xu:ii;Rs(t,n),t.equals(e)||(t.v=e,t.version=X3())}function I2(t){O3(t),Ru(t,0),Rs(t,Wu),t.v=t.children=t.deps=t.ctx=t.reactions=null}function k3(t){gn===null&&On===null&&m4(),On!==null&&On.f&Go&&p4(),O2&&h4()}function k4(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function xc(t,e,n,r=!0){var i=(t&Gu)!==0,s=gn,a={ctx:Xn,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|Xa,first:null,fn:e,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,version:0};if(n){var o=Kl;try{d9(!0),Nh(a),a.f|=l4}catch(f){throw Xo(a),f}finally{d9(o)}}else e!==null&&Dh(a);var l=n&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&E3)===0;if(!l&&!i&&r&&(s!==null&&k4(a,s),On!==null&&On.f&Ts)){var u=On;(u.children??(u.children=[])).push(a)}return a}function F4(t){const e=xc(zu,null,!1);return Rs(e,ii),e.teardown=t,e}function Qi(t){k3();var e=gn!==null&&(gn.f&ns)!==0&&Xn!==null&&!Xn.m;if(e){var n=Xn;(n.e??(n.e=[])).push({fn:t,effect:gn,reaction:On})}else{var r=Yu(t);return r}}function U4(t){return k3(),Lh(t)}function B4(t){const e=xc(Gu,t,!0);return()=>{Xo(e)}}function Yu(t){return xc(S3,t,!1)}function Lh(t){return xc(zu,t,!0)}function en(t){return Oh(t)}function Oh(t,e=0){return xc(zu|E2|e,t,!0)}function qa(t,e=!0){return xc(zu|ns,t,!0,e)}function F3(t){var e=t.teardown;if(e!==null){const n=O2,r=On;h9(!0),As(null);try{e.call(null)}finally{h9(n),As(r)}}}function U3(t){var e=t.deriveds;if(e!==null){t.deriveds=null;for(var n=0;n<e.length;n+=1)I2(e[n])}}function B3(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){var r=n.next;Xo(n,e),n=r}}function $4(t){for(var e=t.first;e!==null;){var n=e.next;e.f&ns||Xo(e),e=n}}function Xo(t,e=!0){var n=!1;if((e||t.f&c4)&&t.nodes_start!==null){for(var r=t.nodes_start,i=t.nodes_end;r!==null;){var s=r===i?null:Ih(r);r.remove(),r=s}n=!0}B3(t,e&&!n),U3(t),Ru(t,0),Rs(t,Wu);var a=t.transitions;if(a!==null)for(const l of a)l.stop();F3(t);var o=t.parent;o!==null&&o.first!==null&&$3(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.parent=t.fn=t.nodes_start=t.nodes_end=null}function $3(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Zl(t,e){var n=[];L2(t,n,!0),V3(n,()=>{Xo(t),e&&e()})}function V3(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function L2(t,e,n){if(!(t.f&ws)){if(t.f^=ws,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&C2)!==0||(r.f&ns)!==0;L2(r,e,s?n:!1),r=i}}}function Do(t){q3(t,!0)}function q3(t,e){if(t.f&ws){Zu(t)&&Nh(t),t.f^=ws;for(var n=t.first;n!==null;){var r=n.next,i=(n.f&C2)!==0||(n.f&ns)!==0;q3(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let ah=!1,z_=[];function H3(){ah=!1;const t=z_.slice();z_=[],q_(t)}function bc(t){ah||(ah=!0,queueMicrotask(H3)),z_.push(t)}function V4(){ah&&H3()}function q4(t){throw new Error("lifecycle_outside_component")}const z3=0,H4=1;let qd=z3,Mu=!1,Kl=!1,O2=!1;function d9(t){Kl=t}function h9(t){O2=t}let Ro=[],Jl=0;let On=null;function As(t){On=t}let gn=null;function Ii(t){gn=t}let Ss=null;function z4(t){Ss=t}let Mr=null,mi=0,Ha=null;function G4(t){Ha=t}let G3=0,$l=!1,Ua=null,Xn=null;function p9(t){Xn=t}function X3(){return++G3}function ju(){return!_c||Xn!==null&&Xn.l===null}function Zu(t){var a,o;var e=t.f;if(e&Xa)return!0;if(e&Xu){var n=t.deps,r=(e&Go)!==0;if(n!==null){var i;if(e&sh){for(i=0;i<n.length;i++)((a=n[i]).reactions??(a.reactions=[])).push(t);t.f^=sh}for(i=0;i<n.length;i++){var s=n[i];if(Zu(s)&&D3(s),r&&gn!==null&&!$l&&!((o=s==null?void 0:s.reactions)!=null&&o.includes(t))&&(s.reactions??(s.reactions=[])).push(t),s.version>t.version)return!0}}r||Rs(t,ii)}return!1}function X4(t,e,n){throw t}function W3(t){var p;var e=Mr,n=mi,r=Ha,i=On,s=$l,a=Ss,o=Xn,l=t.f;Mr=null,mi=0,Ha=null,On=l&(ns|Gu)?null:t,$l=!Kl&&(l&Go)!==0,Ss=null,Xn=t.ctx;try{var u=(0,t.fn)(),f=t.deps;if(Mr!==null){var h;if(Ru(t,mi),f!==null&&mi>0)for(f.length=mi+Mr.length,h=0;h<Mr.length;h++)f[mi+h]=Mr[h];else t.deps=f=Mr;if(!$l)for(h=mi;h<f.length;h++)((p=f[h]).reactions??(p.reactions=[])).push(t)}else f!==null&&mi<f.length&&(Ru(t,mi),f.length=mi);return u}finally{Mr=e,mi=n,Ha=r,On=i,$l=s,Ss=a,Xn=o}}function W4(t,e){let n=e.reactions;if(n!==null){var r=n.indexOf(t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&e.f&Ts&&(Mr===null||!Mr.includes(e))&&(Rs(e,Xu),e.f&(Go|sh)||(e.f^=sh),Ru(e,0))}function Ru(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)W4(t,n[r])}function Nh(t){var e=t.f;if(!(e&Wu)){Rs(t,ii);var n=gn;gn=t;try{e&E2?$4(t):B3(t),U3(t),F3(t);var r=W3(t);t.teardown=typeof r=="function"?r:null,t.version=G3}catch(i){X4(i)}finally{gn=n}}}function Y3(){Jl>1e3&&(Jl=0,v4()),Jl++}function j3(t){var e=t.length;if(e!==0){Y3();var n=Kl;Kl=!0;try{for(var r=0;r<e;r++){var i=t[r];i.f&ii||(i.f^=ii);var s=[];Z3(i,s),Y4(s)}}finally{Kl=n}}}function Y4(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var r=t[n];!(r.f&(Wu|ws))&&Zu(r)&&(Nh(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?$3(r):r.fn=null))}}function j4(){if(Mu=!1,Jl>1001)return;const t=Ro;Ro=[],j3(t),Mu||(Jl=0)}function Dh(t){qd===z3&&(Mu||(Mu=!0,queueMicrotask(j4)));for(var e=t;e.parent!==null;){e=e.parent;var n=e.f;if(n&(Gu|ns)){if(!(n&ii))return;e.f^=ii}}Ro.push(e)}function Z3(t,e){var n=t.first,r=[];e:for(;n!==null;){var i=n.f,s=(i&ns)!==0,a=s&&(i&ii)!==0;if(!a&&!(i&ws))if(i&zu){s?n.f^=ii:Zu(n)&&Nh(n);var o=n.first;if(o!==null){n=o;continue}}else i&S3&&r.push(n);var l=n.next;if(l===null){let h=n.parent;for(;h!==null;){if(t===h)break e;var u=h.next;if(u!==null){n=u;continue e}h=h.parent}}n=l}for(var f=0;f<r.length;f++)o=r[f],e.push(o),Z3(o,e)}function K3(t){var e=qd,n=Ro;try{Y3();const i=[];qd=H4,Ro=i,Mu=!1,j3(n);var r=t==null?void 0:t();return V4(),(Ro.length>0||i.length>0)&&K3(),Jl=0,r}finally{qd=e,Ro=n}}function Q(t){var o;var e=t.f,n=(e&Ts)!==0;if(n&&e&Wu){var r=N3(t);return I2(t),r}if(Ua!==null&&Ua.add(t),On!==null){Ss!==null&&Ss.includes(t)&&x4();var i=On.deps;Mr===null&&i!==null&&i[mi]===t?mi++:Mr===null?Mr=[t]:Mr.push(t),Ha!==null&&gn!==null&&gn.f&ii&&!(gn.f&ns)&&Ha.includes(t)&&(Rs(gn,Xa),Dh(gn))}else if(n&&t.deps===null){var s=t,a=s.parent;a!==null&&!((o=a.deriveds)!=null&&o.includes(s))&&(a.deriveds??(a.deriveds=[])).push(s)}return n&&(s=t,Zu(s)&&D3(s)),t.v}function m9(t){var e=Ua;Ua=new Set;var n=Ua,r;try{if(Wa(t),e!==null)for(r of Ua)e.add(r)}finally{Ua=e}for(r of n)if(r.f&P3)for(const i of r.deps||[])i.f&Ts||l9(i,null);else l9(r,null)}function Wa(t){const e=On;try{return On=null,t()}finally{On=e}}const Z4=~(Xa|Xu|ii);function Rs(t,e){t.f=t.f&Z4|e}function $r(t,e=!1,n){Xn={p:Xn,c:null,e:null,m:!1,s:t,x:null,l:null},_c&&!e&&(Xn.l={s:null,u:null,r1:[],r2:Ar(!1)})}function Vr(t){const e=Xn;if(e!==null){const a=e.e;if(a!==null){var n=gn,r=On;e.e=null;try{for(var i=0;i<a.length;i++){var s=a[i];Ii(s.effect),As(s.reaction),Yu(s.fn)}}finally{Ii(n),As(r)}}Xn=e.p,e.m=!0}return{}}function K4(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ra in t)G_(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&ra in n&&G_(n)}}}function G_(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{G_(t[r],e)}catch{}const n=ih(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=w3(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}function J4(t,e){if(e){const n=document.body;t.autofocus=!0,bc(()=>{document.activeElement===n&&t.focus()})}}let v9=!1;function Q4(){v9||(v9=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function J3(t){var e=On,n=gn;As(null),Ii(null);try{return t()}finally{As(e),Ii(n)}}function N2(t,e,n,r=n){t.addEventListener(e,()=>J3(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r()}:t.__on_r=r,Q4()}const Q3=new Set,X_=new Set;function W_(t,e,n,r){function i(s){if(r.capture||du.call(e,s),!s.cancelBubble)return J3(()=>n.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?bc(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function eT(t,e,n,r,i){var s={capture:r,passive:i},a=W_(t,e,n,s);(e===document.body||e===window||e===document)&&F4(()=>{e.removeEventListener(t,a,s)})}function Li(t){for(var e=0;e<t.length;e++)Q3.add(t[e]);for(var n of X_)n(t)}function du(t){var x;var e=this,n=e.ownerDocument,r=t.type,i=((x=t.composedPath)==null?void 0:x.call(t))||[],s=i[0]||t.target,a=0,o=t.__root;if(o){var l=i.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(a=l)}if(s=i[a]||t.target,s!==e){r4(t,"currentTarget",{configurable:!0,get(){return s||n}});var f=On,h=gn;As(null),Ii(null);try{for(var p,v=[];s!==null;){var P=s.assignedSlot||s.parentNode||s.host||null;try{var S=s["__"+r];if(S!==void 0&&!s.disabled)if(S2(S)){var[g,...m]=S;g.apply(s,[t,...m])}else S.call(s,t)}catch(w){p?v.push(w):p=w}if(t.cancelBubble||P===e||P===null)break;s=P}if(p){for(let w of v)queueMicrotask(()=>{throw w});throw p}}finally{t.__root=e,delete t.currentTarget,As(f),Ii(h)}}}function tT(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function oh(t,e){var n=gn;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function an(t,e){var n=(e&I4)!==0,r=(e&L4)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=tT(s?t:"<!>"+t),n||(i=ic(i)));var a=r?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=ic(a),l=a.lastChild;oh(o,l)}else oh(a,a);return a}}function kh(t,e,n="svg"){var r=!t.startsWith("<!>"),i=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var a=tT(i),o=ic(a);s=ic(o)}var l=s.cloneNode(!0);return oh(l,l),l}}function Ks(){var t=document.createDocumentFragment(),e=document.createComment(""),n=R2();return t.append(e,n),oh(e,n),t}function kt(t,e){t!==null&&t.before(e)}function eI(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const tI=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function nI(t){return tI.includes(t)}const rI={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",srcobject:"srcObject"};function iI(t){return t=t.toLowerCase(),rI[t]??t}const sI=["touchstart","touchmove"];function aI(t){return sI.includes(t)}function Jr(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n==null?"":n+"")}function oI(t,e){return lI(t,e)}const rl=new Map;function lI(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:a=!0}){N4();var o=new Set,l=h=>{for(var p=0;p<h.length;p++){var v=h[p];if(!o.has(v)){o.add(v);var P=aI(v);e.addEventListener(v,du,{passive:P});var S=rl.get(v);S===void 0?(document.addEventListener(v,du,{passive:P}),rl.set(v,1)):rl.set(v,S+1)}}};l(P2(Q3)),X_.add(l);var u=void 0,f=B4(()=>{var h=n??e.appendChild(R2());return qa(()=>{if(s){$r({});var p=Xn;p.c=s}i&&(r.$$events=i),u=t(h,r)||{},s&&Vr()}),()=>{var P;for(var p of o){e.removeEventListener(p,du);var v=rl.get(p);--v===0?(document.removeEventListener(p,du),rl.delete(p)):rl.set(p,v)}X_.delete(l),g9.delete(u),h!==n&&((P=h.parentNode)==null||P.removeChild(h))}});return g9.set(u,f),u}let g9=new WeakMap;const Ag=0,Ef=1,Mg=2;function y9(t,e,n,r,i){var s=t,a=ju(),o=Xn,l,u,f,h,p=(a?Ar:Au)(void 0),v=(a?Ar:Au)(void 0),P=!1;function S(m,x){P=!0,x&&(Ii(g),As(g),p9(o));try{m===Ag&&n&&(u?Do(u):u=qa(()=>n(s))),m===Ef&&r&&(f?Do(f):f=qa(()=>r(s,p))),m===Mg&&i&&(h?Do(h):h=qa(()=>i(s,v))),m!==Ag&&u&&Zl(u,()=>u=null),m!==Ef&&f&&Zl(f,()=>f=null),m!==Mg&&h&&Zl(h,()=>h=null)}finally{x&&(p9(null),As(null),Ii(null),K3())}}var g=Oh(()=>{if(l!==(l=e())){if(a4(l)){var m=l;P=!1,m.then(x=>{m===l&&(jl(p,x),S(Ef,!0))},x=>{if(m===l&&(jl(v,x),S(Mg,!0),!i))throw v.v}),bc(()=>{P||S(Ag,!0)})}else jl(p,l),S(Ef,!1);return()=>l=null}})}function xr(t,e,n,r=null,i=!1){var s=t,a=null,o=null,l=null,u=i?C2:0;Oh(()=>{l!==(l=!!e())&&(l?(a?Do(a):a=qa(()=>n(s)),o&&Zl(o,()=>{o=null})):(o?Do(o):r&&(o=qa(()=>r(s))),a&&Zl(a,()=>{a=null})))},u)}function Vl(t,e){return e}function cI(t,e,n,r){for(var i=[],s=e.length,a=0;a<s;a++)L2(e[a].e,i,!0);var o=s>0&&i.length===0&&n!==null;if(o){var l=n.parentNode;D4(l),l.append(n),r.clear(),Oa(t,e[0].prev,e[s-1].next)}V3(i,()=>{for(var u=0;u<s;u++){var f=e[u];o||(r.delete(f.k),Oa(t,f.prev,f.next)),Xo(f.e,!o)}})}function Mi(t,e,n,r,i,s=null){var a=t,o={flags:e,items:new Map,first:null},l=(e&M3)!==0;if(l){var u=t;a=u.appendChild(R2())}var f=null,h=!1;Oh(()=>{var p=n(),v=S2(p)?p:p==null?[]:P2(p),P=v.length;if(!(h&&P===0)){h=P===0;{var S=On;uI(v,o,a,i,e,(S.f&ws)!==0,r)}s!==null&&(P===0?f?Do(f):f=qa(()=>s(a)):f!==null&&Zl(f,()=>{f=null})),n()}})}function uI(t,e,n,r,i,s,a){var z,G,O,y;var o=(i&P4)!==0,l=(i&(A2|M2))!==0,u=t.length,f=e.items,h=e.first,p=h,v,P=null,S,g=[],m=[],x,w,C,A;if(o)for(A=0;A<u;A+=1)x=t[A],w=a(x,A),C=f.get(w),C!==void 0&&((z=C.a)==null||z.measure(),(S??(S=new Set)).add(C));for(A=0;A<u;A+=1){if(x=t[A],w=a(x,A),C=f.get(w),C===void 0){var M=p?p.e.nodes_start:n;P=dI(M,e,P,P===null?e.first:P.next,x,w,A,r,i),f.set(w,P),g=[],m=[],p=P.next;continue}if(l&&fI(C,x,A,i),C.e.f&ws&&(Do(C.e),o&&((G=C.a)==null||G.unfix(),(S??(S=new Set)).delete(C))),C!==p){if(v!==void 0&&v.has(C)){if(g.length<m.length){var E=m[0],N;P=E.prev;var I=g[0],L=g[g.length-1];for(N=0;N<g.length;N+=1)_9(g[N],E,n);for(N=0;N<m.length;N+=1)v.delete(m[N]);Oa(e,I.prev,L.next),Oa(e,P,I),Oa(e,L,E),p=E,P=L,A-=1,g=[],m=[]}else v.delete(C),_9(C,p,n),Oa(e,C.prev,C.next),Oa(e,C,P===null?e.first:P.next),Oa(e,P,C),P=C;continue}for(g=[],m=[];p!==null&&p.k!==w;)(s||!(p.e.f&ws))&&(v??(v=new Set)).add(p),m.push(p),p=p.next;if(p===null)continue;C=p}g.push(C),P=C,p=C.next}if(p!==null||v!==void 0){for(var R=v===void 0?[]:P2(v);p!==null;)(s||!(p.e.f&ws))&&R.push(p),p=p.next;var B=R.length;if(B>0){var V=i&M3&&u===0?n:null;if(o){for(A=0;A<B;A+=1)(O=R[A].a)==null||O.measure();for(A=0;A<B;A+=1)(y=R[A].a)==null||y.fix()}cI(e,R,V,f)}}o&&bc(()=>{var b;if(S!==void 0)for(C of S)(b=C.a)==null||b.apply()}),gn.first=e.first&&e.first.e,gn.last=P&&P.e}function fI(t,e,n,r){r&A2&&jl(t.v,e),r&M2?jl(t.i,n):t.i=n}function dI(t,e,n,r,i,s,a,o,l){var u=(l&A2)!==0,f=(l&E4)===0,h=u?f?Au(i):Ar(i):i,p=l&M2?Ar(a):a,v={i:p,v:h,k:s,a:null,e:null,prev:n,next:r};try{return v.e=qa(()=>o(t,h,p),R3),v.e.prev=n&&n.e,v.e.next=r&&r.e,n===null?e.first=v:(n.next=v,n.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function _9(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==r;){var a=Ih(s);i.before(s),s=a}}function Oa(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function hI(t,e){var n=t.__attributes??(t.__attributes={});n.checked!==(n.checked=e)&&(t.checked=e)}function Fn(t,e,n,r){var i=t.__attributes??(t.__attributes={});i[e]!==(i[e]=n)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[f4]=n),n==null?t.removeAttribute(e):typeof n!="string"&&nT(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function pI(t,e,n,r,i=!1,s=!1,a=!1){var o=e||{},l=t.tagName==="OPTION";for(var u in e)u in n||(n[u]=null);n.class=n.class?n.class+" "+r:r;var f=nT(t),h=t.__attributes??(t.__attributes={}),p=[];for(const m in n){let x=n[m];if(l&&m==="value"&&x==null){t.value=t.__value="",o[m]=x;continue}var v=o[m];if(x!==v){o[m]=x;var P=m[0]+m[1];if(P!=="$$"){if(P==="on"){const w={},C="$$"+m;let A=m.slice(2);var S=nI(A);if(eI(A)&&(A=A.slice(0,-7),w.capture=!0),!S&&v){if(x!=null)continue;t.removeEventListener(A,o[C],w),o[C]=null}if(x!=null)if(S)t[`__${A}`]=x,Li([A]);else{let M=function(E){o[m].call(this,E)};e?o[C]=W_(A,t,M,w):p.push([m,x,()=>o[C]=W_(A,t,M,w)])}}else if(m==="style"&&x!=null)t.style.cssText=x+"";else if(m==="autofocus")J4(t,!!x);else if(m==="__value"||m==="value"&&x!=null)t.value=t[m]=t.__value=x;else{var g=m;i||(g=iI(g)),x==null&&!s?(h[m]=null,t.removeAttribute(m)):f.includes(g)&&(s||typeof x!="string")?t[g]=x:typeof x!="function"&&Fn(t,g,x)}m==="style"&&"__styles"in t&&(t.__styles={})}}}return e||bc(()=>{if(t.isConnected)for(const[m,x,w]of p)o[m]===x&&w()}),o}var x9=new Map;function nT(t){var e=x9.get(t.nodeName);if(e)return e;x9.set(t.nodeName,e=[]);for(var n,r=ih(t),i=Element.prototype;i!==r;){n=w3(r);for(var s in n)n[s].set&&e.push(s);r=ih(r)}return e}function Ku(t,e){var n=t.__className,r=mI(e);(n!==r||R3)&&(e==null?t.removeAttribute("class"):t.className=r,t.__className=r)}function mI(t){return t??""}function Bc(t,e,n){if(n){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function An(t,e,n,r){var i=t.__styles??(t.__styles={});i[e]!==n&&(i[e]=n,n==null?t.style.removeProperty(e):t.style.setProperty(e,n,""))}function So(t,e,n=e){var r=ju();N2(t,"input",()=>{var i=b9(t)?w9(t.value):t.value;n(i),r&&i!==(i=e())&&(t.value=i??"")}),Lh(()=>{var i=e();b9(t)&&i===w9(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Iu(t,e,n=e){N2(t,"change",()=>{var r=t.checked;n(r)}),e()==null&&n(!1),Lh(()=>{var r=e();t.checked=!!r})}function b9(t){var e=t.type;return e==="number"||e==="range"}function w9(t){return t===""?null:+t}function sc(t,e,n){if(t.multiple)return vI(t,e);for(var r of t.options){var i=xu(r);if(O4(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function lh(t,e){let n=!0;Yu(()=>{e&&sc(t,Wa(e),n),n=!1;var r=new MutationObserver(()=>{var i=t.__value;sc(t,i)});return r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ch(t,e,n=e){var r=!0;N2(t,"change",()=>{var i;if(t.multiple)i=[].map.call(t.querySelectorAll(":checked"),xu);else{var s=t.querySelector(":checked");i=s&&xu(s)}n(i)}),Yu(()=>{var i=e();if(sc(t,i,r),r&&i===void 0){var s=t.querySelector(":checked");s!==null&&(i=xu(s),n(i))}t.__value=i,r=!1}),lh(t)}function vI(t,e){for(var n of t.options)n.selected=~e.indexOf(xu(n))}function xu(t){return"__value"in t?t.__value:t.value}function S9(t,e){return t===e||(t==null?void 0:t[ra])===e}function uh(t={},e,n,r){return Yu(()=>{var i,s;return Lh(()=>{i=s,s=[],Wa(()=>{t!==n(...s)&&(e(t,...s),i&&S9(n(...i),t)&&e(null,...i))})}),()=>{bc(()=>{s&&S9(n(...s),t)&&e(null,...s)})}}),t}function Ju(t=!1){const e=Xn,n=e.l.u;if(!n)return;let r=()=>K4(e.s);if(t){let i=0,s={};const a=Yt(()=>{let o=!1;const l=e.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],o=!0);return o&&i++,i});r=()=>Q(a)}n.b.length&&U4(()=>{P9(e,r),q_(n.b)}),Qi(()=>{const i=Wa(()=>n.m.map(o4));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Qi(()=>{P9(e,r),q_(n.a)})}function P9(t,e){if(t.l.s)for(const n of t.l.s)Q(n);e()}function gI(t){var e=Ar(0);return function(){return arguments.length===1?(st(e,Q(e)+1),arguments[0]):(Q(e),t())}}let Cf=!1;function yI(t){var e=Cf;try{return Cf=!1,[t(),Cf]}finally{Cf=e}}const _I={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function xI(t,e,n){return new Proxy({props:t,exclude:e},_I)}function E9(t){for(var e=gn,n=gn;e!==null&&!(e.f&(ns|Gu));)e=e.parent;try{return Ii(e),t()}finally{Ii(n)}}function ko(t,e,n,r){var E;var i=(n&C4)!==0,s=!_c||(n&T4)!==0,a=(n&M4)!==0,o=(n&R4)!==0,l=!1,u;a?[u,l]=yI(()=>t[e]):u=t[e];var f=ra in t||u4 in t,h=((E=Yl(t,e))==null?void 0:E.set)??(f&&a&&e in t?N=>t[e]=N:void 0),p=r,v=!0,P=!1,S=()=>(P=!0,v&&(v=!1,o?p=Wa(r):p=r),p);u===void 0&&r!==void 0&&(h&&s&&g4(),u=S(),h&&h(u));var g;if(s)g=()=>{var N=t[e];return N===void 0?S():(v=!0,P=!1,N)};else{var m=E9(()=>(i?Yt:H_)(()=>t[e]));m.f|=P3,g=()=>{var N=Q(m);return N!==void 0&&(p=void 0),N===void 0?p:N}}if(!(n&A4))return g;if(h){var x=t.$$legacy;return function(N,I){return arguments.length>0?((!s||!I||x||l)&&h(I?g():N),N):g()}}var w=!1,C=!1,A=Au(u),M=E9(()=>Yt(()=>{var N=g(),I=Q(A);return w?(w=!1,C=!0,I):(C=!1,A.v=N)}));return i||(M.equals=T2),function(N,I){if(Ua!==null&&(w=C,g(),Q(A)),arguments.length>0){const L=I?Q(M):s&&a?Ct(N):N;return M.equals(L)||(w=!0,st(A,L),P&&p!==void 0&&(p=L),Wa(()=>Q(M))),N}return Q(M)}}function D2(t){Xn===null&&q4(),_c&&Xn.l!==null?bI(Xn).m.push(t):Qi(()=>{const e=Wa(t);if(typeof e=="function")return e})}function bI(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const wI="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(wI);w4();const lr=" ";function SI(t){let e="";Array.isArray(t)||(t=[t]);for(let n=0;n<t.length;n++){const r=t[n];if(r.type===Xe.CLOSE_PATH)e+="z";else if(r.type===Xe.HORIZ_LINE_TO)e+=(r.relative?"h":"H")+r.x;else if(r.type===Xe.VERT_LINE_TO)e+=(r.relative?"v":"V")+r.y;else if(r.type===Xe.MOVE_TO)e+=(r.relative?"m":"M")+r.x+lr+r.y;else if(r.type===Xe.LINE_TO)e+=(r.relative?"l":"L")+r.x+lr+r.y;else if(r.type===Xe.CURVE_TO)e+=(r.relative?"c":"C")+r.x1+lr+r.y1+lr+r.x2+lr+r.y2+lr+r.x+lr+r.y;else if(r.type===Xe.SMOOTH_CURVE_TO)e+=(r.relative?"s":"S")+r.x2+lr+r.y2+lr+r.x+lr+r.y;else if(r.type===Xe.QUAD_TO)e+=(r.relative?"q":"Q")+r.x1+lr+r.y1+lr+r.x+lr+r.y;else if(r.type===Xe.SMOOTH_QUAD_TO)e+=(r.relative?"t":"T")+r.x+lr+r.y;else if(r.type===Xe.ARC)e+=(r.relative?"a":"A")+r.rX+lr+r.rY+lr+r.xRot+lr+ +r.lArcFlag+lr+ +r.sweepFlag+lr+r.x+lr+r.y;else throw new Error(`Unexpected command type "${r==null?void 0:r.type}" at index ${n}.`)}return e}function Y_([t,e],n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function rs(...t){for(let e=0;e<t.length;e++)if(typeof t[e]!="number")throw new Error(`assertNumbers arguments[${e}] is not a number. ${typeof t[e]} == typeof ${t[e]}`);return!0}const Na=Math.PI;function k2(t,e,n){t.lArcFlag=t.lArcFlag===0?0:1,t.sweepFlag=t.sweepFlag===0?0:1;let{rX:r,rY:i}=t;const{x:s,y:a}=t;r=Math.abs(t.rX),i=Math.abs(t.rY);const[o,l]=Y_([(e-s)/2,(n-a)/2],-t.xRot/180*Na),u=Math.pow(o,2)/Math.pow(r,2)+Math.pow(l,2)/Math.pow(i,2);1<u&&(r*=Math.sqrt(u),i*=Math.sqrt(u)),t.rX=r,t.rY=i;const f=Math.pow(r,2)*Math.pow(l,2)+Math.pow(i,2)*Math.pow(o,2),h=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(i,2)-f)/f)),p=r*l/i*h,v=-i*o/r*h,P=Y_([p,v],t.xRot/180*Na);t.cX=P[0]+(e+s)/2,t.cY=P[1]+(n+a)/2,t.phi1=Math.atan2((l-v)/i,(o-p)/r),t.phi2=Math.atan2((-l-v)/i,(-o-p)/r),t.sweepFlag===0&&t.phi2>t.phi1&&(t.phi2-=2*Na),t.sweepFlag===1&&t.phi2<t.phi1&&(t.phi2+=2*Na),t.phi1*=180/Na,t.phi2*=180/Na}function C9(t,e,n){rs(t,e,n);const r=t*t+e*e-n*n;if(0>r)return[];if(r===0)return[[t*n/(t*t+e*e),e*n/(t*t+e*e)]];const i=Math.sqrt(r);return[[(t*n+e*i)/(t*t+e*e),(e*n-t*i)/(t*t+e*e)],[(t*n-e*i)/(t*t+e*e),(e*n+t*i)/(t*t+e*e)]]}const ks=Math.PI/180;function T9(t,e,n){return(1-n)*t+n*e}function A9(t,e,n,r){return t+Math.cos(r/180*Na)*e+Math.sin(r/180*Na)*n}function M9(t,e,n,r){const s=e-t,a=n-e,o=r-n,l=3*s+3*o-6*a,u=(a-s)*6,f=3*s;return Math.abs(l)<1e-6?[-f/u]:PI(u/l,f/l,1e-6)}function R9(t,e,n,r,i){const s=1-i,a=s*s*s,o=3*s*s*i,l=3*s*i*i,u=i*i*i;return t*a+e*o+n*l+r*u}function PI(t,e,n=1e-6){const r=t*t/4-e;if(r<-n)return[];if(r<=n)return[-t/2];const i=Math.sqrt(r);return[-(t/2)-i,-(t/2)+i]}function EI(t,e,n){t.cX||k2(t,e,n);const r=Math.min(t.phi1,t.phi2),i=Math.max(t.phi1,t.phi2),s=i-r,a=Math.ceil(s/90),o=new Array(a);let l=e,u=n;for(let f=0;f<a;f++){const h=T9(t.phi1,t.phi2,f/a),p=T9(t.phi1,t.phi2,(f+1)/a),v=p-h,P=4/3*Math.tan(v*ks/4),[S,g]=[Math.cos(h*ks)-P*Math.sin(h*ks),Math.sin(h*ks)+P*Math.cos(h*ks)],[m,x]=[Math.cos(p*ks),Math.sin(p*ks)],[w,C]=[m+P*Math.sin(p*ks),x-P*Math.cos(p*ks)],A={relative:t.relative,type:Xe.CURVE_TO},M=(E,N)=>{const[I,L]=Y_([E*t.rX,N*t.rY],t.xRot);return[t.cX+I,t.cY+L]};[A.x1,A.y1]=M(S,g),[A.x2,A.y2]=M(w,C),[A.x,A.y]=M(m,x),t.relative&&(A.x1-=l,A.y1-=u,A.x2-=l,A.y2-=u,A.x-=l,A.y-=u),[l,u]=[A.x,A.y],o[f]=A}return o}function CI(t=1e13){rs(t);function e(n){return Math.round(n*t)/t}return function(r){return"x1"in r&&typeof r.x1<"u"&&(r.x1=e(r.x1)),"y1"in r&&typeof r.y1<"u"&&(r.y1=e(r.y1)),"x2"in r&&typeof r.x2<"u"&&(r.x2=e(r.x2)),"y2"in r&&typeof r.y2<"u"&&(r.y2=e(r.y2)),"x"in r&&typeof r.x<"u"&&(r.x=e(r.x)),"y"in r&&typeof r.y<"u"&&(r.y=e(r.y)),"rX"in r&&typeof r.rX<"u"&&(r.rX=e(r.rX)),"rY"in r&&typeof r.rY<"u"&&(r.rY=e(r.rY)),r}}function rT(){return is((t,e,n)=>(t.relative&&(typeof t.x1<"u"&&(t.x1+=e),typeof t.y1<"u"&&(t.y1+=n),typeof t.x2<"u"&&(t.x2+=e),typeof t.y2<"u"&&(t.y2+=n),typeof t.x<"u"&&(t.x+=e),typeof t.y<"u"&&(t.y+=n),t.relative=!1),t))}function TI(){return is((t,e,n)=>(t.relative||(typeof t.x1<"u"&&(t.x1-=e),typeof t.y1<"u"&&(t.y1-=n),typeof t.x2<"u"&&(t.x2-=e),typeof t.y2<"u"&&(t.y2-=n),typeof t.x<"u"&&(t.x-=e),typeof t.y<"u"&&(t.y-=n),t.relative=!0),t))}function AI(t=!0,e=!0,n=!0){return is((r,i,s,a,o)=>{if(isNaN(a)&&!(r.type&Xe.MOVE_TO))throw new Error("path must start with moveto");return e&&r.type&Xe.HORIZ_LINE_TO&&(r.type=Xe.LINE_TO,r.y=r.relative?0:s),n&&r.type&Xe.VERT_LINE_TO&&(r.type=Xe.LINE_TO,r.x=r.relative?0:i),t&&r.type&Xe.CLOSE_PATH&&(r.type=Xe.LINE_TO,r.x=r.relative?a-i:a,r.y=r.relative?o-s:o),r.type&Xe.ARC&&(r.rX===0||r.rY===0)&&(r.type=Xe.LINE_TO,delete r.rX,delete r.rY,delete r.xRot,delete r.lArcFlag,delete r.sweepFlag),r})}function iT(){let t=NaN,e=NaN,n=NaN,r=NaN;return is((i,s,a)=>(i.type&Xe.SMOOTH_CURVE_TO&&(i.type=Xe.CURVE_TO,t=isNaN(t)?s:t,e=isNaN(e)?a:e,i.x1=i.relative?s-t:2*s-t,i.y1=i.relative?a-e:2*a-e),i.type&Xe.CURVE_TO?(t=i.relative?s+i.x2:i.x2,e=i.relative?a+i.y2:i.y2):(t=NaN,e=NaN),i.type&Xe.SMOOTH_QUAD_TO&&(i.type=Xe.QUAD_TO,n=isNaN(n)?s:n,r=isNaN(r)?a:r,i.x1=i.relative?s-n:2*s-n,i.y1=i.relative?a-r:2*a-r),i.type&Xe.QUAD_TO?(n=i.relative?s+i.x1:i.x1,r=i.relative?a+i.y1:i.y1):(n=NaN,r=NaN),i))}function sT(){let t=NaN,e=NaN;return is((n,r,i)=>{if(n.type&Xe.SMOOTH_QUAD_TO&&(n.type=Xe.QUAD_TO,t=isNaN(t)?r:t,e=isNaN(e)?i:e,n.x1=n.relative?r-t:2*r-t,n.y1=n.relative?i-e:2*i-e),n.type&Xe.QUAD_TO){t=n.relative?r+n.x1:n.x1,e=n.relative?i+n.y1:n.y1;const s=n.x1,a=n.y1;n.type=Xe.CURVE_TO,n.x1=((n.relative?0:r)+s*2)/3,n.y1=((n.relative?0:i)+a*2)/3,n.x2=(n.x+s*2)/3,n.y2=(n.y+a*2)/3}else t=NaN,e=NaN;return n})}function is(t){let e=0,n=0,r=NaN,i=NaN;return function(a){if(isNaN(r)&&!(a.type&Xe.MOVE_TO))throw new Error("path must start with moveto");const o=t(a,e,n,r,i);return a.type&Xe.CLOSE_PATH&&(e=r,n=i),"x"in a&&typeof a.x<"u"&&(e=a.relative?e+a.x:a.x),"y"in a&&typeof a.y<"u"&&(n=a.relative?n+a.y:a.y),a.type&Xe.MOVE_TO&&(r=e,i=n),o}}function MI(t=0){rs(t);let e=NaN,n=NaN,r=NaN,i=NaN;return is((s,a,o,l,u)=>{const f=Math.abs;let h=!1,p=0,v=0;if(s.type&Xe.SMOOTH_CURVE_TO&&(p=isNaN(e)?0:a-e,v=isNaN(n)?0:o-n),s.type&(Xe.CURVE_TO|Xe.SMOOTH_CURVE_TO)?(e=s.relative?a+s.x2:s.x2,n=s.relative?o+s.y2:s.y2):(e=NaN,n=NaN),s.type&Xe.SMOOTH_QUAD_TO?(r=isNaN(r)?a:2*a-r,i=isNaN(i)?o:2*o-i):s.type&Xe.QUAD_TO?(r=s.relative?a+s.x1:s.x1,i=s.relative?o+s.y1:s.y2):(r=NaN,i=NaN),s.type&Xe.LINE_COMMANDS||s.type&Xe.ARC&&(s.rX===0||s.rY===0||!s.lArcFlag)||s.type&Xe.CURVE_TO||s.type&Xe.SMOOTH_CURVE_TO||s.type&Xe.QUAD_TO||s.type&Xe.SMOOTH_QUAD_TO){const P=typeof s.x>"u"?0:s.relative?s.x:s.x-a,S=typeof s.y>"u"?0:s.relative?s.y:s.y-o;p=isNaN(r)?typeof s.x1>"u"?p:s.relative?s.x:s.x1-a:r-a,v=isNaN(i)?typeof s.y1>"u"?v:s.relative?s.y:s.y1-o:i-o;const g=typeof s.x2>"u"?0:s.relative?s.x:s.x2-a,m=typeof s.y2>"u"?0:s.relative?s.y:s.y2-o;f(P)<=t&&f(S)<=t&&f(p)<=t&&f(v)<=t&&f(g)<=t&&f(m)<=t&&(h=!0)}return s.type&Xe.CLOSE_PATH&&f(a-l)<=t&&f(o-u)<=t&&(h=!0),h?[]:s})}function Ka(t,e,n,r,i,s){return rs(t,e,n,r,i,s),is((a,o,l,u)=>{const f=a.x1,h=a.x2,p=a.relative&&!isNaN(u),v=typeof a.x<"u"?a.x:p?0:o,P=typeof a.y<"u"?a.y:p?0:l;a.type&Xe.HORIZ_LINE_TO&&e!==0&&(a.type=Xe.LINE_TO,a.y=a.relative?0:l),a.type&Xe.VERT_LINE_TO&&n!==0&&(a.type=Xe.LINE_TO,a.x=a.relative?0:o),typeof a.x<"u"&&(a.x=a.x*t+P*n+(p?0:i)),typeof a.y<"u"&&(a.y=v*e+a.y*r+(p?0:s)),typeof a.x1<"u"&&(a.x1=a.x1*t+a.y1*n+(p?0:i)),typeof a.y1<"u"&&(a.y1=f*e+a.y1*r+(p?0:s)),typeof a.x2<"u"&&(a.x2=a.x2*t+a.y2*n+(p?0:i)),typeof a.y2<"u"&&(a.y2=h*e+a.y2*r+(p?0:s));function S(m){return m*m}const g=t*r-e*n;if(typeof a.xRot<"u"&&(t!==1||e!==0||n!==0||r!==1))if(g===0)delete a.rX,delete a.rY,delete a.xRot,delete a.lArcFlag,delete a.sweepFlag,a.type=Xe.LINE_TO;else{const m=a.xRot*Math.PI/180,x=Math.sin(m),w=Math.cos(m),C=1/S(a.rX),A=1/S(a.rY),M=S(w)*C+S(x)*A,E=2*x*w*(C-A),N=S(x)*C+S(w)*A,I=M*r*r-E*e*r+N*e*e,L=E*(t*r+e*n)-2*(M*n*r+N*t*e),R=M*n*n-E*t*n+N*t*t,B=(Math.atan2(L,I-R)+Math.PI)%Math.PI/2,V=Math.sin(B),z=Math.cos(B);a.rX=Math.abs(g)/Math.sqrt(I*S(z)+L*V*z+R*S(V)),a.rY=Math.abs(g)/Math.sqrt(I*S(V)-L*V*z+R*S(z)),a.xRot=B*180/Math.PI}return typeof a.sweepFlag<"u"&&0>g&&(a.sweepFlag=+!a.sweepFlag),a})}function RI(t,e=0,n=0){rs(t,e,n);const r=Math.sin(t),i=Math.cos(t);return Ka(i,r,-r,i,e-e*i+n*r,n-e*r-n*i)}function II(t,e=0){return rs(t,e),Ka(1,0,0,1,t,e)}function LI(t,e=t){return rs(t,e),Ka(t,0,0,e,0,0)}function OI(t){return rs(t),Ka(1,0,Math.atan(t),1,0,0)}function NI(t){return rs(t),Ka(1,Math.atan(t),0,1,0,0)}function DI(t=0){return rs(t),Ka(-1,0,0,1,t,0)}function kI(t=0){return rs(t),Ka(1,0,0,-1,0,t)}function FI(){return is((t,e,n)=>Xe.ARC===t.type?EI(t,t.relative?0:e,t.relative?0:n):t)}function UI(){return is((t,e,n)=>(t.relative&&(e=0,n=0),Xe.ARC===t.type&&k2(t,e,n),t))}function aT(){return t=>({...t})}function BI(){const t=aT(),e=rT(),n=sT(),r=iT(),i=is((s,a,o)=>{const l=r(n(e(t(s))));function u(h){h>i.maxX&&(i.maxX=h),h<i.minX&&(i.minX=h)}function f(h){h>i.maxY&&(i.maxY=h),h<i.minY&&(i.minY=h)}if(l.type&Xe.DRAWING_COMMANDS&&(u(a),f(o)),l.type&Xe.HORIZ_LINE_TO&&u(l.x),l.type&Xe.VERT_LINE_TO&&f(l.y),l.type&Xe.LINE_TO&&(u(l.x),f(l.y)),l.type&Xe.CURVE_TO){u(l.x),f(l.y);const h=M9(a,l.x1,l.x2,l.x);for(const v of h)0<v&&1>v&&u(R9(a,l.x1,l.x2,l.x,v));const p=M9(o,l.y1,l.y2,l.y);for(const v of p)0<v&&1>v&&f(R9(o,l.y1,l.y2,l.y,v))}if(l.type&Xe.ARC){u(l.x),f(l.y),k2(l,a,o);const h=l.xRot/180*Math.PI,p=Math.cos(h)*l.rX,v=Math.sin(h)*l.rX,P=-Math.sin(h)*l.rY,S=Math.cos(h)*l.rY,[g,m]=l.phi1<l.phi2?[l.phi1,l.phi2]:-180>l.phi2?[l.phi2+360,l.phi1+360]:[l.phi2,l.phi1],x=([A,M])=>{const N=Math.atan2(M,A)*180/Math.PI;return N<g?N+360:N},w=C9(P,-p,0).map(x);for(const A of w)A>g&&A<m&&u(A9(l.cX,p,P,A));const C=C9(S,-v,0).map(x);for(const A of C)A>g&&A<m&&f(A9(l.cY,v,S,A))}return s});return i.minX=1/0,i.maxX=-1/0,i.minY=1/0,i.maxY=-1/0,i}const _r={ROUND:CI,TO_ABS:rT,TO_REL:TI,NORMALIZE_HVZ:AI,NORMALIZE_ST:iT,QT_TO_C:sT,INFO:is,SANITIZE:MI,MATRIX:Ka,ROTATE:RI,TRANSLATE:II,SCALE:LI,SKEW_X:OI,SKEW_Y:NI,X_AXIS_SYMMETRY:DI,Y_AXIS_SYMMETRY:kI,A_TO_C:FI,ANNOTATE_ARCS:UI,CLONE:aT,CALCULATE_BOUNDS:BI};class oT{round(e){return this.transform(_r.ROUND(e))}toAbs(){return this.transform(_r.TO_ABS())}toRel(){return this.transform(_r.TO_REL())}normalizeHVZ(e,n,r){return this.transform(_r.NORMALIZE_HVZ(e,n,r))}normalizeST(){return this.transform(_r.NORMALIZE_ST())}qtToC(){return this.transform(_r.QT_TO_C())}aToC(){return this.transform(_r.A_TO_C())}sanitize(e){return this.transform(_r.SANITIZE(e))}translate(e,n){return this.transform(_r.TRANSLATE(e,n))}scale(e,n){return this.transform(_r.SCALE(e,n))}rotate(e,n,r){return this.transform(_r.ROTATE(e,n,r))}matrix(e,n,r,i,s,a){return this.transform(_r.MATRIX(e,n,r,i,s,a))}skewX(e){return this.transform(_r.SKEW_X(e))}skewY(e){return this.transform(_r.SKEW_Y(e))}xSymmetry(e){return this.transform(_r.X_AXIS_SYMMETRY(e))}ySymmetry(e){return this.transform(_r.Y_AXIS_SYMMETRY(e))}annotateArcs(){return this.transform(_r.ANNOTATE_ARCS())}}const $I=t=>t===" "||t==="	"||t==="\r"||t===`
`,I9=t=>48<=t.charCodeAt(0)&&t.charCodeAt(0)<=57;class VI extends oT{constructor(){super();vt(this,"curNumber","");vt(this,"curCommandType",-1);vt(this,"curCommandRelative",!1);vt(this,"canParseCommandOrComma",!0);vt(this,"curNumberHasExp",!1);vt(this,"curNumberHasExpDigits",!1);vt(this,"curNumberHasDecimal",!1);vt(this,"curArgs",[])}finish(n=[]){if(this.parse(" ",n),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return n}parse(n,r=[]){const i=s=>{r.push(s),this.curArgs.length=0,this.canParseCommandOrComma=!0};for(let s=0;s<n.length;s++){const a=n[s],o=this.curCommandType===Xe.ARC&&(this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber.length===1&&(this.curNumber==="0"||this.curNumber==="1"),l=I9(a)&&(this.curNumber==="0"&&a==="0"||o);if(I9(a)&&!l){this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp;continue}if(a==="e"||a==="E"){this.curNumber+=a,this.curNumberHasExp=!0;continue}if((a==="-"||a==="+")&&this.curNumberHasExp&&!this.curNumberHasExpDigits){this.curNumber+=a;continue}if(a==="."&&!this.curNumberHasExp&&!this.curNumberHasDecimal&&!o){this.curNumber+=a,this.curNumberHasDecimal=!0;continue}if(this.curNumber&&this.curCommandType!==-1){const u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError(`Invalid number ending at ${s}`);if(this.curCommandType===Xe.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>u)throw new SyntaxError(`Expected positive number, got "${u}" at index "${s}"`)}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError(`Expected a flag, got "${this.curNumber}" at index "${s}"`)}this.curArgs.push(u),this.curArgs.length===qI[this.curCommandType]&&(Xe.HORIZ_LINE_TO===this.curCommandType?i({type:Xe.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):Xe.VERT_LINE_TO===this.curCommandType?i({type:Xe.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===Xe.MOVE_TO||this.curCommandType===Xe.LINE_TO||this.curCommandType===Xe.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),Xe.MOVE_TO===this.curCommandType&&(this.curCommandType=Xe.LINE_TO)):this.curCommandType===Xe.CURVE_TO?i({type:Xe.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===Xe.SMOOTH_CURVE_TO?i({type:Xe.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Xe.QUAD_TO?i({type:Xe.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Xe.ARC&&i({type:Xe.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!$I(a)){if(a===","&&this.canParseCommandOrComma){this.canParseCommandOrComma=!1;continue}if(a==="+"||a==="-"||a==="."){this.curNumber=a,this.curNumberHasDecimal=a===".";continue}if(l){this.curNumber=a,this.curNumberHasDecimal=!1;continue}if(this.curArgs.length!==0)throw new SyntaxError(`Unterminated command at index ${s}.`);if(!this.canParseCommandOrComma)throw new SyntaxError(`Unexpected character "${a}" at index ${s}. Command cannot follow comma`);if(this.canParseCommandOrComma=!1,a==="z"||a==="Z"){r.push({type:Xe.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1;continue}else if(a==="h"||a==="H")this.curCommandType=Xe.HORIZ_LINE_TO,this.curCommandRelative=a==="h";else if(a==="v"||a==="V")this.curCommandType=Xe.VERT_LINE_TO,this.curCommandRelative=a==="v";else if(a==="m"||a==="M")this.curCommandType=Xe.MOVE_TO,this.curCommandRelative=a==="m";else if(a==="l"||a==="L")this.curCommandType=Xe.LINE_TO,this.curCommandRelative=a==="l";else if(a==="c"||a==="C")this.curCommandType=Xe.CURVE_TO,this.curCommandRelative=a==="c";else if(a==="s"||a==="S")this.curCommandType=Xe.SMOOTH_CURVE_TO,this.curCommandRelative=a==="s";else if(a==="q"||a==="Q")this.curCommandType=Xe.QUAD_TO,this.curCommandRelative=a==="q";else if(a==="t"||a==="T")this.curCommandType=Xe.SMOOTH_QUAD_TO,this.curCommandRelative=a==="t";else if(a==="a"||a==="A")this.curCommandType=Xe.ARC,this.curCommandRelative=a==="a";else throw new SyntaxError(`Unexpected character "${a}" at index ${s}.`)}}return r}transform(n){return Object.create(this,{parse:{value(i,s=[]){const a=Object.getPrototypeOf(this).parse.call(this,i);for(const o of a){const l=n(o);Array.isArray(l)?s.push(...l):s.push(l)}return s}}})}}const kn=class kn extends oT{constructor(n){super();vt(this,"commands");typeof n=="string"?this.commands=kn.parse(n):this.commands=n}encode(){return kn.encode(this.commands)}getBounds(){const n=_r.CALCULATE_BOUNDS();return this.transform(n),n}transform(n){const r=[];for(const i of this.commands){const s=n(i);Array.isArray(s)?r.push(...s):r.push(s)}return this.commands=r,this}static encode(n){return SI(n)}static parse(n){const r=new VI,i=[];return r.parse(n,i),r.finish(i),i}};vt(kn,"CLOSE_PATH",1),vt(kn,"MOVE_TO",2),vt(kn,"HORIZ_LINE_TO",4),vt(kn,"VERT_LINE_TO",8),vt(kn,"LINE_TO",16),vt(kn,"CURVE_TO",32),vt(kn,"SMOOTH_CURVE_TO",64),vt(kn,"QUAD_TO",128),vt(kn,"SMOOTH_QUAD_TO",256),vt(kn,"ARC",512),vt(kn,"LINE_COMMANDS",kn.LINE_TO|kn.HORIZ_LINE_TO|kn.VERT_LINE_TO),vt(kn,"DRAWING_COMMANDS",kn.HORIZ_LINE_TO|kn.VERT_LINE_TO|kn.LINE_TO|kn.CURVE_TO|kn.SMOOTH_CURVE_TO|kn.QUAD_TO|kn.SMOOTH_QUAD_TO|kn.ARC);let Xe=kn;const qI={[Xe.MOVE_TO]:2,[Xe.LINE_TO]:2,[Xe.HORIZ_LINE_TO]:1,[Xe.VERT_LINE_TO]:1,[Xe.CLOSE_PATH]:0,[Xe.QUAD_TO]:4,[Xe.SMOOTH_QUAD_TO]:2,[Xe.CURVE_TO]:6,[Xe.SMOOTH_CURVE_TO]:4,[Xe.ARC]:7};function Yr(t){return t*.254}function at(t){return t/.254}function sn(t){return t*Math.PI/180}function Fo(t){return t*180/Math.PI}class HI{constructor(e){vt(this,"props");this.props=e}translate(e,n){return this.props.x+=e,this.props.y+=n,this}rotate(e,n=0,r=0){let i=this.props.x-n,s=this.props.y-r,a=Math.cos(sn(-e)),o=Math.sin(sn(-e));return this.props.x=n+i*a-s*o,this.props.y=r+i*o+s*a,this.props.rotation+=e,this}toSVGPath(){return[]}obstacle(e,n,r){return[]}get position(){return{x:this.props.x,y:this.props.y,a:this.props.rotation}}get strokeWidth(){return 0}get needFill(){return!1}get layerId(){return 0}get command(){return this.props.command}set id(e){this.props.id=e}serialize(){let e=this.props.rotation;return this.props.layerId==2&&(e=-e+180,e=e%360,e=e<0?e+360:e),[this.props.command,this.props.x,this.props.y,this.props.description,e,this.props.importFlag,this.props.id,this.props.layerId,"",this.props.reserved1,this.props.reserved2,this.props.reserved3,this.props.bom].join("~")}}function zI(t){let e=t.split("~"),n="LIB",r=parseFloat(e[1]),i=parseFloat(e[2]),s=e[3],a=parseFloat(e[4]);a=isNaN(a)?0:a;let o=e[5],l=e[6],u=parseInt(e[7]),f=e.at(9)??"",h=e.at(10)??"",p=e.at(11)??"",v=e.at(12)??"";return new HI({command:n,x:r,y:i,description:s,rotation:a,importFlag:o,id:l,layerId:u,locked:null,reserved1:f,reserved2:h,reserved3:p,bom:v})}let lT=class{constructor(e){vt(this,"props");vt(this,"svgpath");this.props=e,this.svgpath=new Xe(this.props.textPath)}translate(e,n){return this.props.x+=e,this.props.y+=n,this.svgpath.translate(e,n),this}rotate(e,n=0,r=0){let i=this.props.x-n,s=this.props.y-r,a=Math.cos(sn(-e)),o=Math.sin(sn(-e));return this.props.x=n+i*a-s*o,this.props.y=r+i*o+s*a,this.svgpath.rotate(sn(-e),n,r),this.props.rotation+=e,this}toSVGPath(){return[this.svgpath]}obstacle(e,n,r){return[]}get position(){return{x:this.props.x,y:this.props.y,a:this.props.rotation}}get needFill(){return!1}get strokeWidth(){return this.props.display==="none"?0:this.props.strokeWidth}get layerId(){return this.props.layerId}get command(){return this.props.command}set id(e){this.props.id=e}get type(){return this.props.type}serialize(){return this.props.textPath=this.svgpath.encode(),[this.props.command,this.props.type,this.props.x,this.props.y,this.props.strokeWidth,this.props.rotation,this.props.mirror,this.props.layerId,this.props.net,this.props.fontSize,this.props.string,this.props.textPath,this.props.display,this.props.id].join("~")}};function GI(t){let e=t.split("~"),n="TEXT",r=e[1],i=parseFloat(e[2]),s=parseFloat(e[3]),a=parseFloat(e[4]),o=parseFloat(e[5]),l=e[6],u=parseInt(e[7]),f=e[8],h=parseFloat(e[9]),p=e[10],v=e[11],P=e[12],S=e[13];return new lT({command:n,type:r,x:i,y:s,strokeWidth:a,rotation:o,mirror:l,layerId:u,net:f,fontSize:h,string:p,textPath:v,display:P,id:S})}function XI(t,e){return new lT({command:"TEXT",type:"P",x:e.x,y:e.y,strokeWidth:0,rotation:0,mirror:"",layerId:0,net:"",fontSize:8,string:t,textPath:"",display:"none",id:""})}class WI{constructor(e){vt(this,"props");vt(this,"svgpath");this.props=e,this.svgpath=new Xe(this.props.points)}translate(e,n){return this.svgpath.translate(e,n),this}rotate(e,n=0,r=0){return this.svgpath.rotate(sn(-e),n,r),this}toSVGPath(){return[this.svgpath]}obstacle(e,n,r){return[]}get position(){const e="x"in this.svgpath.commands[0]?this.svgpath.commands[0].x:0,n="y"in this.svgpath.commands[0]?this.svgpath.commands[0].y:0;return{x:e,y:n,a:0}}get needFill(){return!0}get strokeWidth(){return 0}get layerId(){return this.props.layerId}get command(){return this.props.command}set id(e){this.props.id=e}serialize(){return this.props.points=this.svgpath.encode(),[this.props.command,this.props.layerId,this.props.net,this.props.points,this.props.type,this.props.id].join("~")}}function YI(t){let e=t.split("~"),n="SOLIDREGION",r=parseInt(e[1]),i=e[2],s=e[3],a=e[4],o=e[5];return new WI({command:n,layerId:r,net:i,points:s,type:a,id:o})}class cT{constructor(e){vt(this,"props");vt(this,"svgpath");this.props=e;const n=this.props.points.split(" ").map(Number);this.svgpath=new Xe(n.reduce((r,i,s)=>s%2===0&&s>1?r+`l ${i-n[s-2]} ${n[s+1]-n[s-1]} `:r,`M ${n[0]} ${n[1]} `))}translate(e,n){return this.svgpath.translate(e,n),this}rotate(e,n=0,r=0){return this.svgpath.rotate(sn(-e),n,r),this}toSVGPath(){return[this.svgpath]}obstacle(e,n,r){return e==this.props.net?[]:n!=this.props.layerId?[]:Qu(this.toSVGPath()[0],r)}get position(){const e="x"in this.svgpath.commands[0]?this.svgpath.commands[0].x:0,n="y"in this.svgpath.commands[0]?this.svgpath.commands[0].y:0;return{x:e,y:n,a:0}}get needFill(){return!1}get strokeWidth(){return this.props.strokeWidth}get layerId(){return this.props.layerId}get command(){return this.props.command}set id(e){this.props.id=e}serialize(){var r;const n=((r=this.svgpath.encode().match(/-?[0-9]+(?:\.[0-9]+)?(?:[eE][+-]?[0-9]+)?/g))==null?void 0:r.map(Number))??[0,0,0,0];return this.props.points=n.reduce((i,s,a)=>a%2===0?{str:i.str+` ${i.pos[0]+n[a]} ${i.pos[1]+n[a+1]}`,pos:[i.pos[0]+n[a],i.pos[1]+n[a+1]]}:i,{str:"",pos:[0,0]}).str.trim(),[this.props.command,this.props.strokeWidth,this.props.layerId,this.props.net,this.props.points,this.props.id].join("~")}}function jI(t){let e=t.split("~"),n="TRACK",r=parseFloat(e[1]),i=parseInt(e[2]),s=e[3],a=e[4],o=e[5];return new cT({command:n,strokeWidth:r,layerId:i,net:s,points:a,id:o})}function Br(t,e,n,r){return new cT({command:"TRACK",strokeWidth:n,layerId:e,net:t,points:r.join(" "),id:""})}class ZI{constructor(e){vt(this,"props");vt(this,"svgpath");this.props=e,this.svgpath=new Xe(this.props.pathString)}translate(e,n){return this.svgpath.translate(e,n),this}rotate(e,n=0,r=0){return this.svgpath.rotate(sn(-e),n,r),this}toSVGPath(){return[this.svgpath]}obstacle(e,n,r){return e==this.props.net?[]:n!=this.props.layerId?[]:Qu(this.toSVGPath()[0],r)}get position(){const e="x"in this.svgpath.commands[0]?this.svgpath.commands[0].x:0,n="y"in this.svgpath.commands[0]?this.svgpath.commands[0].y:0;return{x:e,y:n,a:0}}get needFill(){return!1}get strokeWidth(){return this.props.strokeWidth}get layerId(){return this.props.layerId}get command(){return this.props.command}set id(e){this.props.id=e}serialize(){return this.props.pathString=this.svgpath.encode(),[this.props.command,this.props.strokeWidth,this.props.layerId,this.props.net,this.props.pathString,this.props.helperDots,this.props.id].join("~")}}function KI(t){let e=t.split("~"),n="ARC",r=parseFloat(e[1]),i=parseInt(e[2]),s=e[3],a=e[4],o=e[5],l=e[6];return new ZI({command:n,strokeWidth:r,layerId:i,net:s,pathString:a,helperDots:o,id:l})}class JI{constructor(e){vt(this,"props");vt(this,"svgpath");if(this.props=e,this.props.shape==="RECT"){const n=this.props.points.split(" ").map(Number),r=`M ${n[0]} ${n[1]} L ${n[2]} ${n[3]} L ${n[4]} ${n[5]} L ${n[6]} ${n[7]} Z`;this.svgpath=new Xe(r)}else if(this.props.shape==="OVAL"){const[n,r,i,s]=this.props.points.split(" ").map(Number),a=Math.min(this.props.width/2,this.props.height/2),o=i-n,l=s-r,u=Math.sqrt(o*o+l*l),f=o/u,p=-(l/u)*a,v=f*a,P=` M ${n+p},${r+v} A ${a},${a} 0 0,1 ${n-p},${r-v} L ${i-p},${s-v} A ${a},${a} 0 0,1 ${i+p},${s+v} Z`;this.svgpath=new Xe(P)}else this.svgpath=new Xe("")}translate(e,n){return this.props.centerX+=e,this.props.centerY+=n,this.svgpath.translate(e,n),(this.props.shape==="RECT"||this.props.shape==="OVAL")&&(this.props.points=this.props.points.split(" ").map(Number).map((r,i)=>i%2===0?r+e:r+n).join(" "),this.props.holePoints=this.props.holePoints.split(" ").map(Number).map((r,i)=>i%2===0?r+e:r+n).join(" ")),this}rotate(e,n=0,r=0){let i=this.props.centerX-n,s=this.props.centerY-r,a=Math.cos(sn(-e)),o=Math.sin(sn(-e));if(this.props.centerX=n+i*a-s*o,this.props.centerY=r+i*o+s*a,this.svgpath.rotate(sn(-e),n,r),this.props.shape==="RECT"||this.props.shape==="OVAL"){const l=u=>{const f=u.split(" ").map(Number);return f.reduce((h,p,v)=>v%2===0?h+` ${n+(p-n)*a-(f[v+1]-r)*o} ${r+(p-n)*o+(f[v+1]-r)*a}`:h,"").trim()};this.props.points=l(this.props.points),this.props.holePoints=l(this.props.holePoints)}return this.props.rotation+=e,this}assignNet(e){this.props.net=e}toSVGPath(){return[this.svgpath]}obstacle(e,n,r){return e===this.props.net?[]:this.props.layerId!=11&&n!=this.props.layerId&&this.props.holeLength==0?[]:Qu(this.toSVGPath()[0],r,.5)}get position(){return{x:this.props.centerX,y:this.props.centerY,a:this.props.rotation}}get height(){return this.props.height}get needFill(){return!0}get strokeWidth(){return 0}get layerId(){return this.props.layerId}get command(){return this.props.command}set id(e){this.props.id=e}get net(){return this.props.net}setNet(e){this.props.net=e}get number(){return this.props.number}serialize(){return[this.props.command,this.props.shape,this.props.centerX,this.props.centerY,this.props.width,this.props.height,this.props.layerId,this.props.net,this.props.number,this.props.holeRadius,this.props.points,this.props.rotation,this.props.id,this.props.holeLength,this.props.holePoints,this.props.plated].join("~")}}function QI(t){let e=t.split("~"),n="PAD",r=e[1],i=parseFloat(e[2]),s=parseFloat(e[3]),a=parseFloat(e[4]),o=parseFloat(e[5]),l=parseInt(e[6]),u=e[7],f=parseInt(e[8]),h=parseFloat(e[9]),p=e[10],v=parseFloat(e[11]),P=e[12],S=parseFloat(e[13]),g=e[14],m=e[15];return new JI({command:n,shape:r,centerX:i,centerY:s,width:a,height:o,layerId:l,net:u,number:f,holeRadius:h,points:p,rotation:v,id:P,holeLength:S,holePoints:g,plated:m})}class eL{constructor(e){vt(this,"props");this.props=e}translate(e,n){return this.props.cx+=e,this.props.cy+=n,this}rotate(e,n=0,r=0){let i=this.props.cx-n,s=this.props.cy-r,a=Math.cos(sn(-e)),o=Math.sin(sn(-e));return this.props.cx=n+i*a-s*o,this.props.cy=r+i*o+s*a,this}toSVGPath(){return[new Xe(`M ${this.props.cx} ${this.props.cy} m -${this.props.r}, 0 a ${this.props.r}, ${this.props.r} 0 1, 0 ${this.props.r*2}, 0 a ${this.props.r}, ${this.props.r} 0 1, 0 -${this.props.r*2}, 0`)]}obstacle(e,n,r){return[]}get position(){return{x:this.props.cx,y:this.props.cy,a:0}}get needFill(){return!1}get strokeWidth(){return this.props.strokeWidth}get layerId(){return this.props.layerId}get command(){return this.props.command}set id(e){this.props.id=e}serialize(){return[this.props.command,this.props.cx,this.props.cy,this.props.r,this.props.strokeWidth,this.props.layerId,this.props.id].join("~")}}function tL(t){let e=t.split("~"),n="CIRCLE",r=parseFloat(e[1]),i=parseFloat(e[2]),s=parseFloat(e[3]),a=parseFloat(e[4]),o=parseInt(e[5]),l=e[6];return new eL({command:n,cx:r,cy:i,r:s,strokeWidth:a,layerId:o,id:l})}class uT{constructor(e){vt(this,"props");vt(this,"svgpath");vt(this,"svgpathObstacle");this.props=e,this.svgpath=new Xe(`M ${this.props.x-this.props.radius} ${this.props.y} a ${this.props.radius}, ${this.props.radius} 0 1, 0 ${this.props.radius*2}, 0 a ${this.props.radius}, ${this.props.radius} 0 1, 0 -${this.props.radius*2}, 0`);const n=this.props.radius+1;this.svgpathObstacle=new Xe(`M ${this.props.x-n} ${this.props.y} a ${n}, ${n} 0 1, 0 ${2*n}, 0 a ${n}, ${n} 0 1, 0 -${2*n}, 0`)}translate(e,n){return this.props.x+=e,this.props.y+=n,this.svgpath.translate(e,n),this.svgpathObstacle.translate(e,n),this}rotate(e,n=0,r=0){let i=this.props.x-n,s=this.props.y-r,a=Math.cos(sn(-e)),o=Math.sin(sn(-e));return this.props.x=n+i*a-s*o,this.props.y=r+i*o+s*a,this.props.rotate+=e,this.svgpath.rotate(sn(-e),n,r),this.svgpathObstacle.rotate(sn(-e),n,r),this}toSVGPath(){return[this.svgpath]}obstacle(e,n,r){return Qu(this.svgpathObstacle,r)}get position(){return{x:this.props.x,y:this.props.y,a:0}}get needFill(){return!0}get strokeWidth(){return 0}get layerId(){return 11}get command(){return this.props.command}set id(e){this.props.id=e}serialize(){return[this.props.command,this.props.x,this.props.y,this.props.radius,this.props.id,this.props.rotate].join("~")}}function Tf(t,e,n){return new uT({command:"HOLE",x:t,y:e,radius:n,id:"",rotate:0})}function nL(t){let e=t.split("~"),n="HOLE",r=parseFloat(e[1]),i=parseFloat(e[2]),s=parseFloat(e[3]),a=e[4],o=parseFloat(e[5]);return new uT({command:n,x:r,y:i,radius:s,id:a,rotate:o})}class fT{constructor(e){vt(this,"props");vt(this,"svgpath");this.props=e;const n=(this.props.diameter/2+this.props.holeRadius)/2;this.svgpath=new Xe(`M ${this.props.x-n} ${this.props.y} a ${n}, ${n} 0 1, 0 ${2*n}, 0 a ${n}, ${n} 0 1, 0 -${2*n}, 0`)}translate(e,n){return this.props.x+=e,this.props.y+=n,this.svgpath.translate(e,n),this}rotate(e,n=0,r=0){let i=this.props.x-n,s=this.props.y-r,a=Math.cos(sn(-e)),o=Math.sin(sn(-e));return this.props.x=n+i*a-s*o,this.props.y=r+i*o+s*a,this.svgpath.rotate(sn(-e),n,r),this}toSVGPath(){return[this.svgpath]}obstacle(e,n,r){return e==this.props.net?[]:Qu(this.toSVGPath()[0],r)}get net(){return this.props.net}assignNet(e){this.props.net=e}get position(){return{x:this.props.x,y:this.props.y,a:0}}get needFill(){return!1}get strokeWidth(){return this.props.diameter/2-this.props.holeRadius}get layerId(){return 12}get command(){return this.props.command}set id(e){this.props.id=e}serialize(){return[this.props.command,this.props.x,this.props.y,this.props.diameter,this.props.net,this.props.holeRadius,this.props.id].join("~")}}function rL(t){let e=t.split("~"),n="VIA",r=parseFloat(e[1]),i=parseFloat(e[2]),s=parseFloat(e[3]),a=e[4],o=parseFloat(e[5]),l=e[6];return new fT({command:n,x:r,y:i,diameter:s,net:a,holeRadius:o,id:l})}function fh(t,e,n,r,i){return new fT({command:"VIA",x:e,y:n,diameter:r,net:t,holeRadius:i,id:""})}function Qu(t,e,n=0){if(t===void 0)return[];const r=t.getBounds(),i=Array.from({length:Math.max(Math.ceil((r.maxX+n)/e)-Math.floor((r.minX-n)/e),1)},(o,l)=>Math.floor((r.minX-n)/e)+l),s=Array.from({length:Math.max(Math.ceil((r.maxY+n)/e)-Math.floor((r.minY-n)/e),1)},(o,l)=>Math.floor((r.minY-n)/e)+l);return i.flatMap(o=>s.map(l=>({x:o,y:l})))}function Bo(t){let e=[],n=t.split("#@$");for(let r of n){let i=iL(r);i&&e.push(i)}return e}function iL(t){switch(t.split("~")[0]){case"LIB":return zI(t);case"TEXT":return GI(t);case"SOLIDREGION":return YI(t);case"TRACK":return jI(t);case"ARC":return KI(t);case"PAD":return QI(t);case"CIRCLE":return tL(t);case"HOLE":return nL(t);case"VIA":return rL(t);default:return null}}function sL(t){return t.map(e=>e.serialize()).join("#@$")}function aL(t,e){return t.start<=e&&e<t.end}function oL(t,e={}){const{offsetLine:n=0,offsetColumn:r=0}=e;let i=0;const s=t.split(`
`).map((l,u)=>{const f=i+l.length+1,h={start:i,end:f,line:u};return i=f,h});let a=0;function o(l,u){if(typeof l=="string"&&(l=t.indexOf(l,u??0)),l===-1)return;let f=s[a];const h=l>=f.end?1:-1;for(;f;){if(aL(f,l))return{line:n+f.line,column:r+l-f.start,character:l};a+=h,f=s[a]}}return o}let lL,L9=oL("",{offsetLine:1}),cL,O9=[],uL=new Map;const fL=/^\t+/;function Rg(t){return t.replace(fL,e=>e.split("	").join("  "))}function dL(t,e,n){const r=t.split(`
`),i=Math.max(0,e-2),s=Math.min(e+3,r.length),a=String(s+1).length;return r.slice(i,s).map((o,l)=>{const u=i+l===e,f=String(l+i+1).padStart(a," ");if(u){const h=" ".repeat(a+2+Rg(o.slice(0,n)).length)+"^";return`${f}: ${Rg(o)}
${h}`}return`${f}: ${Rg(o)}`}).join(`
`)}class dT{constructor(e,n,r){vt(this,"name","CompileDiagnostic");this.code=e,this.message=n,r&&(this.position=r,this.start=L9(r[0]),this.end=L9(r[1]),this.start&&this.end&&(this.frame=dL(lL,this.start.line-1,this.end.column)))}toString(){let e=`${this.code}: ${this.message}`;return this.filename&&(e+=`
${this.filename}`,this.start&&(e+=`:${this.start.line}:${this.start.column}`)),this.frame&&(e+=`
${this.frame}`),e}toJSON(){return{code:this.code,message:this.message,filename:this.filename,start:this.start,end:this.end,position:this.position,frame:this.frame}}}class hL extends dT{constructor(n,r,i){super(n,r,i);vt(this,"name","CompileWarning")}}function wc(t,e,n){var s;let r=O9;if(t&&(r=uL.get(t)??O9),r&&((s=r.at(-1))!=null&&s.has(e)))return;const i=new hL(e,n,t&&t.start!==void 0?[t.start,t.end??t.start]:void 0);cL(i)}function pL(t){wc(t,"options_deprecated_accessors","The `accessors` option has been deprecated. It will have no effect in runes mode")}function mL(t){wc(t,"options_deprecated_immutable","The `immutable` option has been deprecated. It will have no effect in runes mode")}function vL(t){wc(t,"options_removed_enable_sourcemap","The `enableSourcemap` option has been removed. Source maps are always generated now, and tooling can choose to ignore them")}function gL(t){wc(t,"options_removed_hydratable","The `hydratable` option has been removed. Svelte components are always hydratable now")}function yL(t){wc(t,"options_removed_loop_guard_timeout","The `loopGuardTimeout` option has been removed")}function _L(t){wc(t,"options_renamed_ssr_dom",'`generate: "dom"` and `generate: "ssr"` options have been renamed to "client" and "server" respectively')}var xL=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],hT=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],bL="-----------------------------------------------------------------------------------------------------------------------------------------------------",pT="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Ig={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Lg="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",wL={5:Lg,"5module":Lg+" export import",6:Lg+" const class extends export import super"},SL=/^in(stanceof)?$/,PL=new RegExp("["+pT+"]"),EL=new RegExp("["+pT+bL+"]");function j_(t,e){for(var n=65536,r=0;r<e.length;r+=2){if(n+=e[r],n>t)return!1;if(n+=e[r+1],n>=t)return!0}return!1}function Ms(t,e){return t<65?t===36:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&PL.test(String.fromCharCode(t)):e===!1?!1:j_(t,hT)}function $o(t,e){return t<48?t===36:t<58?!0:t<65?!1:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&EL.test(String.fromCharCode(t)):e===!1?!1:j_(t,hT)||j_(t,xL)}var rn=function(e,n){n===void 0&&(n={}),this.label=e,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function xi(t,e){return new rn(t,{beforeExpr:!0,binop:e})}var bi={beforeExpr:!0},zr={startsExpr:!0},ac={};function dn(t,e){return e===void 0&&(e={}),e.keyword=t,ac[t]=new rn(t,e)}var j={num:new rn("num",zr),regexp:new rn("regexp",zr),string:new rn("string",zr),name:new rn("name",zr),privateId:new rn("privateId",zr),eof:new rn("eof"),bracketL:new rn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new rn("]"),braceL:new rn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new rn("}"),parenL:new rn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new rn(")"),comma:new rn(",",bi),semi:new rn(";",bi),colon:new rn(":",bi),dot:new rn("."),question:new rn("?",bi),questionDot:new rn("?."),arrow:new rn("=>",bi),template:new rn("template"),invalidTemplate:new rn("invalidTemplate"),ellipsis:new rn("...",bi),backQuote:new rn("`",zr),dollarBraceL:new rn("${",{beforeExpr:!0,startsExpr:!0}),eq:new rn("=",{beforeExpr:!0,isAssign:!0}),assign:new rn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new rn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new rn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:xi("||",1),logicalAND:xi("&&",2),bitwiseOR:xi("|",3),bitwiseXOR:xi("^",4),bitwiseAND:xi("&",5),equality:xi("==/!=/===/!==",6),relational:xi("</>/<=/>=",7),bitShift:xi("<</>>/>>>",8),plusMin:new rn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:xi("%",10),star:xi("*",10),slash:xi("/",10),starstar:new rn("**",{beforeExpr:!0}),coalesce:xi("??",1),_break:dn("break"),_case:dn("case",bi),_catch:dn("catch"),_continue:dn("continue"),_debugger:dn("debugger"),_default:dn("default",bi),_do:dn("do",{isLoop:!0,beforeExpr:!0}),_else:dn("else",bi),_finally:dn("finally"),_for:dn("for",{isLoop:!0}),_function:dn("function",zr),_if:dn("if"),_return:dn("return",bi),_switch:dn("switch"),_throw:dn("throw",bi),_try:dn("try"),_var:dn("var"),_const:dn("const"),_while:dn("while",{isLoop:!0}),_with:dn("with"),_new:dn("new",{beforeExpr:!0,startsExpr:!0}),_this:dn("this",zr),_super:dn("super",zr),_class:dn("class",zr),_extends:dn("extends",bi),_export:dn("export"),_import:dn("import",zr),_null:dn("null",zr),_true:dn("true",zr),_false:dn("false",zr),_in:dn("in",{beforeExpr:!0,binop:7}),_instanceof:dn("instanceof",{beforeExpr:!0,binop:7}),_typeof:dn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:dn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:dn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},gi=/\r\n?|\n|\u2028|\u2029/,mT=new RegExp(gi.source,"g");function Wo(t){return t===10||t===13||t===8232||t===8233}function vT(t,e,n){n===void 0&&(n=t.length);for(var r=e;r<n;r++){var i=t.charCodeAt(r);if(Wo(i))return r<n-1&&i===13&&t.charCodeAt(r+1)===10?r+2:r+1}return-1}var F2=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ei=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,gT=Object.prototype,CL=gT.hasOwnProperty,TL=gT.toString,Sc=Object.hasOwn||function(t,e){return CL.call(t,e)},N9=Array.isArray||function(t){return TL.call(t)==="[object Array]"},D9=Object.create(null);function Va(t){return D9[t]||(D9[t]=new RegExp("^(?:"+t.replace(/ /g,"|")+")$"))}function oa(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}var AL=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,oc=function(e,n){this.line=e,this.column=n};oc.prototype.offset=function(e){return new oc(this.line,this.column+e)};var ef=function(e,n,r){this.start=n,this.end=r,e.sourceFile!==null&&(this.source=e.sourceFile)};function U2(t,e){for(var n=1,r=0;;){var i=vT(t,r,e);if(i<0)return new oc(n,e-r);++n,r=i}}var dh={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},k9=!1;function ML(t){var e={};for(var n in dh)e[n]=t&&Sc(t,n)?t[n]:dh[n];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!k9&&typeof console=="object"&&console.warn&&(k9=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!t||t.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),N9(e.onToken)){var r=e.onToken;e.onToken=function(i){return r.push(i)}}return N9(e.onComment)&&(e.onComment=RL(e,e.onComment)),e}function RL(t,e){return function(n,r,i,s,a,o){var l={type:n?"Block":"Line",value:r,start:i,end:s};t.locations&&(l.loc=new ef(this,a,o)),t.ranges&&(l.range=[i,s]),e.push(l)}}var Lu=1,Pc=2,B2=4,yT=8,_T=16,xT=32,$2=64,bT=128,tf=256,V2=Lu|Pc|tf;function q2(t,e){return Pc|(t?B2:0)|(e?yT:0)}var hh=0,H2=1,fa=2,wT=3,ST=4,PT=5,Jn=function(e,n,r){this.options=e=ML(e),this.sourceFile=e.sourceFile,this.keywords=Va(wL[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var i="";e.allowReserved!==!0&&(i=Ig[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(i+=" await")),this.reservedWords=Va(i);var s=(i?i+" ":"")+Ig.strict;this.reservedWordsStrict=Va(s),this.reservedWordsStrictBind=Va(s+" "+Ig.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(gi).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=j.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Lu),this.regexpState=null,this.privateNameStack=[]},Is={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Jn.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};Is.inFunction.get=function(){return(this.currentVarScope().flags&Pc)>0};Is.inGenerator.get=function(){return(this.currentVarScope().flags&yT)>0&&!this.currentVarScope().inClassFieldInit};Is.inAsync.get=function(){return(this.currentVarScope().flags&B2)>0&&!this.currentVarScope().inClassFieldInit};Is.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&tf)return!1;if(e.flags&Pc)return(e.flags&B2)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Is.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(e&$2)>0||n||this.options.allowSuperOutsideMethod};Is.allowDirectSuper.get=function(){return(this.currentThisScope().flags&bT)>0};Is.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Is.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(e&(Pc|tf))>0||n};Is.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&tf)>0};Jn.extend=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var r=this,i=0;i<e.length;i++)r=e[i](r);return r};Jn.parse=function(e,n){return new this(n,e).parse()};Jn.parseExpressionAt=function(e,n,r){var i=new this(r,e,n);return i.nextToken(),i.parseExpression()};Jn.tokenizer=function(e,n){return new this(n,e)};Object.defineProperties(Jn.prototype,Is);var qr=Jn.prototype,IL=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;qr.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){Ei.lastIndex=t,t+=Ei.exec(this.input)[0].length;var e=IL.exec(this.input.slice(t));if(!e)return!1;if((e[1]||e[2])==="use strict"){Ei.lastIndex=t+e[0].length;var n=Ei.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||gi.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}t+=e[0].length,Ei.lastIndex=t,t+=Ei.exec(this.input)[0].length,this.input[t]===";"&&t++}};qr.eat=function(t){return this.type===t?(this.next(),!0):!1};qr.isContextual=function(t){return this.type===j.name&&this.value===t&&!this.containsEsc};qr.eatContextual=function(t){return this.isContextual(t)?(this.next(),!0):!1};qr.expectContextual=function(t){this.eatContextual(t)||this.unexpected()};qr.canInsertSemicolon=function(){return this.type===j.eof||this.type===j.braceR||gi.test(this.input.slice(this.lastTokEnd,this.start))};qr.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};qr.semicolon=function(){!this.eat(j.semi)&&!this.insertSemicolon()&&this.unexpected()};qr.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};qr.expect=function(t){this.eat(t)||this.unexpected()};qr.unexpected=function(t){this.raise(t??this.start,"Unexpected token")};var Fh=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};qr.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}};qr.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,r=t.doubleProto;if(!e)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};qr.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};qr.isSimpleAssignTarget=function(t){return t.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(t.expression):t.type==="Identifier"||t.type==="MemberExpression"};var Lt=Jn.prototype;Lt.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==j.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var z2={kind:"loop"},LL={kind:"switch"};Lt.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ei.lastIndex=this.pos;var e=Ei.exec(this.input),n=this.pos+e[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(t)return!1;if(r===123||r>55295&&r<56320)return!0;if(Ms(r,!0)){for(var i=n+1;$o(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!SL.test(s))return!0}return!1};Lt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ei.lastIndex=this.pos;var t=Ei.exec(this.input),e=this.pos+t[0].length,n;return!gi.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!($o(n=this.input.charCodeAt(e+8))||n>55295&&n<56320))};Lt.parseStatement=function(t,e,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(t)&&(r=j._var,s="let"),r){case j._break:case j._continue:return this.parseBreakContinueStatement(i,r.keyword);case j._debugger:return this.parseDebuggerStatement(i);case j._do:return this.parseDoStatement(i);case j._for:return this.parseForStatement(i);case j._function:return t&&(this.strict||t!=="if"&&t!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!t);case j._class:return t&&this.unexpected(),this.parseClass(i,!0);case j._if:return this.parseIfStatement(i);case j._return:return this.parseReturnStatement(i);case j._switch:return this.parseSwitchStatement(i);case j._throw:return this.parseThrowStatement(i);case j._try:return this.parseTryStatement(i);case j._const:case j._var:return s=s||this.value,t&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case j._while:return this.parseWhileStatement(i);case j._with:return this.parseWithStatement(i);case j.braceL:return this.parseBlock(!0,i);case j.semi:return this.parseEmptyStatement(i);case j._export:case j._import:if(this.options.ecmaVersion>10&&r===j._import){Ei.lastIndex=this.pos;var a=Ei.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(l===40||l===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===j._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!t);var u=this.value,f=this.parseExpression();return r===j.name&&f.type==="Identifier"&&this.eat(j.colon)?this.parseLabeledStatement(i,u,f,t):this.parseExpressionStatement(i,f)}};Lt.parseBreakContinueStatement=function(t,e){var n=e==="break";this.next(),this.eat(j.semi)||this.insertSemicolon()?t.label=null:this.type!==j.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((t.label==null||i.name===t.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||t.label&&n))break}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")};Lt.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")};Lt.parseDoStatement=function(t){return this.next(),this.labels.push(z2),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(j._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(j.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")};Lt.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(z2),this.enterScope(0),this.expect(j.parenL),this.type===j.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===j._var||this.type===j._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===j._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===j._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var s=this.isContextual("let"),a=!1,o=this.containsEsc,l=new Fh,u=this.start,f=e>-1?this.parseExprSubscripts(l,"await"):this.parseExpression(!0,l);return this.type===j._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(e>-1?(this.type===j._in&&this.unexpected(e),t.await=!0):a&&this.options.ecmaVersion>=8&&(f.start===u&&!o&&f.type==="Identifier"&&f.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(t.await=!1)),s&&a&&this.raise(f.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(f,!1,l),this.checkLValPattern(f),this.parseForIn(t,f)):(this.checkExpressionErrors(l,!0),e>-1&&this.unexpected(e),this.parseFor(t,f))};Lt.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,bu|(n?0:Z_),!1,e)};Lt.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(j._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")};Lt.parseReturnStatement=function(t){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(j.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")};Lt.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(j.braceL),this.labels.push(LL),this.enterScope(0);for(var e,n=!1;this.type!==j.braceR;)if(this.type===j._case||this.type===j._default){var r=this.type===j._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(j.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")};Lt.parseThrowStatement=function(t){return this.next(),gi.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var OL=[];Lt.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e=t.type==="Identifier";return this.enterScope(e?xT:0),this.checkLValPattern(t,e?ST:fa),this.expect(j.parenR),t};Lt.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===j._catch){var e=this.startNode();this.next(),this.eat(j.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(j._finally)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")};Lt.parseVarStatement=function(t,e,n){return this.next(),this.parseVar(t,!1,e,n),this.semicolon(),this.finishNode(t,"VariableDeclaration")};Lt.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(z2),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")};Lt.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")};Lt.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")};Lt.parseLabeledStatement=function(t,e,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var a=s[i];a.name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var o=this.type.isLoop?"loop":this.type===j._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===t.start)u.statementStart=this.start,u.kind=o;else break}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")};Lt.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")};Lt.parseBlock=function(t,e,n){for(t===void 0&&(t=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(j.braceL),t&&this.enterScope(0);this.type!==j.braceR;){var r=this.parseStatement(null);e.body.push(r)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")};Lt.parseFor=function(t,e){return t.init=e,this.expect(j.semi),t.test=this.type===j.semi?null:this.parseExpression(),this.expect(j.semi),t.update=this.type===j.parenR?null:this.parseExpression(),this.expect(j.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")};Lt.parseForIn=function(t,e){var n=this.type===j._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(j.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")};Lt.parseVar=function(t,e,n,r){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(j.eq)?i.init=this.parseMaybeAssign(e):!r&&n==="const"&&!(this.type===j._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(e&&(this.type===j._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(j.comma))break}return t};Lt.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,e==="var"?H2:fa,!1)};var bu=1,Z_=2,ET=4;Lt.parseFunction=function(t,e,n,r,i){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===j.star&&e&Z_&&this.unexpected(),t.generator=this.eat(j.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&bu&&(t.id=e&ET&&this.type!==j.name?null:this.parseIdent(),t.id&&!(e&Z_)&&this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?H2:fa:wT));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(q2(t.async,t.generator)),e&bu||(t.id=this.type===j.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,i),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&bu?"FunctionDeclaration":"FunctionExpression")};Lt.parseFunctionParams=function(t){this.expect(j.parenL),t.params=this.parseBindingList(j.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Lt.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(j.braceL);this.type!==j.braceR;){var a=this.parseClassElement(t.superClass!==null);a&&(i.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&a.key.type==="PrivateIdentifier"&&NL(r,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")};Lt.parseClassElement=function(t){if(this.eat(j.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(j.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===j.star?o=!0:r="static"}if(n.static=o,!r&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===j.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(e>=9||!s)&&this.eat(j.star)&&(i=!0),!r&&!s&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===j.parenL||a!=="method"||i||s){var u=!n.static&&ph(n,"constructor"),f=u&&t;u&&a!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":a,this.parseClassMethod(n,i,s,f)}else this.parseClassField(n);return n};Lt.isClassElementNameStart=function(){return this.type===j.name||this.type===j.privateId||this.type===j.num||this.type===j.string||this.type===j.bracketL||this.type.keyword};Lt.parseClassElementName=function(t){this.type===j.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};Lt.parseClassMethod=function(t,e,n,r){var i=t.key;t.kind==="constructor"?(e&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):t.static&&ph(t,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,n,r);return t.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),t.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),t.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")};Lt.parseClassField=function(t){if(ph(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&ph(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(j.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")};Lt.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(tf|$2);this.type!==j.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")};Lt.parseClassId=function(t,e){this.type===j.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,fa,!1)):(e===!0&&this.unexpected(),t.id=null)};Lt.parseClassSuper=function(t){t.superClass=this.eat(j._extends)?this.parseExprSubscripts(null,!1):null};Lt.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared};Lt.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,n=t.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var a=n[s];Sc(e,a.name)||(i?i.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function NL(t,e){var n=e.key.name,r=t[n],i="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(i=(e.static?"s":"i")+e.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(t[n]="true",!1):r?!0:(t[n]=i,!1)}function ph(t,e){var n=t.computed,r=t.key;return!n&&(r.type==="Identifier"&&r.name===e||r.type==="Literal"&&r.value===e)}Lt.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==j.string&&this.unexpected(),t.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")};Lt.parseExport=function(t,e){if(this.next(),this.eat(j.star))return this.parseExportAllDeclaration(t,e);if(this.eat(j._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),t.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==j.string&&this.unexpected(),t.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause());else{for(var n=0,r=t.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")};Lt.parseExportDeclaration=function(t){return this.parseStatement(null)};Lt.parseExportDefaultDeclaration=function(){var t;if(this.type===j._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,bu|ET,!1,t)}else if(this.type===j._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Lt.checkExport=function(t,e,n){t&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),Sc(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)};Lt.checkPatternExport=function(t,e){var n=e.type;if(n==="Identifier")this.checkExport(t,e,e.start);else if(n==="ObjectPattern")for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(t,s)}else if(n==="ArrayPattern")for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(t,l)}else n==="Property"?this.checkPatternExport(t,e.value):n==="AssignmentPattern"?this.checkPatternExport(t,e.left):n==="RestElement"&&this.checkPatternExport(t,e.argument)};Lt.checkVariableExport=function(t,e){if(t)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.checkPatternExport(t,i.id)}};Lt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Lt.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")};Lt.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(j.braceL);!this.eat(j.braceR);){if(n)n=!1;else if(this.expect(j.comma),this.afterTrailingComma(j.braceR))break;e.push(this.parseExportSpecifier(t))}return e};Lt.parseImport=function(t){return this.next(),this.type===j.string?(t.specifiers=OL,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===j.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(t,"ImportDeclaration")};Lt.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,fa),this.finishNode(t,"ImportSpecifier")};Lt.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,fa),this.finishNode(t,"ImportDefaultSpecifier")};Lt.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,fa),this.finishNode(t,"ImportNamespaceSpecifier")};Lt.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===j.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(j.comma)))return t;if(this.type===j.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(j.braceL);!this.eat(j.braceR);){if(e)e=!1;else if(this.expect(j.comma),this.afterTrailingComma(j.braceR))break;t.push(this.parseImportSpecifier())}return t};Lt.parseWithClause=function(){var t=[];if(!this.eat(j._with))return t;this.expect(j.braceL);for(var e={},n=!0;!this.eat(j.braceR);){if(n)n=!1;else if(this.expect(j.comma),this.afterTrailingComma(j.braceR))break;var r=this.parseImportAttribute(),i=r.key.type==="Identifier"?r.key.name:r.key.value;Sc(e,i)&&this.raiseRecoverable(r.key.start,"Duplicate attribute key '"+i+"'"),e[i]=!0,t.push(r)}return t};Lt.parseImportAttribute=function(){var t=this.startNode();return t.key=this.type===j.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(j.colon),this.type!==j.string&&this.unexpected(),t.value=this.parseExprAtom(),this.finishNode(t,"ImportAttribute")};Lt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===j.string){var t=this.parseLiteral(this.value);return AL.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)};Lt.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)};Lt.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&(this.input[t.start]==='"'||this.input[t.start]==="'")};var Oi=Jn.prototype;Oi.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&t.name==="await"&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,e),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":t.kind!=="init"&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),t.argument.type==="AssignmentPattern"&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":t.operator!=="="&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t};Oi.toAssignableList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];i&&this.toAssignable(i,e)}if(n){var s=t[n-1];this.options.ecmaVersion===6&&e&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return t};Oi.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")};Oi.parseRestBinding=function(){var t=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==j.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")};Oi.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case j.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(j.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case j.braceL:return this.parseObj(!0)}return this.parseIdent()};Oi.parseBindingList=function(t,e,n,r){for(var i=[],s=!0;!this.eat(t);)if(s?s=!1:this.expect(j.comma),e&&this.type===j.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===j.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),i.push(a),this.type===j.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}else i.push(this.parseAssignableListItem(r))}return i};Oi.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e};Oi.parseBindingListItem=function(t){return t};Oi.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(j.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Oi.checkLValSimple=function(t,e,n){e===void 0&&(e=hh);var r=e!==hh;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(r?"Binding ":"Assigning to ")+t.name+" in strict mode"),r&&(e===fa&&t.name==="let"&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(Sc(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),e!==PT&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(r?"Binding":"Assigning to")+" rvalue")}};Oi.checkLValPattern=function(t,e,n){switch(e===void 0&&(e=hh),t.type){case"ObjectPattern":for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,e,n)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,e,n)}break;default:this.checkLValSimple(t,e,n)}};Oi.checkLValInnerPattern=function(t,e,n){switch(e===void 0&&(e=hh),t.type){case"Property":this.checkLValInnerPattern(t.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,n);break;case"RestElement":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var kr=function(e,n,r,i,s){this.token=e,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Gn={b_stat:new kr("{",!1),b_expr:new kr("{",!0),b_tmpl:new kr("${",!1),p_stat:new kr("(",!1),p_expr:new kr("(",!0),q_tmpl:new kr("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new kr("function",!1),f_expr:new kr("function",!0),f_expr_gen:new kr("function",!0,!1,null,!0),f_gen:new kr("function",!1,!1,null,!0)},Ec=Jn.prototype;Ec.initialContext=function(){return[Gn.b_stat]};Ec.curContext=function(){return this.context[this.context.length-1]};Ec.braceIsBlock=function(t){var e=this.curContext();return e===Gn.f_expr||e===Gn.f_stat?!0:t===j.colon&&(e===Gn.b_stat||e===Gn.b_expr)?!e.isExpr:t===j._return||t===j.name&&this.exprAllowed?gi.test(this.input.slice(this.lastTokEnd,this.start)):t===j._else||t===j.semi||t===j.eof||t===j.parenR||t===j.arrow?!0:t===j.braceL?e===Gn.b_stat:t===j._var||t===j._const||t===j.name?!1:!this.exprAllowed};Ec.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(e.token==="function")return e.generator}return!1};Ec.updateContext=function(t){var e,n=this.type;n.keyword&&t===j.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr};Ec.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)};j.parenR.updateContext=j.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var t=this.context.pop();t===Gn.b_stat&&this.curContext().token==="function"&&(t=this.context.pop()),this.exprAllowed=!t.isExpr};j.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Gn.b_stat:Gn.b_expr),this.exprAllowed=!0};j.dollarBraceL.updateContext=function(){this.context.push(Gn.b_tmpl),this.exprAllowed=!0};j.parenL.updateContext=function(t){var e=t===j._if||t===j._for||t===j._with||t===j._while;this.context.push(e?Gn.p_stat:Gn.p_expr),this.exprAllowed=!0};j.incDec.updateContext=function(){};j._function.updateContext=j._class.updateContext=function(t){t.beforeExpr&&t!==j._else&&!(t===j.semi&&this.curContext()!==Gn.p_stat)&&!(t===j._return&&gi.test(this.input.slice(this.lastTokEnd,this.start)))&&!((t===j.colon||t===j.braceL)&&this.curContext()===Gn.b_stat)?this.context.push(Gn.f_expr):this.context.push(Gn.f_stat),this.exprAllowed=!1};j.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};j.backQuote.updateContext=function(){this.curContext()===Gn.q_tmpl?this.context.pop():this.context.push(Gn.q_tmpl),this.exprAllowed=!1};j.star.updateContext=function(t){if(t===j._function){var e=this.context.length-1;this.context[e]===Gn.f_expr?this.context[e]=Gn.f_expr_gen:this.context[e]=Gn.f_gen}this.exprAllowed=!0};j.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==j.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Ht=Jn.prototype;Ht.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&t.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r=t.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);return}i="$"+i;var a=e[i];if(a){var o;s==="init"?o=this.strict&&a.init||a.get||a.set:o=a.init||a[s],o&&this.raiseRecoverable(r.start,"Redefinition of property")}else a=e[i]={init:!1,get:!1,set:!1};a[s]=!0}};Ht.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===j.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(j.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return i};Ht.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,i=-1,s=-1,a=-1;e?(i=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new Fh,r=!0);var o=this.start,l=this.startLoc;(this.type===j.parenL||this.type===j.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=t==="await");var u=this.parseMaybeConditional(t,e);if(n&&(u=n.call(this,u,o,l)),this.type.isAssign){var f=this.startNodeAt(o,l);return f.operator=this.value,this.type===j.eq&&(u=this.toAssignable(u,!1,e)),r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=u.start&&(e.shorthandAssign=-1),this.type===j.eq?this.checkLValPattern(u):this.checkLValSimple(u),f.left=u,this.next(),f.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(f,"AssignmentExpression")}else r&&this.checkExpressionErrors(e,!0);return i>-1&&(e.parenthesizedAssign=i),s>-1&&(e.trailingComma=s),u};Ht.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(j.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(j.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return i};Ht.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,t)};Ht.parseExprOp=function(t,e,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==j._in)&&s>r){var a=this.type===j.logicalOR||this.type===j.logicalAND,o=this.type===j.coalesce;o&&(s=j.logicalAND.binop);var l=this.value;this.next();var u=this.start,f=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,f,s,i),p=this.buildBinary(e,n,t,h,l,a||o);return(a&&this.type===j.coalesce||o&&(this.type===j.logicalOR||this.type===j.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(p,e,n,r,i)}return t};Ht.buildBinary=function(t,e,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")};Ht.parseMaybeUnary=function(t,e,n,r){var i=this.start,s=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(r),e=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===j.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(t,!0),l?this.checkLValSimple(o.argument):this.strict&&o.operator==="delete"&&CT(o.argument)?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):o.operator==="delete"&&K_(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,a=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===j.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==j._in&&this.unexpected();else{if(a=this.parseExprSubscripts(t,r),this.checkExpressionErrors(t))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(i,s);u.operator=this.value,u.prefix=!1,u.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(j.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,a,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return a};function CT(t){return t.type==="Identifier"||t.type==="ParenthesizedExpression"&&CT(t.expression)}function K_(t){return t.type==="MemberExpression"&&t.property.type==="PrivateIdentifier"||t.type==="ChainExpression"&&K_(t.expression)||t.type==="ParenthesizedExpression"&&K_(t.expression)}Ht.parseExprSubscripts=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprAtom(t,e);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,e);return t&&s.type==="MemberExpression"&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s};Ht.parseSubscripts=function(t,e,n,r,i){for(var s=this.options.ecmaVersion>=8&&t.type==="Identifier"&&t.name==="async"&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,n,r,s,a,i);if(o.optional&&(a=!0),o===t||o.type==="ArrowFunctionExpression"){if(a){var l=this.startNodeAt(e,n);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}t=o}};Ht.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(j.arrow)};Ht.parseSubscriptAsyncArrow=function(t,e,n,r){return this.parseArrowExpression(this.startNodeAt(t,e),n,!0,r)};Ht.parseSubscript=function(t,e,n,r,i,s,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(j.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(j.bracketL);if(u||l&&this.type!==j.parenL&&this.type!==j.backQuote||this.eat(j.dot)){var f=this.startNodeAt(e,n);f.object=t,u?(f.property=this.parseExpression(),this.expect(j.bracketR)):this.type===j.privateId&&t.type!=="Super"?f.property=this.parsePrivateIdent():f.property=this.parseIdent(this.options.allowReserved!=="never"),f.computed=!!u,o&&(f.optional=l),t=this.finishNode(f,"MemberExpression")}else if(!r&&this.eat(j.parenL)){var h=new Fh,p=this.yieldPos,v=this.awaitPos,P=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var S=this.parseExprList(j.parenR,this.options.ecmaVersion>=8,!1,h);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=p,this.awaitPos=v,this.awaitIdentPos=P,this.parseSubscriptAsyncArrow(e,n,S,a);this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=v||this.awaitPos,this.awaitIdentPos=P||this.awaitIdentPos;var g=this.startNodeAt(e,n);g.callee=t,g.arguments=S,o&&(g.optional=l),t=this.finishNode(g,"CallExpression")}else if(this.type===j.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(e,n);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,"TaggedTemplateExpression")}return t};Ht.parseExprAtom=function(t,e,n){this.type===j.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case j._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===j.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==j.dot&&this.type!==j.bracketL&&this.type!==j.parenL&&this.unexpected(),this.finishNode(r,"Super");case j._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case j.name:var s=this.start,a=this.startLoc,o=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&l.name==="async"&&!this.canInsertSemicolon()&&this.eat(j._function))return this.overrideContext(Gn.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,e);if(i&&!this.canInsertSemicolon()){if(this.eat(j.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[l],!1,e);if(this.options.ecmaVersion>=8&&l.name==="async"&&this.type===j.name&&!o&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return l=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(j.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[l],!0,e)}return l;case j.regexp:var u=this.value;return r=this.parseLiteral(u.value),r.regex={pattern:u.pattern,flags:u.flags},r;case j.num:case j.string:return this.parseLiteral(this.value);case j._null:case j._true:case j._false:return r=this.startNode(),r.value=this.type===j._null?null:this.type===j._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case j.parenL:var f=this.start,h=this.parseParenAndDistinguishExpression(i,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(t.parenthesizedAssign=f),t.parenthesizedBind<0&&(t.parenthesizedBind=f)),h;case j.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(j.bracketR,!0,!0,t),this.finishNode(r,"ArrayExpression");case j.braceL:return this.overrideContext(Gn.b_expr),this.parseObj(!1,t);case j._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case j._class:return this.parseClass(this.startNode(),!1);case j._new:return this.parseNew();case j.backQuote:return this.parseTemplate();case j._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Ht.parseExprAtomDefault=function(){this.unexpected()};Ht.parseExprImport=function(t){var e=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===j.parenL&&!t)return this.parseDynamicImport(e);if(this.type===j.dot){var n=this.startNodeAt(e.start,e.loc&&e.loc.start);return n.name="import",e.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(e)}else this.unexpected()};Ht.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(j.parenR)?t.options=null:(this.expect(j.comma),this.afterTrailingComma(j.parenR)?t.options=null:(t.options=this.parseMaybeAssign(),this.eat(j.parenR)||(this.expect(j.comma),this.afterTrailingComma(j.parenR)||this.unexpected())));else if(!this.eat(j.parenR)){var e=this.start;this.eat(j.comma)&&this.eat(j.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")};Ht.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="meta"&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")};Ht.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};Ht.parseParenExpression=function(){this.expect(j.parenL);var t=this.parseExpression();return this.expect(j.parenR),t};Ht.shouldParseArrow=function(t){return!this.canInsertSemicolon()};Ht.parseParenAndDistinguishExpression=function(t,e){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,o=this.startLoc,l=[],u=!0,f=!1,h=new Fh,p=this.yieldPos,v=this.awaitPos,P;for(this.yieldPos=0,this.awaitPos=0;this.type!==j.parenR;)if(u?u=!1:this.expect(j.comma),s&&this.afterTrailingComma(j.parenR,!0)){f=!0;break}else if(this.type===j.ellipsis){P=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===j.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else l.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var S=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(j.parenR),t&&this.shouldParseArrow(l)&&this.eat(j.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=v,this.parseParenArrowList(n,r,l,e);(!l.length||f)&&this.unexpected(this.lastTokStart),P&&this.unexpected(P),this.checkExpressionErrors(h,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=v||this.awaitPos,l.length>1?(i=this.startNodeAt(a,o),i.expressions=l,this.finishNodeAt(i,"SequenceExpression",S,g)):i=l[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=i,this.finishNode(m,"ParenthesizedExpression")}else return i};Ht.parseParenItem=function(t){return t};Ht.parseParenArrowList=function(t,e,n,r){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,r)};var DL=[];Ht.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===j.dot){var e=this.startNodeAt(t.start,t.loc&&t.loc.start);e.name="new",t.meta=this.finishNode(e,"Identifier"),this.next();var n=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="target"&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var r=this.start,i=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(j.parenL)?t.arguments=this.parseExprList(j.parenR,this.options.ecmaVersion>=8,!1):t.arguments=DL,this.finishNode(t,"NewExpression")};Ht.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===j.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===j.backQuote,this.finishNode(n,"TemplateElement")};Ht.parseTemplate=function(t){t===void 0&&(t={});var e=t.isTagged;e===void 0&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(n.quasis=[r];!r.tail;)this.type===j.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(j.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(j.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")};Ht.isAsyncProp=function(t){return!t.computed&&t.key.type==="Identifier"&&t.key.name==="async"&&(this.type===j.name||this.type===j.num||this.type===j.string||this.type===j.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===j.star)&&!gi.test(this.input.slice(this.lastTokEnd,this.start))};Ht.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(j.braceR);){if(r)r=!1;else if(this.expect(j.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(j.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,i,e),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")};Ht.parseProperty=function(t,e){var n=this.startNode(),r,i,s,a;if(this.options.ecmaVersion>=9&&this.eat(j.ellipsis))return t?(n.argument=this.parseIdent(!1),this.type===j.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,e),this.type===j.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(t||e)&&(s=this.start,a=this.startLoc),t||(r=this.eat(j.star)));var o=this.containsEsc;return this.parsePropertyName(n),!t&&!o&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(j.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,t,r,i,s,a,e,o),this.finishNode(n,"Property")};Ht.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var e=t.kind==="get"?0:1;if(t.value.params.length!==e){var n=t.value.start;t.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else t.kind==="set"&&t.value.params[0].type==="RestElement"&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")};Ht.parsePropertyValue=function(t,e,n,r,i,s,a,o){(n||r)&&this.type===j.colon&&this.unexpected(),this.eat(j.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===j.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r)):!e&&!o&&this.options.ecmaVersion>=5&&!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.type!==j.comma&&this.type!==j.braceR&&this.type!==j.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(t)):this.options.ecmaVersion>=6&&!t.computed&&t.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(t.key),t.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),t.kind="init",e?t.value=this.parseMaybeDefault(i,s,this.copyNode(t.key)):this.type===j.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected()};Ht.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(j.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(j.bracketR),t.key;t.computed=!1}return t.key=this.type===j.num||this.type===j.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Ht.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};Ht.parseMethod=function(t,e,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(q2(e,r.generator)|$2|(n?bT:0)),this.expect(j.parenL),r.params=this.parseBindingList(j.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")};Ht.parseArrowExpression=function(t,e,n,r){var i=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(q2(n,!1)|_T),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")};Ht.parseFunctionBody=function(t,e,n,r){var i=e&&this.type!==j.braceL,s=this.strict,a=!1;if(i)t.body=this.parseMaybeAssign(r),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);(!s||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,PT),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=l}this.exitScope()};Ht.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(r.type!=="Identifier")return!1}return!0};Ht.checkParams=function(t,e){for(var n=Object.create(null),r=0,i=t.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,H2,e?null:n)}};Ht.parseExprList=function(t,e,n,r){for(var i=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(j.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===j.comma?a=null:this.type===j.ellipsis?(a=this.parseSpread(r),r&&this.type===j.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i};Ht.checkUnreserved=function(t){var e=t.start,n=t.end,r=t.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(e,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))}};Ht.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e};Ht.parseIdentNode=function(){var t=this.startNode();return this.type===j.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=j.name):this.unexpected(),t};Ht.parsePrivateIdent=function(){var t=this.startNode();return this.type===j.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t};Ht.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===j.semi||this.canInsertSemicolon()||this.type!==j.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(j.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")};Ht.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var mh=Jn.prototype;mh.raise=function(t,e){var n=U2(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r};mh.raiseRecoverable=mh.raise;mh.curPosition=function(){if(this.options.locations)return new oc(this.curLine,this.pos-this.lineStart)};var Ja=Jn.prototype,kL=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Ja.enterScope=function(t){this.scopeStack.push(new kL(t))};Ja.exitScope=function(){this.scopeStack.pop()};Ja.treatFunctionsAsVarInScope=function(t){return t.flags&Pc||!this.inModule&&t.flags&Lu};Ja.declareName=function(t,e,n){var r=!1;if(e===fa){var i=this.currentScope();r=i.lexical.indexOf(t)>-1||i.functions.indexOf(t)>-1||i.var.indexOf(t)>-1,i.lexical.push(t),this.inModule&&i.flags&Lu&&delete this.undefinedExports[t]}else if(e===ST){var s=this.currentScope();s.lexical.push(t)}else if(e===wT){var a=this.currentScope();this.treatFunctionsAsVar?r=a.lexical.indexOf(t)>-1:r=a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var l=this.scopeStack[o];if(l.lexical.indexOf(t)>-1&&!(l.flags&xT&&l.lexical[0]===t)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(t)>-1){r=!0;break}if(l.var.push(t),this.inModule&&l.flags&Lu&&delete this.undefinedExports[t],l.flags&V2)break}r&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")};Ja.checkLocalExport=function(t){this.scopeStack[0].lexical.indexOf(t.name)===-1&&this.scopeStack[0].var.indexOf(t.name)===-1&&(this.undefinedExports[t.name]=t)};Ja.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Ja.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&V2)return e}};Ja.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&V2&&!(e.flags&_T))return e}};var nf=function(e,n,r){this.type="",this.start=n,this.end=0,e.options.locations&&(this.loc=new ef(e,r)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[n,0])},rf=Jn.prototype;rf.startNode=function(){return new nf(this,this.start,this.startLoc)};rf.startNodeAt=function(t,e){return new nf(this,t,e)};function TT(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}rf.finishNode=function(t,e){return TT.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)};rf.finishNodeAt=function(t,e,n,r){return TT.call(this,t,e,n,r)};rf.copyNode=function(t){var e=new nf(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var FL="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",AT="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",MT=AT+" Extended_Pictographic",RT=MT,IT=RT+" EBase EComp EMod EPres ExtPict",LT=IT,UL=LT,BL={9:AT,10:MT,11:RT,12:IT,13:LT,14:UL},$L="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",VL={9:"",10:"",11:"",12:"",13:"",14:$L},F9="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",OT="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",NT=OT+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",DT=NT+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",kT=DT+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",FT=kT+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",qL=FT+" "+FL,HL={9:OT,10:NT,11:DT,12:kT,13:FT,14:qL},UT={};function zL(t){var e=UT[t]={binary:Va(BL[t]+" "+F9),binaryOfStrings:Va(VL[t]),nonBinary:{General_Category:Va(F9),Script:Va(HL[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var Og=0,U9=[9,10,11,12,13,14];Og<U9.length;Og+=1){var GL=U9[Og];zL(GL)}var Tt=Jn.prototype,vh=function(e,n){this.parent=e,this.base=n||this};vh.prototype.separatedFrom=function(e){for(var n=this;n;n=n.parent)for(var r=e;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};vh.prototype.sibling=function(){return new vh(this.parent,this.base)};var Ls=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=UT[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Ls.prototype.reset=function(e,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=e|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Ls.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};Ls.prototype.at=function(e,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(e>=i)return-1;var s=r.charCodeAt(e);if(!(n||this.switchU)||s<=55295||s>=57344||e+1>=i)return s;var a=r.charCodeAt(e+1);return a>=56320&&a<=57343?(s<<10)+a-56613888:s};Ls.prototype.nextIndex=function(e,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(e>=i)return i;var s=r.charCodeAt(e),a;return!(n||this.switchU)||s<=55295||s>=57344||e+1>=i||(a=r.charCodeAt(e+1))<56320||a>57343?e+1:e+2};Ls.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};Ls.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};Ls.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};Ls.prototype.eat=function(e,n){return n===void 0&&(n=!1),this.current(n)===e?(this.advance(n),!0):!1};Ls.prototype.eatChars=function(e,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=e;i<s.length;i+=1){var a=s[i],o=this.at(r,n);if(o===-1||o!==a)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Tt.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,r=!1,i=!1,s=0;s<n.length;s++){var a=n.charAt(s);e.indexOf(a)===-1&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),a==="u"&&(r=!0),a==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(t.start,"Invalid regular expression flag")};function XL(t){for(var e in t)return!0;return!1}Tt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&XL(t.groupNames)&&(t.switchN=!0,this.regexp_pattern(t))};Tt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames=Object.create(null),t.backReferenceNames.length=0,t.branchID=null,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var r=n[e];t.groupNames[r]||t.raise("Invalid named capture referenced")}};Tt.regexp_disjunction=function(t){var e=this.options.ecmaVersion>=16;for(e&&(t.branchID=new vh(t.branchID,null)),this.regexp_alternative(t);t.eat(124);)e&&(t.branchID=t.branchID.sibling()),this.regexp_alternative(t);e&&(t.branchID=t.branchID.parent),this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")};Tt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););};Tt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))?(this.regexp_eatQuantifier(t),!0):!1};Tt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1};Tt.regexp_eatQuantifier=function(t,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(t,e)?(t.eat(63),!0):!1};Tt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)};Tt.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue),t.eat(125)))return i!==-1&&i<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1};Tt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)};Tt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1};Tt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(t),r=t.eat(45);if(n||r){for(var i=0;i<n.length;i++){var s=n.charAt(i);n.indexOf(s,i+1)>-1&&t.raise("Duplicate regular expression modifiers")}if(r){var a=this.regexp_eatModifiers(t);!n&&!a&&t.current()===58&&t.raise("Invalid regular expression modifiers");for(var o=0;o<a.length;o++){var l=a.charAt(o);(a.indexOf(l,o+1)>-1||n.indexOf(l)>-1)&&t.raise("Duplicate regular expression modifiers")}}}}if(t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}}t.pos=e}return!1};Tt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):t.current()===63&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1};Tt.regexp_eatModifiers=function(t){for(var e="",n=0;(n=t.current())!==-1&&WL(n);)e+=oa(n),t.advance();return e};function WL(t){return t===105||t===109||t===115}Tt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)};Tt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1};Tt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return BT(e)?(t.lastIntValue=e,t.advance(),!0):!1};function BT(t){return t===36||t>=40&&t<=43||t===46||t===63||t>=91&&t<=94||t>=123&&t<=125}Tt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;(n=t.current())!==-1&&!BT(n);)t.advance();return t.pos!==e};Tt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(t.advance(),!0):!1};Tt.regexp_groupSpecifier=function(t){if(t.eat(63)){this.regexp_eatGroupName(t)||t.raise("Invalid group");var e=this.options.ecmaVersion>=16,n=t.groupNames[t.lastStringValue];if(n)if(e)for(var r=0,i=n;r<i.length;r+=1){var s=i[r];s.separatedFrom(t.branchID)||t.raise("Duplicate capture group name")}else t.raise("Duplicate capture group name");e?(n||(t.groupNames[t.lastStringValue]=[])).push(t.branchID):t.groupNames[t.lastStringValue]=!0}};Tt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1};Tt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=oa(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=oa(t.lastIntValue);return!0}return!1};Tt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),YL(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)};function YL(t){return Ms(t,!0)||t===36||t===95}Tt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,r=t.current(n);return t.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(r=t.lastIntValue),jL(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)};function jL(t){return $o(t,!0)||t===36||t===95||t===8204||t===8205}Tt.regexp_eatAtomEscape=function(t){return this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t)?!0:(t.switchU&&(t.current()===99&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)};Tt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1};Tt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1};Tt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)};Tt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1};Tt.regexp_eatZero=function(t){return t.current()===48&&!Uh(t.lookahead())?(t.lastIntValue=0,t.advance(),!0):!1};Tt.regexp_eatControlEscape=function(t){var e=t.current();return e===116?(t.lastIntValue=9,t.advance(),!0):e===110?(t.lastIntValue=10,t.advance(),!0):e===118?(t.lastIntValue=11,t.advance(),!0):e===102?(t.lastIntValue=12,t.advance(),!0):e===114?(t.lastIntValue=13,t.advance(),!0):!1};Tt.regexp_eatControlLetter=function(t){var e=t.current();return $T(e)?(t.lastIntValue=e%32,t.advance(),!0):!1};function $T(t){return t>=65&&t<=90||t>=97&&t<=122}Tt.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){e===void 0&&(e=!1);var n=t.pos,r=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var i=t.lastIntValue;if(r&&i>=55296&&i<=56319){var s=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=(i-55296)*1024+(a-56320)+65536,!0}t.pos=s,t.lastIntValue=i}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&ZL(t.lastIntValue))return!0;r&&t.raise("Invalid unicode escape"),t.pos=n}return!1};function ZL(t){return t>=0&&t<=1114111}Tt.regexp_eatIdentityEscape=function(t){if(t.switchU)return this.regexp_eatSyntaxCharacter(t)?!0:t.eat(47)?(t.lastIntValue=47,!0):!1;var e=t.current();return e!==99&&(!t.switchN||e!==107)?(t.lastIntValue=e,t.advance(),!0):!1};Tt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do t.lastIntValue=10*t.lastIntValue+(e-48),t.advance();while((e=t.current())>=48&&e<=57);return!0}return!1};var VT=0,la=1,Ti=2;Tt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(KL(e))return t.lastIntValue=-1,t.advance(),la;var n=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((n=e===80)||e===112)){t.lastIntValue=-1,t.advance();var r;if(t.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return n&&r===Ti&&t.raise("Invalid property name"),r;t.raise("Invalid property name")}return VT};function KL(t){return t===100||t===68||t===115||t===83||t===119||t===87}Tt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,r),la}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,i)}return VT};Tt.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){Sc(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")};Tt.regexp_validateUnicodePropertyNameOrValue=function(t,e){if(t.unicodeProperties.binary.test(e))return la;if(t.switchV&&t.unicodeProperties.binaryOfStrings.test(e))return Ti;t.raise("Invalid property name")};Tt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";qT(e=t.current());)t.lastStringValue+=oa(e),t.advance();return t.lastStringValue!==""};function qT(t){return $T(t)||t===95}Tt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";JL(e=t.current());)t.lastStringValue+=oa(e),t.advance();return t.lastStringValue!==""};function JL(t){return qT(t)||Uh(t)}Tt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)};Tt.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),n=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&n===Ti&&t.raise("Negated character class may contain strings"),!0}return!1};Tt.regexp_classContents=function(t){return t.current()===93?la:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),la)};Tt.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;t.switchU&&(e===-1||n===-1)&&t.raise("Invalid character class"),e!==-1&&n!==-1&&e>n&&t.raise("Range out of order in character class")}}};Tt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(n===99||GT(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return r!==93?(t.lastIntValue=r,t.advance(),!0):!1};Tt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)};Tt.regexp_classSetExpression=function(t){var e=la,n;if(!this.regexp_eatClassSetRange(t))if(n=this.regexp_eatClassSetOperand(t)){n===Ti&&(e=Ti);for(var r=t.pos;t.eatChars([38,38]);){if(t.current()!==38&&(n=this.regexp_eatClassSetOperand(t))){n!==Ti&&(e=la);continue}t.raise("Invalid character in character class")}if(r!==t.pos)return e;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(r!==t.pos)return e}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(n=this.regexp_eatClassSetOperand(t),!n)return e;n===Ti&&(e=Ti)}};Tt.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var n=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var r=t.lastIntValue;return n!==-1&&r!==-1&&n>r&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1};Tt.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?la:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)};Tt.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var n=t.eat(94),r=this.regexp_classContents(t);if(t.eat(93))return n&&r===Ti&&t.raise("Negated character class may contain strings"),r;t.pos=e}if(t.eat(92)){var i=this.regexp_eatCharacterClassEscape(t);if(i)return i;t.pos=e}return null};Tt.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var n=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return n}else t.raise("Invalid escape");t.pos=e}return null};Tt.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)this.regexp_classString(t)===Ti&&(e=Ti);return e};Tt.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return e===1?la:Ti};Tt.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return this.regexp_eatCharacterEscape(t)||this.regexp_eatClassSetReservedPunctuator(t)?!0:t.eat(98)?(t.lastIntValue=8,!0):(t.pos=e,!1);var n=t.current();return n<0||n===t.lookahead()&&QL(n)||e6(n)?!1:(t.advance(),t.lastIntValue=n,!0)};function QL(t){return t===33||t>=35&&t<=38||t>=42&&t<=44||t===46||t>=58&&t<=64||t===94||t===96||t===126}function e6(t){return t===40||t===41||t===45||t===47||t>=91&&t<=93||t>=123&&t<=125}Tt.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return t6(e)?(t.lastIntValue=e,t.advance(),!0):!1};function t6(t){return t===33||t===35||t===37||t===38||t===44||t===45||t>=58&&t<=62||t===64||t===96||t===126}Tt.regexp_eatClassControlLetter=function(t){var e=t.current();return Uh(e)||e===95?(t.lastIntValue=e%32,t.advance(),!0):!1};Tt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1};Tt.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Uh(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e};function Uh(t){return t>=48&&t<=57}Tt.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;HT(n=t.current());)t.lastIntValue=16*t.lastIntValue+zT(n),t.advance();return t.pos!==e};function HT(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function zT(t){return t>=65&&t<=70?10+(t-65):t>=97&&t<=102?10+(t-97):t-48}Tt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=e*64+n*8+t.lastIntValue:t.lastIntValue=e*8+n}else t.lastIntValue=e;return!0}return!1};Tt.regexp_eatOctalDigit=function(t){var e=t.current();return GT(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)};function GT(t){return t>=48&&t<=55}Tt.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var i=t.current();if(!HT(i))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+zT(i),t.advance()}return!0};var Bh=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new ef(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},fn=Jn.prototype;fn.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Bh(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};fn.getToken=function(){return this.next(),new Bh(this)};typeof Symbol<"u"&&(fn[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===j.eof,value:e}}}});fn.nextToken=function(){var t=this.curContext();if((!t||!t.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(j.eof);if(t.override)return t.override(this);this.readToken(this.fullCharCodeAtPos())};fn.readToken=function(t){return Ms(t,this.options.ecmaVersion>=6)||t===92?this.readWord():this.getTokenFromCode(t)};fn.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888};fn.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=e;(r=vT(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())};fn.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Wo(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())};fn.skipSpace=function(){e:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(t>8&&t<14||t>=5760&&F2.test(String.fromCharCode(t)))++this.pos;else break e}}};fn.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)};fn.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&t===46&&e===46?(this.pos+=3,this.finishToken(j.ellipsis)):(++this.pos,this.finishToken(j.dot))};fn.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):t===61?this.finishOp(j.assign,2):this.finishOp(j.slash,1)};fn.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=t===42?j.star:j.modulo;return this.options.ecmaVersion>=7&&t===42&&e===42&&(++n,r=j.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(j.assign,n+1):this.finishOp(r,n)};fn.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(j.assign,3)}return this.finishOp(t===124?j.logicalOR:j.logicalAND,2)}return e===61?this.finishOp(j.assign,2):this.finishOp(t===124?j.bitwiseOR:j.bitwiseAND,1)};fn.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(j.assign,2):this.finishOp(j.bitwiseXOR,1)};fn.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||gi.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(j.incDec,2):e===61?this.finishOp(j.assign,2):this.finishOp(j.plusMin,1)};fn.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=t===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(j.assign,n+1):this.finishOp(j.bitShift,n)):e===33&&t===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(n=2),this.finishOp(j.relational,n))};fn.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(j.equality,this.input.charCodeAt(this.pos+2)===61?3:2):t===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(j.arrow)):this.finishOp(t===61?j.eq:j.prefix,1)};fn.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(j.questionDot,2)}if(e===63){if(t>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(j.assign,3)}return this.finishOp(j.coalesce,2)}}return this.finishOp(j.question,1)};fn.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),Ms(e,!0)||e===92))return this.finishToken(j.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+oa(e)+"'")};fn.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(j.parenL);case 41:return++this.pos,this.finishToken(j.parenR);case 59:return++this.pos,this.finishToken(j.semi);case 44:return++this.pos,this.finishToken(j.comma);case 91:return++this.pos,this.finishToken(j.bracketL);case 93:return++this.pos,this.finishToken(j.bracketR);case 123:return++this.pos,this.finishToken(j.braceL);case 125:return++this.pos,this.finishToken(j.braceR);case 58:return++this.pos,this.finishToken(j.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(j.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(j.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+oa(t)+"'")};fn.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)};fn.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(gi.test(r)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if(r==="[")e=!0;else if(r==="]"&&e)e=!1;else if(r==="/"&&!e)break;t=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Ls(this));o.reset(n,i,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(i,a)}catch{}return this.finishToken(j.regexp,{pattern:i,flags:a,value:l})};fn.readInt=function(t,e,n){for(var r=this.options.ecmaVersion>=12&&e===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,a=0,o=0,l=0,u=e??1/0;l<u;++l,++this.pos){var f=this.input.charCodeAt(this.pos),h=void 0;if(r&&f===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),o===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=f;continue}if(f>=97?h=f-97+10:f>=65?h=f-65+10:f>=48&&f<=57?h=f-48:h=1/0,h>=t)break;o=f,a=a*t+h}return r&&o===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||e!=null&&this.pos-s!==e?null:a};function n6(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function XT(t){return typeof BigInt!="function"?null:BigInt(t.replace(/_/g,""))}fn.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return n==null&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=XT(this.input.slice(e,this.pos)),++this.pos):Ms(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(j.num,n)};fn.readNumber=function(t){var e=this.pos;!t&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var n=this.pos-e>=2&&this.input.charCodeAt(e)===48;n&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&r===110){var i=XT(this.input.slice(e,this.pos));return++this.pos,Ms(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(j.num,i)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),Ms(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=n6(this.input.slice(e,this.pos),n);return this.finishToken(j.num,s)};fn.readCodePoint=function(){var t=this.input.charCodeAt(this.pos),e;if(t===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else e=this.readHexChar(4);return e};fn.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;r===92?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Wo(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(j.string,e)};var WT={};fn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t===WT)this.readInvalidTemplateToken();else throw t}this.inTemplateElement=!1};fn.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw WT;this.raise(t,e)};fn.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===j.template||this.type===j.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(j.dollarBraceL)):(++this.pos,this.finishToken(j.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(j.template,t));if(n===92)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Wo(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:t+=`
`;break;default:t+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};fn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(j.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};fn.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return oa(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),(r!=="0"||e===56||e===57)&&(this.strict||t)&&this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Wo(e)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(e)}};fn.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return n===null&&this.invalidStringToken(e,"Bad character escape sequence"),n};fn.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if($o(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?Ms:$o)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=oa(a),n=this.pos}else break;e=!1}return t+this.input.slice(n,this.pos)};fn.readWord=function(){var t=this.readWord1(),e=j.name;return this.keywords.test(t)&&(e=ac[t]),this.finishToken(e,t)};var YT="8.14.0";Jn.acorn={Parser:Jn,version:YT,defaultOptions:dh,Position:oc,SourceLocation:ef,getLineInfo:U2,Node:nf,TokenType:rn,tokTypes:j,keywordTypes:ac,TokContext:kr,tokContexts:Gn,isIdentifierChar:$o,isIdentifierStart:Ms,Token:Bh,isNewLine:Wo,lineBreak:gi,lineBreakG:mT,nonASCIIwhitespace:F2};function r6(t,e){return Jn.parse(t,e)}function i6(t,e,n){return Jn.parseExpressionAt(t,e,n)}function s6(t,e){return Jn.tokenizer(t,e)}const a6=Object.freeze(Object.defineProperty({__proto__:null,Node:nf,Parser:Jn,Position:oc,SourceLocation:ef,TokContext:kr,Token:Bh,TokenType:rn,defaultOptions:dh,getLineInfo:U2,isIdentifierChar:$o,isIdentifierStart:Ms,isNewLine:Wo,keywordTypes:ac,lineBreak:gi,lineBreakG:mT,nonASCIIwhitespace:F2,parse:r6,parseExpressionAt:i6,tokContexts:Gn,tokTypes:j,tokenizer:s6,version:YT},Symbol.toStringTag,{value:"Module"}));function B9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,typeof(i=function(s,a){if(typeof s!="object"||s===null)return s;var o=s[Symbol.toPrimitive];if(o!==void 0){var l=o.call(s,"string");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}(r.key))=="symbol"?i:String(i),r)}var i}function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gh.apply(this,arguments)}function Af(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,J_(t,e)}function J_(t,e){return J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},J_(t,e)}function $9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function V9(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(i,s){if(i){if(typeof i=="string")return $9(i,s);var a=Object.prototype.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?$9(i,s):void 0}}(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var oi=!0;function li(t,e){return e===void 0&&(e={}),new rn("name",e)}var o6=new WeakMap;function l6(t){var e=o6.get(t.Parser.acorn||t);if(!e){var n={assert:li(0,{startsExpr:oi}),asserts:li(0,{startsExpr:oi}),global:li(0,{startsExpr:oi}),keyof:li(0,{startsExpr:oi}),readonly:li(0,{startsExpr:oi}),unique:li(0,{startsExpr:oi}),abstract:li(0,{startsExpr:oi}),declare:li(0,{startsExpr:oi}),enum:li(0,{startsExpr:oi}),module:li(0,{startsExpr:oi}),namespace:li(0,{startsExpr:oi}),interface:li(0,{startsExpr:oi}),type:li(0,{startsExpr:oi})},r={at:new rn("@"),jsxName:new rn("jsxName"),jsxText:new rn("jsxText",{beforeExpr:!0}),jsxTagStart:new rn("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new rn("jsxTagEnd")},i={tc_oTag:new kr("<tag",!1,!1),tc_cTag:new kr("</tag",!1,!1),tc_expr:new kr("<tag>...</tag>",!0,!0)},s=new RegExp("^(?:"+Object.keys(n).join("|")+")$");r.jsxTagStart.updateContext=function(){this.context.push(i.tc_expr),this.context.push(i.tc_oTag),this.exprAllowed=!1},r.jsxTagEnd.updateContext=function(a){var o=this.context.pop();o===i.tc_oTag&&a===j.slash||o===i.tc_cTag?(this.context.pop(),this.exprAllowed=this.curContext()===i.tc_expr):this.exprAllowed=!0},e={tokTypes:gh({},n,r),tokContexts:gh({},i),keywordsRegExp:s,tokenIsLiteralPropertyName:function(a){return[j.name,j.string,j.num].concat(Object.values(ac),Object.values(n)).includes(a)},tokenIsKeywordOrIdentifier:function(a){return[j.name].concat(Object.values(ac),Object.values(n)).includes(a)},tokenIsIdentifier:function(a){return[].concat(Object.values(n),[j.name]).includes(a)},tokenIsTSDeclarationStart:function(a){return[n.abstract,n.declare,n.enum,n.module,n.namespace,n.interface,n.type].includes(a)},tokenIsTSTypeOperator:function(a){return[n.keyof,n.readonly,n.unique].includes(a)},tokenIsTemplate:function(a){return a===j.invalidTemplate}}}return e}var $c=1024,c6=new RegExp("(?:[^\\S\\n\\r\\u2028\\u2029]|\\/\\/.*|\\/\\*.*?\\*\\/)*","y"),q9=new RegExp("(?=("+c6.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y"),Vc=function(){this.shorthandAssign=void 0,this.trailingComma=void 0,this.parenthesizedAssign=void 0,this.parenthesizedBind=void 0,this.doubleProto=void 0,this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};function u6(t,e){var n=e.key.name,r=t[n],i="true";return e.type!=="MethodDefinition"||e.kind!=="get"&&e.kind!=="set"||(i=(e.static?"s":"i")+e.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(t[n]="true",!1):!!r||(t[n]=i,!1)}function H9(t,e){var n=t.key;return!t.computed&&(n.type==="Identifier"&&n.name===e||n.type==="Literal"&&n.value===e)}var At={AbstractMethodHasImplementation:function(t){return"Method '"+t.methodName+"' cannot have an implementation because it is marked abstract."},AbstractPropertyHasInitializer:function(t){return"Property '"+t.propertyName+"' cannot have an initializer because it is marked abstract."},AccesorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccesorCannotHaveTypeParameters:"An accessor cannot have type parameters.",CannotFindName:function(t){return"Cannot find name '"+t.name+"'."},ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:function(t){return"'declare' is not allowed in "+t.kind+"ters."},DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:function(){return"Accessibility modifier already seen."},DuplicateModifier:function(t){return"Duplicate modifier: '"+t.modifier+"'."},EmptyHeritageClauseType:function(t){return"'"+t.token+"' list cannot be empty."},EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",IncompatibleModifiers:function(t){var e=t.modifiers;return"'"+e[0]+"' modifier cannot be used with '"+e[1]+"' modifier."},IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:function(t){return"Index signatures cannot have an accessibility modifier ('"+t.modifier+"')."},IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:function(t){return"'"+t.modifier+"' modifier cannot appear on a type member."},InvalidModifierOnTypeParameter:function(t){return"'"+t.modifier+"' modifier cannot appear on a type parameter."},InvalidModifierOnTypeParameterPositions:function(t){return"'"+t.modifier+"' modifier can only appear on a type parameter of a class, interface or type alias."},InvalidModifiersOrder:function(t){var e=t.orderedModifiers;return"'"+e[0]+"' modifier must precede '"+e[1]+"' modifier."},InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",MixedLabeledAndUnlabeledElements:"Tuple members must all have names or all not have names.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:function(t){return"Private elements cannot have an accessibility modifier ('"+t.modifier+"')."},PrivateMethodsHasAccessibility:function(t){return"Private methods cannot have an accessibility modifier ('"+t.modifier+"')."},ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccesorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccesorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccesorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:function(t){var e=t.typeParameterName;return"Single type parameter "+e+" should have a trailing comma. Example usage: <"+e+",>."},StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",GenericsEndWithComma:"Trailing comma is not allowed at the end of generics.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:function(t){return"Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got "+t.type+"."},LetInLexicalBinding:"'let' is not allowed to be used as a name in 'let' or 'const' declarations."},f6={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:""},d6=/^[\da-fA-F]+$/,h6=/^\d+$/;function wu(t){return t&&(t.type==="JSXIdentifier"?t.name:t.type==="JSXNamespacedName"?t.namespace.name+":"+t.name.name:t.type==="JSXMemberExpression"?wu(t.object)+"."+wu(t.property):void 0)}var Ng=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;function z9(t){if(!t)throw new Error("Assert fail")}function p6(t){return t==="accessor"}function m6(t){return t==="in"||t==="out"}function Dg(t,e){return 2|(t?4:0)|(e?8:0)}function v6(t){if(t.type!=="MemberExpression")return!1;var e=t.property;return(!t.computed||!(e.type!=="TemplateLiteral"||e.expressions.length>0))&&jT(t.object)}function jT(t){return t.type==="Identifier"||t.type==="MemberExpression"&&!t.computed&&jT(t.object)}function G9(t){return t==="private"||t==="public"||t==="protected"}function g6(t){var e=t||{},n=e.dts,r=n!==void 0&&n,i=e.allowSatisfies,s=i!==void 0&&i;return function(a){var o=a.acorn||a6,l=l6(o),u=o.tokTypes,f=o.keywordTypes,h=o.isIdentifierStart,p=o.lineBreak,v=o.isNewLine,P=o.tokContexts,S=o.isIdentifierChar,g=l.tokTypes,m=l.tokContexts,x=l.keywordsRegExp,w=l.tokenIsLiteralPropertyName,C=l.tokenIsTemplate,A=l.tokenIsTSDeclarationStart,M=l.tokenIsIdentifier,E=l.tokenIsKeywordOrIdentifier,N=l.tokenIsTSTypeOperator;function I(R,B,V){V===void 0&&(V=R.length);for(var z=B;z<V;z++){var G=R.charCodeAt(z);if(v(G))return z<V-1&&G===13&&R.charCodeAt(z+1)===10?z+2:z+1}return-1}a=function(R,B,V){var z=V.tokTypes,G=B.tokTypes;return function(O){function y(){return O.apply(this,arguments)||this}Af(y,O);var b=y.prototype;return b.takeDecorators=function(k){var F=this.decoratorStack[this.decoratorStack.length-1];F.length&&(k.decorators=F,this.resetStartLocationFromNode(k,F[0]),this.decoratorStack[this.decoratorStack.length-1]=[])},b.parseDecorators=function(k){for(var F=this.decoratorStack[this.decoratorStack.length-1];this.match(G.at);){var H=this.parseDecorator();F.push(H)}this.match(z._export)?k||this.unexpected():this.canHaveLeadingDecorator()||this.raise(this.start,"Leading decorators must be attached to a class declaration.")},b.parseDecorator=function(){var k=this.startNode();this.next(),this.decoratorStack.push([]);var F,H=this.start,W=this.startLoc;if(this.match(z.parenL)){var ne=this.start,Z=this.startLoc;if(this.next(),F=this.parseExpression(),this.expect(z.parenR),this.options.preserveParens){var K=this.startNodeAt(ne,Z);K.expression=F,F=this.finishNode(K,"ParenthesizedExpression")}}else for(F=this.parseIdent(!1);this.eat(z.dot);){var ae=this.startNodeAt(H,W);ae.object=F,ae.property=this.parseIdent(!0),ae.computed=!1,F=this.finishNode(ae,"MemberExpression")}return k.expression=this.parseMaybeDecoratorArguments(F),this.decoratorStack.pop(),this.finishNode(k,"Decorator")},b.parseMaybeDecoratorArguments=function(k){if(this.eat(z.parenL)){var F=this.startNodeAtNode(k);return F.callee=k,F.arguments=this.parseExprList(z.parenR,!1),this.finishNode(F,"CallExpression")}return k},y}(R)}(a,l,o),a=function(R,B,V,z){var G=R.tokTypes,O=B.tokTypes,y=R.isNewLine,b=R.isIdentifierChar,k=Object.assign({allowNamespaces:!0,allowNamespacedObjects:!0},z||{});return function(F){function H(){return F.apply(this,arguments)||this}Af(H,F);var W=H.prototype;return W.jsx_readToken=function(){for(var ne="",Z=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");var K=this.input.charCodeAt(this.pos);switch(K){case 60:case 123:return this.pos===this.start?K===60&&this.exprAllowed?(++this.pos,this.finishToken(O.jsxTagStart)):this.getTokenFromCode(K):(ne+=this.input.slice(Z,this.pos),this.finishToken(O.jsxText,ne));case 38:ne+=this.input.slice(Z,this.pos),ne+=this.jsx_readEntity(),Z=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(K===62?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:y(K)?(ne+=this.input.slice(Z,this.pos),ne+=this.jsx_readNewLine(!0),Z=this.pos):++this.pos}}},W.jsx_readNewLine=function(ne){var Z,K=this.input.charCodeAt(this.pos);return++this.pos,K===13&&this.input.charCodeAt(this.pos)===10?(++this.pos,Z=ne?`
`:`\r
`):Z=String.fromCharCode(K),this.options.locations&&(++this.curLine,this.lineStart=this.pos),Z},W.jsx_readString=function(ne){for(var Z="",K=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var ae=this.input.charCodeAt(this.pos);if(ae===ne)break;ae===38?(Z+=this.input.slice(K,this.pos),Z+=this.jsx_readEntity(),K=this.pos):y(ae)?(Z+=this.input.slice(K,this.pos),Z+=this.jsx_readNewLine(!1),K=this.pos):++this.pos}return Z+=this.input.slice(K,this.pos++),this.finishToken(G.string,Z)},W.jsx_readEntity=function(){var ne,Z="",K=0,ae=this.input[this.pos];ae!=="&"&&this.raise(this.pos,"Entity must start with an ampersand");for(var se=++this.pos;this.pos<this.input.length&&K++<10;){if((ae=this.input[this.pos++])===";"){Z[0]==="#"?Z[1]==="x"?(Z=Z.substr(2),d6.test(Z)&&(ne=String.fromCharCode(parseInt(Z,16)))):(Z=Z.substr(1),h6.test(Z)&&(ne=String.fromCharCode(parseInt(Z,10)))):ne=f6[Z];break}Z+=ae}return ne||(this.pos=se,"&")},W.jsx_readWord=function(){var ne,Z=this.pos;do ne=this.input.charCodeAt(++this.pos);while(b(ne)||ne===45);return this.finishToken(O.jsxName,this.input.slice(Z,this.pos))},W.jsx_parseIdentifier=function(){var ne=this.startNode();return this.type===O.jsxName?ne.name=this.value:this.type.keyword?ne.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(ne,"JSXIdentifier")},W.jsx_parseNamespacedName=function(){var ne=this.start,Z=this.startLoc,K=this.jsx_parseIdentifier();if(!k.allowNamespaces||!this.eat(G.colon))return K;var ae=this.startNodeAt(ne,Z);return ae.namespace=K,ae.name=this.jsx_parseIdentifier(),this.finishNode(ae,"JSXNamespacedName")},W.jsx_parseElementName=function(){if(this.type===O.jsxTagEnd)return"";var ne=this.start,Z=this.startLoc,K=this.jsx_parseNamespacedName();for(this.type!==G.dot||K.type!=="JSXNamespacedName"||k.allowNamespacedObjects||this.unexpected();this.eat(G.dot);){var ae=this.startNodeAt(ne,Z);ae.object=K,ae.property=this.jsx_parseIdentifier(),K=this.finishNode(ae,"JSXMemberExpression")}return K},W.jsx_parseAttributeValue=function(){switch(this.type){case G.braceL:var ne=this.jsx_parseExpressionContainer();return ne.expression.type==="JSXEmptyExpression"&&this.raise(ne.start,"JSX attributes must only be assigned a non-empty expression"),ne;case O.jsxTagStart:case G.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}},W.jsx_parseEmptyExpression=function(){var ne=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(ne,"JSXEmptyExpression",this.start,this.startLoc)},W.jsx_parseExpressionContainer=function(){var ne=this.startNode();return this.next(),ne.expression=this.type===G.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(G.braceR),this.finishNode(ne,"JSXExpressionContainer")},W.jsx_parseAttribute=function(){var ne=this.startNode();return this.eat(G.braceL)?(this.expect(G.ellipsis),ne.argument=this.parseMaybeAssign(),this.expect(G.braceR),this.finishNode(ne,"JSXSpreadAttribute")):(ne.name=this.jsx_parseNamespacedName(),ne.value=this.eat(G.eq)?this.jsx_parseAttributeValue():null,this.finishNode(ne,"JSXAttribute"))},W.jsx_parseOpeningElementAt=function(ne,Z){var K=this.startNodeAt(ne,Z);K.attributes=[];var ae=this.jsx_parseElementName();for(ae&&(K.name=ae);this.type!==G.slash&&this.type!==O.jsxTagEnd;)K.attributes.push(this.jsx_parseAttribute());return K.selfClosing=this.eat(G.slash),this.expect(O.jsxTagEnd),this.finishNode(K,ae?"JSXOpeningElement":"JSXOpeningFragment")},W.jsx_parseClosingElementAt=function(ne,Z){var K=this.startNodeAt(ne,Z),ae=this.jsx_parseElementName();return ae&&(K.name=ae),this.expect(O.jsxTagEnd),this.finishNode(K,ae?"JSXClosingElement":"JSXClosingFragment")},W.jsx_parseElementAt=function(ne,Z){var K=this.startNodeAt(ne,Z),ae=[],se=this.jsx_parseOpeningElementAt(ne,Z),ye=null;if(!se.selfClosing){e:for(;;)switch(this.type){case O.jsxTagStart:if(ne=this.start,Z=this.startLoc,this.next(),this.eat(G.slash)){ye=this.jsx_parseClosingElementAt(ne,Z);break e}ae.push(this.jsx_parseElementAt(ne,Z));break;case O.jsxText:ae.push(this.parseExprAtom());break;case G.braceL:ae.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}wu(ye.name)!==wu(se.name)&&this.raise(ye.start,"Expected corresponding JSX closing tag for <"+wu(se.name)+">")}var me=se.name?"Element":"Fragment";return K["opening"+me]=se,K["closing"+me]=ye,K.children=ae,this.type===G.relational&&this.value==="<"&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(K,"JSX"+me)},W.jsx_parseText=function(){var ne=this.parseLiteral(this.value);return ne.type="JSXText",ne},W.jsx_parseElement=function(){var ne=this.start,Z=this.startLoc;return this.next(),this.jsx_parseElementAt(ne,Z)},H}(V)}(o,l,a,t==null?void 0:t.jsx),a=function(R,B,V){var z=B.tokTypes,G=V.tokTypes;return function(O){function y(){return O.apply(this,arguments)||this}Af(y,O);var b=y.prototype;return b.parseMaybeImportAttributes=function(k){if(this.type===G._with||this.type===z.assert){this.next();var F=this.parseImportAttributes();F&&(k.attributes=F)}},b.parseImportAttributes=function(){this.expect(G.braceL);var k=this.parseWithEntries();return this.expect(G.braceR),k},b.parseWithEntries=function(){var k=[],F=new Set;do{if(this.type===G.braceR)break;var H,W=this.startNode();H=this.type===G.string?this.parseLiteral(this.value):this.parseIdent(!0),this.next(),W.key=H,F.has(W.key.name)&&this.raise(this.pos,"Duplicated key in attributes"),F.add(W.key.name),this.type!==G.string&&this.raise(this.pos,"Only string is supported as an attribute value"),W.value=this.parseLiteral(this.value),k.push(this.finishNode(W,"ImportAttribute"))}while(this.eat(G.comma));return k},y}(R)}(a,l,o);var L=function(R){function B(y,b,k){var F;return(F=R.call(this,y,b,k)||this).preValue=null,F.preToken=null,F.isLookahead=!1,F.isAmbientContext=!1,F.inAbstractClass=!1,F.inType=!1,F.inDisallowConditionalTypesContext=!1,F.maybeInArrowParameters=!1,F.shouldParseArrowReturnType=void 0,F.shouldParseAsyncArrowReturnType=void 0,F.decoratorStack=[[]],F.importsStack=[[]],F.importOrExportOuterKind=void 0,F.tsParseConstModifier=F.tsParseModifiers.bind(function(H){if(H===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H}(F),{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:At.InvalidModifierOnTypeParameterPositions}),F}Af(B,R);var V,z,G,O=B.prototype;return O.getTokenFromCodeInType=function(y){return y===62||y===60?this.finishOp(u.relational,1):R.prototype.getTokenFromCode.call(this,y)},O.readToken=function(y){if(!this.inType){var b=this.curContext();if(b===m.tc_expr)return this.jsx_readToken();if(b===m.tc_oTag||b===m.tc_cTag){if(h(y))return this.jsx_readWord();if(y==62)return++this.pos,this.finishToken(g.jsxTagEnd);if((y===34||y===39)&&b==m.tc_oTag)return this.jsx_readString(y)}if(y===60&&this.exprAllowed&&this.input.charCodeAt(this.pos+1)!==33)return++this.pos,this.finishToken(g.jsxTagStart)}return R.prototype.readToken.call(this,y)},O.getTokenFromCode=function(y){return this.inType?this.getTokenFromCodeInType(y):y===64?(++this.pos,this.finishToken(g.at)):R.prototype.getTokenFromCode.call(this,y)},O.isAbstractClass=function(){return this.ts_isContextual(g.abstract)&&this.lookahead().type===u._class},O.finishNode=function(y,b){return y.type!==""&&y.end!==0?y:R.prototype.finishNode.call(this,y,b)},O.tryParse=function(y,b){b===void 0&&(b=this.cloneCurLookaheadState());var k={node:null};try{return{node:y(function(H){throw H===void 0&&(H=null),k.node=H,k}),error:null,thrown:!1,aborted:!1,failState:null}}catch(H){var F=this.getCurLookaheadState();if(this.setLookaheadState(b),H instanceof SyntaxError)return{node:null,error:H,thrown:!0,aborted:!1,failState:F};if(H===k)return{node:k.node,error:null,thrown:!1,aborted:!0,failState:F};throw H}},O.setOptionalParametersError=function(y,b){var k;y.optionalParametersLoc=(k=b==null?void 0:b.loc)!=null?k:this.startLoc},O.reScan_lt_gt=function(){this.type===u.relational&&(this.pos-=1,this.readToken_lt_gt(this.fullCharCodeAtPos()))},O.reScan_lt=function(){var y=this.type;return y===u.bitShift?(this.pos-=2,this.finishOp(u.relational,1),u.relational):y},O.resetEndLocation=function(y,b){b===void 0&&(b=this.lastTokEndLoc),y.end=b.column,y.loc.end=b,this.options.ranges&&(y.range[1]=b.column)},O.startNodeAtNode=function(y){return R.prototype.startNodeAt.call(this,y.start,y.loc.start)},O.nextTokenStart=function(){return this.nextTokenStartSince(this.pos)},O.tsHasSomeModifiers=function(y,b){return b.some(function(k){return G9(k)?y.accessibility===k:!!y[k]})},O.tsIsStartOfStaticBlocks=function(){return this.isContextual("static")&&this.lookaheadCharCode()===123},O.tsCheckForInvalidTypeCasts=function(y){var b=this;y.forEach(function(k){(k==null?void 0:k.type)==="TSTypeCastExpression"&&b.raise(k.typeAnnotation.start,At.UnexpectedTypeAnnotation)})},O.atPossibleAsyncArrow=function(y){return y.type==="Identifier"&&y.name==="async"&&this.lastTokEndLoc.column===y.end&&!this.canInsertSemicolon()&&y.end-y.start==5&&y.start===this.potentialArrowAt},O.tsIsIdentifier=function(){return M(this.type)},O.tsTryParseTypeOrTypePredicateAnnotation=function(){return this.match(u.colon)?this.tsParseTypeOrTypePredicateAnnotation(u.colon):void 0},O.tsTryParseGenericAsyncArrowFunction=function(y,b,k){var F=this;if(this.tsMatchLeftRelational()){var H=this.maybeInArrowParameters;this.maybeInArrowParameters=!0;var W=this.tsTryParseAndCatch(function(){var ne=F.startNodeAt(y,b);return ne.typeParameters=F.tsParseTypeParameters(),R.prototype.parseFunctionParams.call(F,ne),ne.returnType=F.tsTryParseTypeOrTypePredicateAnnotation(),F.expect(u.arrow),ne});if(this.maybeInArrowParameters=H,W)return R.prototype.parseArrowExpression.call(this,W,null,!0,k)}},O.tsParseTypeArgumentsInExpression=function(){if(this.reScan_lt()===u.relational)return this.tsParseTypeArguments()},O.tsInNoContext=function(y){var b=this.context;this.context=[b[0]];try{return y()}finally{this.context=b}},O.tsTryParseTypeAnnotation=function(){return this.match(u.colon)?this.tsParseTypeAnnotation():void 0},O.isUnparsedContextual=function(y,b){var k=y+b.length;if(this.input.slice(y,k)===b){var F=this.input.charCodeAt(k);return!(S(F)||(64512&F)==55296)}return!1},O.isAbstractConstructorSignature=function(){return this.ts_isContextual(g.abstract)&&this.lookahead().type===u._new},O.nextTokenStartSince=function(y){return Ng.lastIndex=y,Ng.test(this.input)?Ng.lastIndex:y},O.lookaheadCharCode=function(){return this.input.charCodeAt(this.nextTokenStart())},O.compareLookaheadState=function(y,b){for(var k=0,F=Object.keys(y);k<F.length;k++){var H=F[k];if(y[H]!==b[H])return!1}return!0},O.createLookaheadState=function(){this.value=null,this.context=[this.curContext()]},O.getCurLookaheadState=function(){return{endLoc:this.endLoc,lastTokEnd:this.lastTokEnd,lastTokStart:this.lastTokStart,lastTokStartLoc:this.lastTokStartLoc,pos:this.pos,value:this.value,type:this.type,start:this.start,end:this.end,context:this.context,startLoc:this.startLoc,lastTokEndLoc:this.lastTokEndLoc,curLine:this.curLine,lineStart:this.lineStart,curPosition:this.curPosition,containsEsc:this.containsEsc}},O.cloneCurLookaheadState=function(){return{pos:this.pos,value:this.value,type:this.type,start:this.start,end:this.end,context:this.context&&this.context.slice(),startLoc:this.startLoc,lastTokEndLoc:this.lastTokEndLoc,endLoc:this.endLoc,lastTokEnd:this.lastTokEnd,lastTokStart:this.lastTokStart,lastTokStartLoc:this.lastTokStartLoc,curLine:this.curLine,lineStart:this.lineStart,curPosition:this.curPosition,containsEsc:this.containsEsc}},O.setLookaheadState=function(y){this.pos=y.pos,this.value=y.value,this.endLoc=y.endLoc,this.lastTokEnd=y.lastTokEnd,this.lastTokStart=y.lastTokStart,this.lastTokStartLoc=y.lastTokStartLoc,this.type=y.type,this.start=y.start,this.end=y.end,this.context=y.context,this.startLoc=y.startLoc,this.lastTokEndLoc=y.lastTokEndLoc,this.curLine=y.curLine,this.lineStart=y.lineStart,this.curPosition=y.curPosition,this.containsEsc=y.containsEsc},O.tsLookAhead=function(y){var b=this.getCurLookaheadState(),k=y();return this.setLookaheadState(b),k},O.lookahead=function(y){var b=this.getCurLookaheadState();if(this.createLookaheadState(),this.isLookahead=!0,y!==void 0)for(var k=0;k<y;k++)this.nextToken();else this.nextToken();this.isLookahead=!1;var F=this.getCurLookaheadState();return this.setLookaheadState(b),F},O.readWord=function(){var y=this.readWord1(),b=u.name;return this.keywords.test(y)?b=f[y]:new RegExp(x).test(y)&&(b=g[y]),this.finishToken(b,y)},O.skipBlockComment=function(){var y;this.isLookahead||(y=this.options.onComment&&this.curPosition());var b=this.pos,k=this.input.indexOf("*/",this.pos+=2);if(k===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=k+2,this.options.locations)for(var F,H=b;(F=I(this.input,H,this.pos))>-1;)++this.curLine,H=this.lineStart=F;this.isLookahead||this.options.onComment&&this.options.onComment(!0,this.input.slice(b+2,k),b,this.pos,y,this.curPosition())},O.skipLineComment=function(y){var b,k=this.pos;this.isLookahead||(b=this.options.onComment&&this.curPosition());for(var F=this.input.charCodeAt(this.pos+=y);this.pos<this.input.length&&!v(F);)F=this.input.charCodeAt(++this.pos);this.isLookahead||this.options.onComment&&this.options.onComment(!1,this.input.slice(k+y,this.pos),k,this.pos,b,this.curPosition())},O.finishToken=function(y,b){this.preValue=this.value,this.preToken=this.type,this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var k=this.type;this.type=y,this.value=b,this.isLookahead||this.updateContext(k)},O.resetStartLocation=function(y,b,k){y.start=b,y.loc.start=k,this.options.ranges&&(y.range[0]=b)},O.isLineTerminator=function(){return this.eat(u.semi)||R.prototype.canInsertSemicolon.call(this)},O.hasFollowingLineBreak=function(){return q9.lastIndex=this.end,q9.test(this.input)},O.addExtra=function(y,b,k,F){if(F===void 0&&(F=!0),y){var H=y.extra=y.extra||{};F?H[b]=k:Object.defineProperty(H,b,{enumerable:F,value:k})}},O.isLiteralPropertyName=function(){return w(this.type)},O.hasPrecedingLineBreak=function(){return p.test(this.input.slice(this.lastTokEndLoc.index,this.start))},O.createIdentifier=function(y,b){return y.name=b,this.finishNode(y,"Identifier")},O.resetStartLocationFromNode=function(y,b){this.resetStartLocation(y,b.start,b.loc.start)},O.isThisParam=function(y){return y.type==="Identifier"&&y.name==="this"},O.isLookaheadContextual=function(y){var b=this.nextTokenStart();return this.isUnparsedContextual(b,y)},O.ts_type_isContextual=function(y,b){return y===b&&!this.containsEsc},O.ts_isContextual=function(y){return this.type===y&&!this.containsEsc},O.ts_isContextualWithState=function(y,b){return y.type===b&&!y.containsEsc},O.isContextualWithState=function(y,b){return b.type===u.name&&b.value===y&&!b.containsEsc},O.tsIsStartOfMappedType=function(){return this.next(),this.eat(u.plusMin)?this.ts_isContextual(g.readonly):(this.ts_isContextual(g.readonly)&&this.next(),!!this.match(u.bracketL)&&(this.next(),!!this.tsIsIdentifier()&&(this.next(),this.match(u._in))))},O.tsInDisallowConditionalTypesContext=function(y){var b=this.inDisallowConditionalTypesContext;this.inDisallowConditionalTypesContext=!0;try{return y()}finally{this.inDisallowConditionalTypesContext=b}},O.tsTryParseType=function(){return this.tsEatThenParseType(u.colon)},O.match=function(y){return this.type===y},O.matchJsx=function(y){return this.type===l.tokTypes[y]},O.ts_eatWithState=function(y,b,k){if(y===k.type){for(var F=0;F<b;F++)this.next();return!0}return!1},O.ts_eatContextualWithState=function(y,b,k){if(x.test(y)){if(this.ts_isContextualWithState(k,g[y])){for(var F=0;F<b;F++)this.next();return!0}return!1}if(!this.isContextualWithState(y,k))return!1;for(var H=0;H<b;H++)this.next();return!0},O.canHaveLeadingDecorator=function(){return this.match(u._class)},O.eatContextual=function(y){return x.test(y)?!!this.ts_isContextual(g[y])&&(this.next(),!0):R.prototype.eatContextual.call(this,y)},O.tsIsExternalModuleReference=function(){return this.isContextual("require")&&this.lookaheadCharCode()===40},O.tsParseExternalModuleReference=function(){var y=this.startNode();return this.expectContextual("require"),this.expect(u.parenL),this.match(u.string)||this.unexpected(),y.expression=this.parseExprAtom(),this.expect(u.parenR),this.finishNode(y,"TSExternalModuleReference")},O.tsParseEntityName=function(y){y===void 0&&(y=!0);for(var b=this.parseIdent(y);this.eat(u.dot);){var k=this.startNodeAtNode(b);k.left=b,k.right=this.parseIdent(y),b=this.finishNode(k,"TSQualifiedName")}return b},O.tsParseEnumMember=function(){var y=this.startNode();return y.id=this.match(u.string)?this.parseLiteral(this.value):this.parseIdent(!0),this.eat(u.eq)&&(y.initializer=this.parseMaybeAssign()),this.finishNode(y,"TSEnumMember")},O.tsParseEnumDeclaration=function(y,b){return b===void 0&&(b={}),b.const&&(y.const=!0),b.declare&&(y.declare=!0),this.expectContextual("enum"),y.id=this.parseIdent(),this.checkLValSimple(y.id),this.expect(u.braceL),y.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(u.braceR),this.finishNode(y,"TSEnumDeclaration")},O.tsParseModuleBlock=function(){var y=this.startNode();for(R.prototype.enterScope.call(this,512),this.expect(u.braceL),y.body=[];this.type!==u.braceR;){var b=this.parseStatement(null,!0);y.body.push(b)}return this.next(),R.prototype.exitScope.call(this),this.finishNode(y,"TSModuleBlock")},O.tsParseAmbientExternalModuleDeclaration=function(y){return this.ts_isContextual(g.global)?(y.global=!0,y.id=this.parseIdent()):this.match(u.string)?y.id=this.parseLiteral(this.value):this.unexpected(),this.match(u.braceL)?(R.prototype.enterScope.call(this,$c),y.body=this.tsParseModuleBlock(),R.prototype.exitScope.call(this)):R.prototype.semicolon.call(this),this.finishNode(y,"TSModuleDeclaration")},O.tsTryParseDeclare=function(y){var b=this;if(!this.isLineTerminator()){var k,F=this.type;return this.isContextual("let")&&(F=u._var,k="let"),this.tsInAmbientContext(function(){if(F===u._function)return y.declare=!0,b.parseFunctionStatement(y,!1,!0);if(F===u._class)return y.declare=!0,b.parseClass(y,!0);if(F===g.enum)return b.tsParseEnumDeclaration(y,{declare:!0});if(F===g.global)return b.tsParseAmbientExternalModuleDeclaration(y);if(F===u._const||F===u._var)return b.match(u._const)&&b.isLookaheadContextual("enum")?(b.expect(u._const),b.tsParseEnumDeclaration(y,{const:!0,declare:!0})):(y.declare=!0,b.parseVarStatement(y,k||b.value,!0));if(F===g.interface){var H=b.tsParseInterfaceDeclaration(y,{declare:!0});if(H)return H}return M(F)?b.tsParseDeclaration(y,b.value,!0):void 0})}},O.tsIsListTerminator=function(y){switch(y){case"EnumMembers":case"TypeMembers":return this.match(u.braceR);case"HeritageClauseElement":return this.match(u.braceL);case"TupleElementTypes":return this.match(u.bracketR);case"TypeParametersOrArguments":return this.tsMatchRightRelational()}},O.tsParseDelimitedListWorker=function(y,b,k,F){for(var H=[],W=-1;!this.tsIsListTerminator(y);){W=-1;var ne=b();if(ne==null)return;if(H.push(ne),!this.eat(u.comma)){if(this.tsIsListTerminator(y))break;return void(k&&this.expect(u.comma))}W=this.lastTokStart}return F&&(F.value=W),H},O.tsParseDelimitedList=function(y,b,k){return function(F){if(F==null)throw new Error("Unexpected "+F+" value.");return F}(this.tsParseDelimitedListWorker(y,b,!0,k))},O.tsParseBracketedList=function(y,b,k,F,H){F||this.expect(k?u.bracketL:u.relational);var W=this.tsParseDelimitedList(y,b,H);return this.expect(k?u.bracketR:u.relational),W},O.tsParseTypeParameterName=function(){return this.parseIdent().name},O.tsEatThenParseType=function(y){return this.match(y)?this.tsNextThenParseType():void 0},O.tsExpectThenParseType=function(y){var b=this;return this.tsDoThenParseType(function(){return b.expect(y)})},O.tsNextThenParseType=function(){var y=this;return this.tsDoThenParseType(function(){return y.next()})},O.tsDoThenParseType=function(y){var b=this;return this.tsInType(function(){return y(),b.tsParseType()})},O.tsSkipParameterStart=function(){if(M(this.type)||this.match(u._this))return this.next(),!0;if(this.match(u.braceL))try{return this.parseObj(!0),!0}catch{return!1}if(this.match(u.bracketL)){this.next();try{return this.parseBindingList(u.bracketR,!0,!0),!0}catch{return!1}}return!1},O.tsIsUnambiguouslyStartOfFunctionType=function(){return this.next(),!!(this.match(u.parenR)||this.match(u.ellipsis)||this.tsSkipParameterStart()&&(this.match(u.colon)||this.match(u.comma)||this.match(u.question)||this.match(u.eq)||this.match(u.parenR)&&(this.next(),this.match(u.arrow))))},O.tsIsStartOfFunctionType=function(){return!!this.tsMatchLeftRelational()||this.match(u.parenL)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))},O.tsInAllowConditionalTypesContext=function(y){var b=this.inDisallowConditionalTypesContext;this.inDisallowConditionalTypesContext=!1;try{return y()}finally{this.inDisallowConditionalTypesContext=b}},O.tsParseBindingListForSignature=function(){var y=this;return R.prototype.parseBindingList.call(this,u.parenR,!0,!0).map(function(b){return b.type!=="Identifier"&&b.type!=="RestElement"&&b.type!=="ObjectPattern"&&b.type!=="ArrayPattern"&&y.raise(b.start,At.UnsupportedSignatureParameterKind(b.type)),b})},O.tsParseTypePredicateAsserts=function(){if(this.type!==g.asserts)return!1;var y=this.containsEsc;return this.next(),!(!M(this.type)&&!this.match(u._this)||(y&&this.raise(this.lastTokStart,"Escape sequence in keyword asserts"),0))},O.tsParseThisTypeNode=function(){var y=this.startNode();return this.next(),this.finishNode(y,"TSThisType")},O.tsParseTypeAnnotation=function(y,b){var k=this;return y===void 0&&(y=!0),b===void 0&&(b=this.startNode()),this.tsInType(function(){y&&k.expect(u.colon),b.typeAnnotation=k.tsParseType()}),this.finishNode(b,"TSTypeAnnotation")},O.tsParseThisTypePredicate=function(y){this.next();var b=this.startNodeAtNode(y);return b.parameterName=y,b.typeAnnotation=this.tsParseTypeAnnotation(!1),b.asserts=!1,this.finishNode(b,"TSTypePredicate")},O.tsParseThisTypeOrThisTypePredicate=function(){var y=this.tsParseThisTypeNode();return this.isContextual("is")&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(y):y},O.tsParseTypePredicatePrefix=function(){var y=this.parseIdent();if(this.isContextual("is")&&!this.hasPrecedingLineBreak())return this.next(),y},O.tsParseTypeOrTypePredicateAnnotation=function(y){var b=this;return this.tsInType(function(){var k=b.startNode();b.expect(y);var F=b.startNode(),H=!!b.tsTryParse(b.tsParseTypePredicateAsserts.bind(b));if(H&&b.match(u._this)){var W=b.tsParseThisTypeOrThisTypePredicate();return W.type==="TSThisType"?(F.parameterName=W,F.asserts=!0,F.typeAnnotation=null,W=b.finishNode(F,"TSTypePredicate")):(b.resetStartLocationFromNode(W,F),W.asserts=!0),k.typeAnnotation=W,b.finishNode(k,"TSTypeAnnotation")}var ne=b.tsIsIdentifier()&&b.tsTryParse(b.tsParseTypePredicatePrefix.bind(b));if(!ne)return H?(F.parameterName=b.parseIdent(),F.asserts=H,F.typeAnnotation=null,k.typeAnnotation=b.finishNode(F,"TSTypePredicate"),b.finishNode(k,"TSTypeAnnotation")):b.tsParseTypeAnnotation(!1,k);var Z=b.tsParseTypeAnnotation(!1);return F.parameterName=ne,F.typeAnnotation=Z,F.asserts=H,k.typeAnnotation=b.finishNode(F,"TSTypePredicate"),b.finishNode(k,"TSTypeAnnotation")})},O.tsFillSignature=function(y,b){var k=y===u.arrow;b.typeParameters=this.tsTryParseTypeParameters(),this.expect(u.parenL),b.parameters=this.tsParseBindingListForSignature(),(k||this.match(y))&&(b.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(y))},O.tsTryNextParseConstantContext=function(){if(this.lookahead().type!==u._const)return null;this.next();var y=this.tsParseTypeReference();return y.typeParameters&&this.raise(y.typeName.start,At.CannotFindName({name:"const"})),y},O.tsParseFunctionOrConstructorType=function(y,b){var k=this,F=this.startNode();return y==="TSConstructorType"&&(F.abstract=!!b,b&&this.next(),this.next()),this.tsInAllowConditionalTypesContext(function(){return k.tsFillSignature(u.arrow,F)}),this.finishNode(F,y)},O.tsParseUnionOrIntersectionType=function(y,b,k){var F=this.startNode(),H=this.eat(k),W=[];do W.push(b());while(this.eat(k));return W.length!==1||H?(F.types=W,this.finishNode(F,y)):W[0]},O.tsCheckTypeAnnotationForReadOnly=function(y){switch(y.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(y.start,At.UnexpectedReadonly)}},O.tsParseTypeOperator=function(){var y=this.startNode(),b=this.value;return this.next(),y.operator=b,y.typeAnnotation=this.tsParseTypeOperatorOrHigher(),b==="readonly"&&this.tsCheckTypeAnnotationForReadOnly(y),this.finishNode(y,"TSTypeOperator")},O.tsParseConstraintForInferType=function(){var y=this;if(this.eat(u._extends)){var b=this.tsInDisallowConditionalTypesContext(function(){return y.tsParseType()});if(this.inDisallowConditionalTypesContext||!this.match(u.question))return b}},O.tsParseInferType=function(){var y=this,b=this.startNode();this.expectContextual("infer");var k=this.startNode();return k.name=this.tsParseTypeParameterName(),k.constraint=this.tsTryParse(function(){return y.tsParseConstraintForInferType()}),b.typeParameter=this.finishNode(k,"TSTypeParameter"),this.finishNode(b,"TSInferType")},O.tsParseLiteralTypeNode=function(){var y=this,b=this.startNode();return b.literal=function(){switch(y.type){case u.num:case u.string:case u._true:case u._false:return y.parseExprAtom();default:y.unexpected()}}(),this.finishNode(b,"TSLiteralType")},O.tsParseImportType=function(){var y=this.startNode();return this.expect(u._import),this.expect(u.parenL),this.match(u.string)||this.raise(this.start,At.UnsupportedImportTypeArgument),y.argument=this.parseExprAtom(),this.expect(u.parenR),this.eat(u.dot)&&(y.qualifier=this.tsParseEntityName()),this.tsMatchLeftRelational()&&(y.typeParameters=this.tsParseTypeArguments()),this.finishNode(y,"TSImportType")},O.tsParseTypeQuery=function(){var y=this.startNode();return this.expect(u._typeof),y.exprName=this.match(u._import)?this.tsParseImportType():this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.tsMatchLeftRelational()&&(y.typeParameters=this.tsParseTypeArguments()),this.finishNode(y,"TSTypeQuery")},O.tsParseMappedTypeParameter=function(){var y=this.startNode();return y.name=this.tsParseTypeParameterName(),y.constraint=this.tsExpectThenParseType(u._in),this.finishNode(y,"TSTypeParameter")},O.tsParseMappedType=function(){var y=this.startNode();return this.expect(u.braceL),this.match(u.plusMin)?(y.readonly=this.value,this.next(),this.expectContextual("readonly")):this.eatContextual("readonly")&&(y.readonly=!0),this.expect(u.bracketL),y.typeParameter=this.tsParseMappedTypeParameter(),y.nameType=this.eatContextual("as")?this.tsParseType():null,this.expect(u.bracketR),this.match(u.plusMin)?(y.optional=this.value,this.next(),this.expect(u.question)):this.eat(u.question)&&(y.optional=!0),y.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(u.braceR),this.finishNode(y,"TSMappedType")},O.tsParseTypeLiteral=function(){var y=this.startNode();return y.members=this.tsParseObjectTypeMembers(),this.finishNode(y,"TSTypeLiteral")},O.tsParseTupleElementType=function(){var y=this.startLoc,b=this.start,k=this.eat(u.ellipsis),F=this.tsParseType(),H=this.eat(u.question);if(this.eat(u.colon)){var W=this.startNodeAtNode(F);W.optional=H,F.type!=="TSTypeReference"||F.typeParameters||F.typeName.type!=="Identifier"?(this.raise(F.start,At.InvalidTupleMemberLabel),W.label=F):W.label=F.typeName,W.elementType=this.tsParseType(),F=this.finishNode(W,"TSNamedTupleMember")}else if(H){var ne=this.startNodeAtNode(F);ne.typeAnnotation=F,F=this.finishNode(ne,"TSOptionalType")}if(k){var Z=this.startNodeAt(b,y);Z.typeAnnotation=F,F=this.finishNode(Z,"TSRestType")}return F},O.tsParseTupleType=function(){var y=this,b=this.startNode();b.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);var k=!1,F=null;return b.elementTypes.forEach(function(H){var W=H.type;!k||W==="TSRestType"||W==="TSOptionalType"||W==="TSNamedTupleMember"&&H.optional||y.raise(H.start,At.OptionalTypeBeforeRequired),k||(k=W==="TSNamedTupleMember"&&H.optional||W==="TSOptionalType");var ne=W;W==="TSRestType"&&(ne=(H=H.typeAnnotation).type);var Z=ne==="TSNamedTupleMember";F!=null||(F=Z),F!==Z&&y.raise(H.start,At.MixedLabeledAndUnlabeledElements)}),this.finishNode(b,"TSTupleType")},O.tsParseTemplateLiteralType=function(){var y=this.startNode();return y.literal=this.parseTemplate({isTagged:!1}),this.finishNode(y,"TSLiteralType")},O.tsParseTypeReference=function(){var y=this.startNode();return y.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.tsMatchLeftRelational()&&(y.typeParameters=this.tsParseTypeArguments()),this.finishNode(y,"TSTypeReference")},O.tsMatchLeftRelational=function(){return this.match(u.relational)&&this.value==="<"},O.tsMatchRightRelational=function(){return this.match(u.relational)&&this.value===">"},O.tsParseParenthesizedType=function(){var y=this.startNode();return this.expect(u.parenL),y.typeAnnotation=this.tsParseType(),this.expect(u.parenR),this.finishNode(y,"TSParenthesizedType")},O.tsParseNonArrayType=function(){switch(this.type){case u.string:case u.num:case u._true:case u._false:return this.tsParseLiteralTypeNode();case u.plusMin:if(this.value==="-"){var y=this.startNode();return this.lookahead().type!==u.num&&this.unexpected(),y.literal=this.parseMaybeUnary(),this.finishNode(y,"TSLiteralType")}break;case u._this:return this.tsParseThisTypeOrThisTypePredicate();case u._typeof:return this.tsParseTypeQuery();case u._import:return this.tsParseImportType();case u.braceL:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case u.bracketL:return this.tsParseTupleType();case u.parenL:return this.tsParseParenthesizedType();case u.backQuote:case u.dollarBraceL:return this.tsParseTemplateLiteralType();default:var b=this.type;if(M(b)||b===u._void||b===u._null){var k=b===u._void?"TSVoidKeyword":b===u._null?"TSNullKeyword":function(H){switch(H){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}(this.value);if(k!==void 0&&this.lookaheadCharCode()!==46){var F=this.startNode();return this.next(),this.finishNode(F,k)}return this.tsParseTypeReference()}}this.unexpected()},O.tsParseArrayTypeOrHigher=function(){for(var y=this.tsParseNonArrayType();!this.hasPrecedingLineBreak()&&this.eat(u.bracketL);)if(this.match(u.bracketR)){var b=this.startNodeAtNode(y);b.elementType=y,this.expect(u.bracketR),y=this.finishNode(b,"TSArrayType")}else{var k=this.startNodeAtNode(y);k.objectType=y,k.indexType=this.tsParseType(),this.expect(u.bracketR),y=this.finishNode(k,"TSIndexedAccessType")}return y},O.tsParseTypeOperatorOrHigher=function(){var y=this;return N(this.type)&&!this.containsEsc?this.tsParseTypeOperator():this.isContextual("infer")?this.tsParseInferType():this.tsInAllowConditionalTypesContext(function(){return y.tsParseArrayTypeOrHigher()})},O.tsParseIntersectionTypeOrHigher=function(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),u.bitwiseAND)},O.tsParseUnionTypeOrHigher=function(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),u.bitwiseOR)},O.tsParseNonConditionalType=function(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(u._new)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()},O.tsParseType=function(){var y=this;z9(this.inType);var b=this.tsParseNonConditionalType();if(this.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(u._extends))return b;var k=this.startNodeAtNode(b);return k.checkType=b,k.extendsType=this.tsInDisallowConditionalTypesContext(function(){return y.tsParseNonConditionalType()}),this.expect(u.question),k.trueType=this.tsInAllowConditionalTypesContext(function(){return y.tsParseType()}),this.expect(u.colon),k.falseType=this.tsInAllowConditionalTypesContext(function(){return y.tsParseType()}),this.finishNode(k,"TSConditionalType")},O.tsIsUnambiguouslyIndexSignature=function(){return this.next(),!!M(this.type)&&(this.next(),this.match(u.colon))},O.tsInType=function(y){var b=this.inType;this.inType=!0;try{return y()}finally{this.inType=b}},O.tsTryParseIndexSignature=function(y){if(this.match(u.bracketL)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))){this.expect(u.bracketL);var b=this.parseIdent();b.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(b),this.expect(u.bracketR),y.parameters=[b];var k=this.tsTryParseTypeAnnotation();return k&&(y.typeAnnotation=k),this.tsParseTypeMemberSemicolon(),this.finishNode(y,"TSIndexSignature")}},O.tsParseNoneModifiers=function(y){this.tsParseModifiers({modified:y,allowedModifiers:[],disallowedModifiers:["in","out"],errorTemplate:At.InvalidModifierOnTypeParameterPositions})},O.tsParseTypeParameter=function(y){y===void 0&&(y=this.tsParseNoneModifiers.bind(this));var b=this.startNode();return y(b),b.name=this.tsParseTypeParameterName(),b.constraint=this.tsEatThenParseType(u._extends),b.default=this.tsEatThenParseType(u.eq),this.finishNode(b,"TSTypeParameter")},O.tsParseTypeParameters=function(y){var b=this.startNode();this.tsMatchLeftRelational()||this.matchJsx("jsxTagStart")?this.next():this.unexpected();var k={value:-1};return b.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,y),!1,!0,k),b.params.length===0&&this.raise(this.start,At.EmptyTypeParameters),k.value!==-1&&this.addExtra(b,"trailingComma",k.value),this.finishNode(b,"TSTypeParameterDeclaration")},O.tsTryParseTypeParameters=function(y){if(this.tsMatchLeftRelational())return this.tsParseTypeParameters(y)},O.tsTryParse=function(y){var b=this.getCurLookaheadState(),k=y();return k!==void 0&&k!==!1?k:void this.setLookaheadState(b)},O.tsTokenCanFollowModifier=function(){return(this.match(u.bracketL)||this.match(u.braceL)||this.match(u.star)||this.match(u.ellipsis)||this.match(u.privateId)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()},O.tsNextTokenCanFollowModifier=function(){return this.next(!0),this.tsTokenCanFollowModifier()},O.tsParseModifier=function(y,b){if(M(this.type)||this.type===u._in){var k=this.value;if(y.indexOf(k)!==-1&&!this.containsEsc){if(b&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return k}}},O.tsParseModifiersByMap=function(y){for(var b=y.modified,k=y.map,F=0,H=Object.keys(k);F<H.length;F++){var W=H[F];b[W]=k[W]}},O.tsParseModifiers=function(y){for(var b=this,k=y.modified,F=y.allowedModifiers,H=y.disallowedModifiers,W=y.stopOnStartOfClassStaticBlock,ne=y.errorTemplate,Z=ne===void 0?At.InvalidModifierOnTypeMember:ne,K={},ae=function(Ae,Ue,He,Qe){Ue===He&&k[Qe]&&b.raise(Ae.column,At.InvalidModifiersOrder({orderedModifiers:[He,Qe]}))},se=function(Ae,Ue,He,Qe){(k[He]&&Ue===Qe||k[Qe]&&Ue===He)&&b.raise(Ae.column,At.IncompatibleModifiers({modifiers:[He,Qe]}))};;){var ye=this.startLoc,me=this.tsParseModifier(F.concat(H??[]),W);if(!me)break;G9(me)?k.accessibility?this.raise(this.start,At.DuplicateAccessibilityModifier()):(ae(ye,me,me,"override"),ae(ye,me,me,"static"),ae(ye,me,me,"readonly"),ae(ye,me,me,"accessor"),K.accessibility=me,k.accessibility=me):m6(me)?k[me]?this.raise(this.start,At.DuplicateModifier({modifier:me})):(ae(ye,me,"in","out"),K[me]=me,k[me]=!0):p6(me)?k[me]?this.raise(this.start,At.DuplicateModifier({modifier:me})):(se(ye,me,"accessor","readonly"),se(ye,me,"accessor","static"),se(ye,me,"accessor","override"),K[me]=me,k[me]=!0):Object.hasOwnProperty.call(k,me)?this.raise(this.start,At.DuplicateModifier({modifier:me})):(ae(ye,me,"static","readonly"),ae(ye,me,"static","override"),ae(ye,me,"override","readonly"),ae(ye,me,"abstract","override"),se(ye,me,"declare","override"),se(ye,me,"static","abstract"),K[me]=me,k[me]=!0),H!=null&&H.includes(me)&&this.raise(this.start,Z)}return K},O.tsParseInOutModifiers=function(y){this.tsParseModifiers({modified:y,allowedModifiers:["in","out"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:At.InvalidModifierOnTypeParameter})},O.tsParseTypeArguments=function(){var y=this,b=this.startNode();return b.params=this.tsInType(function(){return y.tsInNoContext(function(){return y.expect(u.relational),y.tsParseDelimitedList("TypeParametersOrArguments",y.tsParseType.bind(y))})}),b.params.length===0&&this.raise(this.start,At.EmptyTypeArguments),this.exprAllowed=!1,this.expect(u.relational),this.finishNode(b,"TSTypeParameterInstantiation")},O.tsParseHeritageClause=function(y){var b=this,k=this.start,F=this.tsParseDelimitedList("HeritageClauseElement",function(){var H=b.startNode();return H.expression=b.tsParseEntityName(),b.tsMatchLeftRelational()&&(H.typeParameters=b.tsParseTypeArguments()),b.finishNode(H,"TSExpressionWithTypeArguments")});return F.length||this.raise(k,At.EmptyHeritageClauseType({token:y})),F},O.tsParseTypeMemberSemicolon=function(){this.eat(u.comma)||this.isLineTerminator()||this.expect(u.semi)},O.tsTryParseAndCatch=function(y){var b=this.tryParse(function(k){return y()||k()});if(!b.aborted&&b.node)return b.error&&this.setLookaheadState(b.failState),b.node},O.tsParseSignatureMember=function(y,b){return this.tsFillSignature(u.colon,b),this.tsParseTypeMemberSemicolon(),this.finishNode(b,y)},O.tsParsePropertyOrMethodSignature=function(y,b){this.eat(u.question)&&(y.optional=!0);var k=y;if(this.match(u.parenL)||this.tsMatchLeftRelational()){b&&this.raise(y.start,At.ReadonlyForMethodSignature);var F=k;F.kind&&this.tsMatchLeftRelational()&&this.raise(this.start,At.AccesorCannotHaveTypeParameters),this.tsFillSignature(u.colon,F),this.tsParseTypeMemberSemicolon();var H="parameters",W="typeAnnotation";if(F.kind==="get")F[H].length>0&&(this.raise(this.start,"A 'get' accesor must not have any formal parameters."),this.isThisParam(F[H][0])&&this.raise(this.start,At.AccesorCannotDeclareThisParameter));else if(F.kind==="set"){if(F[H].length!==1)this.raise(this.start,"A 'get' accesor must not have any formal parameters.");else{var ne=F[H][0];this.isThisParam(ne)&&this.raise(this.start,At.AccesorCannotDeclareThisParameter),ne.type==="Identifier"&&ne.optional&&this.raise(this.start,At.SetAccesorCannotHaveOptionalParameter),ne.type==="RestElement"&&this.raise(this.start,At.SetAccesorCannotHaveRestParameter)}F[W]&&this.raise(F[W].start,At.SetAccesorCannotHaveReturnType)}else F.kind="method";return this.finishNode(F,"TSMethodSignature")}var Z=k;b&&(Z.readonly=!0);var K=this.tsTryParseTypeAnnotation();return K&&(Z.typeAnnotation=K),this.tsParseTypeMemberSemicolon(),this.finishNode(Z,"TSPropertySignature")},O.tsParseTypeMember=function(){var y=this.startNode();if(this.match(u.parenL)||this.tsMatchLeftRelational())return this.tsParseSignatureMember("TSCallSignatureDeclaration",y);if(this.match(u._new)){var b=this.startNode();return this.next(),this.match(u.parenL)||this.tsMatchLeftRelational()?this.tsParseSignatureMember("TSConstructSignatureDeclaration",y):(y.key=this.createIdentifier(b,"new"),this.tsParsePropertyOrMethodSignature(y,!1))}return this.tsParseModifiers({modified:y,allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]}),this.tsTryParseIndexSignature(y)||(this.parsePropertyName(y),y.computed||y.key.type!=="Identifier"||y.key.name!=="get"&&y.key.name!=="set"||!this.tsTokenCanFollowModifier()||(y.kind=y.key.name,this.parsePropertyName(y)),this.tsParsePropertyOrMethodSignature(y,!!y.readonly))},O.tsParseList=function(y,b){for(var k=[];!this.tsIsListTerminator(y);)k.push(b());return k},O.tsParseObjectTypeMembers=function(){this.expect(u.braceL);var y=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(u.braceR),y},O.tsParseInterfaceDeclaration=function(y,b){if(b===void 0&&(b={}),this.hasFollowingLineBreak())return null;this.expectContextual("interface"),b.declare&&(y.declare=!0),M(this.type)?(y.id=this.parseIdent(),this.checkLValSimple(y.id,7)):(y.id=null,this.raise(this.start,At.MissingInterfaceName)),y.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers.bind(this)),this.eat(u._extends)&&(y.extends=this.tsParseHeritageClause("extends"));var k=this.startNode();return k.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),y.body=this.finishNode(k,"TSInterfaceBody"),this.finishNode(y,"TSInterfaceDeclaration")},O.tsParseAbstractDeclaration=function(y){if(this.match(u._class))return y.abstract=!0,this.parseClass(y,!0);if(this.ts_isContextual(g.interface)){if(!this.hasFollowingLineBreak())return y.abstract=!0,this.tsParseInterfaceDeclaration(y)}else this.unexpected(y.start)},O.tsIsDeclarationStart=function(){return A(this.type)},O.tsParseExpressionStatement=function(y,b){switch(b.name){case"declare":var k=this.tsTryParseDeclare(y);if(k)return k.declare=!0,k;break;case"global":if(this.match(u.braceL)){R.prototype.enterScope.call(this,$c);var F=y;return F.global=!0,F.id=b,F.body=this.tsParseModuleBlock(),R.prototype.exitScope.call(this),this.finishNode(F,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(y,b.name,!1)}},O.tsParseModuleReference=function(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)},O.tsIsExportDefaultSpecifier=function(){var y=this.type,b=this.isAsyncFunction(),k=this.isLet();if(M(y)){if(b&&!this.containsEsc||k)return!1;if((y===g.type||y===g.interface)&&!this.containsEsc){var F=this.lookahead();if(M(F.type)&&!this.isContextualWithState("from",F)||F.type===u.braceL)return!1}}else if(!this.match(u._default))return!1;var H=this.nextTokenStart(),W=this.isUnparsedContextual(H,"from");if(this.input.charCodeAt(H)===44||M(this.type)&&W)return!0;if(this.match(u._default)&&W){var ne=this.input.charCodeAt(this.nextTokenStartSince(H+4));return ne===34||ne===39}return!1},O.tsInAmbientContext=function(y){var b=this.isAmbientContext;this.isAmbientContext=!0;try{return y()}finally{this.isAmbientContext=b}},O.tsCheckLineTerminator=function(y){return y?!this.hasFollowingLineBreak()&&(this.next(),!0):!this.isLineTerminator()},O.tsParseModuleOrNamespaceDeclaration=function(y,b){if(b===void 0&&(b=!1),y.id=this.parseIdent(),b||this.checkLValSimple(y.id,8),this.eat(u.dot)){var k=this.startNode();this.tsParseModuleOrNamespaceDeclaration(k,!0),y.body=k}else R.prototype.enterScope.call(this,$c),y.body=this.tsParseModuleBlock(),R.prototype.exitScope.call(this);return this.finishNode(y,"TSModuleDeclaration")},O.checkLValSimple=function(y,b,k){return b===void 0&&(b=0),R.prototype.checkLValSimple.call(this,y,b,k)},O.tsParseTypeAliasDeclaration=function(y){var b=this;return y.id=this.parseIdent(),this.checkLValSimple(y.id,6),y.typeAnnotation=this.tsInType(function(){if(y.typeParameters=b.tsTryParseTypeParameters(b.tsParseInOutModifiers.bind(b)),b.expect(u.eq),b.ts_isContextual(g.interface)&&b.lookahead().type!==u.dot){var k=b.startNode();return b.next(),b.finishNode(k,"TSIntrinsicKeyword")}return b.tsParseType()}),this.semicolon(),this.finishNode(y,"TSTypeAliasDeclaration")},O.tsParseDeclaration=function(y,b,k){switch(b){case"abstract":if(this.tsCheckLineTerminator(k)&&(this.match(u._class)||M(this.type)))return this.tsParseAbstractDeclaration(y);break;case"module":if(this.tsCheckLineTerminator(k)){if(this.match(u.string))return this.tsParseAmbientExternalModuleDeclaration(y);if(M(this.type))return this.tsParseModuleOrNamespaceDeclaration(y)}break;case"namespace":if(this.tsCheckLineTerminator(k)&&M(this.type))return this.tsParseModuleOrNamespaceDeclaration(y);break;case"type":if(this.tsCheckLineTerminator(k)&&M(this.type))return this.tsParseTypeAliasDeclaration(y)}},O.tsTryParseExportDeclaration=function(){return this.tsParseDeclaration(this.startNode(),this.value,!0)},O.tsParseImportEqualsDeclaration=function(y,b){y.isExport=b||!1,y.id=this.parseIdent(),this.checkLValSimple(y.id,2),R.prototype.expect.call(this,u.eq);var k=this.tsParseModuleReference();return y.importKind==="type"&&k.type!=="TSExternalModuleReference"&&this.raise(k.start,At.ImportAliasHasImportType),y.moduleReference=k,R.prototype.semicolon.call(this),this.finishNode(y,"TSImportEqualsDeclaration")},O.isExportDefaultSpecifier=function(){if(this.tsIsDeclarationStart())return!1;var y=this.type;if(M(y)){if(this.isContextual("async")||this.isContextual("let"))return!1;if((y===g.type||y===g.interface)&&!this.containsEsc){var b=this.lookahead();if(M(b.type)&&!this.isContextualWithState("from",b)||b.type===u.braceL)return!1}}else if(!this.match(u._default))return!1;var k=this.nextTokenStart(),F=this.isUnparsedContextual(k,"from");if(this.input.charCodeAt(k)===44||M(this.type)&&F)return!0;if(this.match(u._default)&&F){var H=this.input.charCodeAt(this.nextTokenStartSince(k+4));return H===34||H===39}return!1},O.parseTemplate=function(y){var b=(y===void 0?{}:y).isTagged,k=b!==void 0&&b,F=this.startNode();this.next(),F.expressions=[];var H=this.parseTemplateElement({isTagged:k});for(F.quasis=[H];!H.tail;)this.type===u.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(u.dollarBraceL),F.expressions.push(this.inType?this.tsParseType():this.parseExpression()),this.expect(u.braceR),F.quasis.push(H=this.parseTemplateElement({isTagged:k}));return this.next(),this.finishNode(F,"TemplateLiteral")},O.parseFunction=function(y,b,k,F,H){this.initFunction(y),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!F)&&(this.type===u.star&&2&b&&this.unexpected(),y.generator=this.eat(u.star)),this.options.ecmaVersion>=8&&(y.async=!!F),1&b&&(y.id=4&b&&this.type!==u.name?null:this.parseIdent());var W=this.yieldPos,ne=this.awaitPos,Z=this.awaitIdentPos,K=this.maybeInArrowParameters;this.maybeInArrowParameters=!1,this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Dg(y.async,y.generator)),1&b||(y.id=this.type===u.name?this.parseIdent():null),this.parseFunctionParams(y);var ae=1&b;return this.parseFunctionBody(y,k,!1,H,{isFunctionDeclaration:ae}),this.yieldPos=W,this.awaitPos=ne,this.awaitIdentPos=Z,1&b&&y.id&&!(2&b)&&this.checkLValSimple(y.id,y.body?this.strict||y.generator||y.async?this.treatFunctionsAsVar?1:2:3:0),this.maybeInArrowParameters=K,this.finishNode(y,ae?"FunctionDeclaration":"FunctionExpression")},O.parseFunctionBody=function(y,b,k,F,H){b===void 0&&(b=!1),k===void 0&&(k=!1),F===void 0&&(F=!1),this.match(u.colon)&&(y.returnType=this.tsParseTypeOrTypePredicateAnnotation(u.colon));var W=H!=null&&H.isFunctionDeclaration?"TSDeclareFunction":H!=null&&H.isClassMethod?"TSDeclareMethod":void 0;return W&&!this.match(u.braceL)&&this.isLineTerminator()?this.finishNode(y,W):W==="TSDeclareFunction"&&this.isAmbientContext&&(this.raise(y.start,At.DeclareFunctionHasImplementation),y.declare)?(R.prototype.parseFunctionBody.call(this,y,b,k,!1),this.finishNode(y,W)):(R.prototype.parseFunctionBody.call(this,y,b,k,F),y)},O.parseNew=function(){var y;this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var b=this.startNode(),k=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(u.dot)){b.meta=k;var F=this.containsEsc;return b.property=this.parseIdent(!0),b.property.name!=="target"&&this.raiseRecoverable(b.property.start,"The only valid meta property for new is 'new.target'"),F&&this.raiseRecoverable(b.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(b.start,"'new.target' can only be used in functions and class static block"),this.finishNode(b,"MetaProperty")}var H=this.start,W=this.startLoc,ne=this.type===u._import;b.callee=this.parseSubscripts(this.parseExprAtom(),H,W,!0,!1),ne&&b.callee.type==="ImportExpression"&&this.raise(H,"Cannot use new with import()");var Z=b.callee;return Z.type!=="TSInstantiationExpression"||(y=Z.extra)!=null&&y.parenthesized||(b.typeParameters=Z.typeParameters,b.callee=Z.expression),b.arguments=this.eat(u.parenL)?this.parseExprList(u.parenR,this.options.ecmaVersion>=8,!1):[],this.finishNode(b,"NewExpression")},O.parseExprOp=function(y,b,k,F,H){var W;if(u._in.binop>F&&!this.hasPrecedingLineBreak()&&(this.isContextual("as")&&(W="TSAsExpression"),s&&this.isContextual("satisfies")&&(W="TSSatisfiesExpression"),W)){var ne=this.startNodeAt(b,k);ne.expression=y;var Z=this.tsTryNextParseConstantContext();return ne.typeAnnotation=Z||this.tsNextThenParseType(),this.finishNode(ne,W),this.reScan_lt_gt(),this.parseExprOp(ne,b,k,F,H)}return R.prototype.parseExprOp.call(this,y,b,k,F,H)},O.parseImportSpecifiers=function(){var y=[],b=!0;if(l.tokenIsIdentifier(this.type)&&(y.push(this.parseImportDefaultSpecifier()),!this.eat(u.comma)))return y;if(this.type===u.star)return y.push(this.parseImportNamespaceSpecifier()),y;for(this.expect(u.braceL);!this.eat(u.braceR);){if(b)b=!1;else if(this.expect(u.comma),this.afterTrailingComma(u.braceR))break;y.push(this.parseImportSpecifier())}return y},O.parseImport=function(y){var b=this.lookahead();if(y.importKind="value",this.importOrExportOuterKind="value",M(b.type)||this.match(u.star)||this.match(u.braceL)){var k=this.lookahead(2);if(k.type!==u.comma&&!this.isContextualWithState("from",k)&&k.type!==u.eq&&this.ts_eatContextualWithState("type",1,b)&&(this.importOrExportOuterKind="type",y.importKind="type",b=this.lookahead(),k=this.lookahead(2)),M(b.type)&&k.type===u.eq){this.next();var F=this.tsParseImportEqualsDeclaration(y);return this.importOrExportOuterKind="value",F}}return this.next(),this.type===u.string?(y.specifiers=[],y.source=this.parseExprAtom()):(y.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),y.source=this.type===u.string?this.parseExprAtom():this.unexpected()),this.parseMaybeImportAttributes(y),this.semicolon(),this.finishNode(y,"ImportDeclaration"),this.importOrExportOuterKind="value",y.importKind==="type"&&y.specifiers.length>1&&y.specifiers[0].type==="ImportDefaultSpecifier"&&this.raise(y.start,At.TypeImportCannotSpecifyDefaultAndNamed),y},O.parseExportDefaultDeclaration=function(){if(this.isAbstractClass()){var y=this.startNode();return this.next(),y.abstract=!0,this.parseClass(y,!0)}if(this.match(g.interface)){var b=this.tsParseInterfaceDeclaration(this.startNode());if(b)return b}return R.prototype.parseExportDefaultDeclaration.call(this)},O.parseExportAllDeclaration=function(y,b){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(y.exported=this.parseModuleExportName(),this.checkExport(b,y.exported,this.lastTokStart)):y.exported=null),this.expectContextual("from"),this.type!==u.string&&this.unexpected(),y.source=this.parseExprAtom(),this.parseMaybeImportAttributes(y),this.semicolon(),this.finishNode(y,"ExportAllDeclaration")},O.parseDynamicImport=function(y){if(this.next(),y.source=this.parseMaybeAssign(),this.eat(u.comma)){var b=this.parseExpression();y.arguments=[b]}if(!this.eat(u.parenR)){var k=this.start;this.eat(u.comma)&&this.eat(u.parenR)?this.raiseRecoverable(k,"Trailing comma is not allowed in import()"):this.unexpected(k)}return this.finishNode(y,"ImportExpression")},O.parseExport=function(y,b){var k=this.lookahead();if(this.ts_eatWithState(u._import,2,k)){this.ts_isContextual(g.type)&&this.lookaheadCharCode()!==61?(y.importKind="type",this.importOrExportOuterKind="type",this.next()):(y.importKind="value",this.importOrExportOuterKind="value");var F=this.tsParseImportEqualsDeclaration(y,!0);return this.importOrExportOuterKind=void 0,F}if(this.ts_eatWithState(u.eq,2,k)){var H=y;return H.expression=this.parseExpression(),this.semicolon(),this.importOrExportOuterKind=void 0,this.finishNode(H,"TSExportAssignment")}if(this.ts_eatContextualWithState("as",2,k)){var W=y;return this.expectContextual("namespace"),W.id=this.parseIdent(),this.semicolon(),this.importOrExportOuterKind=void 0,this.finishNode(W,"TSNamespaceExportDeclaration")}if(this.ts_isContextualWithState(k,g.type)&&this.lookahead(2).type===u.braceL?(this.next(),this.importOrExportOuterKind="type",y.exportKind="type"):(this.importOrExportOuterKind="value",y.exportKind="value"),this.next(),this.eat(u.star))return this.parseExportAllDeclaration(y,b);if(this.eat(u._default))return this.checkExport(b,"default",this.lastTokStart),y.declaration=this.parseExportDefaultDeclaration(),this.finishNode(y,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())y.declaration=this.parseExportDeclaration(y),y.declaration.type==="VariableDeclaration"?this.checkVariableExport(b,y.declaration.declarations):this.checkExport(b,y.declaration.id,y.declaration.id.start),y.specifiers=[],y.source=null;else{if(y.declaration=null,y.specifiers=this.parseExportSpecifiers(b),this.eatContextual("from"))this.type!==u.string&&this.unexpected(),y.source=this.parseExprAtom(),this.parseMaybeImportAttributes(y);else{for(var ne,Z=V9(y.specifiers);!(ne=Z()).done;){var K=ne.value;this.checkUnreserved(K.local),this.checkLocalExport(K.local),K.local.type==="Literal"&&this.raise(K.local.start,"A string literal cannot be used as an exported binding without `from`.")}y.source=null}this.semicolon()}return this.finishNode(y,"ExportNamedDeclaration")},O.checkExport=function(y,b,k){y&&(typeof b!="string"&&(b=b.type==="Identifier"?b.name:b.value),y[b]=!0)},O.parseMaybeDefault=function(y,b,k){var F=R.prototype.parseMaybeDefault.call(this,y,b,k);return F.type==="AssignmentPattern"&&F.typeAnnotation&&F.right.start<F.typeAnnotation.start&&this.raise(F.typeAnnotation.start,At.TypeAnnotationAfterAssign),F},O.typeCastToParameter=function(y){return y.expression.typeAnnotation=y.typeAnnotation,this.resetEndLocation(y.expression,y.typeAnnotation.end),y.expression},O.toAssignableList=function(y,b){for(var k=0;k<y.length;k++){var F=y[k];(F==null?void 0:F.type)==="TSTypeCastExpression"&&(y[k]=this.typeCastToParameter(F))}return R.prototype.toAssignableList.call(this,y,b)},O.reportReservedArrowTypeParam=function(y){},O.parseExprAtom=function(y,b,k){if(this.type===g.jsxText)return this.jsx_parseText();if(this.type===g.jsxTagStart)return this.jsx_parseElement();if(this.type===g.at)return this.parseDecorators(),this.parseExprAtom();if(M(this.type)){var F=this.potentialArrowAt===this.start,H=this.start,W=this.startLoc,ne=this.containsEsc,Z=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!ne&&Z.name==="async"&&!this.canInsertSemicolon()&&this.eat(u._function))return this.overrideContext(P.f_expr),this.parseFunction(this.startNodeAt(H,W),0,!1,!0,b);if(F&&!this.canInsertSemicolon()){if(this.eat(u.arrow))return this.parseArrowExpression(this.startNodeAt(H,W),[Z],!1,b);if(this.options.ecmaVersion>=8&&Z.name==="async"&&this.type===u.name&&!ne&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Z=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(u.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(H,W),[Z],!0,b)}return Z}return R.prototype.parseExprAtom.call(this,y,b,k)},O.parseExprAtomDefault=function(){if(M(this.type)){var y=this.potentialArrowAt===this.start,b=this.containsEsc,k=this.parseIdent();if(!b&&k.name==="async"&&!this.canInsertSemicolon()){var F=this.type;if(F===u._function)return this.next(),this.parseFunction(this.startNodeAtNode(k),void 0,!0,!0);if(M(F)){if(this.lookaheadCharCode()===61){var H=this.parseIdent(!1);return!this.canInsertSemicolon()&&this.eat(u.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAtNode(k),[H],!0)}return k}}return y&&this.match(u.arrow)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(k),[k],!1)):k}this.unexpected()},O.parseIdentNode=function(){var y=this.startNode();return E(this.type)?(y.name=this.value,y):R.prototype.parseIdentNode.call(this)},O.parseVarStatement=function(y,b,k){k===void 0&&(k=!1);var F=this.isAmbientContext;this.next(),R.prototype.parseVar.call(this,y,!1,b,k||F),this.semicolon();var H=this.finishNode(y,"VariableDeclaration");if(!F)return H;for(var W,ne=V9(H.declarations);!(W=ne()).done;){var Z=W.value,K=Z.init;K&&(b!=="const"||Z.id.typeAnnotation?this.raise(K.start,At.InitializerNotAllowedInAmbientContext):K.type!=="StringLiteral"&&K.type!=="BooleanLiteral"&&K.type!=="NumericLiteral"&&K.type!=="BigIntLiteral"&&(K.type!=="TemplateLiteral"||K.expressions.length>0)&&!v6(K)&&this.raise(K.start,At.ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference))}return H},O.parseStatement=function(y,b,k){if(this.match(g.at)&&this.parseDecorators(!0),this.match(u._const)&&this.isLookaheadContextual("enum")){var F=this.startNode();return this.expect(u._const),this.tsParseEnumDeclaration(F,{const:!0})}if(this.ts_isContextual(g.enum))return this.tsParseEnumDeclaration(this.startNode());if(this.ts_isContextual(g.interface)){var H=this.tsParseInterfaceDeclaration(this.startNode());if(H)return H}return R.prototype.parseStatement.call(this,y,b,k)},O.parseAccessModifier=function(){return this.tsParseModifier(["public","protected","private"])},O.parsePostMemberNameModifiers=function(y){this.eat(u.question)&&(y.optional=!0),y.readonly&&this.match(u.parenL)&&this.raise(y.start,At.ClassMethodHasReadonly),y.declare&&this.match(u.parenL)&&this.raise(y.start,At.ClassMethodHasDeclare)},O.parseExpressionStatement=function(y,b){return(b.type==="Identifier"?this.tsParseExpressionStatement(y,b):void 0)||R.prototype.parseExpressionStatement.call(this,y,b)},O.shouldParseExportStatement=function(){return!!this.tsIsDeclarationStart()||!!this.match(g.at)||R.prototype.shouldParseExportStatement.call(this)},O.parseConditional=function(y,b,k,F,H){if(this.eat(u.question)){var W=this.startNodeAt(b,k);return W.test=y,W.consequent=this.parseMaybeAssign(),this.expect(u.colon),W.alternate=this.parseMaybeAssign(F),this.finishNode(W,"ConditionalExpression")}return y},O.parseMaybeConditional=function(y,b){var k=this,F=this.start,H=this.startLoc,W=this.parseExprOps(y,b);if(this.checkExpressionErrors(b))return W;if(!this.maybeInArrowParameters||!this.match(u.question))return this.parseConditional(W,F,H,y,b);var ne=this.tryParse(function(){return k.parseConditional(W,F,H,y,b)});return ne.node?(ne.error&&this.setLookaheadState(ne.failState),ne.node):(ne.error&&this.setOptionalParametersError(b,ne.error),W)},O.parseParenItem=function(y){var b=this.start,k=this.startLoc;if(y=R.prototype.parseParenItem.call(this,y),this.eat(u.question)&&(y.optional=!0,this.resetEndLocation(y)),this.match(u.colon)){var F=this.startNodeAt(b,k);return F.expression=y,F.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(F,"TSTypeCastExpression")}return y},O.parseExportDeclaration=function(y){var b=this;if(!this.isAmbientContext&&this.ts_isContextual(g.declare))return this.tsInAmbientContext(function(){return b.parseExportDeclaration(y)});var k=this.start,F=this.startLoc,H=this.eatContextual("declare");!H||!this.ts_isContextual(g.declare)&&this.shouldParseExportStatement()||this.raise(this.start,At.ExpectedAmbientAfterExportDeclare);var W=M(this.type)&&this.tsTryParseExportDeclaration()||this.parseStatement(null);return W?((W.type==="TSInterfaceDeclaration"||W.type==="TSTypeAliasDeclaration"||H)&&(y.exportKind="type"),H&&(this.resetStartLocation(W,k,F),W.declare=!0),W):null},O.parseClassId=function(y,b){if(b||!this.isContextual("implements")){R.prototype.parseClassId.call(this,y,b);var k=this.tsTryParseTypeParameters(this.tsParseInOutModifiers.bind(this));k&&(y.typeParameters=k)}},O.parseClassPropertyAnnotation=function(y){y.optional||(this.value==="!"&&this.eat(u.prefix)?y.definite=!0:this.eat(u.question)&&(y.optional=!0));var b=this.tsTryParseTypeAnnotation();b&&(y.typeAnnotation=b)},O.parseClassField=function(y){if(y.key.type==="PrivateIdentifier")y.abstract&&this.raise(y.start,At.PrivateElementHasAbstract),y.accessibility&&this.raise(y.start,At.PrivateElementHasAccessibility({modifier:y.accessibility})),this.parseClassPropertyAnnotation(y);else if(this.parseClassPropertyAnnotation(y),this.isAmbientContext&&(!y.readonly||y.typeAnnotation)&&this.match(u.eq)&&this.raise(this.start,At.DeclareClassFieldHasInitializer),y.abstract&&this.match(u.eq)){var b=y.key;this.raise(this.start,At.AbstractPropertyHasInitializer({propertyName:b.type!=="Identifier"||y.computed?"["+this.input.slice(b.start,b.end)+"]":b.name}))}return R.prototype.parseClassField.call(this,y)},O.parseClassMethod=function(y,b,k,F){var H=y.kind==="constructor",W=y.key.type==="PrivateIdentifier",ne=this.tsTryParseTypeParameters();W?(ne&&(y.typeParameters=ne),y.accessibility&&this.raise(y.start,At.PrivateMethodsHasAccessibility({modifier:y.accessibility}))):ne&&H&&this.raise(ne.start,At.ConstructorHasTypeParameters);var Z=y.declare,K=y.kind;!(Z!==void 0&&Z)||K!=="get"&&K!=="set"||this.raise(y.start,At.DeclareAccessor({kind:K})),ne&&(y.typeParameters=ne);var ae=y.key;y.kind==="constructor"?(b&&this.raise(ae.start,"Constructor can't be a generator"),k&&this.raise(ae.start,"Constructor can't be an async method")):y.static&&H9(y,"prototype")&&this.raise(ae.start,"Classes may not have a static property named prototype");var se=y.value=this.parseMethod(b,k,F,!0,y);return y.kind==="get"&&se.params.length!==0&&this.raiseRecoverable(se.start,"getter should have no params"),y.kind==="set"&&se.params.length!==1&&this.raiseRecoverable(se.start,"setter should have exactly one param"),y.kind==="set"&&se.params[0].type==="RestElement"&&this.raiseRecoverable(se.params[0].start,"Setter cannot use rest params"),this.finishNode(y,"MethodDefinition")},O.isClassMethod=function(){return this.match(u.relational)},O.parseClassElement=function(y){var b=this;if(this.eat(u.semi))return null;var k,F=this.options.ecmaVersion,H=this.startNode(),W="",ne=!1,Z=!1,K="method",ae=["declare","private","public","protected","accessor","override","abstract","readonly","static"],se=this.tsParseModifiers({modified:H,allowedModifiers:ae,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:At.InvalidModifierOnTypeParameterPositions});k=!!se.static;var ye=function(){if(!b.tsIsStartOfStaticBlocks()){var me=b.tsTryParseIndexSignature(H);if(me)return H.abstract&&b.raise(H.start,At.IndexSignatureHasAbstract),H.accessibility&&b.raise(H.start,At.IndexSignatureHasAccessibility({modifier:H.accessibility})),H.declare&&b.raise(H.start,At.IndexSignatureHasDeclare),H.override&&b.raise(H.start,At.IndexSignatureHasOverride),me;if(!b.inAbstractClass&&H.abstract&&b.raise(H.start,At.NonAbstractClassHasAbstractMethod),H.override&&y&&b.raise(H.start,At.OverrideNotInSubClass),H.static=k,k&&(b.isClassElementNameStart()||b.type===u.star||(W="static")),!W&&F>=8&&b.eatContextual("async")&&(!b.isClassElementNameStart()&&b.type!==u.star||b.canInsertSemicolon()?W="async":Z=!0),!W&&(F>=9||!Z)&&b.eat(u.star)&&(ne=!0),!W&&!Z&&!ne){var Ae=b.value;(b.eatContextual("get")||b.eatContextual("set"))&&(b.isClassElementNameStart()?K=Ae:W=Ae)}if(W?(H.computed=!1,H.key=b.startNodeAt(b.lastTokStart,b.lastTokStartLoc),H.key.name=W,b.finishNode(H.key,"Identifier")):b.parseClassElementName(H),b.parsePostMemberNameModifiers(H),b.isClassMethod()||F<13||b.type===u.parenL||K!=="method"||ne||Z){var Ue=!H.static&&H9(H,"constructor"),He=Ue&&y;Ue&&K!=="method"&&b.raise(H.key.start,"Constructor can't have get/set modifier"),H.kind=Ue?"constructor":K,b.parseClassMethod(H,ne,Z,He)}else b.parseClassField(H);return H}if(b.next(),b.next(),b.tsHasSomeModifiers(H,ae)&&b.raise(b.start,At.StaticBlockCannotHaveModifier),F>=13)return R.prototype.parseClassStaticBlock.call(b,H),H};return H.declare?this.tsInAmbientContext(ye):ye(),H},O.isClassElementNameStart=function(){return!!this.tsIsIdentifier()||R.prototype.isClassElementNameStart.call(this)},O.parseClassSuper=function(y){R.prototype.parseClassSuper.call(this,y),y.superClass&&(this.tsMatchLeftRelational()||this.match(u.bitShift))&&(y.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual("implements")&&(y.implements=this.tsParseHeritageClause("implements"))},O.parseFunctionParams=function(y){var b=this.tsTryParseTypeParameters();b&&(y.typeParameters=b),R.prototype.parseFunctionParams.call(this,y)},O.parseVarId=function(y,b){R.prototype.parseVarId.call(this,y,b),y.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.value==="!"&&this.eat(u.prefix)&&(y.definite=!0);var k=this.tsTryParseTypeAnnotation();k&&(y.id.typeAnnotation=k,this.resetEndLocation(y.id))},O.parseArrowExpression=function(y,b,k,F){this.match(u.colon)&&(y.returnType=this.tsParseTypeAnnotation());var H=this.yieldPos,W=this.awaitPos,ne=this.awaitIdentPos;this.enterScope(16|Dg(k,!1)),this.initFunction(y);var Z=this.maybeInArrowParameters;return this.options.ecmaVersion>=8&&(y.async=!!k),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.maybeInArrowParameters=!0,y.params=this.toAssignableList(b,!0),this.maybeInArrowParameters=!1,this.parseFunctionBody(y,!0,!1,F),this.yieldPos=H,this.awaitPos=W,this.awaitIdentPos=ne,this.maybeInArrowParameters=Z,this.finishNode(y,"ArrowFunctionExpression")},O.parseMaybeAssignOrigin=function(y,b,k){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(y);this.exprAllowed=!1}var F=!1,H=-1,W=-1,ne=-1;b?(H=b.parenthesizedAssign,W=b.trailingComma,ne=b.doubleProto,b.parenthesizedAssign=b.trailingComma=-1):(b=new Vc,F=!0);var Z=this.start,K=this.startLoc;(this.type===u.parenL||M(this.type))&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=y==="await");var ae=this.parseMaybeConditional(y,b);if(k&&(ae=k.call(this,ae,Z,K)),this.type.isAssign){var se=this.startNodeAt(Z,K);return se.operator=this.value,this.type===u.eq&&(ae=this.toAssignable(ae,!0,b)),F||(b.parenthesizedAssign=b.trailingComma=b.doubleProto=-1),b.shorthandAssign>=ae.start&&(b.shorthandAssign=-1),this.type===u.eq?this.checkLValPattern(ae):this.checkLValSimple(ae),se.left=ae,this.next(),se.right=this.parseMaybeAssign(y),ne>-1&&(b.doubleProto=ne),this.finishNode(se,"AssignmentExpression")}return F&&this.checkExpressionErrors(b,!0),H>-1&&(b.parenthesizedAssign=H),W>-1&&(b.trailingComma=W),ae},O.parseMaybeAssign=function(y,b,k){var F,H,W,ne,Z,K,ae,se,ye,me,Ae,Ue=this;if(this.matchJsx("jsxTagStart")||this.tsMatchLeftRelational()){if(se=this.cloneCurLookaheadState(),!(ye=this.tryParse(function(){return Ue.parseMaybeAssignOrigin(y,b,k)},se)).error)return ye.node;var He=this.context,Qe=He[He.length-1];Qe===l.tokContexts.tc_oTag&&He[He.length-2]===l.tokContexts.tc_expr?(He.pop(),He.pop()):Qe!==l.tokContexts.tc_oTag&&Qe!==l.tokContexts.tc_expr||He.pop()}if(!((F=ye)!=null&&F.error||this.tsMatchLeftRelational()))return this.parseMaybeAssignOrigin(y,b,k);se&&!this.compareLookaheadState(se,this.getCurLookaheadState())||(se=this.cloneCurLookaheadState());var ie=this.tryParse(function(dt){var ke,ut;Ae=Ue.tsParseTypeParameters();var tt=Ue.parseMaybeAssignOrigin(y,b,k);return(tt.type!=="ArrowFunctionExpression"||(ke=tt.extra)!=null&&ke.parenthesized)&&dt(),((ut=Ae)==null?void 0:ut.params.length)!==0&&Ue.resetStartLocationFromNode(tt,Ae),tt.typeParameters=Ae,tt},se);if(!ie.error&&!ie.aborted)return Ae&&this.reportReservedArrowTypeParam(Ae),ie.node;if(!ye&&(z9(!0),!(me=this.tryParse(function(){return Ue.parseMaybeAssignOrigin(y,b,k)},se)).error))return me.node;if((H=ye)!=null&&H.node)return this.setLookaheadState(ye.failState),ye.node;if(ie.node)return this.setLookaheadState(ie.failState),Ae&&this.reportReservedArrowTypeParam(Ae),ie.node;if((W=me)!=null&&W.node)return this.setLookaheadState(me.failState),me.node;throw(ne=ye)!=null&&ne.thrown?ye.error:ie.thrown?ie.error:(Z=me)!=null&&Z.thrown?me.error:((K=ye)==null?void 0:K.error)||ie.error||((ae=me)==null?void 0:ae.error)},O.parseAssignableListItem=function(y){for(var b=[];this.match(g.at);)b.push(this.parseDecorator());var k,F=this.start,H=this.startLoc,W=!1,ne=!1;if(y!==void 0){var Z={};this.tsParseModifiers({modified:Z,allowedModifiers:["public","private","protected","override","readonly"]}),k=Z.accessibility,ne=Z.override,W=Z.readonly,y===!1&&(k||W||ne)&&this.raise(H.start,At.UnexpectedParameterModifier)}var K=this.parseMaybeDefault(F,H);this.parseBindingListItem(K);var ae=this.parseMaybeDefault(K.start,K.loc,K);if(b.length&&(ae.decorators=b),k||W||ne){var se=this.startNodeAt(F,H);return k&&(se.accessibility=k),W&&(se.readonly=W),ne&&(se.override=ne),ae.type!=="Identifier"&&ae.type!=="AssignmentPattern"&&this.raise(se.start,At.UnsupportedParameterPropertyKind),se.parameter=ae,this.finishNode(se,"TSParameterProperty")}return ae},O.checkLValInnerPattern=function(y,b,k){b===void 0&&(b=0),y.type==="TSParameterProperty"?this.checkLValInnerPattern(y.parameter,b,k):R.prototype.checkLValInnerPattern.call(this,y,b,k)},O.parseBindingListItem=function(y){this.eat(u.question)&&(y.type==="Identifier"||this.isAmbientContext||this.inType||this.raise(y.start,At.PatternIsOptional),y.optional=!0);var b=this.tsTryParseTypeAnnotation();return b&&(y.typeAnnotation=b),this.resetEndLocation(y),y},O.isAssignable=function(y,b){var k=this;switch(y.type){case"TSTypeCastExpression":return this.isAssignable(y.expression,b);case"TSParameterProperty":case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":var F=y.properties.length-1;return y.properties.every(function(H,W){return H.type!=="ObjectMethod"&&(W===F||H.type!=="SpreadElement")&&k.isAssignable(H)});case"Property":case"ObjectProperty":return this.isAssignable(y.value);case"SpreadElement":return this.isAssignable(y.argument);case"ArrayExpression":return y.elements.every(function(H){return H===null||k.isAssignable(H)});case"AssignmentExpression":return y.operator==="=";case"ParenthesizedExpression":return this.isAssignable(y.expression);case"MemberExpression":case"OptionalMemberExpression":return!b;default:return!1}},O.toAssignable=function(y,b,k){switch(b===void 0&&(b=!1),k===void 0&&(k=new Vc),y.type){case"ParenthesizedExpression":return this.toAssignableParenthesizedExpression(y,b,k);case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":return b||this.raise(y.start,At.UnexpectedTypeCastInParameter),this.toAssignable(y.expression,b,k);case"MemberExpression":break;case"AssignmentExpression":return b||y.left.type!=="TSTypeCastExpression"||(y.left=this.typeCastToParameter(y.left)),R.prototype.toAssignable.call(this,y,b,k);case"TSTypeCastExpression":return this.typeCastToParameter(y);default:return R.prototype.toAssignable.call(this,y,b,k)}return y},O.toAssignableParenthesizedExpression=function(y,b,k){switch(y.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":return this.toAssignable(y.expression,b,k);default:return R.prototype.toAssignable.call(this,y,b,k)}},O.curPosition=function(){if(this.options.locations){var y=R.prototype.curPosition.call(this);return Object.defineProperty(y,"offset",{get:function(){return function(b){var k=new o.Position(this.line,this.column+b);return k.index=this.index+b,k}}}),y.index=this.pos,y}},O.parseBindingAtom=function(){return this.type===u._this?this.parseIdent(!0):R.prototype.parseBindingAtom.call(this)},O.shouldParseArrow=function(y){var b,k=this;if(b=this.match(u.colon)?y.every(function(H){return k.isAssignable(H,!0)}):!this.canInsertSemicolon()){if(this.match(u.colon)){var F=this.tryParse(function(H){var W=k.tsParseTypeOrTypePredicateAnnotation(u.colon);return!k.canInsertSemicolon()&&k.match(u.arrow)||H(),W});if(F.aborted)return this.shouldParseArrowReturnType=void 0,!1;F.thrown||(F.error&&this.setLookaheadState(F.failState),this.shouldParseArrowReturnType=F.node)}return!!this.match(u.arrow)||(this.shouldParseArrowReturnType=void 0,!1)}return this.shouldParseArrowReturnType=void 0,b},O.parseParenArrowList=function(y,b,k,F){var H=this.startNodeAt(y,b);return H.returnType=this.shouldParseArrowReturnType,this.shouldParseArrowReturnType=void 0,this.parseArrowExpression(H,k,!1,F)},O.parseParenAndDistinguishExpression=function(y,b){var k,F=this.start,H=this.startLoc,W=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){var ne=this.maybeInArrowParameters;this.maybeInArrowParameters=!0,this.next();var Z,K=this.start,ae=this.startLoc,se=[],ye=!0,me=!1,Ae=new Vc,Ue=this.yieldPos,He=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==u.parenR;){if(ye?ye=!1:this.expect(u.comma),W&&this.afterTrailingComma(u.parenR,!0)){me=!0;break}if(this.type===u.ellipsis){Z=this.start,se.push(this.parseParenItem(this.parseRestBinding())),this.type===u.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}se.push(this.parseMaybeAssign(b,Ae,this.parseParenItem))}var Qe=this.lastTokEnd,ie=this.lastTokEndLoc;if(this.expect(u.parenR),this.maybeInArrowParameters=ne,y&&this.shouldParseArrow(se)&&this.eat(u.arrow))return this.checkPatternErrors(Ae,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Ue,this.awaitPos=He,this.parseParenArrowList(F,H,se,b);se.length&&!me||this.unexpected(this.lastTokStart),Z&&this.unexpected(Z),this.checkExpressionErrors(Ae,!0),this.yieldPos=Ue||this.yieldPos,this.awaitPos=He||this.awaitPos,se.length>1?((k=this.startNodeAt(K,ae)).expressions=se,this.finishNodeAt(k,"SequenceExpression",Qe,ie)):k=se[0]}else k=this.parseParenExpression();if(this.options.preserveParens){var dt=this.startNodeAt(F,H);return dt.expression=k,this.finishNode(dt,"ParenthesizedExpression")}return k},O.parseTaggedTemplateExpression=function(y,b,k,F){var H=this.startNodeAt(b,k);return H.tag=y,H.quasi=this.parseTemplate({isTagged:!0}),F&&this.raise(b,"Tagged Template Literals are not allowed in optionalChain."),this.finishNode(H,"TaggedTemplateExpression")},O.shouldParseAsyncArrow=function(){var y=this;if(!this.match(u.colon))return!this.canInsertSemicolon()&&this.eat(u.arrow);var b=this.tryParse(function(k){var F=y.tsParseTypeOrTypePredicateAnnotation(u.colon);return!y.canInsertSemicolon()&&y.match(u.arrow)||k(),F});return b.aborted?(this.shouldParseAsyncArrowReturnType=void 0,!1):b.thrown?void 0:(b.error&&this.setLookaheadState(b.failState),this.shouldParseAsyncArrowReturnType=b.node,!this.canInsertSemicolon()&&this.eat(u.arrow))},O.parseSubscriptAsyncArrow=function(y,b,k,F){var H=this.startNodeAt(y,b);return H.returnType=this.shouldParseAsyncArrowReturnType,this.shouldParseAsyncArrowReturnType=void 0,this.parseArrowExpression(H,k,!0,F)},O.parseExprList=function(y,b,k,F){for(var H=[],W=!0;!this.eat(y);){if(W)W=!1;else if(this.expect(u.comma),b&&this.afterTrailingComma(y))break;var ne=void 0;k&&this.type===u.comma?ne=null:this.type===u.ellipsis?(ne=this.parseSpread(F),F&&this.type===u.comma&&F.trailingComma<0&&(F.trailingComma=this.start)):ne=this.parseMaybeAssign(!1,F,this.parseParenItem),H.push(ne)}return H},O.parseSubscript=function(y,b,k,F,H,W,ne){var Z=this,K=W;if(!this.hasPrecedingLineBreak()&&this.value==="!"&&this.match(u.prefix)){this.exprAllowed=!1,this.next();var ae=this.startNodeAt(b,k);return ae.expression=y,y=this.finishNode(ae,"TSNonNullExpression")}var se=!1;if(this.match(u.questionDot)&&this.lookaheadCharCode()===60){if(F)return y;y.optional=!0,K=se=!0,this.next()}if(this.tsMatchLeftRelational()||this.match(u.bitShift)){var ye,me=this.tsTryParseAndCatch(function(){if(!F&&Z.atPossibleAsyncArrow(y)){var X=Z.tsTryParseGenericAsyncArrowFunction(b,k,ne);if(X)return y=X}var te=Z.tsParseTypeArgumentsInExpression();if(!te)return y;if(se&&!Z.match(u.parenL))return ye=Z.curPosition(),y;if(C(Z.type)||Z.type===u.backQuote){var fe=Z.parseTaggedTemplateExpression(y,b,k,K);return fe.typeParameters=te,fe}if(!F&&Z.eat(u.parenL)){var de=new Vc,he=Z.startNodeAt(b,k);return he.callee=y,he.arguments=Z.parseExprList(u.parenR,Z.options.ecmaVersion>=8,!1,de),Z.tsCheckForInvalidTypeCasts(he.arguments),he.typeParameters=te,K&&(he.optional=se),Z.checkExpressionErrors(de,!0),y=Z.finishNode(he,"CallExpression")}var Be=Z.type;if(!(Z.tsMatchRightRelational()||Be===u.bitShift||Be!==u.parenL&&(Ie=Be,!!Ie.startsExpr)&&!Z.hasPrecedingLineBreak())){var Ie,Ge=Z.startNodeAt(b,k);return Ge.expression=y,Ge.typeParameters=te,Z.finishNode(Ge,"TSInstantiationExpression")}});if(ye&&this.unexpected(ye),me)return me.type==="TSInstantiationExpression"&&(this.match(u.dot)||this.match(u.questionDot)&&this.lookaheadCharCode()!==40)&&this.raise(this.start,At.InvalidPropertyAccessAfterInstantiationExpression),y=me}var Ae=this.options.ecmaVersion>=11,Ue=Ae&&this.eat(u.questionDot);F&&Ue&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var He=this.eat(u.bracketL);if(He||Ue&&this.type!==u.parenL&&this.type!==u.backQuote||this.eat(u.dot)){var Qe=this.startNodeAt(b,k);Qe.object=y,He?(Qe.property=this.parseExpression(),this.expect(u.bracketR)):Qe.property=this.type===u.privateId&&y.type!=="Super"?this.parsePrivateIdent():this.parseIdent(this.options.allowReserved!=="never"),Qe.computed=!!He,Ae&&(Qe.optional=Ue),y=this.finishNode(Qe,"MemberExpression")}else if(!F&&this.eat(u.parenL)){var ie=this.maybeInArrowParameters;this.maybeInArrowParameters=!0;var dt=new Vc,ke=this.yieldPos,ut=this.awaitPos,tt=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Pt=this.parseExprList(u.parenR,this.options.ecmaVersion>=8,!1,dt);if(H&&!Ue&&this.shouldParseAsyncArrow())this.checkPatternErrors(dt,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=ke,this.awaitPos=ut,this.awaitIdentPos=tt,y=this.parseSubscriptAsyncArrow(b,k,Pt,ne);else{this.checkExpressionErrors(dt,!0),this.yieldPos=ke||this.yieldPos,this.awaitPos=ut||this.awaitPos,this.awaitIdentPos=tt||this.awaitIdentPos;var lt=this.startNodeAt(b,k);lt.callee=y,lt.arguments=Pt,Ae&&(lt.optional=Ue),y=this.finishNode(lt,"CallExpression")}this.maybeInArrowParameters=ie}else if(this.type===u.backQuote){(Ue||K)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var re=this.startNodeAt(b,k);re.tag=y,re.quasi=this.parseTemplate({isTagged:!0}),y=this.finishNode(re,"TaggedTemplateExpression")}return y},O.parseGetterSetter=function(y){y.kind=y.key.name,this.parsePropertyName(y),y.value=this.parseMethod(!1);var b=y.kind==="get"?0:1,k=y.value.params[0],F=k&&this.isThisParam(k);y.value.params.length!==(b=F?b+1:b)?this.raiseRecoverable(y.value.start,y.kind==="get"?"getter should have no params":"setter should have exactly one param"):y.kind==="set"&&y.value.params[0].type==="RestElement"&&this.raiseRecoverable(y.value.params[0].start,"Setter cannot use rest params")},O.parseProperty=function(y,b){if(!y){var k=[];if(this.match(g.at))for(;this.match(g.at);)k.push(this.parseDecorator());var F=R.prototype.parseProperty.call(this,y,b);return F.type==="SpreadElement"&&k.length&&this.raise(F.start,"Decorators can't be used with SpreadElement"),k.length&&(F.decorators=k,k=[]),F}return R.prototype.parseProperty.call(this,y,b)},O.parseCatchClauseParam=function(){var y=this.parseBindingAtom(),b=y.type==="Identifier";this.enterScope(b?32:0),this.checkLValPattern(y,b?4:2);var k=this.tsTryParseTypeAnnotation();return k&&(y.typeAnnotation=k,this.resetEndLocation(y)),this.expect(u.parenR),y},O.parseClass=function(y,b){var k=this.inAbstractClass;this.inAbstractClass=!!y.abstract;try{this.next(),this.takeDecorators(y);var F=this.strict;this.strict=!0,this.parseClassId(y,b),this.parseClassSuper(y);var H=this.enterClassBody(),W=this.startNode(),ne=!1;W.body=[];var Z=[];for(this.expect(u.braceL);this.type!==u.braceR;)if(this.match(g.at))Z.push(this.parseDecorator());else{var K=this.parseClassElement(y.superClass!==null);Z.length&&(K.decorators=Z,this.resetStartLocationFromNode(K,Z[0]),Z=[]),K&&(W.body.push(K),K.type==="MethodDefinition"&&K.kind==="constructor"&&K.value.type==="FunctionExpression"?(ne&&this.raiseRecoverable(K.start,"Duplicate constructor in the same class"),ne=!0,K.decorators&&K.decorators.length>0&&this.raise(K.start,"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?")):K.key&&K.key.type==="PrivateIdentifier"&&u6(H,K)&&this.raiseRecoverable(K.key.start,"Identifier '#"+K.key.name+"' has already been declared"))}return this.strict=F,this.next(),Z.length&&this.raise(this.start,"Decorators must be attached to a class element."),y.body=this.finishNode(W,"ClassBody"),this.exitClassBody(),this.finishNode(y,b?"ClassDeclaration":"ClassExpression")}finally{this.inAbstractClass=k}},O.parseClassFunctionParams=function(){var y=this.tsTryParseTypeParameters(this.tsParseConstModifier),b=this.parseBindingList(u.parenR,!1,this.options.ecmaVersion>=8,!0);return y&&(b.typeParameters=y),b},O.parseMethod=function(y,b,k,F,H){var W=this.startNode(),ne=this.yieldPos,Z=this.awaitPos,K=this.awaitIdentPos;if(this.initFunction(W),this.options.ecmaVersion>=6&&(W.generator=y),this.options.ecmaVersion>=8&&(W.async=!!b),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|Dg(b,W.generator)|(k?128:0)),this.expect(u.parenL),W.params=this.parseClassFunctionParams(),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(W,!1,!0,!1,{isClassMethod:F}),this.yieldPos=ne,this.awaitPos=Z,this.awaitIdentPos=K,H&&H.abstract&&W.body){var ae=H.key;this.raise(H.start,At.AbstractMethodHasImplementation({methodName:ae.type!=="Identifier"||H.computed?"["+this.input.slice(ae.start,ae.end)+"]":ae.name}))}return this.finishNode(W,"FunctionExpression")},B.parse=function(y,b){if(b.locations===!1)throw new Error("You have to enable options.locations while using acorn-typescript");b.locations=!0;var k=new this(b,y);return r&&(k.isAmbientContext=!0),k.parse()},B.parseExpressionAt=function(y,b,k){if(k.locations===!1)throw new Error("You have to enable options.locations while using acorn-typescript");k.locations=!0;var F=new this(k,y,b);return r&&(F.isAmbientContext=!0),F.nextToken(),F.parseExpression()},O.parseImportSpecifier=function(){if(this.ts_isContextual(g.type)){var y=this.startNode();return y.imported=this.parseModuleExportName(),this.parseTypeOnlyImportExportSpecifier(y,!0,this.importOrExportOuterKind==="type"),this.finishNode(y,"ImportSpecifier")}var b=R.prototype.parseImportSpecifier.call(this);return b.importKind="value",b},O.parseExportSpecifier=function(y){var b=this.ts_isContextual(g.type);if(!this.match(u.string)&&b){var k=this.startNode();return k.local=this.parseModuleExportName(),this.parseTypeOnlyImportExportSpecifier(k,!1,this.importOrExportOuterKind==="type"),this.finishNode(k,"ExportSpecifier"),this.checkExport(y,k.exported,k.exported.start),k}var F=R.prototype.parseExportSpecifier.call(this,y);return F.exportKind="value",F},O.parseTypeOnlyImportExportSpecifier=function(y,b,k){var F,H=b?"imported":"local",W=b?"local":"exported",ne=y[H],Z=!1,K=!0,ae=ne.start;if(this.isContextual("as")){var se=this.parseIdent();if(this.isContextual("as")){var ye=this.parseIdent();E(this.type)?(Z=!0,ne=se,F=b?this.parseIdent():this.parseModuleExportName(),K=!1):(F=ye,K=!1)}else E(this.type)?(K=!1,F=b?this.parseIdent():this.parseModuleExportName()):(Z=!0,ne=se)}else E(this.type)&&(Z=!0,b?(ne=R.prototype.parseIdent.call(this,!0),this.isContextual("as")||this.checkUnreserved(ne)):ne=this.parseModuleExportName());Z&&k&&this.raise(ae,b?At.TypeModifierIsUsedInTypeImports:At.TypeModifierIsUsedInTypeExports),y[H]=ne,y[W]=F,y[b?"importKind":"exportKind"]=Z?"type":"value",K&&this.eatContextual("as")&&(y[W]=b?this.parseIdent():this.parseModuleExportName()),y[W]||(y[W]=this.copyNode(y[H])),b&&this.checkLValSimple(y[W],2)},O.raiseCommonCheck=function(y,b,k){return b==="Comma is not permitted after the rest element"?this.isAmbientContext&&this.match(u.comma)&&this.lookaheadCharCode()===41?void this.next():R.prototype.raise.call(this,y,b):k?R.prototype.raiseRecoverable.call(this,y,b):R.prototype.raise.call(this,y,b)},O.raiseRecoverable=function(y,b){return this.raiseCommonCheck(y,b,!0)},O.raise=function(y,b){return this.raiseCommonCheck(y,b,!0)},O.updateContext=function(y){var b=this.type;if(b==u.braceL){var k=this.curContext();k==m.tc_oTag?this.context.push(P.b_expr):k==m.tc_expr?this.context.push(P.b_tmpl):R.prototype.updateContext.call(this,y),this.exprAllowed=!0}else{if(b!==u.slash||y!==g.jsxTagStart)return R.prototype.updateContext.call(this,y);this.context.length-=2,this.context.push(m.tc_cTag),this.exprAllowed=!1}},O.jsx_parseOpeningElementAt=function(y,b){var k=this,F=this.startNodeAt(y,b),H=this.jsx_parseElementName();if(H&&(F.name=H),this.match(u.relational)||this.match(u.bitShift)){var W=this.tsTryParseAndCatch(function(){return k.tsParseTypeArgumentsInExpression()});W&&(F.typeParameters=W)}for(F.attributes=[];this.type!==u.slash&&this.type!==g.jsxTagEnd;)F.attributes.push(this.jsx_parseAttribute());return F.selfClosing=this.eat(u.slash),this.expect(g.jsxTagEnd),this.finishNode(F,H?"JSXOpeningElement":"JSXOpeningFragment")},O.enterScope=function(y){y===$c&&this.importsStack.push([]),R.prototype.enterScope.call(this,y);var b=R.prototype.currentScope.call(this);b.types=[],b.enums=[],b.constEnums=[],b.classes=[],b.exportOnlyBindings=[]},O.exitScope=function(){R.prototype.currentScope.call(this).flags===$c&&this.importsStack.pop(),R.prototype.exitScope.call(this)},O.hasImport=function(y,b){var k=this.importsStack.length;if(this.importsStack[k-1].indexOf(y)>-1)return!0;if(!b&&k>1){for(var F=0;F<k-1;F++)if(this.importsStack[F].indexOf(y)>-1)return!0}return!1},O.maybeExportDefined=function(y,b){this.inModule&&1&y.flags&&this.undefinedExports.delete(b)},O.isRedeclaredInScope=function(y,b,k){return!!(0&k)&&(2&k?y.lexical.indexOf(b)>-1||y.functions.indexOf(b)>-1||y.var.indexOf(b)>-1:3&k?y.lexical.indexOf(b)>-1||!R.prototype.treatFunctionsAsVarInScope.call(this,y)&&y.var.indexOf(b)>-1:y.lexical.indexOf(b)>-1&&!(32&y.flags&&y.lexical[0]===b)||!this.treatFunctionsAsVarInScope(y)&&y.functions.indexOf(b)>-1)},O.checkRedeclarationInScope=function(y,b,k,F){this.isRedeclaredInScope(y,b,k)&&this.raise(F,"Identifier '"+b+"' has already been declared.")},O.declareName=function(y,b,k){if(4096&b)return this.hasImport(y,!0)&&this.raise(k,"Identifier '"+y+"' has already been declared."),void this.importsStack[this.importsStack.length-1].push(y);var F=this.currentScope();if(1024&b)return this.maybeExportDefined(F,y),void F.exportOnlyBindings.push(y);R.prototype.declareName.call(this,y,b,k),0&b&&(0&b||(this.checkRedeclarationInScope(F,y,b,k),this.maybeExportDefined(F,y)),F.types.push(y)),256&b&&F.enums.push(y),512&b&&F.constEnums.push(y),128&b&&F.classes.push(y)},O.checkLocalExport=function(y){var b=y.name;if(!this.hasImport(b)){for(var k=this.scopeStack.length-1;k>=0;k--){var F=this.scopeStack[k];if(F.types.indexOf(b)>-1||F.exportOnlyBindings.indexOf(b)>-1)return}R.prototype.checkLocalExport.call(this,y)}},V=B,G=[{key:"acornTypeScript",get:function(){return l}}],(z=[{key:"acornTypeScript",get:function(){return l}}])&&B9(V.prototype,z),G&&B9(V,G),Object.defineProperty(V,"prototype",{writable:!1}),B}(a);return L}}Jn.extend(g6({allowSatisfies:!0}));var No;class y6 extends Error{constructor(n,r,i){super(r);vt(this,"message","");a9(this,No);this.stack="",o9(this,No,new dT(n,r,i)),Object.assign(this,Pf(this,No)),this.name="CompileError"}toString(){return Pf(this,No).toString()}toJSON(){return Pf(this,No).toJSON()}}No=new WeakMap;function G2(t,e,n){throw new y6(e,n,void 0)}function _6(t,e){G2(t,"options_invalid_value",`Invalid compiler option: ${e}`)}function x6(t,e){G2(t,"options_removed",`Invalid compiler option: ${e}`)}function b6(t,e){G2(t,"options_unrecognised",`Unrecognised compiler option ${e}`)}const w6={"CounterClockwiseContourIntegral;":8755,"ClockwiseContourIntegral;":8754,"DoubleLongLeftRightArrow;":10234,"NotNestedGreaterGreater;":10914,"DiacriticalDoubleAcute;":733,"NotSquareSupersetEqual;":8931,"CloseCurlyDoubleQuote;":8221,"DoubleContourIntegral;":8751,"FilledVerySmallSquare;":9642,"NegativeVeryThinSpace;":8203,"NotPrecedesSlantEqual;":8928,"NotRightTriangleEqual;":8941,"NotSucceedsSlantEqual;":8929,"CapitalDifferentialD;":8517,"DoubleLeftRightArrow;":8660,"DoubleLongRightArrow;":10233,"EmptyVerySmallSquare;":9643,"NestedGreaterGreater;":8811,"NotDoubleVerticalBar;":8742,"NotGreaterSlantEqual;":10878,"NotLeftTriangleEqual;":8940,"NotSquareSubsetEqual;":8930,"OpenCurlyDoubleQuote;":8220,"ReverseUpEquilibrium;":10607,"DoubleLongLeftArrow;":10232,"DownLeftRightVector;":10576,"LeftArrowRightArrow;":8646,"NegativeMediumSpace;":8203,"NotGreaterFullEqual;":8807,"NotRightTriangleBar;":10704,"RightArrowLeftArrow;":8644,"SquareSupersetEqual;":8850,"leftrightsquigarrow;":8621,"DownRightTeeVector;":10591,"DownRightVectorBar;":10583,"LongLeftRightArrow;":10231,"Longleftrightarrow;":10234,"NegativeThickSpace;":8203,"NotLeftTriangleBar;":10703,"PrecedesSlantEqual;":8828,"ReverseEquilibrium;":8651,"RightDoubleBracket;":10215,"RightDownTeeVector;":10589,"RightDownVectorBar;":10581,"RightTriangleEqual;":8885,"SquareIntersection;":8851,"SucceedsSlantEqual;":8829,"blacktriangleright;":9656,"longleftrightarrow;":10231,"DoubleUpDownArrow;":8661,"DoubleVerticalBar;":8741,"DownLeftTeeVector;":10590,"DownLeftVectorBar;":10582,"FilledSmallSquare;":9724,"GreaterSlantEqual;":10878,"LeftDoubleBracket;":10214,"LeftDownTeeVector;":10593,"LeftDownVectorBar;":10585,"LeftTriangleEqual;":8884,"NegativeThinSpace;":8203,"NotGreaterGreater;":8811,"NotLessSlantEqual;":10877,"NotNestedLessLess;":10913,"NotReverseElement;":8716,"NotSquareSuperset;":8848,"NotTildeFullEqual;":8775,"RightAngleBracket;":10217,"RightUpDownVector;":10575,"SquareSubsetEqual;":8849,"VerticalSeparator;":10072,"blacktriangledown;":9662,"blacktriangleleft;":9666,"leftrightharpoons;":8651,"rightleftharpoons;":8652,"twoheadrightarrow;":8608,"DiacriticalAcute;":180,"DiacriticalGrave;":96,"DiacriticalTilde;":732,"DoubleRightArrow;":8658,"DownArrowUpArrow;":8693,"EmptySmallSquare;":9723,"GreaterEqualLess;":8923,"GreaterFullEqual;":8807,"LeftAngleBracket;":10216,"LeftUpDownVector;":10577,"LessEqualGreater;":8922,"NonBreakingSpace;":160,"NotPrecedesEqual;":10927,"NotRightTriangle;":8939,"NotSucceedsEqual;":10928,"NotSucceedsTilde;":8831,"NotSupersetEqual;":8841,"RightTriangleBar;":10704,"RightUpTeeVector;":10588,"RightUpVectorBar;":10580,"UnderParenthesis;":9181,"UpArrowDownArrow;":8645,"circlearrowright;":8635,"downharpoonright;":8642,"ntrianglerighteq;":8941,"rightharpoondown;":8641,"rightrightarrows;":8649,"twoheadleftarrow;":8606,"vartriangleright;":8883,"CloseCurlyQuote;":8217,"ContourIntegral;":8750,"DoubleDownArrow;":8659,"DoubleLeftArrow;":8656,"DownRightVector;":8641,"LeftRightVector;":10574,"LeftTriangleBar;":10703,"LeftUpTeeVector;":10592,"LeftUpVectorBar;":10584,"LowerRightArrow;":8600,"NotGreaterEqual;":8817,"NotGreaterTilde;":8821,"NotHumpDownHump;":8782,"NotLeftTriangle;":8938,"NotSquareSubset;":8847,"OverParenthesis;":9180,"RightDownVector;":8642,"ShortRightArrow;":8594,"UpperRightArrow;":8599,"bigtriangledown;":9661,"circlearrowleft;":8634,"curvearrowright;":8631,"downharpoonleft;":8643,"leftharpoondown;":8637,"leftrightarrows;":8646,"nLeftrightarrow;":8654,"nleftrightarrow;":8622,"ntrianglelefteq;":8940,"rightleftarrows;":8644,"rightsquigarrow;":8605,"rightthreetimes;":8908,"straightepsilon;":1013,"trianglerighteq;":8885,"vartriangleleft;":8882,"DiacriticalDot;":729,"DoubleRightTee;":8872,"DownLeftVector;":8637,"GreaterGreater;":10914,"HorizontalLine;":9472,"InvisibleComma;":8291,"InvisibleTimes;":8290,"LeftDownVector;":8643,"LeftRightArrow;":8596,"Leftrightarrow;":8660,"LessSlantEqual;":10877,"LongRightArrow;":10230,"Longrightarrow;":10233,"LowerLeftArrow;":8601,"NestedLessLess;":8810,"NotGreaterLess;":8825,"NotLessGreater;":8824,"NotSubsetEqual;":8840,"NotVerticalBar;":8740,"OpenCurlyQuote;":8216,"ReverseElement;":8715,"RightTeeVector;":10587,"RightVectorBar;":10579,"ShortDownArrow;":8595,"ShortLeftArrow;":8592,"SquareSuperset;":8848,"TildeFullEqual;":8773,"UpperLeftArrow;":8598,"ZeroWidthSpace;":8203,"curvearrowleft;":8630,"doublebarwedge;":8966,"downdownarrows;":8650,"hookrightarrow;":8618,"leftleftarrows;":8647,"leftrightarrow;":8596,"leftthreetimes;":8907,"longrightarrow;":10230,"looparrowright;":8620,"nshortparallel;":8742,"ntriangleright;":8939,"rightarrowtail;":8611,"rightharpoonup;":8640,"trianglelefteq;":8884,"upharpoonright;":8638,"ApplyFunction;":8289,"DifferentialD;":8518,"DoubleLeftTee;":10980,"DoubleUpArrow;":8657,"LeftTeeVector;":10586,"LeftVectorBar;":10578,"LessFullEqual;":8806,"LongLeftArrow;":10229,"Longleftarrow;":10232,"NotEqualTilde;":8770,"NotTildeEqual;":8772,"NotTildeTilde;":8777,"Poincareplane;":8460,"PrecedesEqual;":10927,"PrecedesTilde;":8830,"RightArrowBar;":8677,"RightTeeArrow;":8614,"RightTriangle;":8883,"RightUpVector;":8638,"SucceedsEqual;":10928,"SucceedsTilde;":8831,"SupersetEqual;":8839,"UpEquilibrium;":10606,"VerticalTilde;":8768,"VeryThinSpace;":8202,"bigtriangleup;":9651,"blacktriangle;":9652,"divideontimes;":8903,"fallingdotseq;":8786,"hookleftarrow;":8617,"leftarrowtail;":8610,"leftharpoonup;":8636,"longleftarrow;":10229,"looparrowleft;":8619,"measuredangle;":8737,"ntriangleleft;":8938,"shortparallel;":8741,"smallsetminus;":8726,"triangleright;":9657,"upharpoonleft;":8639,"varsubsetneqq;":10955,"varsupsetneqq;":10956,"DownArrowBar;":10515,"DownTeeArrow;":8615,"ExponentialE;":8519,"GreaterEqual;":8805,"GreaterTilde;":8819,"HilbertSpace;":8459,"HumpDownHump;":8782,"Intersection;":8898,"LeftArrowBar;":8676,"LeftTeeArrow;":8612,"LeftTriangle;":8882,"LeftUpVector;":8639,"NotCongruent;":8802,"NotHumpEqual;":8783,"NotLessEqual;":8816,"NotLessTilde;":8820,"Proportional;":8733,"RightCeiling;":8969,"RoundImplies;":10608,"ShortUpArrow;":8593,"SquareSubset;":8847,"UnderBracket;":9141,"VerticalLine;":124,"blacklozenge;":10731,"exponentiale;":8519,"risingdotseq;":8787,"triangledown;":9663,"triangleleft;":9667,"varsubsetneq;":8842,"varsupsetneq;":8843,"CircleMinus;":8854,"CircleTimes;":8855,"Equilibrium;":8652,"GreaterLess;":8823,"LeftCeiling;":8968,"LessGreater;":8822,"MediumSpace;":8287,"NotLessLess;":8810,"NotPrecedes;":8832,"NotSucceeds;":8833,"NotSuperset;":8835,"OverBracket;":9140,"RightVector;":8640,"Rrightarrow;":8667,"RuleDelayed;":10740,"SmallCircle;":8728,"SquareUnion;":8852,"SubsetEqual;":8838,"UpDownArrow;":8597,"Updownarrow;":8661,"VerticalBar;":8739,"backepsilon;":1014,"blacksquare;":9642,"circledcirc;":8858,"circleddash;":8861,"curlyeqprec;":8926,"curlyeqsucc;":8927,"diamondsuit;":9830,"eqslantless;":10901,"expectation;":8496,"nRightarrow;":8655,"nrightarrow;":8603,"preccurlyeq;":8828,"precnapprox;":10937,"quaternions;":8461,"straightphi;":981,"succcurlyeq;":8829,"succnapprox;":10938,"thickapprox;":8776,"updownarrow;":8597,"Bernoullis;":8492,"CirclePlus;":8853,"EqualTilde;":8770,"Fouriertrf;":8497,"ImaginaryI;":8520,"Laplacetrf;":8466,"LeftVector;":8636,"Lleftarrow;":8666,"NotElement;":8713,"NotGreater;":8815,"Proportion;":8759,"RightArrow;":8594,"RightFloor;":8971,"Rightarrow;":8658,"ThickSpace;":8287,"TildeEqual;":8771,"TildeTilde;":8776,"UnderBrace;":9183,"UpArrowBar;":10514,"UpTeeArrow;":8613,"circledast;":8859,"complement;":8705,"curlywedge;":8911,"eqslantgtr;":10902,"gtreqqless;":10892,"lessapprox;":10885,"lesseqqgtr;":10891,"lmoustache;":9136,"longmapsto;":10236,"mapstodown;":8615,"mapstoleft;":8612,"nLeftarrow;":8653,"nleftarrow;":8602,"nsubseteqq;":10949,"nsupseteqq;":10950,"precapprox;":10935,"rightarrow;":8594,"rmoustache;":9137,"sqsubseteq;":8849,"sqsupseteq;":8850,"subsetneqq;":10955,"succapprox;":10936,"supsetneqq;":10956,"upuparrows;":8648,"varepsilon;":1013,"varnothing;":8709,"Backslash;":8726,"CenterDot;":183,"CircleDot;":8857,"Congruent;":8801,"Coproduct;":8720,"DoubleDot;":168,"DownArrow;":8595,"DownBreve;":785,"Downarrow;":8659,"HumpEqual;":8783,"LeftArrow;":8592,"LeftFloor;":8970,"Leftarrow;":8656,"LessTilde;":8818,"Mellintrf;":8499,"MinusPlus;":8723,"NotCupCap;":8813,"NotExists;":8708,"NotSubset;":8834,"OverBrace;":9182,"PlusMinus;":177,"Therefore;":8756,"ThinSpace;":8201,"TripleDot;":8411,"UnionPlus;":8846,"backprime;":8245,"backsimeq;":8909,"bigotimes;":10754,"centerdot;":183,"checkmark;":10003,"complexes;":8450,"dotsquare;":8865,"downarrow;":8595,"gtrapprox;":10886,"gtreqless;":8923,"gvertneqq;":8809,"heartsuit;":9829,"leftarrow;":8592,"lesseqgtr;":8922,"lvertneqq;":8808,"ngeqslant;":10878,"nleqslant;":10877,"nparallel;":8742,"nshortmid;":8740,"nsubseteq;":8840,"nsupseteq;":8841,"pitchfork;":8916,"rationals;":8474,"spadesuit;":9824,"subseteqq;":10949,"subsetneq;":8842,"supseteqq;":10950,"supsetneq;":8843,"therefore;":8756,"triangleq;":8796,"varpropto;":8733,"DDotrahd;":10513,"DotEqual;":8784,"Integral;":8747,"LessLess;":10913,"NotEqual;":8800,"NotTilde;":8769,"PartialD;":8706,"Precedes;":8826,"RightTee;":8866,"Succeeds;":8827,"SuchThat;":8715,"Superset;":8835,"Uarrocir;":10569,"UnderBar;":95,"andslope;":10840,"angmsdaa;":10664,"angmsdab;":10665,"angmsdac;":10666,"angmsdad;":10667,"angmsdae;":10668,"angmsdaf;":10669,"angmsdag;":10670,"angmsdah;":10671,"angrtvbd;":10653,"approxeq;":8778,"awconint;":8755,"backcong;":8780,"barwedge;":8965,"bbrktbrk;":9142,"bigoplus;":10753,"bigsqcup;":10758,"biguplus;":10756,"bigwedge;":8896,"boxminus;":8863,"boxtimes;":8864,"bsolhsub;":10184,"capbrcup;":10825,"circledR;":174,"circledS;":9416,"cirfnint;":10768,"clubsuit;":9827,"cupbrcap;":10824,"curlyvee;":8910,"cwconint;":8754,"doteqdot;":8785,"dotminus;":8760,"drbkarow;":10512,"dzigrarr;":10239,"elinters;":9191,"emptyset;":8709,"eqvparsl;":10725,"fpartint;":10765,"geqslant;":10878,"gesdotol;":10884,"gnapprox;":10890,"hksearow;":10533,"hkswarow;":10534,"imagline;":8464,"imagpart;":8465,"infintie;":10717,"integers;":8484,"intercal;":8890,"intlarhk;":10775,"laemptyv;":10676,"ldrushar;":10571,"leqslant;":10877,"lesdotor;":10883,"llcorner;":8990,"lnapprox;":10889,"lrcorner;":8991,"lurdshar;":10570,"mapstoup;":8613,"multimap;":8888,"naturals;":8469,"ncongdot;":10861,"notindot;":8949,"otimesas;":10806,"parallel;":8741,"plusacir;":10787,"pointint;":10773,"precneqq;":10933,"precnsim;":8936,"profalar;":9006,"profline;":8978,"profsurf;":8979,"raemptyv;":10675,"realpart;":8476,"rppolint;":10770,"rtriltri;":10702,"scpolint;":10771,"setminus;":8726,"shortmid;":8739,"smeparsl;":10724,"sqsubset;":8847,"sqsupset;":8848,"subseteq;":8838,"succneqq;":10934,"succnsim;":8937,"supseteq;":8839,"thetasym;":977,"thicksim;":8764,"timesbar;":10801,"triangle;":9653,"triminus;":10810,"trpezium;":9186,"ulcorner;":8988,"urcorner;":8989,"varkappa;":1008,"varsigma;":962,"vartheta;":977,"Because;":8757,"Cayleys;":8493,"Cconint;":8752,"Cedilla;":184,"Diamond;":8900,"DownTee;":8868,"Element;":8712,"Epsilon;":917,"Implies;":8658,"LeftTee;":8867,"NewLine;":10,"NoBreak;":8288,"NotLess;":8814,"Omicron;":927,"OverBar;":8254,"Product;":8719,"UpArrow;":8593,"Uparrow;":8657,"Upsilon;":933,"alefsym;":8501,"angrtvb;":8894,"angzarr;":9084,"asympeq;":8781,"backsim;":8765,"because;":8757,"bemptyv;":10672,"between;":8812,"bigcirc;":9711,"bigodot;":10752,"bigstar;":9733,"bnequiv;":8801,"boxplus;":8862,"ccupssm;":10832,"cemptyv;":10674,"cirscir;":10690,"coloneq;":8788,"congdot;":10861,"cudarrl;":10552,"cudarrr;":10549,"cularrp;":10557,"curarrm;":10556,"dbkarow;":10511,"ddagger;":8225,"ddotseq;":10871,"demptyv;":10673,"diamond;":8900,"digamma;":989,"dotplus;":8724,"dwangle;":10662,"epsilon;":949,"eqcolon;":8789,"equivDD;":10872,"gesdoto;":10882,"gtquest;":10876,"gtrless;":8823,"harrcir;":10568,"intprod;":10812,"isindot;":8949,"larrbfs;":10527,"larrsim;":10611,"lbrksld;":10639,"lbrkslu;":10637,"ldrdhar;":10599,"lesdoto;":10881,"lessdot;":8918,"lessgtr;":8822,"lesssim;":8818,"lotimes;":10804,"lozenge;":9674,"ltquest;":10875,"luruhar;":10598,"maltese;":10016,"minusdu;":10794,"napprox;":8777,"natural;":9838,"nearrow;":8599,"nexists;":8708,"notinva;":8713,"notinvb;":8951,"notinvc;":8950,"notniva;":8716,"notnivb;":8958,"notnivc;":8957,"npolint;":10772,"npreceq;":10927,"nsqsube;":8930,"nsqsupe;":8931,"nsubset;":8834,"nsucceq;":10928,"nsupset;":8835,"nvinfin;":10718,"nvltrie;":8884,"nvrtrie;":8885,"nwarrow;":8598,"olcross;":10683,"omicron;":959,"orderof;":8500,"orslope;":10839,"pertenk;":8241,"planckh;":8462,"pluscir;":10786,"plussim;":10790,"plustwo;":10791,"precsim;":8830,"quatint;":10774,"questeq;":8799,"rarrbfs;":10528,"rarrsim;":10612,"rbrksld;":10638,"rbrkslu;":10640,"rdldhar;":10601,"realine;":8475,"rotimes;":10805,"ruluhar;":10600,"searrow;":8600,"simplus;":10788,"simrarr;":10610,"subedot;":10947,"submult;":10945,"subplus;":10943,"subrarr;":10617,"succsim;":8831,"supdsub;":10968,"supedot;":10948,"suphsol;":10185,"suphsub;":10967,"suplarr;":10619,"supmult;":10946,"supplus;":10944,"swarrow;":8601,"topfork;":10970,"triplus;":10809,"tritime;":10811,"uparrow;":8593,"upsilon;":965,"uwangle;":10663,"vzigzag;":10650,"zigrarr;":8669,"Aacute;":193,"Abreve;":258,"Agrave;":192,"Assign;":8788,"Atilde;":195,"Barwed;":8966,"Bumpeq;":8782,"Cacute;":262,"Ccaron;":268,"Ccedil;":199,"Colone;":10868,"Conint;":8751,"CupCap;":8781,"Dagger;":8225,"Dcaron;":270,"DotDot;":8412,"Dstrok;":272,"Eacute;":201,"Ecaron;":282,"Egrave;":200,"Exists;":8707,"ForAll;":8704,"Gammad;":988,"Gbreve;":286,"Gcedil;":290,"HARDcy;":1066,"Hstrok;":294,"Iacute;":205,"Igrave;":204,"Itilde;":296,"Jsercy;":1032,"Kcedil;":310,"Lacute;":313,"Lambda;":923,"Lcaron;":317,"Lcedil;":315,"Lmidot;":319,"Lstrok;":321,"Nacute;":323,"Ncaron;":327,"Ncedil;":325,"Ntilde;":209,"Oacute;":211,"Odblac;":336,"Ograve;":210,"Oslash;":216,"Otilde;":213,"Otimes;":10807,"Racute;":340,"Rarrtl;":10518,"Rcaron;":344,"Rcedil;":342,"SHCHcy;":1065,"SOFTcy;":1068,"Sacute;":346,"Scaron;":352,"Scedil;":350,"Square;":9633,"Subset;":8912,"Supset;":8913,"Tcaron;":356,"Tcedil;":354,"Tstrok;":358,"Uacute;":218,"Ubreve;":364,"Udblac;":368,"Ugrave;":217,"Utilde;":360,"Vdashl;":10982,"Verbar;":8214,"Vvdash;":8874,"Yacute;":221,"Zacute;":377,"Zcaron;":381,"aacute;":225,"abreve;":259,"agrave;":224,"andand;":10837,"angmsd;":8737,"angsph;":8738,"apacir;":10863,"approx;":8776,"atilde;":227,"barvee;":8893,"barwed;":8965,"becaus;":8757,"bernou;":8492,"bigcap;":8898,"bigcup;":8899,"bigvee;":8897,"bkarow;":10509,"bottom;":8869,"bowtie;":8904,"boxbox;":10697,"bprime;":8245,"brvbar;":166,"bullet;":8226,"bumpeq;":8783,"cacute;":263,"capand;":10820,"capcap;":10827,"capcup;":10823,"capdot;":10816,"ccaron;":269,"ccedil;":231,"circeq;":8791,"cirmid;":10991,"colone;":8788,"commat;":64,"compfn;":8728,"conint;":8750,"coprod;":8720,"copysr;":8471,"cularr;":8630,"cupcap;":10822,"cupcup;":10826,"cupdot;":8845,"curarr;":8631,"curren;":164,"cylcty;":9005,"dagger;":8224,"daleth;":8504,"dcaron;":271,"dfisht;":10623,"divide;":247,"divonx;":8903,"dlcorn;":8990,"dlcrop;":8973,"dollar;":36,"drcorn;":8991,"drcrop;":8972,"dstrok;":273,"eacute;":233,"easter;":10862,"ecaron;":283,"ecolon;":8789,"egrave;":232,"egsdot;":10904,"elsdot;":10903,"emptyv;":8709,"emsp13;":8196,"emsp14;":8197,"eparsl;":10723,"eqcirc;":8790,"equals;":61,"equest;":8799,"female;":9792,"ffilig;":64259,"ffllig;":64260,"forall;":8704,"frac12;":189,"frac13;":8531,"frac14;":188,"frac15;":8533,"frac16;":8537,"frac18;":8539,"frac23;":8532,"frac25;":8534,"frac34;":190,"frac35;":8535,"frac38;":8540,"frac45;":8536,"frac56;":8538,"frac58;":8541,"frac78;":8542,"gacute;":501,"gammad;":989,"gbreve;":287,"gesdot;":10880,"gesles;":10900,"gtlPar;":10645,"gtrarr;":10616,"gtrdot;":8919,"gtrsim;":8819,"hairsp;":8202,"hamilt;":8459,"hardcy;":1098,"hearts;":9829,"hellip;":8230,"hercon;":8889,"homtht;":8763,"horbar;":8213,"hslash;":8463,"hstrok;":295,"hybull;":8259,"hyphen;":8208,"iacute;":237,"igrave;":236,"iiiint;":10764,"iinfin;":10716,"incare;":8453,"inodot;":305,"intcal;":8890,"iquest;":191,"isinsv;":8947,"itilde;":297,"jsercy;":1112,"kappav;":1008,"kcedil;":311,"kgreen;":312,"lAtail;":10523,"lacute;":314,"lagran;":8466,"lambda;":955,"langle;":10216,"larrfs;":10525,"larrhk;":8617,"larrlp;":8619,"larrpl;":10553,"larrtl;":8610,"latail;":10521,"lbrace;":123,"lbrack;":91,"lcaron;":318,"lcedil;":316,"ldquor;":8222,"lesdot;":10879,"lesges;":10899,"lfisht;":10620,"lfloor;":8970,"lharul;":10602,"llhard;":10603,"lmidot;":320,"lmoust;":9136,"loplus;":10797,"lowast;":8727,"lowbar;":95,"lparlt;":10643,"lrhard;":10605,"lsaquo;":8249,"lsquor;":8218,"lstrok;":322,"lthree;":8907,"ltimes;":8905,"ltlarr;":10614,"ltrPar;":10646,"mapsto;":8614,"marker;":9646,"mcomma;":10793,"midast;":42,"midcir;":10992,"middot;":183,"minusb;":8863,"minusd;":8760,"mnplus;":8723,"models;":8871,"mstpos;":8766,"nVDash;":8879,"nVdash;":8878,"nacute;":324,"nbumpe;":8783,"ncaron;":328,"ncedil;":326,"nearhk;":10532,"nequiv;":8802,"nesear;":10536,"nexist;":8708,"nltrie;":8940,"notinE;":8953,"nparsl;":11005,"nprcue;":8928,"nrarrc;":10547,"nrarrw;":8605,"nrtrie;":8941,"nsccue;":8929,"nsimeq;":8772,"ntilde;":241,"numero;":8470,"nvDash;":8877,"nvHarr;":10500,"nvdash;":8876,"nvlArr;":10498,"nvrArr;":10499,"nwarhk;":10531,"nwnear;":10535,"oacute;":243,"odblac;":337,"odsold;":10684,"ograve;":242,"ominus;":8854,"origof;":8886,"oslash;":248,"otilde;":245,"otimes;":8855,"parsim;":10995,"percnt;":37,"period;":46,"permil;":8240,"phmmat;":8499,"planck;":8463,"plankv;":8463,"plusdo;":8724,"plusdu;":10789,"plusmn;":177,"preceq;":10927,"primes;":8473,"prnsim;":8936,"propto;":8733,"prurel;":8880,"puncsp;":8200,"qprime;":8279,"rAtail;":10524,"racute;":341,"rangle;":10217,"rarrap;":10613,"rarrfs;":10526,"rarrhk;":8618,"rarrlp;":8620,"rarrpl;":10565,"rarrtl;":8611,"ratail;":10522,"rbrace;":125,"rbrack;":93,"rcaron;":345,"rcedil;":343,"rdquor;":8221,"rfisht;":10621,"rfloor;":8971,"rharul;":10604,"rmoust;":9137,"roplus;":10798,"rpargt;":10644,"rsaquo;":8250,"rsquor;":8217,"rthree;":8908,"rtimes;":8906,"sacute;":347,"scaron;":353,"scedil;":351,"scnsim;":8937,"searhk;":10533,"seswar;":10537,"sfrown;":8994,"shchcy;":1097,"sigmaf;":962,"sigmav;":962,"simdot;":10858,"smashp;":10803,"softcy;":1100,"solbar;":9023,"spades;":9824,"sqcaps;":8851,"sqcups;":8852,"sqsube;":8849,"sqsupe;":8850,"square;":9633,"squarf;":9642,"ssetmn;":8726,"ssmile;":8995,"sstarf;":8902,"subdot;":10941,"subset;":8834,"subsim;":10951,"subsub;":10965,"subsup;":10963,"succeq;":10928,"supdot;":10942,"supset;":8835,"supsim;":10952,"supsub;":10964,"supsup;":10966,"swarhk;":10534,"swnwar;":10538,"target;":8982,"tcaron;":357,"tcedil;":355,"telrec;":8981,"there4;":8756,"thetav;":977,"thinsp;":8201,"thksim;":8764,"timesb;":8864,"timesd;":10800,"topbot;":9014,"topcir;":10993,"tprime;":8244,"tridot;":9708,"tstrok;":359,"uacute;":250,"ubreve;":365,"udblac;":369,"ufisht;":10622,"ugrave;":249,"ulcorn;":8988,"ulcrop;":8975,"urcorn;":8989,"urcrop;":8974,"utilde;":361,"vangrt;":10652,"varphi;":981,"varrho;":1009,"veebar;":8891,"vellip;":8942,"verbar;":124,"vsubnE;":10955,"vsubne;":8842,"vsupnE;":10956,"vsupne;":8843,"wedbar;":10847,"wedgeq;":8793,"weierp;":8472,"wreath;":8768,"xoplus;":10753,"xotime;":10754,"xsqcup;":10758,"xuplus;":10756,"xwedge;":8896,"yacute;":253,"zacute;":378,"zcaron;":382,"zeetrf;":8488,"AElig;":198,Aacute:193,"Acirc;":194,Agrave:192,"Alpha;":913,"Amacr;":256,"Aogon;":260,"Aring;":197,Atilde:195,"Breve;":728,Ccedil:199,"Ccirc;":264,"Colon;":8759,"Cross;":10799,"Dashv;":10980,"Delta;":916,Eacute:201,"Ecirc;":202,Egrave:200,"Emacr;":274,"Eogon;":280,"Equal;":10869,"Gamma;":915,"Gcirc;":284,"Hacek;":711,"Hcirc;":292,"IJlig;":306,Iacute:205,"Icirc;":206,Igrave:204,"Imacr;":298,"Iogon;":302,"Iukcy;":1030,"Jcirc;":308,"Jukcy;":1028,"Kappa;":922,Ntilde:209,"OElig;":338,Oacute:211,"Ocirc;":212,Ograve:210,"Omacr;":332,"Omega;":937,Oslash:216,Otilde:213,"Prime;":8243,"RBarr;":10512,"Scirc;":348,"Sigma;":931,"THORN;":222,"TRADE;":8482,"TSHcy;":1035,"Theta;":920,"Tilde;":8764,Uacute:218,"Ubrcy;":1038,"Ucirc;":219,Ugrave:217,"Umacr;":362,"Union;":8899,"Uogon;":370,"UpTee;":8869,"Uring;":366,"VDash;":8875,"Vdash;":8873,"Wcirc;":372,"Wedge;":8896,Yacute:221,"Ycirc;":374,aacute:225,"acirc;":226,"acute;":180,"aelig;":230,agrave:224,"aleph;":8501,"alpha;":945,"amacr;":257,"amalg;":10815,"angle;":8736,"angrt;":8735,"angst;":197,"aogon;":261,"aring;":229,"asymp;":8776,atilde:227,"awint;":10769,"bcong;":8780,"bdquo;":8222,"bepsi;":1014,"blank;":9251,"blk12;":9618,"blk14;":9617,"blk34;":9619,"block;":9608,"boxDL;":9559,"boxDR;":9556,"boxDl;":9558,"boxDr;":9555,"boxHD;":9574,"boxHU;":9577,"boxHd;":9572,"boxHu;":9575,"boxUL;":9565,"boxUR;":9562,"boxUl;":9564,"boxUr;":9561,"boxVH;":9580,"boxVL;":9571,"boxVR;":9568,"boxVh;":9579,"boxVl;":9570,"boxVr;":9567,"boxdL;":9557,"boxdR;":9554,"boxdl;":9488,"boxdr;":9484,"boxhD;":9573,"boxhU;":9576,"boxhd;":9516,"boxhu;":9524,"boxuL;":9563,"boxuR;":9560,"boxul;":9496,"boxur;":9492,"boxvH;":9578,"boxvL;":9569,"boxvR;":9566,"boxvh;":9532,"boxvl;":9508,"boxvr;":9500,"breve;":728,brvbar:166,"bsemi;":8271,"bsime;":8909,"bsolb;":10693,"bumpE;":10926,"bumpe;":8783,"caret;":8257,"caron;":711,"ccaps;":10829,ccedil:231,"ccirc;":265,"ccups;":10828,"cedil;":184,"check;":10003,"clubs;":9827,"colon;":58,"comma;":44,"crarr;":8629,"cross;":10007,"csube;":10961,"csupe;":10962,"ctdot;":8943,"cuepr;":8926,"cuesc;":8927,"cupor;":10821,curren:164,"cuvee;":8910,"cuwed;":8911,"cwint;":8753,"dashv;":8867,"dblac;":733,"ddarr;":8650,"delta;":948,"dharl;":8643,"dharr;":8642,"diams;":9830,"disin;":8946,divide:247,"doteq;":8784,"dtdot;":8945,"dtrif;":9662,"duarr;":8693,"duhar;":10607,"eDDot;":10871,eacute:233,"ecirc;":234,"efDot;":8786,egrave:232,"emacr;":275,"empty;":8709,"eogon;":281,"eplus;":10865,"epsiv;":1013,"eqsim;":8770,"equiv;":8801,"erDot;":8787,"erarr;":10609,"esdot;":8784,"exist;":8707,"fflig;":64256,"filig;":64257,"fjlig;":102,"fllig;":64258,"fltns;":9649,"forkv;":10969,frac12:189,frac14:188,frac34:190,"frasl;":8260,"frown;":8994,"gamma;":947,"gcirc;":285,"gescc;":10921,"gimel;":8503,"gneqq;":8809,"gnsim;":8935,"grave;":96,"gsime;":10894,"gsiml;":10896,"gtcir;":10874,"gtdot;":8919,"harrw;":8621,"hcirc;":293,"hoarr;":8703,iacute:237,"icirc;":238,"iexcl;":161,igrave:236,"iiint;":8749,"iiota;":8489,"ijlig;":307,"imacr;":299,"image;":8465,"imath;":305,"imped;":437,"infin;":8734,"iogon;":303,"iprod;":10812,iquest:191,"isinE;":8953,"isins;":8948,"isinv;":8712,"iukcy;":1110,"jcirc;":309,"jmath;":567,"jukcy;":1108,"kappa;":954,"lAarr;":8666,"lBarr;":10510,"langd;":10641,"laquo;":171,"larrb;":8676,"lates;":10925,"lbarr;":10508,"lbbrk;":10098,"lbrke;":10635,"lceil;":8968,"ldquo;":8220,"lescc;":10920,"lhard;":8637,"lharu;":8636,"lhblk;":9604,"llarr;":8647,"lltri;":9722,"lneqq;":8808,"lnsim;":8934,"loang;":10220,"loarr;":8701,"lobrk;":10214,"lopar;":10629,"lrarr;":8646,"lrhar;":8651,"lrtri;":8895,"lsime;":10893,"lsimg;":10895,"lsquo;":8216,"ltcir;":10873,"ltdot;":8918,"ltrie;":8884,"ltrif;":9666,"mDDot;":8762,"mdash;":8212,"micro;":181,middot:183,"minus;":8722,"mumap;":8888,"nabla;":8711,"napid;":8779,"napos;":329,"natur;":9838,"nbump;":8782,"ncong;":8775,"ndash;":8211,"neArr;":8663,"nearr;":8599,"nedot;":8784,"nesim;":8770,"ngeqq;":8807,"ngsim;":8821,"nhArr;":8654,"nharr;":8622,"nhpar;":10994,"nlArr;":8653,"nlarr;":8602,"nleqq;":8806,"nless;":8814,"nlsim;":8820,"nltri;":8938,"notin;":8713,"notni;":8716,"npart;":8706,"nprec;":8832,"nrArr;":8655,"nrarr;":8603,"nrtri;":8939,"nsime;":8772,"nsmid;":8740,"nspar;":8742,"nsubE;":10949,"nsube;":8840,"nsucc;":8833,"nsupE;":10950,"nsupe;":8841,ntilde:241,"numsp;":8199,"nvsim;":8764,"nwArr;":8662,"nwarr;":8598,oacute:243,"ocirc;":244,"odash;":8861,"oelig;":339,"ofcir;":10687,ograve:242,"ohbar;":10677,"olarr;":8634,"olcir;":10686,"oline;":8254,"omacr;":333,"omega;":969,"operp;":10681,"oplus;":8853,"orarr;":8635,"order;":8500,oslash:248,otilde:245,"ovbar;":9021,"parsl;":11005,"phone;":9742,"plusb;":8862,"pluse;":10866,plusmn:177,"pound;":163,"prcue;":8828,"prime;":8242,"prnap;":10937,"prsim;":8830,"quest;":63,"rAarr;":8667,"rBarr;":10511,"radic;":8730,"rangd;":10642,"range;":10661,"raquo;":187,"rarrb;":8677,"rarrc;":10547,"rarrw;":8605,"ratio;":8758,"rbarr;":10509,"rbbrk;":10099,"rbrke;":10636,"rceil;":8969,"rdquo;":8221,"reals;":8477,"rhard;":8641,"rharu;":8640,"rlarr;":8644,"rlhar;":8652,"rnmid;":10990,"roang;":10221,"roarr;":8702,"robrk;":10215,"ropar;":10630,"rrarr;":8649,"rsquo;":8217,"rtrie;":8885,"rtrif;":9656,"sbquo;":8218,"sccue;":8829,"scirc;":349,"scnap;":10938,"scsim;":8831,"sdotb;":8865,"sdote;":10854,"seArr;":8664,"searr;":8600,"setmn;":8726,"sharp;":9839,"sigma;":963,"simeq;":8771,"simgE;":10912,"simlE;":10911,"simne;":8774,"slarr;":8592,"smile;":8995,"smtes;":10924,"sqcap;":8851,"sqcup;":8852,"sqsub;":8847,"sqsup;":8848,"srarr;":8594,"starf;":9733,"strns;":175,"subnE;":10955,"subne;":8842,"supnE;":10956,"supne;":8843,"swArr;":8665,"swarr;":8601,"szlig;":223,"theta;":952,"thkap;":8776,"thorn;":254,"tilde;":732,"times;":215,"trade;":8482,"trisb;":10701,"tshcy;":1115,"twixt;":8812,uacute:250,"ubrcy;":1118,"ucirc;":251,"udarr;":8645,"udhar;":10606,ugrave:249,"uharl;":8639,"uharr;":8638,"uhblk;":9600,"ultri;":9720,"umacr;":363,"uogon;":371,"uplus;":8846,"upsih;":978,"uring;":367,"urtri;":9721,"utdot;":8944,"utrif;":9652,"uuarr;":8648,"vBarv;":10985,"vDash;":8872,"varpi;":982,"vdash;":8866,"veeeq;":8794,"vltri;":8882,"vnsub;":8834,"vnsup;":8835,"vprop;":8733,"vrtri;":8883,"wcirc;":373,"wedge;":8743,"xcirc;":9711,"xdtri;":9661,"xhArr;":10234,"xharr;":10231,"xlArr;":10232,"xlarr;":10229,"xodot;":10752,"xrArr;":10233,"xrarr;":10230,"xutri;":9651,yacute:253,"ycirc;":375,AElig:198,Acirc:194,"Aopf;":120120,Aring:197,"Ascr;":119964,"Auml;":196,"Barv;":10983,"Beta;":914,"Bopf;":120121,"Bscr;":8492,"CHcy;":1063,"COPY;":169,"Cdot;":266,"Copf;":8450,"Cscr;":119966,"DJcy;":1026,"DScy;":1029,"DZcy;":1039,"Darr;":8609,"Dopf;":120123,"Dscr;":119967,Ecirc:202,"Edot;":278,"Eopf;":120124,"Escr;":8496,"Esim;":10867,"Euml;":203,"Fopf;":120125,"Fscr;":8497,"GJcy;":1027,"Gdot;":288,"Gopf;":120126,"Gscr;":119970,"Hopf;":8461,"Hscr;":8459,"IEcy;":1045,"IOcy;":1025,Icirc:206,"Idot;":304,"Iopf;":120128,"Iota;":921,"Iscr;":8464,"Iuml;":207,"Jopf;":120129,"Jscr;":119973,"KHcy;":1061,"KJcy;":1036,"Kopf;":120130,"Kscr;":119974,"LJcy;":1033,"Lang;":10218,"Larr;":8606,"Lopf;":120131,"Lscr;":8466,"Mopf;":120132,"Mscr;":8499,"NJcy;":1034,"Nopf;":8469,"Nscr;":119977,Ocirc:212,"Oopf;":120134,"Oscr;":119978,"Ouml;":214,"Popf;":8473,"Pscr;":119979,"QUOT;":34,"Qopf;":8474,"Qscr;":119980,"Rang;":10219,"Rarr;":8608,"Ropf;":8477,"Rscr;":8475,"SHcy;":1064,"Sopf;":120138,"Sqrt;":8730,"Sscr;":119982,"Star;":8902,THORN:222,"TScy;":1062,"Topf;":120139,"Tscr;":119983,"Uarr;":8607,Ucirc:219,"Uopf;":120140,"Upsi;":978,"Uscr;":119984,"Uuml;":220,"Vbar;":10987,"Vert;":8214,"Vopf;":120141,"Vscr;":119985,"Wopf;":120142,"Wscr;":119986,"Xopf;":120143,"Xscr;":119987,"YAcy;":1071,"YIcy;":1031,"YUcy;":1070,"Yopf;":120144,"Yscr;":119988,"Yuml;":376,"ZHcy;":1046,"Zdot;":379,"Zeta;":918,"Zopf;":8484,"Zscr;":119989,acirc:226,acute:180,aelig:230,"andd;":10844,"andv;":10842,"ange;":10660,"aopf;":120146,"apid;":8779,"apos;":39,aring:229,"ascr;":119990,"auml;":228,"bNot;":10989,"bbrk;":9141,"beta;":946,"beth;":8502,"bnot;":8976,"bopf;":120147,"boxH;":9552,"boxV;":9553,"boxh;":9472,"boxv;":9474,"bscr;":119991,"bsim;":8765,"bsol;":92,"bull;":8226,"bump;":8782,"caps;":8745,"cdot;":267,cedil:184,"cent;":162,"chcy;":1095,"cirE;":10691,"circ;":710,"cire;":8791,"comp;":8705,"cong;":8773,"copf;":120148,"copy;":169,"cscr;":119992,"csub;":10959,"csup;":10960,"cups;":8746,"dArr;":8659,"dHar;":10597,"darr;":8595,"dash;":8208,"diam;":8900,"djcy;":1106,"dopf;":120149,"dscr;":119993,"dscy;":1109,"dsol;":10742,"dtri;":9663,"dzcy;":1119,"eDot;":8785,"ecir;":8790,ecirc:234,"edot;":279,"emsp;":8195,"ensp;":8194,"eopf;":120150,"epar;":8917,"epsi;":949,"escr;":8495,"esim;":8770,"euml;":235,"euro;":8364,"excl;":33,"flat;":9837,"fnof;":402,"fopf;":120151,"fork;":8916,"fscr;":119995,"gdot;":289,"geqq;":8807,"gesl;":8923,"gjcy;":1107,"gnap;":10890,"gneq;":10888,"gopf;":120152,"gscr;":8458,"gsim;":8819,"gtcc;":10919,"gvnE;":8809,"hArr;":8660,"half;":189,"harr;":8596,"hbar;":8463,"hopf;":120153,"hscr;":119997,icirc:238,"iecy;":1077,iexcl:161,"imof;":8887,"iocy;":1105,"iopf;":120154,"iota;":953,"iscr;":119998,"isin;":8712,"iuml;":239,"jopf;":120155,"jscr;":119999,"khcy;":1093,"kjcy;":1116,"kopf;":120156,"kscr;":12e4,"lArr;":8656,"lHar;":10594,"lang;":10216,laquo:171,"larr;":8592,"late;":10925,"lcub;":123,"ldca;":10550,"ldsh;":8626,"leqq;":8806,"lesg;":8922,"ljcy;":1113,"lnap;":10889,"lneq;":10887,"lopf;":120157,"lozf;":10731,"lpar;":40,"lscr;":120001,"lsim;":8818,"lsqb;":91,"ltcc;":10918,"ltri;":9667,"lvnE;":8808,"macr;":175,"male;":9794,"malt;":10016,micro:181,"mlcp;":10971,"mldr;":8230,"mopf;":120158,"mscr;":120002,"nGtv;":8811,"nLtv;":8810,"nang;":8736,"napE;":10864,"nbsp;":160,"ncap;":10819,"ncup;":10818,"ngeq;":8817,"nges;":10878,"ngtr;":8815,"nisd;":8954,"njcy;":1114,"nldr;":8229,"nleq;":8816,"nles;":10877,"nmid;":8740,"nopf;":120159,"npar;":8742,"npre;":10927,"nsce;":10928,"nscr;":120003,"nsim;":8769,"nsub;":8836,"nsup;":8837,"ntgl;":8825,"ntlg;":8824,"nvap;":8781,"nvge;":8805,"nvgt;":62,"nvle;":8804,"nvlt;":60,"oast;":8859,"ocir;":8858,ocirc:244,"odiv;":10808,"odot;":8857,"ogon;":731,"oint;":8750,"omid;":10678,"oopf;":120160,"opar;":10679,"ordf;":170,"ordm;":186,"oror;":10838,"oscr;":8500,"osol;":8856,"ouml;":246,"para;":182,"part;":8706,"perp;":8869,"phiv;":981,"plus;":43,"popf;":120161,pound:163,"prap;":10935,"prec;":8826,"prnE;":10933,"prod;":8719,"prop;":8733,"pscr;":120005,"qint;":10764,"qopf;":120162,"qscr;":120006,"quot;":34,"rArr;":8658,"rHar;":10596,"race;":8765,"rang;":10217,raquo:187,"rarr;":8594,"rcub;":125,"rdca;":10551,"rdsh;":8627,"real;":8476,"rect;":9645,"rhov;":1009,"ring;":730,"ropf;":120163,"rpar;":41,"rscr;":120007,"rsqb;":93,"rtri;":9657,"scap;":10936,"scnE;":10934,"sdot;":8901,"sect;":167,"semi;":59,"sext;":10038,"shcy;":1096,"sime;":8771,"simg;":10910,"siml;":10909,"smid;":8739,"smte;":10924,"solb;":10692,"sopf;":120164,"spar;":8741,"squf;":9642,"sscr;":120008,"star;":9734,"subE;":10949,"sube;":8838,"succ;":8827,"sung;":9834,"sup1;":185,"sup2;":178,"sup3;":179,"supE;":10950,"supe;":8839,szlig:223,"tbrk;":9140,"tdot;":8411,thorn:254,times:215,"tint;":8749,"toea;":10536,"topf;":120165,"tosa;":10537,"trie;":8796,"tscr;":120009,"tscy;":1094,"uArr;":8657,"uHar;":10595,"uarr;":8593,ucirc:251,"uopf;":120166,"upsi;":965,"uscr;":120010,"utri;":9653,"uuml;":252,"vArr;":8661,"vBar;":10984,"varr;":8597,"vert;":124,"vopf;":120167,"vscr;":120011,"wopf;":120168,"wscr;":120012,"xcap;":8898,"xcup;":8899,"xmap;":10236,"xnis;":8955,"xopf;":120169,"xscr;":120013,"xvee;":8897,"yacy;":1103,"yicy;":1111,"yopf;":120170,"yscr;":120014,"yucy;":1102,"yuml;":255,"zdot;":380,"zeta;":950,"zhcy;":1078,"zopf;":120171,"zscr;":120015,"zwnj;":8204,"AMP;":38,"Acy;":1040,"Afr;":120068,"And;":10835,Auml:196,"Bcy;":1041,"Bfr;":120069,COPY:169,"Cap;":8914,"Cfr;":8493,"Chi;":935,"Cup;":8915,"Dcy;":1044,"Del;":8711,"Dfr;":120071,"Dot;":168,"ENG;":330,"ETH;":208,"Ecy;":1069,"Efr;":120072,"Eta;":919,Euml:203,"Fcy;":1060,"Ffr;":120073,"Gcy;":1043,"Gfr;":120074,"Hat;":94,"Hfr;":8460,"Icy;":1048,"Ifr;":8465,"Int;":8748,Iuml:207,"Jcy;":1049,"Jfr;":120077,"Kcy;":1050,"Kfr;":120078,"Lcy;":1051,"Lfr;":120079,"Lsh;":8624,"Map;":10501,"Mcy;":1052,"Mfr;":120080,"Ncy;":1053,"Nfr;":120081,"Not;":10988,"Ocy;":1054,"Ofr;":120082,Ouml:214,"Pcy;":1055,"Pfr;":120083,"Phi;":934,"Psi;":936,QUOT:34,"Qfr;":120084,"REG;":174,"Rcy;":1056,"Rfr;":8476,"Rho;":929,"Rsh;":8625,"Scy;":1057,"Sfr;":120086,"Sub;":8912,"Sum;":8721,"Sup;":8913,"Tab;":9,"Tau;":932,"Tcy;":1058,"Tfr;":120087,"Ucy;":1059,"Ufr;":120088,Uuml:220,"Vcy;":1042,"Vee;":8897,"Vfr;":120089,"Wfr;":120090,"Xfr;":120091,"Ycy;":1067,"Yfr;":120092,"Zcy;":1047,"Zfr;":8488,"acE;":8766,"acd;":8767,"acy;":1072,"afr;":120094,"amp;":38,"and;":8743,"ang;":8736,"apE;":10864,"ape;":8778,"ast;":42,auml:228,"bcy;":1073,"bfr;":120095,"bne;":61,"bot;":8869,"cap;":8745,cent:162,"cfr;":120096,"chi;":967,"cir;":9675,copy:169,"cup;":8746,"dcy;":1076,"deg;":176,"dfr;":120097,"die;":168,"div;":247,"dot;":729,"ecy;":1101,"efr;":120098,"egs;":10902,"ell;":8467,"els;":10901,"eng;":331,"eta;":951,"eth;":240,euml:235,"fcy;":1092,"ffr;":120099,"gEl;":10892,"gap;":10886,"gcy;":1075,"gel;":8923,"geq;":8805,"ges;":10878,"gfr;":120100,"ggg;":8921,"glE;":10898,"gla;":10917,"glj;":10916,"gnE;":8809,"gne;":10888,"hfr;":120101,"icy;":1080,"iff;":8660,"ifr;":120102,"int;":8747,iuml:239,"jcy;":1081,"jfr;":120103,"kcy;":1082,"kfr;":120104,"lEg;":10891,"lap;":10885,"lat;":10923,"lcy;":1083,"leg;":8922,"leq;":8804,"les;":10877,"lfr;":120105,"lgE;":10897,"lnE;":8808,"lne;":10887,"loz;":9674,"lrm;":8206,"lsh;":8624,macr:175,"map;":8614,"mcy;":1084,"mfr;":120106,"mho;":8487,"mid;":8739,"nGg;":8921,"nGt;":8811,"nLl;":8920,"nLt;":8810,"nap;":8777,nbsp:160,"ncy;":1085,"nfr;":120107,"ngE;":8807,"nge;":8817,"ngt;":8815,"nis;":8956,"niv;":8715,"nlE;":8806,"nle;":8816,"nlt;":8814,"not;":172,"npr;":8832,"nsc;":8833,"num;":35,"ocy;":1086,"ofr;":120108,"ogt;":10689,"ohm;":937,"olt;":10688,"ord;":10845,ordf:170,ordm:186,"orv;":10843,ouml:246,"par;":8741,para:182,"pcy;":1087,"pfr;":120109,"phi;":966,"piv;":982,"prE;":10931,"pre;":10927,"psi;":968,"qfr;":120110,quot:34,"rcy;":1088,"reg;":174,"rfr;":120111,"rho;":961,"rlm;":8207,"rsh;":8625,"scE;":10932,"sce;":10928,"scy;":1089,sect:167,"sfr;":120112,"shy;":173,"sim;":8764,"smt;":10922,"sol;":47,"squ;":9633,"sub;":8834,"sum;":8721,sup1:185,sup2:178,sup3:179,"sup;":8835,"tau;":964,"tcy;":1090,"tfr;":120113,"top;":8868,"ucy;":1091,"ufr;":120114,"uml;":168,uuml:252,"vcy;":1074,"vee;":8744,"vfr;":120115,"wfr;":120116,"xfr;":120117,"ycy;":1099,"yen;":165,"yfr;":120118,yuml:255,"zcy;":1079,"zfr;":120119,"zwj;":8205,AMP:38,"DD;":8517,ETH:208,"GT;":62,"Gg;":8921,"Gt;":8811,"Im;":8465,"LT;":60,"Ll;":8920,"Lt;":8810,"Mu;":924,"Nu;":925,"Or;":10836,"Pi;":928,"Pr;":10939,REG:174,"Re;":8476,"Sc;":10940,"Xi;":926,"ac;":8766,"af;":8289,amp:38,"ap;":8776,"dd;":8518,deg:176,"ee;":8519,"eg;":10906,"el;":10905,eth:240,"gE;":8807,"ge;":8805,"gg;":8811,"gl;":8823,"gt;":62,"ic;":8291,"ii;":8520,"in;":8712,"it;":8290,"lE;":8806,"le;":8804,"lg;":8822,"ll;":8810,"lt;":60,"mp;":8723,"mu;":956,"ne;":8800,"ni;":8715,not:172,"nu;":957,"oS;":9416,"or;":8744,"pi;":960,"pm;":177,"pr;":8826,reg:174,"rx;":8478,"sc;":8827,shy:173,uml:168,"wp;":8472,"wr;":8768,"xi;":958,yen:165,GT:62,LT:60,gt:62,lt:60};function S6(t,e){return e&&!t.endsWith(";")?`${t}\\b(?!=)`:t}function ZT(t){const e="#(?:x[a-fA-F\\d]+|\\d+)(?:;)?",n=Object.keys(w6).map(i=>S6(i,t));return new RegExp(`&(${e}|${n.join("|")})`,"g")}ZT(!1);ZT(!0);const P6=new Map([["svelte:head","SvelteHead"],["svelte:options","SvelteOptions"],["svelte:window","SvelteWindow"],["svelte:document","SvelteDocument"],["svelte:body","SvelteBody"]]);new Map([...P6,["svelte:element","SvelteElement"],["svelte:component","SvelteComponent"],["svelte:self","SvelteSelf"],["svelte:fragment","SvelteFragment"]]);var Qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function KT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function E6(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Yi={},$h={},Yo={},Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});Vh.default=void 0;function C6(){var t=this,e=0,n={"@@iterator":function(){return n},next:function(){if(e<t.length){var i=t[e];return e=e+1,{done:!1,value:i}}else return{done:!0}}};return n}Vh.default=C6;Object.defineProperty(Yo,"__esModule",{value:!0});Yo.default=M6;var T6=A6(Vh);function A6(t){return t&&t.__esModule?t:{default:t}}function Q_(t){"@babel/helpers - typeof";return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q_(t)}function M6(t,e){return typeof Symbol=="function"&&Q_(Symbol.iterator)==="symbol"&&Object.defineProperty(t,Symbol.iterator,{value:T6.default.bind(e)}),t}Object.defineProperty($h,"__esModule",{value:!0});$h.default=void 0;var R6=I6(Yo);function I6(t){return t&&t.__esModule?t:{default:t}}function kg(t,e){return D6(t)||N6(t,e)||O6(t,e)||L6()}function L6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O6(t,e){if(t){if(typeof t=="string")return X9(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X9(t,e):void 0}}function X9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function N6(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function D6(t){if(Array.isArray(t))return t}var il=[["aria-activedescendant",{type:"id"}],["aria-atomic",{type:"boolean"}],["aria-autocomplete",{type:"token",values:["inline","list","both","none"]}],["aria-braillelabel",{type:"string"}],["aria-brailleroledescription",{type:"string"}],["aria-busy",{type:"boolean"}],["aria-checked",{type:"tristate"}],["aria-colcount",{type:"integer"}],["aria-colindex",{type:"integer"}],["aria-colspan",{type:"integer"}],["aria-controls",{type:"idlist"}],["aria-current",{type:"token",values:["page","step","location","date","time",!0,!1]}],["aria-describedby",{type:"idlist"}],["aria-description",{type:"string"}],["aria-details",{type:"id"}],["aria-disabled",{type:"boolean"}],["aria-dropeffect",{type:"tokenlist",values:["copy","execute","link","move","none","popup"]}],["aria-errormessage",{type:"id"}],["aria-expanded",{type:"boolean",allowundefined:!0}],["aria-flowto",{type:"idlist"}],["aria-grabbed",{type:"boolean",allowundefined:!0}],["aria-haspopup",{type:"token",values:[!1,!0,"menu","listbox","tree","grid","dialog"]}],["aria-hidden",{type:"boolean",allowundefined:!0}],["aria-invalid",{type:"token",values:["grammar",!1,"spelling",!0]}],["aria-keyshortcuts",{type:"string"}],["aria-label",{type:"string"}],["aria-labelledby",{type:"idlist"}],["aria-level",{type:"integer"}],["aria-live",{type:"token",values:["assertive","off","polite"]}],["aria-modal",{type:"boolean"}],["aria-multiline",{type:"boolean"}],["aria-multiselectable",{type:"boolean"}],["aria-orientation",{type:"token",values:["vertical","undefined","horizontal"]}],["aria-owns",{type:"idlist"}],["aria-placeholder",{type:"string"}],["aria-posinset",{type:"integer"}],["aria-pressed",{type:"tristate"}],["aria-readonly",{type:"boolean"}],["aria-relevant",{type:"tokenlist",values:["additions","all","removals","text"]}],["aria-required",{type:"boolean"}],["aria-roledescription",{type:"string"}],["aria-rowcount",{type:"integer"}],["aria-rowindex",{type:"integer"}],["aria-rowspan",{type:"integer"}],["aria-selected",{type:"boolean",allowundefined:!0}],["aria-setsize",{type:"integer"}],["aria-sort",{type:"token",values:["ascending","descending","none","other"]}],["aria-valuemax",{type:"number"}],["aria-valuemin",{type:"number"}],["aria-valuenow",{type:"number"}],["aria-valuetext",{type:"string"}]],ex={entries:function(){return il},forEach:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=0,i=il;r<i.length;r++){var s=kg(i[r],2),a=s[0],o=s[1];e.call(n,o,a,il)}},get:function(e){var n=il.filter(function(r){return r[0]===e})[0];return n&&n[1]},has:function(e){return!!ex.get(e)},keys:function(){return il.map(function(e){var n=kg(e,1),r=n[0];return r})},values:function(){return il.map(function(e){var n=kg(e,2),r=n[1];return r})}};$h.default=(0,R6.default)(ex,ex.entries());var qh={};Object.defineProperty(qh,"__esModule",{value:!0});qh.default=void 0;var k6=F6(Yo);function F6(t){return t&&t.__esModule?t:{default:t}}function Fg(t,e){return V6(t)||$6(t,e)||B6(t,e)||U6()}function U6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B6(t,e){if(t){if(typeof t=="string")return W9(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W9(t,e):void 0}}function W9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function $6(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function V6(t){if(Array.isArray(t))return t}var sl=[["a",{reserved:!1}],["abbr",{reserved:!1}],["acronym",{reserved:!1}],["address",{reserved:!1}],["applet",{reserved:!1}],["area",{reserved:!1}],["article",{reserved:!1}],["aside",{reserved:!1}],["audio",{reserved:!1}],["b",{reserved:!1}],["base",{reserved:!0}],["bdi",{reserved:!1}],["bdo",{reserved:!1}],["big",{reserved:!1}],["blink",{reserved:!1}],["blockquote",{reserved:!1}],["body",{reserved:!1}],["br",{reserved:!1}],["button",{reserved:!1}],["canvas",{reserved:!1}],["caption",{reserved:!1}],["center",{reserved:!1}],["cite",{reserved:!1}],["code",{reserved:!1}],["col",{reserved:!0}],["colgroup",{reserved:!0}],["content",{reserved:!1}],["data",{reserved:!1}],["datalist",{reserved:!1}],["dd",{reserved:!1}],["del",{reserved:!1}],["details",{reserved:!1}],["dfn",{reserved:!1}],["dialog",{reserved:!1}],["dir",{reserved:!1}],["div",{reserved:!1}],["dl",{reserved:!1}],["dt",{reserved:!1}],["em",{reserved:!1}],["embed",{reserved:!1}],["fieldset",{reserved:!1}],["figcaption",{reserved:!1}],["figure",{reserved:!1}],["font",{reserved:!1}],["footer",{reserved:!1}],["form",{reserved:!1}],["frame",{reserved:!1}],["frameset",{reserved:!1}],["h1",{reserved:!1}],["h2",{reserved:!1}],["h3",{reserved:!1}],["h4",{reserved:!1}],["h5",{reserved:!1}],["h6",{reserved:!1}],["head",{reserved:!0}],["header",{reserved:!1}],["hgroup",{reserved:!1}],["hr",{reserved:!1}],["html",{reserved:!0}],["i",{reserved:!1}],["iframe",{reserved:!1}],["img",{reserved:!1}],["input",{reserved:!1}],["ins",{reserved:!1}],["kbd",{reserved:!1}],["keygen",{reserved:!1}],["label",{reserved:!1}],["legend",{reserved:!1}],["li",{reserved:!1}],["link",{reserved:!0}],["main",{reserved:!1}],["map",{reserved:!1}],["mark",{reserved:!1}],["marquee",{reserved:!1}],["menu",{reserved:!1}],["menuitem",{reserved:!1}],["meta",{reserved:!0}],["meter",{reserved:!1}],["nav",{reserved:!1}],["noembed",{reserved:!0}],["noscript",{reserved:!0}],["object",{reserved:!1}],["ol",{reserved:!1}],["optgroup",{reserved:!1}],["option",{reserved:!1}],["output",{reserved:!1}],["p",{reserved:!1}],["param",{reserved:!0}],["picture",{reserved:!0}],["pre",{reserved:!1}],["progress",{reserved:!1}],["q",{reserved:!1}],["rp",{reserved:!1}],["rt",{reserved:!1}],["rtc",{reserved:!1}],["ruby",{reserved:!1}],["s",{reserved:!1}],["samp",{reserved:!1}],["script",{reserved:!0}],["section",{reserved:!1}],["select",{reserved:!1}],["small",{reserved:!1}],["source",{reserved:!0}],["spacer",{reserved:!1}],["span",{reserved:!1}],["strike",{reserved:!1}],["strong",{reserved:!1}],["style",{reserved:!0}],["sub",{reserved:!1}],["summary",{reserved:!1}],["sup",{reserved:!1}],["table",{reserved:!1}],["tbody",{reserved:!1}],["td",{reserved:!1}],["textarea",{reserved:!1}],["tfoot",{reserved:!1}],["th",{reserved:!1}],["thead",{reserved:!1}],["time",{reserved:!1}],["title",{reserved:!0}],["tr",{reserved:!1}],["track",{reserved:!0}],["tt",{reserved:!1}],["u",{reserved:!1}],["ul",{reserved:!1}],["var",{reserved:!1}],["video",{reserved:!1}],["wbr",{reserved:!1}],["xmp",{reserved:!1}]],tx={entries:function(){return sl},forEach:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=0,i=sl;r<i.length;r++){var s=Fg(i[r],2),a=s[0],o=s[1];e.call(n,o,a,sl)}},get:function(e){var n=sl.filter(function(r){return r[0]===e})[0];return n&&n[1]},has:function(e){return!!tx.get(e)},keys:function(){return sl.map(function(e){var n=Fg(e,1),r=n[0];return r})},values:function(){return sl.map(function(e){var n=Fg(e,2),r=n[1];return r})}};qh.default=(0,k6.default)(tx,tx.entries());var Cc={},Hh={},zh={};Object.defineProperty(zh,"__esModule",{value:!0});zh.default=void 0;var q6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};zh.default=q6;var Gh={};Object.defineProperty(Gh,"__esModule",{value:!0});Gh.default=void 0;var H6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};Gh.default=H6;var Xh={};Object.defineProperty(Xh,"__esModule",{value:!0});Xh.default=void 0;var z6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null},relatedConcepts:[{concept:{name:"input"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget"]]};Xh.default=z6;var Wh={};Object.defineProperty(Wh,"__esModule",{value:!0});Wh.default=void 0;var G6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Wh.default=G6;var Yh={};Object.defineProperty(Yh,"__esModule",{value:!0});Yh.default=void 0;var X6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};Yh.default=X6;var jh={};Object.defineProperty(jh,"__esModule",{value:!0});jh.default=void 0;var W6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{"aria-atomic":null,"aria-busy":null,"aria-controls":null,"aria-current":null,"aria-describedby":null,"aria-details":null,"aria-dropeffect":null,"aria-flowto":null,"aria-grabbed":null,"aria-hidden":null,"aria-keyshortcuts":null,"aria-label":null,"aria-labelledby":null,"aria-live":null,"aria-owns":null,"aria-relevant":null,"aria-roledescription":null},relatedConcepts:[{concept:{name:"role"},module:"XHTML"},{concept:{name:"type"},module:"Dublin Core"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[]};jh.default=W6;var Zh={};Object.defineProperty(Zh,"__esModule",{value:!0});Zh.default=void 0;var Y6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"frontmatter"},module:"DTB"},{concept:{name:"level"},module:"DTB"},{concept:{name:"level"},module:"SMIL"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};Zh.default=Y6;var Kh={};Object.defineProperty(Kh,"__esModule",{value:!0});Kh.default=void 0;var j6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};Kh.default=j6;var Jh={};Object.defineProperty(Jh,"__esModule",{value:!0});Jh.default=void 0;var Z6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","structure","section","group"]]};Jh.default=Z6;var Qh={};Object.defineProperty(Qh,"__esModule",{value:!0});Qh.default=void 0;var K6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};Qh.default=K6;var ep={};Object.defineProperty(ep,"__esModule",{value:!0});ep.default=void 0;var J6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};ep.default=J6;var tp={};Object.defineProperty(tp,"__esModule",{value:!0});tp.default=void 0;var Q6={abstract:!0,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-modal":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype"]]};tp.default=Q6;Object.defineProperty(Hh,"__esModule",{value:!0});Hh.default=void 0;var eO=Ni(zh),tO=Ni(Gh),nO=Ni(Xh),rO=Ni(Wh),iO=Ni(Yh),sO=Ni(jh),aO=Ni(Zh),oO=Ni(Kh),lO=Ni(Jh),cO=Ni(Qh),uO=Ni(ep),fO=Ni(tp);function Ni(t){return t&&t.__esModule?t:{default:t}}var dO=[["command",eO.default],["composite",tO.default],["input",nO.default],["landmark",rO.default],["range",iO.default],["roletype",sO.default],["section",aO.default],["sectionhead",oO.default],["select",lO.default],["structure",cO.default],["widget",uO.default],["window",fO.default]];Hh.default=dO;var np={},rp={};Object.defineProperty(rp,"__esModule",{value:!0});rp.default=void 0;var hO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-atomic":"true","aria-live":"assertive"},relatedConcepts:[{concept:{name:"alert"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};rp.default=hO;var ip={};Object.defineProperty(ip,"__esModule",{value:!0});ip.default=void 0;var pO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"alert"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","alert"],["roletype","window","dialog"]]};ip.default=pO;var sp={};Object.defineProperty(sp,"__esModule",{value:!0});sp.default=void 0;var mO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"Device Independence Delivery Unit"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};sp.default=mO;var ap={};Object.defineProperty(ap,"__esModule",{value:!0});ap.default=void 0;var vO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"article"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","document"]]};ap.default=vO;var op={};Object.defineProperty(op,"__esModule",{value:!0});op.default=void 0;var gO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element"],name:"header"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};op.default=gO;var lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.default=void 0;var yO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"blockquote"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};lp.default=yO;var cp={};Object.defineProperty(cp,"__esModule",{value:!0});cp.default=void 0;var _O={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-pressed":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"button"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"image"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"reset"}],name:"input"},module:"HTML"},{concept:{attributes:[{name:"type",value:"submit"}],name:"input"},module:"HTML"},{concept:{name:"button"},module:"HTML"},{concept:{name:"trigger"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};cp.default=_O;var up={};Object.defineProperty(up,"__esModule",{value:!0});up.default=void 0;var xO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"caption"},module:"HTML"}],requireContextRole:["figure","grid","table"],requiredContextRole:["figure","grid","table"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};up.default=xO;var fp={};Object.defineProperty(fp,"__esModule",{value:!0});fp.default=void 0;var bO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-colindex":null,"aria-colspan":null,"aria-rowindex":null,"aria-rowspan":null},relatedConcepts:[{concept:{constraints:["ancestor table element has table role"],name:"td"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};fp.default=bO;var dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.default=void 0;var wO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-errormessage":null,"aria-expanded":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"checkbox"}],name:"input"},module:"HTML"},{concept:{name:"option"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input"]]};dp.default=wO;var hp={};Object.defineProperty(hp,"__esModule",{value:!0});hp.default=void 0;var SO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"code"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};hp.default=SO;var pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.default=void 0;var PO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-sort":null},relatedConcepts:[{concept:{name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"col"}],name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"colgroup"}],name:"th"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","structure","section","cell","gridcell"],["roletype","widget","gridcell"],["roletype","structure","sectionhead"]]};pp.default=PO;var mp={};Object.defineProperty(mp,"__esModule",{value:!0});mp.default=void 0;var EO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-autocomplete":null,"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-expanded":"false","aria-haspopup":"listbox"},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"email"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"search"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"tel"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"text"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"url"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"list"},{name:"type",value:"url"}],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"multiple"},{constraints:["undefined"],name:"size"}],constraints:["the multiple attribute is not set and the size attribute does not have a value greater than 1"],name:"select"},module:"HTML"},{concept:{name:"select"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-controls":null,"aria-expanded":"false"},superClass:[["roletype","widget","input"]]};mp.default=EO;var vp={};Object.defineProperty(vp,"__esModule",{value:!0});vp.default=void 0;var CO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element","scoped to the main element"],name:"aside"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-label"}],constraints:["scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"aside"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],constraints:["scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"aside"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};vp.default=CO;var gp={};Object.defineProperty(gp,"__esModule",{value:!0});gp.default=void 0;var TO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{constraints:["scoped to the body element"],name:"footer"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};gp.default=TO;var yp={};Object.defineProperty(yp,"__esModule",{value:!0});yp.default=void 0;var AO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dd"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};yp.default=AO;var _p={};Object.defineProperty(_p,"__esModule",{value:!0});_p.default=void 0;var MO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"del"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};_p.default=MO;var xp={};Object.defineProperty(xp,"__esModule",{value:!0});xp.default=void 0;var RO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dialog"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","window"]]};xp.default=RO;var bp={};Object.defineProperty(bp,"__esModule",{value:!0});bp.default=void 0;var IO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{module:"DAISY Guide"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","list"]]};bp.default=IO;var wp={};Object.defineProperty(wp,"__esModule",{value:!0});wp.default=void 0;var LO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"Device Independence Delivery Unit"}},{concept:{name:"html"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};wp.default=LO;var Sp={};Object.defineProperty(Sp,"__esModule",{value:!0});Sp.default=void 0;var OO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"em"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Sp.default=OO;var Pp={};Object.defineProperty(Pp,"__esModule",{value:!0});Pp.default=void 0;var NO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["article"]],requiredProps:{},superClass:[["roletype","structure","section","list"]]};Pp.default=NO;var Ep={};Object.defineProperty(Ep,"__esModule",{value:!0});Ep.default=void 0;var DO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"figure"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Ep.default=DO;var Cp={};Object.defineProperty(Cp,"__esModule",{value:!0});Cp.default=void 0;var kO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"aria-label"}],name:"form"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],name:"form"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"name"}],name:"form"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};Cp.default=kO;var Tp={};Object.defineProperty(Tp,"__esModule",{value:!0});Tp.default=void 0;var FO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"a"},module:"HTML"},{concept:{name:"area"},module:"HTML"},{concept:{name:"aside"},module:"HTML"},{concept:{name:"b"},module:"HTML"},{concept:{name:"bdo"},module:"HTML"},{concept:{name:"body"},module:"HTML"},{concept:{name:"data"},module:"HTML"},{concept:{name:"div"},module:"HTML"},{concept:{constraints:["scoped to the main element","scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"footer"},module:"HTML"},{concept:{constraints:["scoped to the main element","scoped to a sectioning content element","scoped to a sectioning root element other than body"],name:"header"},module:"HTML"},{concept:{name:"hgroup"},module:"HTML"},{concept:{name:"i"},module:"HTML"},{concept:{name:"pre"},module:"HTML"},{concept:{name:"q"},module:"HTML"},{concept:{name:"samp"},module:"HTML"},{concept:{name:"section"},module:"HTML"},{concept:{name:"small"},module:"HTML"},{concept:{name:"span"},module:"HTML"},{concept:{name:"u"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};Tp.default=FO;var Ap={};Object.defineProperty(Ap,"__esModule",{value:!0});Ap.default=void 0;var UO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-multiselectable":null,"aria-readonly":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","structure","section","table"]]};Ap.default=UO;var Mp={};Object.defineProperty(Mp,"__esModule",{value:!0});Mp.default=void 0;var BO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-selected":null},relatedConcepts:[{concept:{constraints:["ancestor table element has grid role","ancestor table element has treegrid role"],name:"td"},module:"HTML"}],requireContextRole:["row"],requiredContextRole:["row"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","widget"]]};Mp.default=BO;var Rp={};Object.defineProperty(Rp,"__esModule",{value:!0});Rp.default=void 0;var $O={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-disabled":null},relatedConcepts:[{concept:{name:"details"},module:"HTML"},{concept:{name:"fieldset"},module:"HTML"},{concept:{name:"optgroup"},module:"HTML"},{concept:{name:"address"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Rp.default=$O;var Ip={};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.default=void 0;var VO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-level":"2"},relatedConcepts:[{concept:{name:"h1"},module:"HTML"},{concept:{name:"h2"},module:"HTML"},{concept:{name:"h3"},module:"HTML"},{concept:{name:"h4"},module:"HTML"},{concept:{name:"h5"},module:"HTML"},{concept:{name:"h6"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-level":"2"},superClass:[["roletype","structure","sectionhead"]]};Ip.default=VO;var Lp={};Object.defineProperty(Lp,"__esModule",{value:!0});Lp.default=void 0;var qO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"alt"}],name:"img"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"alt"}],name:"img"},module:"HTML"},{concept:{name:"imggroup"},module:"DTB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Lp.default=qO;var Op={};Object.defineProperty(Op,"__esModule",{value:!0});Op.default=void 0;var HO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"ins"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Op.default=HO;var Np={};Object.defineProperty(Np,"__esModule",{value:!0});Np.default=void 0;var zO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"href"}],name:"a"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"href"}],name:"area"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};Np.default=zO;var Dp={};Object.defineProperty(Dp,"__esModule",{value:!0});Dp.default=void 0;var GO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menu"},module:"HTML"},{concept:{name:"ol"},module:"HTML"},{concept:{name:"ul"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["listitem"]],requiredProps:{},superClass:[["roletype","structure","section"]]};Dp.default=GO;var kp={};Object.defineProperty(kp,"__esModule",{value:!0});kp.default=void 0;var XO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-invalid":null,"aria-multiselectable":null,"aria-readonly":null,"aria-required":null,"aria-orientation":"vertical"},relatedConcepts:[{concept:{attributes:[{constraints:[">1"],name:"size"}],constraints:["the size attribute value is greater than 1"],name:"select"},module:"HTML"},{concept:{attributes:[{name:"multiple"}],name:"select"},module:"HTML"},{concept:{name:"datalist"},module:"HTML"},{concept:{name:"list"},module:"ARIA"},{concept:{name:"select"},module:"XForms"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["option","group"],["option"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};kp.default=XO;var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});Fp.default=void 0;var WO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-level":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{constraints:["direct descendant of ol","direct descendant of ul","direct descendant of menu"],name:"li"},module:"HTML"},{concept:{name:"item"},module:"XForms"}],requireContextRole:["directory","list"],requiredContextRole:["directory","list"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Fp.default=WO;var Up={};Object.defineProperty(Up,"__esModule",{value:!0});Up.default=void 0;var YO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-live":"polite"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Up.default=YO;var Bp={};Object.defineProperty(Bp,"__esModule",{value:!0});Bp.default=void 0;var jO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"main"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};Bp.default=jO;var $p={};Object.defineProperty($p,"__esModule",{value:!0});$p.default=void 0;var ZO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null},relatedConcepts:[{concept:{name:"mark"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};$p.default=ZO;var Vp={};Object.defineProperty(Vp,"__esModule",{value:!0});Vp.default=void 0;var KO={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Vp.default=KO;var qp={};Object.defineProperty(qp,"__esModule",{value:!0});qp.default=void 0;var JO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"math"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};qp.default=JO;var Hp={};Object.defineProperty(Hp,"__esModule",{value:!0});Hp.default=void 0;var QO={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"vertical"},relatedConcepts:[{concept:{name:"MENU"},module:"JAPI"},{concept:{name:"list"},module:"ARIA"},{concept:{name:"select"},module:"XForms"},{concept:{name:"sidebar"},module:"DTB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["menuitem","group"],["menuitemradio","group"],["menuitemcheckbox","group"],["menuitem"],["menuitemcheckbox"],["menuitemradio"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};Hp.default=QO;var zp={};Object.defineProperty(zp,"__esModule",{value:!0});zp.default=void 0;var eN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"horizontal"},relatedConcepts:[{concept:{name:"toolbar"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["menuitem","group"],["menuitemradio","group"],["menuitemcheckbox","group"],["menuitem"],["menuitemcheckbox"],["menuitemradio"]],requiredProps:{},superClass:[["roletype","widget","composite","select","menu"],["roletype","structure","section","group","select","menu"]]};zp.default=eN;var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.default=void 0;var tN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"MENU_ITEM"},module:"JAPI"},{concept:{name:"listitem"},module:"ARIA"},{concept:{name:"option"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command"]]};Gp.default=tN;var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0});Xp.default=void 0;var nN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menuitem"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox"],["roletype","widget","command","menuitem"]]};Xp.default=nN;var Wp={};Object.defineProperty(Wp,"__esModule",{value:!0});Wp.default=void 0;var rN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"menuitem"},module:"ARIA"}],requireContextRole:["group","menu","menubar"],requiredContextRole:["group","menu","menubar"],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox","menuitemcheckbox"],["roletype","widget","command","menuitem","menuitemcheckbox"],["roletype","widget","input","radio"]]};Wp.default=rN;var Yp={};Object.defineProperty(Yp,"__esModule",{value:!0});Yp.default=void 0;var iN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuetext":null,"aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[{concept:{name:"meter"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-valuenow":null},superClass:[["roletype","structure","range"]]};Yp.default=iN;var jp={};Object.defineProperty(jp,"__esModule",{value:!0});jp.default=void 0;var sN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"nav"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};jp.default=sN;var Zp={};Object.defineProperty(Zp,"__esModule",{value:!0});Zp.default=void 0;var aN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:[],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[]};Zp.default=aN;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0});Kp.default=void 0;var oN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Kp.default=oN;var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.default=void 0;var lN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-posinset":null,"aria-setsize":null,"aria-selected":"false"},relatedConcepts:[{concept:{name:"item"},module:"XForms"},{concept:{name:"listitem"},module:"ARIA"},{concept:{name:"option"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-selected":"false"},superClass:[["roletype","widget","input"]]};Jp.default=lN;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.default=void 0;var cN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"p"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Qp.default=cN;var e0={};Object.defineProperty(e0,"__esModule",{value:!0});e0.default=void 0;var uN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{attributes:[{name:"alt",value:""}],name:"img"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};e0.default=uN;var t0={};Object.defineProperty(t0,"__esModule",{value:!0});t0.default=void 0;var fN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-valuetext":null},relatedConcepts:[{concept:{name:"progress"},module:"HTML"},{concept:{name:"status"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","range"],["roletype","widget"]]};t0.default=fN;var n0={};Object.defineProperty(n0,"__esModule",{value:!0});n0.default=void 0;var dN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-checked":null,"aria-posinset":null,"aria-setsize":null},relatedConcepts:[{concept:{attributes:[{name:"type",value:"radio"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input"]]};n0.default=dN;var r0={};Object.defineProperty(r0,"__esModule",{value:!0});r0.default=void 0;var hN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{name:"list"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["radio"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};r0.default=hN;var i0={};Object.defineProperty(i0,"__esModule",{value:!0});i0.default=void 0;var pN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["set"],name:"aria-label"}],name:"section"},module:"HTML"},{concept:{attributes:[{constraints:["set"],name:"aria-labelledby"}],name:"section"},module:"HTML"},{concept:{name:"Device Independence Glossart perceivable unit"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};i0.default=pN;var s0={};Object.defineProperty(s0,"__esModule",{value:!0});s0.default=void 0;var mN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-colindex":null,"aria-expanded":null,"aria-level":null,"aria-posinset":null,"aria-rowindex":null,"aria-selected":null,"aria-setsize":null},relatedConcepts:[{concept:{name:"tr"},module:"HTML"}],requireContextRole:["grid","rowgroup","table","treegrid"],requiredContextRole:["grid","rowgroup","table","treegrid"],requiredOwnedElements:[["cell"],["columnheader"],["gridcell"],["rowheader"]],requiredProps:{},superClass:[["roletype","structure","section","group"],["roletype","widget"]]};s0.default=mN;var a0={};Object.defineProperty(a0,"__esModule",{value:!0});a0.default=void 0;var vN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"tbody"},module:"HTML"},{concept:{name:"tfoot"},module:"HTML"},{concept:{name:"thead"},module:"HTML"}],requireContextRole:["grid","table","treegrid"],requiredContextRole:["grid","table","treegrid"],requiredOwnedElements:[["row"]],requiredProps:{},superClass:[["roletype","structure"]]};a0.default=vN;var o0={};Object.defineProperty(o0,"__esModule",{value:!0});o0.default=void 0;var gN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-sort":null},relatedConcepts:[{concept:{attributes:[{name:"scope",value:"row"}],name:"th"},module:"HTML"},{concept:{attributes:[{name:"scope",value:"rowgroup"}],name:"th"},module:"HTML"}],requireContextRole:["row","rowgroup"],requiredContextRole:["row","rowgroup"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","cell"],["roletype","structure","section","cell","gridcell"],["roletype","widget","gridcell"],["roletype","structure","sectionhead"]]};o0.default=gN;var l0={};Object.defineProperty(l0,"__esModule",{value:!0});l0.default=void 0;var yN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-valuetext":null,"aria-orientation":"vertical","aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-controls":null,"aria-valuenow":null},superClass:[["roletype","structure","range"],["roletype","widget"]]};l0.default=yN;var c0={};Object.defineProperty(c0,"__esModule",{value:!0});c0.default=void 0;var _N={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};c0.default=_N;var u0={};Object.defineProperty(u0,"__esModule",{value:!0});u0.default=void 0;var xN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"search"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","input","textbox"]]};u0.default=xN;var f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.default=void 0;var bN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-orientation":"horizontal","aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":null,"aria-valuetext":null},relatedConcepts:[{concept:{name:"hr"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure"]]};f0.default=bN;var d0={};Object.defineProperty(d0,"__esModule",{value:!0});d0.default=void 0;var wN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null,"aria-readonly":null,"aria-valuetext":null,"aria-orientation":"horizontal","aria-valuemax":"100","aria-valuemin":"0"},relatedConcepts:[{concept:{attributes:[{name:"type",value:"range"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-valuenow":null},superClass:[["roletype","widget","input"],["roletype","structure","range"]]};d0.default=wN;var h0={};Object.defineProperty(h0,"__esModule",{value:!0});h0.default=void 0;var SN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-readonly":null,"aria-required":null,"aria-valuetext":null,"aria-valuenow":"0"},relatedConcepts:[{concept:{attributes:[{name:"type",value:"number"}],name:"input"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","composite"],["roletype","widget","input"],["roletype","structure","range"]]};h0.default=SN;var p0={};Object.defineProperty(p0,"__esModule",{value:!0});p0.default=void 0;var PN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-atomic":"true","aria-live":"polite"},relatedConcepts:[{concept:{name:"output"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};p0.default=PN;var m0={};Object.defineProperty(m0,"__esModule",{value:!0});m0.default=void 0;var EN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"strong"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};m0.default=EN;var v0={};Object.defineProperty(v0,"__esModule",{value:!0});v0.default=void 0;var CN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"sub"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};v0.default=CN;var g0={};Object.defineProperty(g0,"__esModule",{value:!0});g0.default=void 0;var TN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:["aria-label","aria-labelledby"],props:{},relatedConcepts:[{concept:{name:"sup"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};g0.default=TN;var y0={};Object.defineProperty(y0,"__esModule",{value:!0});y0.default=void 0;var AN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"button"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{"aria-checked":null},superClass:[["roletype","widget","input","checkbox"]]};y0.default=AN;var _0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.default=void 0;var MN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!0,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-disabled":null,"aria-expanded":null,"aria-haspopup":null,"aria-posinset":null,"aria-setsize":null,"aria-selected":"false"},relatedConcepts:[],requireContextRole:["tablist"],requiredContextRole:["tablist"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","sectionhead"],["roletype","widget"]]};_0.default=MN;var x0={};Object.defineProperty(x0,"__esModule",{value:!0});x0.default=void 0;var RN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-colcount":null,"aria-rowcount":null},relatedConcepts:[{concept:{name:"table"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","structure","section"]]};x0.default=RN;var b0={};Object.defineProperty(b0,"__esModule",{value:!0});b0.default=void 0;var IN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-level":null,"aria-multiselectable":null,"aria-orientation":"horizontal"},relatedConcepts:[{module:"DAISY",concept:{name:"guide"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["tab"]],requiredProps:{},superClass:[["roletype","widget","composite"]]};b0.default=IN;var w0={};Object.defineProperty(w0,"__esModule",{value:!0});w0.default=void 0;var LN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};w0.default=LN;var S0={};Object.defineProperty(S0,"__esModule",{value:!0});S0.default=void 0;var ON={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"dfn"},module:"HTML"},{concept:{name:"dt"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};S0.default=ON;var P0={};Object.defineProperty(P0,"__esModule",{value:!0});P0.default=void 0;var NN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-activedescendant":null,"aria-autocomplete":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null,"aria-multiline":null,"aria-placeholder":null,"aria-readonly":null,"aria-required":null},relatedConcepts:[{concept:{attributes:[{constraints:["undefined"],name:"type"},{constraints:["undefined"],name:"list"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"email"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"tel"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"text"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{attributes:[{constraints:["undefined"],name:"list"},{name:"type",value:"url"}],constraints:["the list attribute is not set"],name:"input"},module:"HTML"},{concept:{name:"input"},module:"XForms"},{concept:{name:"textarea"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","input"]]};P0.default=NN;var E0={};Object.defineProperty(E0,"__esModule",{value:!0});E0.default=void 0;var DN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"time"},module:"HTML"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};E0.default=DN;var C0={};Object.defineProperty(C0,"__esModule",{value:!0});C0.default=void 0;var kN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","status"]]};C0.default=kN;var T0={};Object.defineProperty(T0,"__esModule",{value:!0});T0.default=void 0;var FN={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-orientation":"horizontal"},relatedConcepts:[{concept:{name:"menubar"},module:"ARIA"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","group"]]};T0.default=FN;var A0={};Object.defineProperty(A0,"__esModule",{value:!0});A0.default=void 0;var UN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};A0.default=UN;var M0={};Object.defineProperty(M0,"__esModule",{value:!0});M0.default=void 0;var BN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null,"aria-multiselectable":null,"aria-required":null,"aria-orientation":"vertical"},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["treeitem","group"],["treeitem"]],requiredProps:{},superClass:[["roletype","widget","composite","select"],["roletype","structure","section","group","select"]]};M0.default=BN;var R0={};Object.defineProperty(R0,"__esModule",{value:!0});R0.default=void 0;var $N={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["row"],["row","rowgroup"]],requiredProps:{},superClass:[["roletype","widget","composite","grid"],["roletype","structure","section","table","grid"],["roletype","widget","composite","select","tree"],["roletype","structure","section","group","select","tree"]]};R0.default=$N;var I0={};Object.defineProperty(I0,"__esModule",{value:!0});I0.default=void 0;var VN={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-expanded":null,"aria-haspopup":null},relatedConcepts:[],requireContextRole:["group","tree"],requiredContextRole:["group","tree"],requiredOwnedElements:[],requiredProps:{"aria-selected":null},superClass:[["roletype","structure","section","listitem"],["roletype","widget","input","option"]]};I0.default=VN;Object.defineProperty(np,"__esModule",{value:!0});np.default=void 0;var qN=ot(rp),HN=ot(ip),zN=ot(sp),GN=ot(ap),XN=ot(op),WN=ot(lp),YN=ot(cp),jN=ot(up),ZN=ot(fp),KN=ot(dp),JN=ot(hp),QN=ot(pp),e7=ot(mp),t7=ot(vp),n7=ot(gp),r7=ot(yp),i7=ot(_p),s7=ot(xp),a7=ot(bp),o7=ot(wp),l7=ot(Sp),c7=ot(Pp),u7=ot(Ep),f7=ot(Cp),d7=ot(Tp),h7=ot(Ap),p7=ot(Mp),m7=ot(Rp),v7=ot(Ip),g7=ot(Lp),y7=ot(Op),_7=ot(Np),x7=ot(Dp),b7=ot(kp),w7=ot(Fp),S7=ot(Up),P7=ot(Bp),E7=ot($p),C7=ot(Vp),T7=ot(qp),A7=ot(Hp),M7=ot(zp),R7=ot(Gp),I7=ot(Xp),L7=ot(Wp),O7=ot(Yp),N7=ot(jp),D7=ot(Zp),k7=ot(Kp),F7=ot(Jp),U7=ot(Qp),B7=ot(e0),$7=ot(t0),V7=ot(n0),q7=ot(r0),H7=ot(i0),z7=ot(s0),G7=ot(a0),X7=ot(o0),W7=ot(l0),Y7=ot(c0),j7=ot(u0),Z7=ot(f0),K7=ot(d0),J7=ot(h0),Q7=ot(p0),eD=ot(m0),tD=ot(v0),nD=ot(g0),rD=ot(y0),iD=ot(_0),sD=ot(x0),aD=ot(b0),oD=ot(w0),lD=ot(S0),cD=ot(P0),uD=ot(E0),fD=ot(C0),dD=ot(T0),hD=ot(A0),pD=ot(M0),mD=ot(R0),vD=ot(I0);function ot(t){return t&&t.__esModule?t:{default:t}}var gD=[["alert",qN.default],["alertdialog",HN.default],["application",zN.default],["article",GN.default],["banner",XN.default],["blockquote",WN.default],["button",YN.default],["caption",jN.default],["cell",ZN.default],["checkbox",KN.default],["code",JN.default],["columnheader",QN.default],["combobox",e7.default],["complementary",t7.default],["contentinfo",n7.default],["definition",r7.default],["deletion",i7.default],["dialog",s7.default],["directory",a7.default],["document",o7.default],["emphasis",l7.default],["feed",c7.default],["figure",u7.default],["form",f7.default],["generic",d7.default],["grid",h7.default],["gridcell",p7.default],["group",m7.default],["heading",v7.default],["img",g7.default],["insertion",y7.default],["link",_7.default],["list",x7.default],["listbox",b7.default],["listitem",w7.default],["log",S7.default],["main",P7.default],["mark",E7.default],["marquee",C7.default],["math",T7.default],["menu",A7.default],["menubar",M7.default],["menuitem",R7.default],["menuitemcheckbox",I7.default],["menuitemradio",L7.default],["meter",O7.default],["navigation",N7.default],["none",D7.default],["note",k7.default],["option",F7.default],["paragraph",U7.default],["presentation",B7.default],["progressbar",$7.default],["radio",V7.default],["radiogroup",q7.default],["region",H7.default],["row",z7.default],["rowgroup",G7.default],["rowheader",X7.default],["scrollbar",W7.default],["search",Y7.default],["searchbox",j7.default],["separator",Z7.default],["slider",K7.default],["spinbutton",J7.default],["status",Q7.default],["strong",eD.default],["subscript",tD.default],["superscript",nD.default],["switch",rD.default],["tab",iD.default],["table",sD.default],["tablist",aD.default],["tabpanel",oD.default],["term",lD.default],["textbox",cD.default],["time",uD.default],["timer",fD.default],["toolbar",dD.default],["tooltip",hD.default],["tree",pD.default],["treegrid",mD.default],["treeitem",vD.default]];np.default=gD;var L0={},O0={};Object.defineProperty(O0,"__esModule",{value:!0});O0.default=void 0;var yD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"abstract [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};O0.default=yD;var N0={};Object.defineProperty(N0,"__esModule",{value:!0});N0.default=void 0;var _D={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"acknowledgments [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};N0.default=_D;var D0={};Object.defineProperty(D0,"__esModule",{value:!0});D0.default=void 0;var xD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"afterword [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};D0.default=xD;var k0={};Object.defineProperty(k0,"__esModule",{value:!0});k0.default=void 0;var bD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"appendix [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};k0.default=bD;var F0={};Object.defineProperty(F0,"__esModule",{value:!0});F0.default=void 0;var wD={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"referrer [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};F0.default=wD;var U0={};Object.defineProperty(U0,"__esModule",{value:!0});U0.default=void 0;var SD={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"EPUB biblioentry [EPUB-SSV]"},module:"EPUB"}],requireContextRole:["doc-bibliography"],requiredContextRole:["doc-bibliography"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","listitem"]]};U0.default=SD;var B0={};Object.defineProperty(B0,"__esModule",{value:!0});B0.default=void 0;var PD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"bibliography [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["doc-biblioentry"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};B0.default=PD;var $0={};Object.defineProperty($0,"__esModule",{value:!0});$0.default=void 0;var ED={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"biblioref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};$0.default=ED;var V0={};Object.defineProperty(V0,"__esModule",{value:!0});V0.default=void 0;var CD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"chapter [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};V0.default=CD;var q0={};Object.defineProperty(q0,"__esModule",{value:!0});q0.default=void 0;var TD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"colophon [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};q0.default=TD;var H0={};Object.defineProperty(H0,"__esModule",{value:!0});H0.default=void 0;var AD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"conclusion [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};H0.default=AD;var z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.default=void 0;var MD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"cover [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","img"]]};z0.default=MD;var G0={};Object.defineProperty(G0,"__esModule",{value:!0});G0.default=void 0;var RD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"credit [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};G0.default=RD;var X0={};Object.defineProperty(X0,"__esModule",{value:!0});X0.default=void 0;var ID={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"credits [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};X0.default=ID;var W0={};Object.defineProperty(W0,"__esModule",{value:!0});W0.default=void 0;var LD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"dedication [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};W0.default=LD;var Y0={};Object.defineProperty(Y0,"__esModule",{value:!0});Y0.default=void 0;var OD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"rearnote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:["doc-endnotes"],requiredContextRole:["doc-endnotes"],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","listitem"]]};Y0.default=OD;var j0={};Object.defineProperty(j0,"__esModule",{value:!0});j0.default=void 0;var ND={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"rearnotes [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["doc-endnote"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};j0.default=ND;var Z0={};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.default=void 0;var DD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"epigraph [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Z0.default=DD;var K0={};Object.defineProperty(K0,"__esModule",{value:!0});K0.default=void 0;var kD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"epilogue [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};K0.default=kD;var J0={};Object.defineProperty(J0,"__esModule",{value:!0});J0.default=void 0;var FD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"errata [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};J0.default=FD;var Q0={};Object.defineProperty(Q0,"__esModule",{value:!0});Q0.default=void 0;var UD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};Q0.default=UD;var em={};Object.defineProperty(em,"__esModule",{value:!0});em.default=void 0;var BD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"footnote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};em.default=BD;var tm={};Object.defineProperty(tm,"__esModule",{value:!0});tm.default=void 0;var $D={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"foreword [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};tm.default=$D;var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.default=void 0;var VD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"glossary [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[["definition"],["term"]],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};nm.default=VD;var rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.default=void 0;var qD={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"glossref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};rm.default=qD;var im={};Object.defineProperty(im,"__esModule",{value:!0});im.default=void 0;var HD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"index [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};im.default=HD;var sm={};Object.defineProperty(sm,"__esModule",{value:!0});sm.default=void 0;var zD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"introduction [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};sm.default=zD;var am={};Object.defineProperty(am,"__esModule",{value:!0});am.default=void 0;var GD={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"noteref [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","widget","command","link"]]};am.default=GD;var om={};Object.defineProperty(om,"__esModule",{value:!0});om.default=void 0;var XD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"notice [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","note"]]};om.default=XD;var lm={};Object.defineProperty(lm,"__esModule",{value:!0});lm.default=void 0;var WD={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"pagebreak [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","separator"]]};lm.default=WD;var cm={};Object.defineProperty(cm,"__esModule",{value:!0});cm.default=void 0;var YD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null,"aria-disabled":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};cm.default=YD;var um={};Object.defineProperty(um,"__esModule",{value:!0});um.default=void 0;var jD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["prohibited"],prohibitedProps:[],props:{"aria-braillelabel":null,"aria-brailleroledescription":null,"aria-description":null,"aria-disabled":null,"aria-errormessage":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};um.default=jD;var fm={};Object.defineProperty(fm,"__esModule",{value:!0});fm.default=void 0;var ZD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"page-list [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};fm.default=ZD;var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.default=void 0;var KD={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"part [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};dm.default=KD;var hm={};Object.defineProperty(hm,"__esModule",{value:!0});hm.default=void 0;var JD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"preface [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};hm.default=JD;var pm={};Object.defineProperty(pm,"__esModule",{value:!0});pm.default=void 0;var QD={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"prologue [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark"]]};pm.default=QD;var mm={};Object.defineProperty(mm,"__esModule",{value:!0});mm.default=void 0;var ek={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{},relatedConcepts:[{concept:{name:"pullquote [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["none"]]};mm.default=ek;var vm={};Object.defineProperty(vm,"__esModule",{value:!0});vm.default=void 0;var tk={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"qna [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section"]]};vm.default=tk;var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.default=void 0;var nk={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"subtitle [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","sectionhead"]]};gm.default=nk;var ym={};Object.defineProperty(ym,"__esModule",{value:!0});ym.default=void 0;var rk={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"help [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","note"]]};ym.default=rk;var _m={};Object.defineProperty(_m,"__esModule",{value:!0});_m.default=void 0;var ik={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{concept:{name:"toc [EPUB-SSV]"},module:"EPUB"}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","landmark","navigation"]]};_m.default=ik;Object.defineProperty(L0,"__esModule",{value:!0});L0.default=void 0;var sk=tn(O0),ak=tn(N0),ok=tn(D0),lk=tn(k0),ck=tn(F0),uk=tn(U0),fk=tn(B0),dk=tn($0),hk=tn(V0),pk=tn(q0),mk=tn(H0),vk=tn(z0),gk=tn(G0),yk=tn(X0),_k=tn(W0),xk=tn(Y0),bk=tn(j0),wk=tn(Z0),Sk=tn(K0),Pk=tn(J0),Ek=tn(Q0),Ck=tn(em),Tk=tn(tm),Ak=tn(nm),Mk=tn(rm),Rk=tn(im),Ik=tn(sm),Lk=tn(am),Ok=tn(om),Nk=tn(lm),Dk=tn(cm),kk=tn(um),Fk=tn(fm),Uk=tn(dm),Bk=tn(hm),$k=tn(pm),Vk=tn(mm),qk=tn(vm),Hk=tn(gm),zk=tn(ym),Gk=tn(_m);function tn(t){return t&&t.__esModule?t:{default:t}}var Xk=[["doc-abstract",sk.default],["doc-acknowledgments",ak.default],["doc-afterword",ok.default],["doc-appendix",lk.default],["doc-backlink",ck.default],["doc-biblioentry",uk.default],["doc-bibliography",fk.default],["doc-biblioref",dk.default],["doc-chapter",hk.default],["doc-colophon",pk.default],["doc-conclusion",mk.default],["doc-cover",vk.default],["doc-credit",gk.default],["doc-credits",yk.default],["doc-dedication",_k.default],["doc-endnote",xk.default],["doc-endnotes",bk.default],["doc-epigraph",wk.default],["doc-epilogue",Sk.default],["doc-errata",Pk.default],["doc-example",Ek.default],["doc-footnote",Ck.default],["doc-foreword",Tk.default],["doc-glossary",Ak.default],["doc-glossref",Mk.default],["doc-index",Rk.default],["doc-introduction",Ik.default],["doc-noteref",Lk.default],["doc-notice",Ok.default],["doc-pagebreak",Nk.default],["doc-pagefooter",Dk.default],["doc-pageheader",kk.default],["doc-pagelist",Fk.default],["doc-part",Uk.default],["doc-preface",Bk.default],["doc-prologue",$k.default],["doc-pullquote",Vk.default],["doc-qna",qk.default],["doc-subtitle",Hk.default],["doc-tip",zk.default],["doc-toc",Gk.default]];L0.default=Xk;var xm={},bm={};Object.defineProperty(bm,"__esModule",{value:!0});bm.default=void 0;var Wk={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!1,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{module:"GRAPHICS",concept:{name:"graphics-object"}},{module:"ARIA",concept:{name:"img"}},{module:"ARIA",concept:{name:"article"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","document"]]};bm.default=Wk;var wm={};Object.defineProperty(wm,"__esModule",{value:!0});wm.default=void 0;var Yk={abstract:!1,accessibleNameRequired:!1,baseConcepts:[],childrenPresentational:!1,nameFrom:["author","contents"],prohibitedProps:[],props:{"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[{module:"GRAPHICS",concept:{name:"graphics-document"}},{module:"ARIA",concept:{name:"group"}},{module:"ARIA",concept:{name:"img"}},{module:"GRAPHICS",concept:{name:"graphics-symbol"}}],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","group"]]};wm.default=Yk;var Sm={};Object.defineProperty(Sm,"__esModule",{value:!0});Sm.default=void 0;var jk={abstract:!1,accessibleNameRequired:!0,baseConcepts:[],childrenPresentational:!0,nameFrom:["author"],prohibitedProps:[],props:{"aria-disabled":null,"aria-errormessage":null,"aria-expanded":null,"aria-haspopup":null,"aria-invalid":null},relatedConcepts:[],requireContextRole:[],requiredContextRole:[],requiredOwnedElements:[],requiredProps:{},superClass:[["roletype","structure","section","img"]]};Sm.default=jk;Object.defineProperty(xm,"__esModule",{value:!0});xm.default=void 0;var Zk=X2(bm),Kk=X2(wm),Jk=X2(Sm);function X2(t){return t&&t.__esModule?t:{default:t}}var Qk=[["graphics-document",Zk.default],["graphics-object",Kk.default],["graphics-symbol",Jk.default]];xm.default=Qk;Object.defineProperty(Cc,"__esModule",{value:!0});Cc.default=void 0;var eF=sf(Hh),tF=sf(np),nF=sf(L0),rF=sf(xm),iF=sf(Yo);function sf(t){return t&&t.__esModule?t:{default:t}}function nx(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=JT(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return a=u.done,u},e:function(u){o=!0,s=u},f:function(){try{a||n.return==null||n.return()}finally{if(o)throw s}}}}function Su(t,e){return oF(t)||aF(t,e)||JT(t,e)||sF()}function sF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JT(t,e){if(t){if(typeof t=="string")return Y9(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y9(t,e):void 0}}function Y9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function aF(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function oF(t){if(Array.isArray(t))return t}var Da=[].concat(eF.default,tF.default,nF.default,rF.default);Da.forEach(function(t){var e=Su(t,2),n=e[1],r=nx(n.superClass),i;try{for(r.s();!(i=r.n()).done;){var s=i.value,a=nx(s),o;try{var l=function(){var f=o.value,h=Da.filter(function(g){var m=Su(g,1),x=m[0];return x===f})[0];if(h)for(var p=h[1],v=0,P=Object.keys(p.props);v<P.length;v++){var S=P[v];Object.prototype.hasOwnProperty.call(n.props,S)||(n.props[S]=p.props[S])}};for(a.s();!(o=a.n()).done;)l()}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}});var rx={entries:function(){return Da},forEach:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=nx(Da),i;try{for(r.s();!(i=r.n()).done;){var s=Su(i.value,2),a=s[0],o=s[1];e.call(n,o,a,Da)}}catch(l){r.e(l)}finally{r.f()}},get:function(e){var n=Da.filter(function(r){return r[0]===e})[0];return n&&n[1]},has:function(e){return!!rx.get(e)},keys:function(){return Da.map(function(e){var n=Su(e,1),r=n[0];return r})},values:function(){return Da.map(function(e){var n=Su(e,2),r=n[1];return r})}};Cc.default=(0,iF.default)(rx,rx.entries());var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=void 0;var lF=eA(Yo),QT=eA(Cc);function eA(t){return t&&t.__esModule?t:{default:t}}function Ug(t,e){return dF(t)||fF(t,e)||uF(t,e)||cF()}function cF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uF(t,e){if(t){if(typeof t=="string")return j9(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j9(t,e):void 0}}function j9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function fF(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function dF(t){if(Array.isArray(t))return t}var ka=[],Z9=QT.default.keys();for(var Bg=0;Bg<Z9.length;Bg++){var $g=Z9[Bg],Vg=QT.default.get($g);if(Vg)for(var K9=[].concat(Vg.baseConcepts,Vg.relatedConcepts),hF=function(){var e=K9[qg];if(e.module==="HTML"){var n=e.concept;if(n){var r=ka.filter(function(o){return pF(o[0],n)})[0],i;r?i=r[1]:i=[];for(var s=!0,a=0;a<i.length;a++)if(i[a]===$g){s=!1;break}s&&i.push($g),r||ka.push([n,i])}}},qg=0;qg<K9.length;qg++)hF()}var ix={entries:function(){return ka},forEach:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=0,i=ka;r<i.length;r++){var s=Ug(i[r],2),a=s[0],o=s[1];e.call(n,o,a,ka)}},get:function(e){var n=ka.filter(function(r){return e.name===r[0].name&&tA(e.attributes,r[0].attributes)})[0];return n&&n[1]},has:function(e){return!!ix.get(e)},keys:function(){return ka.map(function(e){var n=Ug(e,1),r=n[0];return r})},values:function(){return ka.map(function(e){var n=Ug(e,2),r=n[1];return r})}};function pF(t,e){return t.name===e.name&&mF(t.constraints,e.constraints)&&tA(t.attributes,e.attributes)}function mF(t,e){if(t===void 0&&e!==void 0||t!==void 0&&e===void 0)return!1;if(t!==void 0&&e!==void 0){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1}return!0}function tA(t,e){if(t===void 0&&e!==void 0||t!==void 0&&e===void 0)return!1;if(t!==void 0&&e!==void 0){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++){if(t[n].name!==e[n].name||t[n].value!==e[n].value||t[n].constraints===void 0&&e[n].constraints!==void 0||t[n].constraints!==void 0&&e[n].constraints===void 0)return!1;if(t[n].constraints!==void 0&&e[n].constraints!==void 0){if(t[n].constraints.length!==e[n].constraints.length)return!1;for(var r=0;r<t[n].constraints.length;r++)if(t[n].constraints[r]!==e[n].constraints[r])return!1}}}return!0}Pm.default=(0,lF.default)(ix,ix.entries());var Em={};Object.defineProperty(Em,"__esModule",{value:!0});Em.default=void 0;var vF=rA(Yo),nA=rA(Cc);function rA(t){return t&&t.__esModule?t:{default:t}}function Hg(t,e){return xF(t)||_F(t,e)||yF(t,e)||gF()}function gF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yF(t,e){if(t){if(typeof t=="string")return J9(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J9(t,e):void 0}}function J9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _F(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function xF(t){if(Array.isArray(t))return t}var yo=[],Q9=nA.default.keys();for(var zg=0;zg<Q9.length;zg++){var ew=Q9[zg],Gg=nA.default.get(ew),Xg=[];if(Gg){for(var tw=[].concat(Gg.baseConcepts,Gg.relatedConcepts),Wg=0;Wg<tw.length;Wg++){var nw=tw[Wg];if(nw.module==="HTML"){var rw=nw.concept;rw!=null&&Xg.push(rw)}}Xg.length>0&&yo.push([ew,Xg])}}var sx={entries:function(){return yo},forEach:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=0,i=yo;r<i.length;r++){var s=Hg(i[r],2),a=s[0],o=s[1];e.call(n,o,a,yo)}},get:function(e){var n=yo.filter(function(r){return r[0]===e})[0];return n&&n[1]},has:function(e){return!!sx.get(e)},keys:function(){return yo.map(function(e){var n=Hg(e,1),r=n[0];return r})},values:function(){return yo.map(function(e){var n=Hg(e,2),r=n[1];return r})}};Em.default=(0,vF.default)(sx,sx.entries());var Cm;Object.defineProperty(Yi,"__esModule",{value:!0});var Tm=Yi.roles=Yi.roleElements=Cm=Yi.elementRoles=Yi.dom=Yi.aria=void 0,bF=af($h),wF=af(qh),SF=af(Cc),PF=af(Pm),EF=af(Em);function af(t){return t&&t.__esModule?t:{default:t}}Yi.aria=bF.default;Yi.dom=wF.default;Tm=Yi.roles=SF.default;Cm=Yi.elementRoles=PF.default;Yi.roleElements=EF.default;var Js={},Am={},Tc={},Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});Mm.default=void 0;function CF(){var t=this,e=0,n={"@@iterator":function(){return n},next:function(){if(e<t.length){var i=t[e];return e=e+1,{done:!1,value:i}}else return{done:!0}}};return n}var TF=CF;Mm.default=TF;Object.defineProperty(Tc,"__esModule",{value:!0});Tc.default=RF;var AF=MF(Mm);function MF(t){return t&&t.__esModule?t:{default:t}}function ax(t){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ax(t)}function RF(t,e){return typeof Symbol=="function"&&ax(Symbol.iterator)==="symbol"&&Object.defineProperty(t,Symbol.iterator,{value:AF.default.bind(e)}),t}var jo={},Rm={};Object.defineProperty(Rm,"__esModule",{value:!0});Rm.default=void 0;var IF={relatedConcepts:[{module:"HTML",concept:{name:"abbr"}}],type:"structure"},LF=IF;Rm.default=LF;var Im={};Object.defineProperty(Im,"__esModule",{value:!0});Im.default=void 0;var OF={relatedConcepts:[{module:"ARIA",concept:{name:"alertdialog"}}],type:"window"},NF=OF;Im.default=NF;var Lm={};Object.defineProperty(Lm,"__esModule",{value:!0});Lm.default=void 0;var DF={relatedConcepts:[{module:"ARIA",concept:{name:"alert"}}],type:"structure"},kF=DF;Lm.default=kF;var Om={};Object.defineProperty(Om,"__esModule",{value:!0});Om.default=void 0;var FF={relatedConcepts:[],type:"structure"},UF=FF;Om.default=UF;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0});Nm.default=void 0;var BF={relatedConcepts:[{module:"ARIA",concept:{name:"application"}}],type:"window"},$F=BF;Nm.default=$F;var Dm={};Object.defineProperty(Dm,"__esModule",{value:!0});Dm.default=void 0;var VF={relatedConcepts:[{module:"ARIA",concept:{name:"article"}},{module:"HTML",concept:{name:"article"}}],type:"structure"},qF=VF;Dm.default=qF;var km={};Object.defineProperty(km,"__esModule",{value:!0});km.default=void 0;var HF={relatedConcepts:[{module:"HTML",concept:{name:"audio"}}],type:"widget"},zF=HF;km.default=zF;var Fm={};Object.defineProperty(Fm,"__esModule",{value:!0});Fm.default=void 0;var GF={relatedConcepts:[{module:"ARIA",concept:{name:"banner"}}],type:"structure"},XF=GF;Fm.default=XF;var Um={};Object.defineProperty(Um,"__esModule",{value:!0});Um.default=void 0;var WF={relatedConcepts:[{module:"HTML",concept:{name:"blockquote"}}],type:"structure"},YF=WF;Um.default=YF;var Bm={};Object.defineProperty(Bm,"__esModule",{value:!0});Bm.default=void 0;var jF={relatedConcepts:[{module:"ARIA",concept:{attributes:[{name:"aria-busy",value:"true"}]}}],type:"widget"},ZF=jF;Bm.default=ZF;var $m={};Object.defineProperty($m,"__esModule",{value:!0});$m.default=void 0;var KF={relatedConcepts:[{module:"ARIA",concept:{name:"button"}},{module:"HTML",concept:{name:"button"}}],type:"widget"},JF=KF;$m.default=JF;var Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.default=void 0;var QF={relatedConcepts:[{module:"HTML",concept:{name:"canvas"}}],type:"widget"},eU=QF;Vm.default=eU;var qm={};Object.defineProperty(qm,"__esModule",{value:!0});qm.default=void 0;var tU={relatedConcepts:[{module:"HTML",concept:{name:"caption"}}],type:"structure"},nU=tU;qm.default=nU;var Hm={};Object.defineProperty(Hm,"__esModule",{value:!0});Hm.default=void 0;var rU={relatedConcepts:[{module:"ARIA",concept:{name:"cell"}},{module:"ARIA",concept:{name:"gridcell"}},{module:"HTML",concept:{name:"td"}}],type:"widget"},iU=rU;Hm.default=iU;var zm={};Object.defineProperty(zm,"__esModule",{value:!0});zm.default=void 0;var sU={relatedConcepts:[{module:"ARIA",concept:{name:"checkbox"}},{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"checkbox"}]}}],type:"widget"},aU=sU;zm.default=aU;var Gm={};Object.defineProperty(Gm,"__esModule",{value:!0});Gm.default=void 0;var oU={relatedConcepts:[{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"color"}]}}],type:"widget"},lU=oU;Gm.default=lU;var Xm={};Object.defineProperty(Xm,"__esModule",{value:!0});Xm.default=void 0;var cU={relatedConcepts:[{module:"ARIA",concept:{name:"columnheader"}},{module:"HTML",concept:{name:"th"}}],type:"widget"},uU=cU;Xm.default=uU;var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});Wm.default=void 0;var fU={relatedConcepts:[],type:"structure"},dU=fU;Wm.default=dU;var Ym={};Object.defineProperty(Ym,"__esModule",{value:!0});Ym.default=void 0;var hU={relatedConcepts:[{module:"ARIA",concept:{name:"combobox"}},{module:"HTML",concept:{name:"select"}}],type:"widget"},pU=hU;Ym.default=pU;var jm={};Object.defineProperty(jm,"__esModule",{value:!0});jm.default=void 0;var mU={relatedConcepts:[{module:"ARIA",concept:{name:"complementary"}}],type:"structure"},vU=mU;jm.default=vU;var Zm={};Object.defineProperty(Zm,"__esModule",{value:!0});Zm.default=void 0;var gU={relatedConcepts:[{module:"ARIA",concept:{name:"structureinfo"}}],type:"structure"},yU=gU;Zm.default=yU;var Km={};Object.defineProperty(Km,"__esModule",{value:!0});Km.default=void 0;var _U={relatedConcepts:[{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"date"}]}}],type:"widget"},xU=_U;Km.default=xU;var Jm={};Object.defineProperty(Jm,"__esModule",{value:!0});Jm.default=void 0;var bU={relatedConcepts:[{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"datetime"}]}}],type:"widget"},wU=bU;Jm.default=wU;var Qm={};Object.defineProperty(Qm,"__esModule",{value:!0});Qm.default=void 0;var SU={relatedConcepts:[{module:"HTML",concept:{name:"dfn"}}],type:"structure"},PU=SU;Qm.default=PU;var e1={};Object.defineProperty(e1,"__esModule",{value:!0});e1.default=void 0;var EU={relatedConcepts:[{module:"HTML",concept:{name:"dd"}}],type:"structure"},CU=EU;e1.default=CU;var t1={};Object.defineProperty(t1,"__esModule",{value:!0});t1.default=void 0;var TU={relatedConcepts:[{module:"HTML",concept:{name:"dl"}}],type:"structure"},AU=TU;t1.default=AU;var n1={};Object.defineProperty(n1,"__esModule",{value:!0});n1.default=void 0;var MU={relatedConcepts:[{module:"HTML",concept:{name:"dt"}}],type:"structure"},RU=MU;n1.default=RU;var r1={};Object.defineProperty(r1,"__esModule",{value:!0});r1.default=void 0;var IU={relatedConcepts:[{module:"HTML",concept:{name:"details"}}],type:"structure"},LU=IU;r1.default=LU;var i1={};Object.defineProperty(i1,"__esModule",{value:!0});i1.default=void 0;var OU={relatedConcepts:[{module:"ARIA",concept:{name:"dialog"}},{module:"HTML",concept:{name:"dialog"}}],type:"window"},NU=OU;i1.default=NU;var s1={};Object.defineProperty(s1,"__esModule",{value:!0});s1.default=void 0;var DU={relatedConcepts:[{module:"ARIA",concept:{name:"directory"}},{module:"HTML",concept:{name:"dir"}}],type:"structure"},kU=DU;s1.default=kU;var a1={};Object.defineProperty(a1,"__esModule",{value:!0});a1.default=void 0;var FU={relatedConcepts:[{module:"HTML",concept:{constraints:["scoped to a details element"],name:"summary"}}],type:"widget"},UU=FU;a1.default=UU;var o1={};Object.defineProperty(o1,"__esModule",{value:!0});o1.default=void 0;var BU={relatedConcepts:[{module:"HTML",concept:{name:"div"}}],type:"generic"},$U=BU;o1.default=$U;var l1={};Object.defineProperty(l1,"__esModule",{value:!0});l1.default=void 0;var VU={relatedConcepts:[{module:"ARIA",concept:{name:"document"}}],type:"structure"},qU=VU;l1.default=qU;var c1={};Object.defineProperty(c1,"__esModule",{value:!0});c1.default=void 0;var HU={relatedConcepts:[{module:"HTML",concept:{name:"embed"}}],type:"widget"},zU=HU;c1.default=zU;var u1={};Object.defineProperty(u1,"__esModule",{value:!0});u1.default=void 0;var GU={relatedConcepts:[{module:"ARIA",concept:{name:"feed"}}],type:"structure"},XU=GU;u1.default=XU;var f1={};Object.defineProperty(f1,"__esModule",{value:!0});f1.default=void 0;var WU={relatedConcepts:[{module:"HTML",concept:{name:"figcaption"}}],type:"structure"},YU=WU;f1.default=YU;var d1={};Object.defineProperty(d1,"__esModule",{value:!0});d1.default=void 0;var jU={relatedConcepts:[{module:"ARIA",concept:{name:"figure"}},{module:"HTML",concept:{name:"figure"}}],type:"structure"},ZU=jU;d1.default=ZU;var h1={};Object.defineProperty(h1,"__esModule",{value:!0});h1.default=void 0;var KU={relatedConcepts:[{module:"HTML",concept:{name:"footer"}}],type:"structure"},JU=KU;h1.default=JU;var p1={};Object.defineProperty(p1,"__esModule",{value:!0});p1.default=void 0;var QU={relatedConcepts:[{module:"ARIA",concept:{name:"form"}},{module:"HTML",concept:{name:"form"}}],type:"structure"},eB=QU;p1.default=eB;var m1={};Object.defineProperty(m1,"__esModule",{value:!0});m1.default=void 0;var tB={relatedConcepts:[{module:"ARIA",concept:{name:"grid"}}],type:"widget"},nB=tB;m1.default=nB;var v1={};Object.defineProperty(v1,"__esModule",{value:!0});v1.default=void 0;var rB={relatedConcepts:[{module:"ARIA",concept:{name:"group"}}],type:"structure"},iB=rB;v1.default=iB;var g1={};Object.defineProperty(g1,"__esModule",{value:!0});g1.default=void 0;var sB={relatedConcepts:[{module:"ARIA",concept:{name:"heading"}},{module:"HTML",concept:{name:"h1"}},{module:"HTML",concept:{name:"h2"}},{module:"HTML",concept:{name:"h3"}},{module:"HTML",concept:{name:"h4"}},{module:"HTML",concept:{name:"h5"}},{module:"HTML",concept:{name:"h6"}}],type:"structure"},aB=sB;g1.default=aB;var y1={};Object.defineProperty(y1,"__esModule",{value:!0});y1.default=void 0;var oB={relatedConcepts:[],type:"window"},lB=oB;y1.default=lB;var _1={};Object.defineProperty(_1,"__esModule",{value:!0});_1.default=void 0;var cB={relatedConcepts:[{module:"HTML",concept:{name:"iframe"}}],type:"window"},uB=cB;_1.default=uB;var x1={};Object.defineProperty(x1,"__esModule",{value:!0});x1.default=void 0;var fB={relatedConcepts:[],type:"structure"},dB=fB;x1.default=dB;var b1={};Object.defineProperty(b1,"__esModule",{value:!0});b1.default=void 0;var hB={relatedConcepts:[],type:"widget"},pB=hB;b1.default=pB;var w1={};Object.defineProperty(w1,"__esModule",{value:!0});w1.default=void 0;var mB={relatedConcepts:[{module:"HTML",concept:{name:"img",attributes:[{name:"usemap"}]}}],type:"structure"},vB=mB;w1.default=vB;var S1={};Object.defineProperty(S1,"__esModule",{value:!0});S1.default=void 0;var gB={relatedConcepts:[{module:"ARIA",concept:{name:"img"}},{module:"HTML",concept:{name:"img"}}],type:"structure"},yB=gB;S1.default=yB;var P1={};Object.defineProperty(P1,"__esModule",{value:!0});P1.default=void 0;var _B={relatedConcepts:[{module:"HTML",concept:{name:"input"}}],type:"widget"},xB=_B;P1.default=xB;var E1={};Object.defineProperty(E1,"__esModule",{value:!0});E1.default=void 0;var bB={relatedConcepts:[{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"time"}]}}],type:"widget"},wB=bB;E1.default=wB;var C1={};Object.defineProperty(C1,"__esModule",{value:!0});C1.default=void 0;var SB={relatedConcepts:[{module:"HTML",concept:{name:"label"}}],type:"structure"},PB=SB;C1.default=PB;var T1={};Object.defineProperty(T1,"__esModule",{value:!0});T1.default=void 0;var EB={relatedConcepts:[{module:"HTML",concept:{name:"legend"}}],type:"structure"},CB=EB;T1.default=CB;var A1={};Object.defineProperty(A1,"__esModule",{value:!0});A1.default=void 0;var TB={relatedConcepts:[{module:"HTML",concept:{name:"br"}}],type:"structure"},AB=TB;A1.default=AB;var M1={};Object.defineProperty(M1,"__esModule",{value:!0});M1.default=void 0;var MB={relatedConcepts:[{module:"ARIA",concept:{name:"link"}},{module:"HTML",concept:{name:"a",attributes:[{name:"href"}]}}],type:"widget"},RB=MB;M1.default=RB;var R1={};Object.defineProperty(R1,"__esModule",{value:!0});R1.default=void 0;var IB={relatedConcepts:[{module:"ARIA",concept:{name:"option"}},{module:"HTML",concept:{name:"option"}}],type:"widget"},LB=IB;R1.default=LB;var I1={};Object.defineProperty(I1,"__esModule",{value:!0});I1.default=void 0;var OB={relatedConcepts:[{module:"ARIA",concept:{name:"listbox"}},{module:"HTML",concept:{name:"datalist"}},{module:"HTML",concept:{name:"select"}}],type:"widget"},NB=OB;I1.default=NB;var L1={};Object.defineProperty(L1,"__esModule",{value:!0});L1.default=void 0;var DB={relatedConcepts:[{module:"ARIA",concept:{name:"listitem"}},{module:"HTML",concept:{name:"li"}}],type:"structure"},kB=DB;L1.default=kB;var O1={};Object.defineProperty(O1,"__esModule",{value:!0});O1.default=void 0;var FB={relatedConcepts:[],type:"structure"},UB=FB;O1.default=UB;var N1={};Object.defineProperty(N1,"__esModule",{value:!0});N1.default=void 0;var BB={relatedConcepts:[{module:"ARIA",concept:{name:"list"}},{module:"HTML",concept:{name:"ul"}},{module:"HTML",concept:{name:"ol"}}],type:"structure"},$B=BB;N1.default=$B;var D1={};Object.defineProperty(D1,"__esModule",{value:!0});D1.default=void 0;var VB={relatedConcepts:[{module:"ARIA",concept:{name:"log"}}],type:"structure"},qB=VB;D1.default=qB;var k1={};Object.defineProperty(k1,"__esModule",{value:!0});k1.default=void 0;var HB={relatedConcepts:[{module:"ARIA",concept:{name:"main"}},{module:"HTML",concept:{name:"main"}}],type:"structure"},zB=HB;k1.default=zB;var F1={};Object.defineProperty(F1,"__esModule",{value:!0});F1.default=void 0;var GB={relatedConcepts:[{module:"HTML",concept:{name:"mark"}}],type:"structure"},XB=GB;F1.default=XB;var U1={};Object.defineProperty(U1,"__esModule",{value:!0});U1.default=void 0;var WB={relatedConcepts:[{module:"ARIA",concept:{name:"marquee"}},{module:"HTML",concept:{name:"marquee"}}],type:"structure"},YB=WB;U1.default=YB;var B1={};Object.defineProperty(B1,"__esModule",{value:!0});B1.default=void 0;var jB={relatedConcepts:[{module:"ARIA",concept:{name:"math"}}],type:"structure"},ZB=jB;B1.default=ZB;var $1={};Object.defineProperty($1,"__esModule",{value:!0});$1.default=void 0;var KB={relatedConcepts:[{module:"ARIA",concept:{name:"menubar"}}],type:"structure"},JB=KB;$1.default=JB;var V1={};Object.defineProperty(V1,"__esModule",{value:!0});V1.default=void 0;var QB={relatedConcepts:[],type:"widget"},e$=QB;V1.default=e$;var q1={};Object.defineProperty(q1,"__esModule",{value:!0});q1.default=void 0;var t$={relatedConcepts:[{module:"ARIA",concept:{name:"menuitem"}},{module:"HTML",concept:{name:"menuitem"}}],type:"widget"},n$=t$;q1.default=n$;var H1={};Object.defineProperty(H1,"__esModule",{value:!0});H1.default=void 0;var r$={relatedConcepts:[{module:"ARIA",concept:{name:"menuitemcheckbox"}}],type:"widget"},i$=r$;H1.default=i$;var z1={};Object.defineProperty(z1,"__esModule",{value:!0});z1.default=void 0;var s$={relatedConcepts:[{module:"ARIA",concept:{name:"menuitemradio"}}],type:"widget"},a$=s$;z1.default=a$;var G1={};Object.defineProperty(G1,"__esModule",{value:!0});G1.default=void 0;var o$={relatedConcepts:[],type:"widget"},l$=o$;G1.default=l$;var X1={};Object.defineProperty(X1,"__esModule",{value:!0});X1.default=void 0;var c$={relatedConcepts:[],type:"widget"},u$=c$;X1.default=u$;var W1={};Object.defineProperty(W1,"__esModule",{value:!0});W1.default=void 0;var f$={relatedConcepts:[{module:"ARIA",concept:{name:"menu"}},{module:"HTML",concept:{name:"menu"}}],type:"structure"},d$=f$;W1.default=d$;var Y1={};Object.defineProperty(Y1,"__esModule",{value:!0});Y1.default=void 0;var h$={relatedConcepts:[{module:"HTML",concept:{name:"meter"}}],type:"structure"},p$=h$;Y1.default=p$;var j1={};Object.defineProperty(j1,"__esModule",{value:!0});j1.default=void 0;var m$={relatedConcepts:[{module:"ARIA",concept:{name:"navigation"}},{module:"HTML",concept:{name:"nav"}}],type:"structure"},v$=m$;j1.default=v$;var Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});Z1.default=void 0;var g$={relatedConcepts:[{module:"ARIA",concept:{name:"none"}}],type:"structure"},y$=g$;Z1.default=y$;var K1={};Object.defineProperty(K1,"__esModule",{value:!0});K1.default=void 0;var _$={relatedConcepts:[{module:"ARIA",concept:{name:"note"}}],type:"structure"},x$=_$;K1.default=x$;var J1={};Object.defineProperty(J1,"__esModule",{value:!0});J1.default=void 0;var b$={relatedConcepts:[],type:"structure"},w$=b$;J1.default=w$;var Q1={};Object.defineProperty(Q1,"__esModule",{value:!0});Q1.default=void 0;var S$={relatedConcepts:[{module:"HTML",concept:{name:"p"}}],type:"structure"},P$=S$;Q1.default=P$;var ev={};Object.defineProperty(ev,"__esModule",{value:!0});ev.default=void 0;var E$={relatedConcepts:[],type:"widget"},C$=E$;ev.default=C$;var tv={};Object.defineProperty(tv,"__esModule",{value:!0});tv.default=void 0;var T$={relatedConcepts:[{module:"HTML",concept:{name:"pre"}}],type:"structure"},A$=T$;tv.default=A$;var nv={};Object.defineProperty(nv,"__esModule",{value:!0});nv.default=void 0;var M$={relatedConcepts:[{module:"ARIA",concept:{name:"presentation"}}],type:"structure"},R$=M$;nv.default=R$;var rv={};Object.defineProperty(rv,"__esModule",{value:!0});rv.default=void 0;var I$={relatedConcepts:[{module:"ARIA",concept:{name:"progressbar"}},{module:"HTML",concept:{name:"progress"}}],type:"structure"},L$=I$;rv.default=L$;var iv={};Object.defineProperty(iv,"__esModule",{value:!0});iv.default=void 0;var O$={relatedConcepts:[{module:"ARIA",concept:{name:"radio"}},{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"radio"}]}}],type:"widget"},N$=O$;iv.default=N$;var sv={};Object.defineProperty(sv,"__esModule",{value:!0});sv.default=void 0;var D$={relatedConcepts:[{module:"ARIA",concept:{name:"radiogroup"}}],type:"structure"},k$=D$;sv.default=k$;var av={};Object.defineProperty(av,"__esModule",{value:!0});av.default=void 0;var F$={relatedConcepts:[{module:"ARIA",concept:{name:"region"}}],type:"structure"},U$=F$;av.default=U$;var ov={};Object.defineProperty(ov,"__esModule",{value:!0});ov.default=void 0;var B$={relatedConcepts:[],type:"structure"},$$=B$;ov.default=$$;var lv={};Object.defineProperty(lv,"__esModule",{value:!0});lv.default=void 0;var V$={relatedConcepts:[{module:"ARIA",concept:{name:"rowheader"}},{module:"HTML",concept:{name:"th",attributes:[{name:"scope",value:"row"}]}}],type:"widget"},q$=V$;lv.default=q$;var cv={};Object.defineProperty(cv,"__esModule",{value:!0});cv.default=void 0;var H$={relatedConcepts:[{module:"ARIA",concept:{name:"row"}},{module:"HTML",concept:{name:"tr"}}],type:"structure"},z$=H$;cv.default=z$;var uv={};Object.defineProperty(uv,"__esModule",{value:!0});uv.default=void 0;var G$={relatedConcepts:[{module:"HTML",concept:{name:"ruby"}}],type:"structure"},X$=G$;uv.default=X$;var fv={};Object.defineProperty(fv,"__esModule",{value:!0});fv.default=void 0;var W$={relatedConcepts:[],type:"structure"},Y$=W$;fv.default=Y$;var dv={};Object.defineProperty(dv,"__esModule",{value:!0});dv.default=void 0;var j$={relatedConcepts:[],type:"structure"},Z$=j$;dv.default=Z$;var hv={};Object.defineProperty(hv,"__esModule",{value:!0});hv.default=void 0;var K$={relatedConcepts:[{module:"ARIA",concept:{name:"scrollbar"}}],type:"widget"},J$=K$;hv.default=J$;var pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.default=void 0;var Q$={relatedConcepts:[],type:"structure"},eV=Q$;pv.default=eV;var mv={};Object.defineProperty(mv,"__esModule",{value:!0});mv.default=void 0;var tV={relatedConcepts:[{module:"ARIA",concept:{name:"search"}}],type:"structure"},nV=tV;mv.default=nV;var vv={};Object.defineProperty(vv,"__esModule",{value:!0});vv.default=void 0;var rV={relatedConcepts:[{module:"ARIA",concept:{name:"searchbox"}},{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"search"}]}}],type:"widget"},iV=rV;vv.default=iV;var gv={};Object.defineProperty(gv,"__esModule",{value:!0});gv.default=void 0;var sV={relatedConcepts:[{module:"ARIA",concept:{name:"slider"}},{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"range"}]}}],type:"widget"},aV=sV;gv.default=aV;var yv={};Object.defineProperty(yv,"__esModule",{value:!0});yv.default=void 0;var oV={relatedConcepts:[],type:"structure"},lV=oV;yv.default=lV;var _v={};Object.defineProperty(_v,"__esModule",{value:!0});_v.default=void 0;var cV={relatedConcepts:[{module:"ARIA",concept:{name:"spinbutton"}},{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"number"}]}}],type:"widget"},uV=cV;_v.default=uV;var xv={};Object.defineProperty(xv,"__esModule",{value:!0});xv.default=void 0;var fV={relatedConcepts:[],type:"structure"},dV=fV;xv.default=dV;var bv={};Object.defineProperty(bv,"__esModule",{value:!0});bv.default=void 0;var hV={relatedConcepts:[{module:"ARIA",concept:{name:"separator"}}],type:"widget"},pV=hV;bv.default=pV;var wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.default=void 0;var mV={relatedConcepts:[],type:"structure"},vV=mV;wv.default=vV;var Sv={};Object.defineProperty(Sv,"__esModule",{value:!0});Sv.default=void 0;var gV={relatedConcepts:[{module:"ARIA",concept:{name:"status"}}],type:"structure"},yV=gV;Sv.default=yV;var Pv={};Object.defineProperty(Pv,"__esModule",{value:!0});Pv.default=void 0;var _V={relatedConcepts:[],type:"structure"},xV=_V;Pv.default=xV;var Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.default=void 0;var bV={relatedConcepts:[{module:"ARIA",concept:{name:"switch"}},{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"checkbox"}]}}],type:"widget"},wV=bV;Ev.default=wV;var Cv={};Object.defineProperty(Cv,"__esModule",{value:!0});Cv.default=void 0;var SV={relatedConcepts:[{module:"ARIA",concept:{name:"tablist"}}],type:"structure"},PV=SV;Cv.default=PV;var Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});Tv.default=void 0;var EV={relatedConcepts:[{module:"ARIA",concept:{name:"tab"}}],type:"widget"},CV=EV;Tv.default=CV;var Av={};Object.defineProperty(Av,"__esModule",{value:!0});Av.default=void 0;var TV={relatedConcepts:[],type:"structure"},AV=TV;Av.default=AV;var Mv={};Object.defineProperty(Mv,"__esModule",{value:!0});Mv.default=void 0;var MV={relatedConcepts:[{module:"ARIA",concept:{name:"table"}},{module:"HTML",concept:{name:"table"}}],type:"structure"},RV=MV;Mv.default=RV;var Rv={};Object.defineProperty(Rv,"__esModule",{value:!0});Rv.default=void 0;var IV={relatedConcepts:[{module:"ARIA",concept:{name:"tablist"}}],type:"structure"},LV=IV;Rv.default=LV;var Iv={};Object.defineProperty(Iv,"__esModule",{value:!0});Iv.default=void 0;var OV={relatedConcepts:[{module:"ARIA",concept:{name:"tabpanel"}}],type:"structure"},NV=OV;Iv.default=NV;var Lv={};Object.defineProperty(Lv,"__esModule",{value:!0});Lv.default=void 0;var DV={relatedConcepts:[{module:"ARIA",concept:{name:"term"}}],type:"structure"},kV=DV;Lv.default=kV;var Ov={};Object.defineProperty(Ov,"__esModule",{value:!0});Ov.default=void 0;var FV={relatedConcepts:[{module:"ARIA",concept:{attributes:[{name:"aria-multiline",value:"true"}],name:"textbox"}},{module:"HTML",concept:{name:"textarea"}}],type:"widget"},UV=FV;Ov.default=UV;var Nv={};Object.defineProperty(Nv,"__esModule",{value:!0});Nv.default=void 0;var BV={relatedConcepts:[{module:"ARIA",concept:{name:"textbox"}},{module:"HTML",concept:{name:"input"}},{module:"HTML",concept:{name:"input",attributes:[{name:"type",value:"text"}]}}],type:"widget"},$V=BV;Nv.default=$V;var Dv={};Object.defineProperty(Dv,"__esModule",{value:!0});Dv.default=void 0;var VV={relatedConcepts:[{module:"HTML",concept:{name:"time"}}],type:"structure"},qV=VV;Dv.default=qV;var kv={};Object.defineProperty(kv,"__esModule",{value:!0});kv.default=void 0;var HV={relatedConcepts:[{module:"ARIA",concept:{name:"timer"}}],type:"structure"},zV=HV;kv.default=zV;var Fv={};Object.defineProperty(Fv,"__esModule",{value:!0});Fv.default=void 0;var GV={relatedConcepts:[{module:"ARIA",concept:{attributes:[{name:"aria-pressed"}]}}],type:"widget"},XV=GV;Fv.default=XV;var Uv={};Object.defineProperty(Uv,"__esModule",{value:!0});Uv.default=void 0;var WV={relatedConcepts:[{module:"ARIA",concept:{name:"toolbar"}}],type:"structure"},YV=WV;Uv.default=YV;var Bv={};Object.defineProperty(Bv,"__esModule",{value:!0});Bv.default=void 0;var jV={relatedConcepts:[{module:"ARIA",concept:{name:"tree"}}],type:"widget"},ZV=jV;Bv.default=ZV;var $v={};Object.defineProperty($v,"__esModule",{value:!0});$v.default=void 0;var KV={relatedConcepts:[{module:"ARIA",concept:{name:"treegrid"}}],type:"widget"},JV=KV;$v.default=JV;var Vv={};Object.defineProperty(Vv,"__esModule",{value:!0});Vv.default=void 0;var QV={relatedConcepts:[{module:"ARIA",concept:{name:"treeitem"}}],type:"widget"},eq=QV;Vv.default=eq;var qv={};Object.defineProperty(qv,"__esModule",{value:!0});qv.default=void 0;var tq={relatedConcepts:[{module:"ARIA",concept:{name:"tooltip"}}],type:"structure"},nq=tq;qv.default=nq;var Hv={};Object.defineProperty(Hv,"__esModule",{value:!0});Hv.default=void 0;var rq={relatedConcepts:[{module:"HTML",concept:{name:"video"}}],type:"widget"},iq=rq;Hv.default=iq;var zv={};Object.defineProperty(zv,"__esModule",{value:!0});zv.default=void 0;var sq={relatedConcepts:[],type:"structure"},aq=sq;zv.default=aq;var Gv={};Object.defineProperty(Gv,"__esModule",{value:!0});Gv.default=void 0;var oq={relatedConcepts:[],type:"window"},lq=oq;Gv.default=lq;Object.defineProperty(jo,"__esModule",{value:!0});jo.default=void 0;var cq=Fe(Tc),uq=Fe(Rm),fq=Fe(Im),dq=Fe(Lm),hq=Fe(Om),pq=Fe(Nm),mq=Fe(Dm),vq=Fe(km),gq=Fe(Fm),yq=Fe(Um),_q=Fe(Bm),xq=Fe($m),bq=Fe(Vm),wq=Fe(qm),Sq=Fe(Hm),Pq=Fe(zm),Eq=Fe(Gm),Cq=Fe(Xm),Tq=Fe(Wm),Aq=Fe(Ym),Mq=Fe(jm),Rq=Fe(Zm),Iq=Fe(Km),Lq=Fe(Jm),Oq=Fe(Qm),Nq=Fe(e1),Dq=Fe(t1),kq=Fe(n1),Fq=Fe(r1),Uq=Fe(i1),Bq=Fe(s1),$q=Fe(a1),Vq=Fe(o1),qq=Fe(l1),Hq=Fe(c1),zq=Fe(u1),Gq=Fe(f1),Xq=Fe(d1),Wq=Fe(h1),Yq=Fe(p1),jq=Fe(m1),Zq=Fe(v1),Kq=Fe(g1),Jq=Fe(y1),Qq=Fe(_1),eH=Fe(x1),tH=Fe(b1),nH=Fe(w1),rH=Fe(S1),iH=Fe(P1),sH=Fe(E1),aH=Fe(C1),oH=Fe(T1),lH=Fe(A1),cH=Fe(M1),uH=Fe(R1),fH=Fe(I1),dH=Fe(L1),hH=Fe(O1),pH=Fe(N1),mH=Fe(D1),vH=Fe(k1),gH=Fe(F1),yH=Fe(U1),_H=Fe(B1),xH=Fe($1),bH=Fe(V1),wH=Fe(q1),SH=Fe(H1),PH=Fe(z1),EH=Fe(G1),CH=Fe(X1),TH=Fe(W1),AH=Fe(Y1),MH=Fe(j1),RH=Fe(Z1),IH=Fe(K1),LH=Fe(J1),OH=Fe(Q1),NH=Fe(ev),DH=Fe(tv),kH=Fe(nv),FH=Fe(rv),UH=Fe(iv),BH=Fe(sv),$H=Fe(av),VH=Fe(ov),qH=Fe(lv),HH=Fe(cv),zH=Fe(uv),GH=Fe(fv),XH=Fe(dv),WH=Fe(hv),YH=Fe(pv),jH=Fe(mv),ZH=Fe(vv),KH=Fe(gv),JH=Fe(yv),QH=Fe(_v),ez=Fe(xv),tz=Fe(bv),nz=Fe(wv),rz=Fe(Sv),iz=Fe(Pv),sz=Fe(Ev),az=Fe(Cv),oz=Fe(Tv),lz=Fe(Av),cz=Fe(Mv),uz=Fe(Rv),fz=Fe(Iv),dz=Fe(Lv),hz=Fe(Ov),pz=Fe(Nv),mz=Fe(Dv),vz=Fe(kv),gz=Fe(Fv),yz=Fe(Uv),_z=Fe(Bv),xz=Fe($v),bz=Fe(Vv),wz=Fe(qv),Sz=Fe(Hv),Pz=Fe(zv),Ez=Fe(Gv);function Fe(t){return t&&t.__esModule?t:{default:t}}function Yg(t,e){return Mz(t)||Az(t,e)||Tz(t,e)||Cz()}function Cz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tz(t,e){if(t){if(typeof t=="string")return iw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iw(t,e)}}function iw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Az(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,a,o;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw o}}return r}}function Mz(t){if(Array.isArray(t))return t}var al=[["AbbrRole",uq.default],["AlertDialogRole",fq.default],["AlertRole",dq.default],["AnnotationRole",hq.default],["ApplicationRole",pq.default],["ArticleRole",mq.default],["AudioRole",vq.default],["BannerRole",gq.default],["BlockquoteRole",yq.default],["BusyIndicatorRole",_q.default],["ButtonRole",xq.default],["CanvasRole",bq.default],["CaptionRole",wq.default],["CellRole",Sq.default],["CheckBoxRole",Pq.default],["ColorWellRole",Eq.default],["ColumnHeaderRole",Cq.default],["ColumnRole",Tq.default],["ComboBoxRole",Aq.default],["ComplementaryRole",Mq.default],["ContentInfoRole",Rq.default],["DateRole",Iq.default],["DateTimeRole",Lq.default],["DefinitionRole",Oq.default],["DescriptionListDetailRole",Nq.default],["DescriptionListRole",Dq.default],["DescriptionListTermRole",kq.default],["DetailsRole",Fq.default],["DialogRole",Uq.default],["DirectoryRole",Bq.default],["DisclosureTriangleRole",$q.default],["DivRole",Vq.default],["DocumentRole",qq.default],["EmbeddedObjectRole",Hq.default],["FeedRole",zq.default],["FigcaptionRole",Gq.default],["FigureRole",Xq.default],["FooterRole",Wq.default],["FormRole",Yq.default],["GridRole",jq.default],["GroupRole",Zq.default],["HeadingRole",Kq.default],["IframePresentationalRole",Jq.default],["IframeRole",Qq.default],["IgnoredRole",eH.default],["ImageMapLinkRole",tH.default],["ImageMapRole",nH.default],["ImageRole",rH.default],["InlineTextBoxRole",iH.default],["InputTimeRole",sH.default],["LabelRole",aH.default],["LegendRole",oH.default],["LineBreakRole",lH.default],["LinkRole",cH.default],["ListBoxOptionRole",uH.default],["ListBoxRole",fH.default],["ListItemRole",dH.default],["ListMarkerRole",hH.default],["ListRole",pH.default],["LogRole",mH.default],["MainRole",vH.default],["MarkRole",gH.default],["MarqueeRole",yH.default],["MathRole",_H.default],["MenuBarRole",xH.default],["MenuButtonRole",bH.default],["MenuItemRole",wH.default],["MenuItemCheckBoxRole",SH.default],["MenuItemRadioRole",PH.default],["MenuListOptionRole",EH.default],["MenuListPopupRole",CH.default],["MenuRole",TH.default],["MeterRole",AH.default],["NavigationRole",MH.default],["NoneRole",RH.default],["NoteRole",IH.default],["OutlineRole",LH.default],["ParagraphRole",OH.default],["PopUpButtonRole",NH.default],["PreRole",DH.default],["PresentationalRole",kH.default],["ProgressIndicatorRole",FH.default],["RadioButtonRole",UH.default],["RadioGroupRole",BH.default],["RegionRole",$H.default],["RootWebAreaRole",VH.default],["RowHeaderRole",qH.default],["RowRole",HH.default],["RubyRole",zH.default],["RulerRole",GH.default],["ScrollAreaRole",XH.default],["ScrollBarRole",WH.default],["SeamlessWebAreaRole",YH.default],["SearchRole",jH.default],["SearchBoxRole",ZH.default],["SliderRole",KH.default],["SliderThumbRole",JH.default],["SpinButtonRole",QH.default],["SpinButtonPartRole",ez.default],["SplitterRole",tz.default],["StaticTextRole",nz.default],["StatusRole",rz.default],["SVGRootRole",iz.default],["SwitchRole",sz.default],["TabGroupRole",az.default],["TabRole",oz.default],["TableHeaderContainerRole",lz.default],["TableRole",cz.default],["TabListRole",uz.default],["TabPanelRole",fz.default],["TermRole",dz.default],["TextAreaRole",hz.default],["TextFieldRole",pz.default],["TimeRole",mz.default],["TimerRole",vz.default],["ToggleButtonRole",gz.default],["ToolbarRole",yz.default],["TreeRole",_z.default],["TreeGridRole",xz.default],["TreeItemRole",bz.default],["UserInterfaceTooltipRole",wz.default],["VideoRole",Sz.default],["WebAreaRole",Pz.default],["WindowRole",Ez.default]],ox={entries:function(){return al},forEach:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=0,i=al;r<i.length;r++){var s=Yg(i[r],2),a=s[0],o=s[1];e.call(n,o,a,al)}},get:function(e){var n=al.find(function(r){return r[0]===e});return n&&n[1]},has:function(e){return!!ox.get(e)},keys:function(){return al.map(function(e){var n=Yg(e,1),r=n[0];return r})},values:function(){return al.map(function(e){var n=Yg(e,2),r=n[1];return r})}},Rz=(0,cq.default)(ox,ox.entries());jo.default=Rz;Object.defineProperty(Am,"__esModule",{value:!0});Am.default=void 0;var Iz=iA(Tc),Lz=iA(jo);function iA(t){return t&&t.__esModule?t:{default:t}}function Pu(t,e){return Dz(t)||Nz(t,e)||sA(t,e)||Oz()}function Oz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nz(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,a,o;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw o}}return r}}function Dz(t){if(Array.isArray(t))return t}function kz(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=sA(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return s=u.done,u},e:function(u){a=!0,o=u},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw o}}}}function sA(t,e){if(t){if(typeof t=="string")return sw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sw(t,e)}}function sw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ms=[],Mf=kz(Lz.default.entries()),aw;try{var Fz=function(){var e=Pu(aw.value,2),n=e[0],r=e[1],i=r.relatedConcepts;Array.isArray(i)&&i.forEach(function(s){if(s.module==="HTML"){var a=s.concept;if(a){var o=ms.findIndex(function(l){var u=Pu(l,1),f=u[0];return f===n});o===-1&&(ms.push([n,[]]),o=ms.length-1),ms[o][1].push(a)}}})};for(Mf.s();!(aw=Mf.n()).done;)Fz()}catch(t){Mf.e(t)}finally{Mf.f()}var lx={entries:function(){return ms},forEach:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=0,i=ms;r<i.length;r++){var s=Pu(i[r],2),a=s[0],o=s[1];e.call(n,o,a,ms)}},get:function(e){var n=ms.find(function(r){return r[0]===e});return n&&n[1]},has:function(e){return!!lx.get(e)},keys:function(){return ms.map(function(e){var n=Pu(e,1),r=n[0];return r})},values:function(){return ms.map(function(e){var n=Pu(e,2),r=n[1];return r})}},Uz=(0,Iz.default)(lx,lx.entries());Am.default=Uz;var Xv={};Object.defineProperty(Xv,"__esModule",{value:!0});Xv.default=void 0;var Bz=aA(Tc),$z=aA(jo);function aA(t){return t&&t.__esModule?t:{default:t}}function Eu(t,e){return Hz(t)||qz(t,e)||oA(t,e)||Vz()}function Vz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qz(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,a,o;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw o}}return r}}function Hz(t){if(Array.isArray(t))return t}function zz(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=oA(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return s=u.done,u},e:function(u){a=!0,o=u},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw o}}}}function oA(t,e){if(t){if(typeof t=="string")return ow(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ow(t,e)}}function ow(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var vs=[],Rf=zz($z.default.entries()),lw;try{var Gz=function(){var e=Eu(lw.value,2),n=e[0],r=e[1],i=r.relatedConcepts;Array.isArray(i)&&i.forEach(function(s){if(s.module==="ARIA"){var a=s.concept;if(a){var o=vs.findIndex(function(l){var u=Eu(l,1),f=u[0];return f===n});o===-1&&(vs.push([n,[]]),o=vs.length-1),vs[o][1].push(a)}}})};for(Rf.s();!(lw=Rf.n()).done;)Gz()}catch(t){Rf.e(t)}finally{Rf.f()}var cx={entries:function(){return vs},forEach:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=0,i=vs;r<i.length;r++){var s=Eu(i[r],2),a=s[0],o=s[1];e.call(n,o,a,vs)}},get:function(e){var n=vs.find(function(r){return r[0]===e});return n&&n[1]},has:function(e){return!!cx.get(e)},keys:function(){return vs.map(function(e){var n=Eu(e,1),r=n[0];return r})},values:function(){return vs.map(function(e){var n=Eu(e,2),r=n[1];return r})}},Xz=(0,Bz.default)(cx,cx.entries());Xv.default=Xz;var Wv={};Object.defineProperty(Wv,"__esModule",{value:!0});Wv.default=void 0;var Wz=lA(jo),Yz=lA(Tc);function lA(t){return t&&t.__esModule?t:{default:t}}function Hd(t,e){return Kz(t)||Zz(t,e)||cA(t,e)||jz()}function jz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zz(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,a,o;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw o}}return r}}function Kz(t){if(Array.isArray(t))return t}function Jz(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=cA(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,a=!1,o;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return s=u.done,u},e:function(u){a=!0,o=u},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(a)throw o}}}}function cA(t,e){if(t){if(typeof t=="string")return cw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cw(t,e)}}function cw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ci=[],If=Jz(Wz.default.entries()),uw;try{var Qz=function(){var e=Hd(uw.value,2),n=e[0],r=e[1],i=r.relatedConcepts;Array.isArray(i)&&i.forEach(function(s){if(s.module==="HTML"){var a=s.concept;if(a!=null){for(var o=JSON.stringify(a),l,u=0;u<Ci.length;u++){var f=Ci[u][0];if(JSON.stringify(f)===o){l=Ci[u][1];break}}Array.isArray(l)||(l=[]);var h=l.findIndex(function(p){return p===n});h===-1&&l.push(n),u<Ci.length?Ci.splice(u,1,[a,l]):Ci.push([a,l])}}})};for(If.s();!(uw=If.n()).done;)Qz()}catch(t){If.e(t)}finally{If.f()}function eG(t,e){if(t===void 0&&e!==void 0||t!==void 0&&e===void 0)return!1;if(t!==void 0&&e!==void 0){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(e[n].name!==t[n].name||e[n].value!==t[n].value)return!1}return!0}var ux={entries:function(){return Ci},forEach:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=0,i=Ci;r<i.length;r++){var s=Hd(i[r],2),a=s[0],o=s[1];e.call(n,o,a,Ci)}},get:function(e){var n=Ci.find(function(r){return e.name===r[0].name&&eG(e.attributes,r[0].attributes)});return n&&n[1]},has:function(e){return!!ux.get(e)},keys:function(){return Ci.map(function(e){var n=Hd(e,1),r=n[0];return r})},values:function(){return Ci.map(function(e){var n=Hd(e,2),r=n[1];return r})}},tG=(0,Yz.default)(ux,ux.entries());Wv.default=tG;Object.defineProperty(Js,"__esModule",{value:!0});var W2=Js.elementAXObjects=Ou=Js.AXObjects=Js.AXObjectRoles=Js.AXObjectElements=void 0,nG=Yv(Am),rG=Yv(Xv),iG=Yv(jo),sG=Yv(Wv);function Yv(t){return t&&t.__esModule?t:{default:t}}var aG=nG.default;Js.AXObjectElements=aG;var oG=rG.default;Js.AXObjectRoles=oG;var lG=iG.default,Ou=Js.AXObjects=lG,cG=sG.default;W2=Js.elementAXObjects=cG;const uA=Tm.keys(),uG=uA.filter(t=>{var e;return(e=Tm.get(t))==null?void 0:e.abstract}),fA=uA.filter(t=>!uG.includes(t)),dA=fA.filter(t=>{const e=Tm.get(t);return!["toolbar","tabpanel","generic","cell"].includes(t)&&!(e!=null&&e.superClass.some(n=>n.includes("widget")))}).concat("progressbar"),fG=fA.filter(t=>!dA.includes(t)&&t!=="generic");Cm.entries().forEach(([t,e])=>{[...e].every(n=>n!=="generic"&&dA.includes(n))});Cm.entries().forEach(([t,e])=>{[...e].every(n=>fG.includes(n))});const dG=[...Ou.keys()].filter(t=>Ou.get(t).type==="widget"),hG=[...Ou.keys()].filter(t=>["windows","structure"].includes(Ou.get(t).type));W2.entries().forEach(([t,e])=>{[...e].every(n=>dG.includes(n))});W2.entries().forEach(([t,e])=>{[...e].every(n=>hG.includes(n))});var fx={exports:{}};(function(t,e){(function(n,r){r(e)})(Qa,function(n){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(64),o=new Uint8Array(128);for(let R=0;R<s.length;R++){const B=s.charCodeAt(R);a[R]=B,o[B]=R}function l(R,B){let V=0,z=0,G=0;do{const y=R.next();G=o[y],V|=(G&31)<<z,z+=5}while(G&32);const O=V&1;return V>>>=1,O&&(V=-2147483648|-V),B+V}function u(R,B,V){let z=B-V;z=z<0?-z<<1|1:z<<1;do{let G=z&31;z>>>=5,z>0&&(G|=32),R.write(a[G])}while(z>0);return B}function f(R,B){return R.pos>=B?!1:R.peek()!==44}const h=1024*16,p=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(R){return Buffer.from(R.buffer,R.byteOffset,R.byteLength).toString()}}:{decode(R){let B="";for(let V=0;V<R.length;V++)B+=String.fromCharCode(R[V]);return B}};class v{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(h)}write(B){const{buffer:V}=this;V[this.pos++]=B,this.pos===h&&(this.out+=p.decode(V),this.pos=0)}flush(){const{buffer:B,out:V,pos:z}=this;return z>0?V+p.decode(B.subarray(0,z)):V}}class P{constructor(B){this.pos=0,this.buffer=B}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(B){const{buffer:V,pos:z}=this,G=V.indexOf(B,z);return G===-1?V.length:G}}const S=[];function g(R){const{length:B}=R,V=new P(R),z=[],G=[];let O=0;for(;V.pos<B;V.pos++){O=l(V,O);const y=l(V,0);if(!f(V,B)){const ne=G.pop();ne[2]=O,ne[3]=y;continue}const b=l(V,0),H=l(V,0)&1?[O,y,0,0,b,l(V,0)]:[O,y,0,0,b];let W=S;if(f(V,B)){W=[];do{const ne=l(V,0);W.push(ne)}while(f(V,B))}H.vars=W,z.push(H),G.push(H)}return z}function m(R){const B=new v;for(let V=0;V<R.length;)V=x(R,V,B,[0]);return B.flush()}function x(R,B,V,z){const G=R[B],{0:O,1:y,2:b,3:k,4:F,vars:H}=G;B>0&&V.write(44),z[0]=u(V,O,z[0]),u(V,y,0),u(V,F,0);const W=G.length===6?1:0;u(V,W,0),G.length===6&&u(V,G[5],0);for(const ne of H)u(V,ne,0);for(B++;B<R.length;){const ne=R[B],{0:Z,1:K}=ne;if(Z>b||Z===b&&K>=k)break;B=x(R,B,V,z)}return V.write(44),z[0]=u(V,b,z[0]),u(V,k,0),B}function w(R){const{length:B}=R,V=new P(R),z=[],G=[];let O=0,y=0,b=0,k=0,F=0,H=0,W=0,ne=0;do{const Z=V.indexOf(";");let K=0;for(;V.pos<Z;V.pos++){if(K=l(V,K),!f(V,Z)){const Qe=G.pop();Qe[2]=O,Qe[3]=K;continue}const ae=l(V,0),se=ae&1,ye=ae&2,me=ae&4;let Ae=null,Ue=S,He;if(se){const Qe=l(V,y);b=l(V,y===Qe?b:0),y=Qe,He=[O,K,0,0,Qe,b]}else He=[O,K,0,0];if(He.isScope=!!me,ye){const Qe=k,ie=F;k=l(V,k);const dt=Qe===k;F=l(V,dt?F:0),H=l(V,dt&&ie===F?H:0),Ae=[k,F,H]}if(He.callsite=Ae,f(V,Z)){Ue=[];do{W=O,ne=K;const Qe=l(V,0);let ie;if(Qe<-1){ie=[[l(V,0)]];for(let dt=-1;dt>Qe;dt--){const ke=W;W=l(V,W),ne=l(V,W===ke?ne:0);const ut=l(V,0);ie.push([ut,W,ne])}}else ie=[[Qe]];Ue.push(ie)}while(f(V,Z))}He.bindings=Ue,z.push(He),G.push(He)}O++,V.pos=Z+1}while(V.pos<B);return z}function C(R){if(R.length===0)return"";const B=new v;for(let V=0;V<R.length;)V=A(R,V,B,[0,0,0,0,0,0,0]);return B.flush()}function A(R,B,V,z){const G=R[B],{0:O,1:y,2:b,3:k,isScope:F,callsite:H,bindings:W}=G;z[0]<O?(M(V,z[0],O),z[0]=O,z[1]=0):B>0&&V.write(44),z[1]=u(V,G[1],z[1]);const ne=(G.length===6?1:0)|(H?2:0)|(F?4:0);if(u(V,ne,0),G.length===6){const{4:Z,5:K}=G;Z!==z[2]&&(z[3]=0),z[2]=u(V,Z,z[2]),z[3]=u(V,K,z[3])}if(H){const{0:Z,1:K,2:ae}=G.callsite;Z!==z[4]?(z[5]=0,z[6]=0):K!==z[5]&&(z[6]=0),z[4]=u(V,Z,z[4]),z[5]=u(V,K,z[5]),z[6]=u(V,ae,z[6])}if(W)for(const Z of W){Z.length>1&&u(V,-Z.length,0);const K=Z[0][0];u(V,K,0);let ae=O,se=y;for(let ye=1;ye<Z.length;ye++){const me=Z[ye];ae=u(V,me[1],ae),se=u(V,me[2],se),u(V,me[0],0)}}for(B++;B<R.length;){const Z=R[B],{0:K,1:ae}=Z;if(K>b||K===b&&ae>=k)break;B=A(R,B,V,z)}return z[0]<b?(M(V,z[0],b),z[0]=b,z[1]=0):V.write(44),z[1]=u(V,k,z[1]),B}function M(R,B,V){do R.write(59);while(++B<V)}function E(R){const{length:B}=R,V=new P(R),z=[];let G=0,O=0,y=0,b=0,k=0;do{const F=V.indexOf(";"),H=[];let W=!0,ne=0;for(G=0;V.pos<F;){let Z;G=l(V,G),G<ne&&(W=!1),ne=G,f(V,F)?(O=l(V,O),y=l(V,y),b=l(V,b),f(V,F)?(k=l(V,k),Z=[G,O,y,b,k]):Z=[G,O,y,b]):Z=[G],H.push(Z),V.pos++}W||N(H),z.push(H),V.pos=F+1}while(V.pos<=B);return z}function N(R){R.sort(I)}function I(R,B){return R[0]-B[0]}function L(R){const B=new v;let V=0,z=0,G=0,O=0;for(let y=0;y<R.length;y++){const b=R[y];if(y>0&&B.write(59),b.length===0)continue;let k=0;for(let F=0;F<b.length;F++){const H=b[F];F>0&&B.write(44),k=u(B,H[0],k),H.length!==1&&(V=u(B,H[1],V),z=u(B,H[2],z),G=u(B,H[3],G),H.length!==4&&(O=u(B,H[4],O)))}}return B.flush()}n.decode=E,n.decodeGeneratedRanges=w,n.decodeOriginalScopes=g,n.encode=L,n.encodeGeneratedRanges=C,n.encodeOriginalScopes=m,Object.defineProperty(n,"__esModule",{value:!0})})})(fx,fx.exports);var hA=fx.exports,pG={exports:{}},Lf={exports:{}},jg={exports:{}},fw;function mG(){return fw||(fw=1,function(t,e){(function(n,r){t.exports=r()})(Qa,function(){const n=/^[\w+.-]+:\/\//,r=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,i=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;function s(x){return n.test(x)}function a(x){return x.startsWith("//")}function o(x){return x.startsWith("/")}function l(x){return x.startsWith("file:")}function u(x){return/^[.?#]/.test(x)}function f(x){const w=r.exec(x);return p(w[1],w[2]||"",w[3],w[4]||"",w[5]||"/",w[6]||"",w[7]||"")}function h(x){const w=i.exec(x),C=w[2];return p("file:","",w[1]||"","",o(C)?C:"/"+C,w[3]||"",w[4]||"")}function p(x,w,C,A,M,E,N){return{scheme:x,user:w,host:C,port:A,path:M,query:E,hash:N,type:7}}function v(x){if(a(x)){const C=f("http:"+x);return C.scheme="",C.type=6,C}if(o(x)){const C=f("http://foo.com"+x);return C.scheme="",C.host="",C.type=5,C}if(l(x))return h(x);if(s(x))return f(x);const w=f("http://foo.com/"+x);return w.scheme="",w.host="",w.type=x?x.startsWith("?")?3:x.startsWith("#")?2:4:1,w}function P(x){if(x.endsWith("/.."))return x;const w=x.lastIndexOf("/");return x.slice(0,w+1)}function S(x,w){g(w,w.type),x.path==="/"?x.path=w.path:x.path=P(w.path)+x.path}function g(x,w){const C=w<=4,A=x.path.split("/");let M=1,E=0,N=!1;for(let L=1;L<A.length;L++){const R=A[L];if(!R){N=!0;continue}if(N=!1,R!=="."){if(R===".."){E?(N=!0,E--,M--):C&&(A[M++]=R);continue}A[M++]=R,E++}}let I="";for(let L=1;L<M;L++)I+="/"+A[L];(!I||N&&!I.endsWith("/.."))&&(I+="/"),x.path=I}function m(x,w){if(!x&&!w)return"";const C=v(x);let A=C.type;if(w&&A!==7){const E=v(w),N=E.type;switch(A){case 1:C.hash=E.hash;case 2:C.query=E.query;case 3:case 4:S(C,E);case 5:C.user=E.user,C.host=E.host,C.port=E.port;case 6:C.scheme=E.scheme}N>A&&(A=N)}g(C,A);const M=C.query+C.hash;switch(A){case 2:case 3:return M;case 4:{const E=C.path.slice(1);return E?u(w||x)&&!u(E)?"./"+E+M:E+M:M||"."}case 5:return C.path+M;default:return C.scheme+"//"+C.user+C.host+C.port+C.path+M}}return m})}(jg)),jg.exports}var dw;function pA(){return dw||(dw=1,function(t,e){(function(n,r){r(e,hA,mG())})(Qa,function(n,r,i){function s(te,fe){return fe&&!fe.endsWith("/")&&(fe+="/"),i(te,fe)}function a(te){if(!te)return"";const fe=te.lastIndexOf("/");return te.slice(0,fe+1)}const o=0,l=1,u=2,f=3,h=4,p=1,v=2;function P(te,fe){const de=S(te,0);if(de===te.length)return te;fe||(te=te.slice());for(let he=de;he<te.length;he=S(te,he+1))te[he]=m(te[he],fe);return te}function S(te,fe){for(let de=fe;de<te.length;de++)if(!g(te[de]))return de;return te.length}function g(te){for(let fe=1;fe<te.length;fe++)if(te[fe][o]<te[fe-1][o])return!1;return!0}function m(te,fe){return fe||(te=te.slice()),te.sort(x)}function x(te,fe){return te[o]-fe[o]}let w=!1;function C(te,fe,de,he){for(;de<=he;){const Be=de+(he-de>>1),Ie=te[Be][o]-fe;if(Ie===0)return w=!0,Be;Ie<0?de=Be+1:he=Be-1}return w=!1,de-1}function A(te,fe,de){for(let he=de+1;he<te.length&&te[he][o]===fe;de=he++);return de}function M(te,fe,de){for(let he=de-1;he>=0&&te[he][o]===fe;de=he--);return de}function E(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function N(te,fe,de,he){const{lastKey:Be,lastNeedle:Ie,lastIndex:Ge}=de;let xt=0,Oe=te.length-1;if(he===Be){if(fe===Ie)return w=Ge!==-1&&te[Ge][o]===fe,Ge;fe>=Ie?xt=Ge===-1?0:Ge:Oe=Ge}return de.lastKey=he,de.lastNeedle=fe,de.lastIndex=C(te,fe,xt,Oe)}function I(te,fe){const de=fe.map(R);for(let he=0;he<te.length;he++){const Be=te[he];for(let Ie=0;Ie<Be.length;Ie++){const Ge=Be[Ie];if(Ge.length===1)continue;const xt=Ge[l],Oe=Ge[u],Ke=Ge[f],_t=de[xt],ve=_t[Oe]||(_t[Oe]=[]),ge=fe[xt];let we=A(ve,Ke,N(ve,Ke,ge,Oe));ge.lastIndex=++we,L(ve,we,[Ke,he,Ge[o]])}}return de}function L(te,fe,de){for(let he=te.length;he>fe;he--)te[he]=te[he-1];te[fe]=de}function R(){return{__proto__:null}}const B=function(te,fe){const de=V(te);if(!("sections"in de))return new W(de,fe);const he=[],Be=[],Ie=[],Ge=[],xt=[];z(de,fe,he,Be,Ie,Ge,xt,0,0,1/0,1/0);const Oe={version:3,file:de.file,names:Ge,sources:Be,sourcesContent:Ie,mappings:he,ignoreList:xt};return ie(Oe)};function V(te){return typeof te=="string"?JSON.parse(te):te}function z(te,fe,de,he,Be,Ie,Ge,xt,Oe,Ke,_t){const{sections:ve}=te;for(let ge=0;ge<ve.length;ge++){const{map:we,offset:Me}=ve[ge];let Ze=Ke,le=_t;if(ge+1<ve.length){const $e=ve[ge+1].offset;Ze=Math.min(Ke,xt+$e.line),Ze===Ke?le=Math.min(_t,Oe+$e.column):Ze<Ke&&(le=Oe+$e.column)}G(we,fe,de,he,Be,Ie,Ge,xt+Me.line,Oe+Me.column,Ze,le)}}function G(te,fe,de,he,Be,Ie,Ge,xt,Oe,Ke,_t){const ve=V(te);if("sections"in ve)return z(...arguments);const ge=new W(ve,fe),we=he.length,Me=Ie.length,Ze=K(ge),{resolvedSources:le,sourcesContent:$e,ignoreList:be}=ge;if(O(he,le),O(Ie,ge.names),$e)O(Be,$e);else for(let Le=0;Le<le.length;Le++)Be.push(null);if(be)for(let Le=0;Le<be.length;Le++)Ge.push(be[Le]+we);for(let Le=0;Le<Ze.length;Le++){const ze=xt+Le;if(ze>Ke)return;const ft=y(de,ze),Rt=Le===0?Oe:0,on=Ze[Le];for(let Wn=0;Wn<on.length;Wn++){const Jt=on[Wn],Qn=Rt+Jt[o];if(ze===Ke&&Qn>=_t)return;if(Jt.length===1){ft.push([Qn]);continue}const vr=we+Jt[l],ss=Jt[u],Ns=Jt[f];ft.push(Jt.length===4?[Qn,vr,ss,Ns]:[Qn,vr,ss,Ns,Me+Jt[h]])}}}function O(te,fe){for(let de=0;de<fe.length;de++)te.push(fe[de])}function y(te,fe){for(let de=te.length;de<=fe;de++)te[de]=[];return te[fe]}const b="`line` must be greater than 0 (lines start at line 1)",k="`column` must be greater than or equal to 0 (columns start at column 0)",F=-1,H=1;class W{constructor(fe,de){const he=typeof fe=="string";if(!he&&fe._decodedMemo)return fe;const Be=he?JSON.parse(fe):fe,{version:Ie,file:Ge,names:xt,sourceRoot:Oe,sources:Ke,sourcesContent:_t}=Be;this.version=Ie,this.file=Ge,this.names=xt||[],this.sourceRoot=Oe,this.sources=Ke,this.sourcesContent=_t,this.ignoreList=Be.ignoreList||Be.x_google_ignoreList||void 0;const ve=s(Oe||"",a(de));this.resolvedSources=Ke.map(we=>s(we||"",ve));const{mappings:ge}=Be;typeof ge=="string"?(this._encoded=ge,this._decoded=void 0):(this._encoded=void 0,this._decoded=P(ge,he)),this._decodedMemo=E(),this._bySources=void 0,this._bySourceMemos=void 0}}function ne(te){return te}function Z(te){var fe,de;return(fe=(de=te)._encoded)!==null&&fe!==void 0?fe:de._encoded=r.encode(te._decoded)}function K(te){var fe;return(fe=te)._decoded||(fe._decoded=r.decode(te._encoded))}function ae(te,fe,de){const he=K(te);if(fe>=he.length)return null;const Be=he[fe],Ie=lt(Be,te._decodedMemo,fe,de,H);return Ie===-1?null:Be[Ie]}function se(te,fe){let{line:de,column:he,bias:Be}=fe;if(de--,de<0)throw new Error(b);if(he<0)throw new Error(k);const Ie=K(te);if(de>=Ie.length)return tt(null,null,null,null);const Ge=Ie[de],xt=lt(Ge,te._decodedMemo,de,he,Be||H);if(xt===-1)return tt(null,null,null,null);const Oe=Ge[xt];if(Oe.length===1)return tt(null,null,null,null);const{names:Ke,resolvedSources:_t}=te;return tt(_t[Oe[l]],Oe[u]+1,Oe[f],Oe.length===5?Ke[Oe[h]]:null)}function ye(te,fe){const{source:de,line:he,column:Be,bias:Ie}=fe;return X(te,de,he,Be,Ie||H,!1)}function me(te,fe){const{source:de,line:he,column:Be,bias:Ie}=fe;return X(te,de,he,Be,Ie||F,!0)}function Ae(te,fe){const de=K(te),{names:he,resolvedSources:Be}=te;for(let Ie=0;Ie<de.length;Ie++){const Ge=de[Ie];for(let xt=0;xt<Ge.length;xt++){const Oe=Ge[xt],Ke=Ie+1,_t=Oe[0];let ve=null,ge=null,we=null,Me=null;Oe.length!==1&&(ve=Be[Oe[1]],ge=Oe[2]+1,we=Oe[3]),Oe.length===5&&(Me=he[Oe[4]]),fe({generatedLine:Ke,generatedColumn:_t,source:ve,originalLine:ge,originalColumn:we,name:Me})}}}function Ue(te,fe){const{sources:de,resolvedSources:he}=te;let Be=de.indexOf(fe);return Be===-1&&(Be=he.indexOf(fe)),Be}function He(te,fe){const{sourcesContent:de}=te;if(de==null)return null;const he=Ue(te,fe);return he===-1?null:de[he]}function Qe(te,fe){const{ignoreList:de}=te;if(de==null)return!1;const he=Ue(te,fe);return he===-1?!1:de.includes(he)}function ie(te,fe){const de=new W(ut(te,[]),fe);return de._decoded=te.mappings,de}function dt(te){return ut(te,K(te))}function ke(te){return ut(te,Z(te))}function ut(te,fe){return{version:te.version,file:te.file,names:te.names,sourceRoot:te.sourceRoot,sources:te.sources,sourcesContent:te.sourcesContent,mappings:fe,ignoreList:te.ignoreList||te.x_google_ignoreList}}function tt(te,fe,de,he){return{source:te,line:fe,column:de,name:he}}function Pt(te,fe){return{line:te,column:fe}}function lt(te,fe,de,he,Be){let Ie=N(te,he,fe,de);return w?Ie=(Be===F?A:M)(te,he,Ie):Be===F&&Ie++,Ie===-1||Ie===te.length?-1:Ie}function re(te,fe,de,he,Be){let Ie=lt(te,fe,de,he,H);if(!w&&Be===F&&Ie++,Ie===-1||Ie===te.length)return[];const Ge=w?he:te[Ie][o];w||(Ie=M(te,Ge,Ie));const xt=A(te,Ge,Ie),Oe=[];for(;Ie<=xt;Ie++){const Ke=te[Ie];Oe.push(Pt(Ke[p]+1,Ke[v]))}return Oe}function X(te,fe,de,he,Be,Ie){var Ge;if(de--,de<0)throw new Error(b);if(he<0)throw new Error(k);const{sources:xt,resolvedSources:Oe}=te;let Ke=xt.indexOf(fe);if(Ke===-1&&(Ke=Oe.indexOf(fe)),Ke===-1)return Ie?[]:Pt(null,null);const ve=((Ge=te)._bySources||(Ge._bySources=I(K(te),te._bySourceMemos=xt.map(E))))[Ke][de];if(ve==null)return Ie?[]:Pt(null,null);const ge=te._bySourceMemos[Ke];if(Ie)return re(ve,ge,de,he,Be);const we=lt(ve,ge,de,he,Be);if(we===-1)return Pt(null,null);const Me=ve[we];return Pt(Me[p]+1,Me[v])}n.AnyMap=B,n.GREATEST_LOWER_BOUND=H,n.LEAST_UPPER_BOUND=F,n.TraceMap=W,n.allGeneratedPositionsFor=me,n.decodedMap=dt,n.decodedMappings=K,n.eachMapping=Ae,n.encodedMap=ke,n.encodedMappings=Z,n.generatedPositionFor=ye,n.isIgnored=Qe,n.originalPositionFor=se,n.presortedDecodedMap=ie,n.sourceContentFor=He,n.traceSegment=ae})}(Lf,Lf.exports)),Lf.exports}var Of={exports:{}},Nf={exports:{}},hw;function vG(){return hw||(hw=1,function(t,e){(function(n,r){r(e)})(Qa,function(n){class r{constructor(){this._indexes={__proto__:null},this.array=[]}}function i(u){return u}function s(u,f){return u._indexes[f]}function a(u,f){const h=s(u,f);if(h!==void 0)return h;const{array:p,_indexes:v}=u,P=p.push(f);return v[f]=P-1}function o(u){const{array:f,_indexes:h}=u;if(f.length===0)return;const p=f.pop();h[p]=void 0}function l(u,f){const h=s(u,f);if(h===void 0)return;const{array:p,_indexes:v}=u;for(let P=h+1;P<p.length;P++){const S=p[P];p[P-1]=S,v[S]--}v[f]=void 0,p.pop()}n.SetArray=r,n.get=s,n.pop=o,n.put=a,n.remove=l,Object.defineProperty(n,"__esModule",{value:!0})})}(Nf,Nf.exports)),Nf.exports}var pw;function gG(){return pw||(pw=1,function(t,e){(function(n,r){r(e,vG(),hA,pA())})(Qa,function(n,r,i,s){class p{constructor({file:b,sourceRoot:k}={}){this._names=new r.SetArray,this._sources=new r.SetArray,this._sourcesContent=[],this._mappings=[],this.file=b,this.sourceRoot=k,this._ignoreList=new r.SetArray}}function v(y){return y}function P(y,b,k,F,H,W,ne,Z){return N(!1,y,b,k,F,H,W,ne,Z)}function S(y,b){return O(!1,y,b)}const g=(y,b,k,F,H,W,ne,Z)=>N(!0,y,b,k,F,H,W,ne,Z),m=(y,b)=>O(!0,y,b);function x(y,b,k){const{_sources:F,_sourcesContent:H}=y,W=r.put(F,b);H[W]=k}function w(y,b,k=!0){const{_sources:F,_sourcesContent:H,_ignoreList:W}=y,ne=r.put(F,b);ne===H.length&&(H[ne]=null),k?r.put(W,ne):r.remove(W,ne)}function C(y){const{_mappings:b,_sources:k,_sourcesContent:F,_names:H,_ignoreList:W}=y;return B(b),{version:3,file:y.file||void 0,names:H.array,sourceRoot:y.sourceRoot||void 0,sources:k.array,sourcesContent:F,mappings:b,ignoreList:W.array}}function A(y){const b=C(y);return Object.assign(Object.assign({},b),{mappings:i.encode(b.mappings)})}function M(y){const b=new s.TraceMap(y),k=new p({file:b.file,sourceRoot:b.sourceRoot});return V(k._names,b.names),V(k._sources,b.sources),k._sourcesContent=b.sourcesContent||b.sources.map(()=>null),k._mappings=s.decodedMappings(b),b.ignoreList&&V(k._ignoreList,b.ignoreList),k}function E(y){const b=[],{_mappings:k,_sources:F,_names:H}=y;for(let W=0;W<k.length;W++){const ne=k[W];for(let Z=0;Z<ne.length;Z++){const K=ne[Z],ae={line:W+1,column:K[0]};let se,ye,me;K.length!==1&&(se=F.array[K[1]],ye={line:K[2]+1,column:K[3]},K.length===5&&(me=H.array[K[4]])),b.push({generated:ae,source:se,original:ye,name:me})}}return b}function N(y,b,k,F,H,W,ne,Z,K){const{_mappings:ae,_sources:se,_sourcesContent:ye,_names:me}=b,Ae=I(ae,k),Ue=L(Ae,F);if(!H)return y&&z(Ae,Ue)?void 0:R(Ae,Ue,[F]);const He=r.put(se,H),Qe=Z?r.put(me,Z):-1;if(He===ye.length&&(ye[He]=K??null),!(y&&G(Ae,Ue,He,W,ne,Qe)))return R(Ae,Ue,Z?[F,He,W,ne,Qe]:[F,He,W,ne])}function I(y,b){for(let k=y.length;k<=b;k++)y[k]=[];return y[b]}function L(y,b){let k=y.length;for(let F=k-1;F>=0;k=F--){const H=y[F];if(b>=H[0])break}return k}function R(y,b,k){for(let F=y.length;F>b;F--)y[F]=y[F-1];y[b]=k}function B(y){const{length:b}=y;let k=b;for(let F=k-1;F>=0&&!(y[F].length>0);k=F,F--);k<b&&(y.length=k)}function V(y,b){for(let k=0;k<b.length;k++)r.put(y,b[k])}function z(y,b){return b===0?!0:y[b-1].length===1}function G(y,b,k,F,H,W){if(b===0)return!1;const ne=y[b-1];return ne.length===1?!1:k===ne[1]&&F===ne[2]&&H===ne[3]&&W===(ne.length===5?ne[4]:-1)}function O(y,b,k){const{generated:F,source:H,original:W,name:ne,content:Z}=k;return H?N(y,b,F.line-1,F.column,H,W.line-1,W.column,ne,Z):N(y,b,F.line-1,F.column,null,null,null,null,null)}n.GenMapping=p,n.addMapping=S,n.addSegment=P,n.allMappings=E,n.fromMap=M,n.maybeAddMapping=m,n.maybeAddSegment=g,n.setIgnore=w,n.setSourceContent=x,n.toDecodedMap=C,n.toEncodedMap=A,Object.defineProperty(n,"__esModule",{value:!0})})}(Of,Of.exports)),Of.exports}(function(t,e){(function(n,r){t.exports=r(pA(),gG())})(Qa,function(n,r){const i=a("",-1,-1,"",null,!1),s=[];function a(m,x,w,C,A,M){return{source:m,line:x,column:w,name:C,content:A,ignore:M}}function o(m,x,w,C,A){return{map:m,sources:x,source:w,content:C,ignore:A}}function l(m,x){return o(m,x,"",null,!1)}function u(m,x,w){return o(null,s,m,x,w)}function f(m){const x=new r.GenMapping({file:m.map.file}),{sources:w,map:C}=m,A=C.names,M=n.decodedMappings(C);for(let E=0;E<M.length;E++){const N=M[E];for(let I=0;I<N.length;I++){const L=N[I],R=L[0];let B=i;if(L.length!==1){const k=w[L[1]];if(B=h(k,L[2],L[3],L.length===5?A[L[4]]:""),B==null)continue}const{column:V,line:z,name:G,content:O,source:y,ignore:b}=B;r.maybeAddSegment(x,E,R,y,z,V,G),y&&O!=null&&r.setSourceContent(x,y,O),b&&r.setIgnore(x,y,!0)}}return x}function h(m,x,w,C){if(!m.map)return a(m.source,x,w,C,m.content,m.ignore);const A=n.traceSegment(m.map,x,w);return A==null?null:A.length===1?i:h(m.sources[A[1]],A[2],A[3],A.length===5?m.map.names[A[4]]:C)}function p(m){return Array.isArray(m)?m:[m]}function v(m,x){const w=p(m).map(M=>new n.TraceMap(M,"")),C=w.pop();for(let M=0;M<w.length;M++)if(w[M].sources.length>1)throw new Error(`Transformation map ${M} must have exactly one source file.
Did you specify these with the most recent transformation maps first?`);let A=P(C,x,"",0);for(let M=w.length-1;M>=0;M--)A=l(w[M],[A]);return A}function P(m,x,w,C){const{resolvedSources:A,sourcesContent:M,ignoreList:E}=m,N=C+1,I=A.map((L,R)=>{const B={importer:w,depth:N,source:L||"",content:void 0,ignore:void 0},V=x(B.source,B),{source:z,content:G,ignore:O}=B;if(V)return P(new n.TraceMap(V,z),x,z,N);const y=G!==void 0?G:M?M[R]:null,b=O!==void 0?O:E?E.includes(R):!1;return u(z,y,b)});return l(m,I)}class S{constructor(x,w){const C=w.decodedMappings?r.toDecodedMap(x):r.toEncodedMap(x);this.version=C.version,this.file=C.file,this.mappings=C.mappings,this.names=C.names,this.ignoreList=C.ignoreList,this.sourceRoot=C.sourceRoot,this.sources=C.sources,w.excludeContent||(this.sourcesContent=C.sourcesContent)}toString(){return JSON.stringify(this)}}function g(m,x,w){const C=typeof w=="object"?w:{excludeContent:!!w,decodedMappings:!1},A=v(m,x);return new S(f(A),C)}return g})})(pG);var x3;const yG={filename:Cu("(unknown)"),rootDir:Cu(typeof process<"u"?(x3=process.cwd)==null?void 0:x3.call(process):typeof Deno<"u"?Deno.cwd():void 0),dev:hs(!1),generate:Vo("client",(t,e)=>t==="dom"||t==="ssr"?(Y2(_L),t==="dom"?"client":"server"):(t!=="client"&&t!=="server"&&t!==!1&&Ps(`${e} must be "client", "server" or false`),t)),warningFilter:mA(()=>!0)};gw({...yG,accessors:vw(pL,hs(!1)),css:Vo("external",t=>((t===!0||t===!1)&&Ps('The boolean options have been removed from the css option. Use "external" instead of false and "injected" instead of true'),t==="none"&&Ps('css: "none" is no longer a valid option. If this was crucial for you, please open an issue on GitHub with your use case.'),t!=="external"&&t!=="injected"&&Ps('css should be either "external" (default, recommended) or "injected"'),t)),cssHash:mA(({css:t,hash:e})=>`svelte-${e(t)}`),cssOutputFilename:Cu(void 0),customElement:hs(!1),discloseVersion:hs(!0),immutable:vw(mL,hs(!1)),legacy:ol("The legacy option has been removed. If you are using this because of legacy.componentApi, use compatibility.componentApi instead"),compatibility:gw({componentApi:yw([4,5],5)}),loopGuardTimeout:Zg(yL),name:Cu(void 0),namespace:yw(["html","mathml","svg"]),modernAst:hs(!1),outputFilename:Cu(void 0),preserveComments:hs(!1),preserveWhitespace:hs(!1),runes:hs(void 0),hmr:hs(!1),sourcemap:Vo(void 0,t=>t),enableSourcemap:Zg(vL),hydratable:Zg(gL),format:ol('The format option has been removed in Svelte 4, the compiler only outputs ESM now. Remove "format" from your compiler options. If you did not set this yourself, bump the version of your bundler plugin (vite-plugin-svelte/rollup-plugin-svelte/svelte-loader)'),tag:ol('The tag option has been removed in Svelte 5. Use `<svelte:options customElement="tag-name" />` inside the component instead. If that does not solve your use case, please open an issue on GitHub with details.'),sveltePath:ol("The sveltePath option has been removed in Svelte 5. If this option was crucial for you, please open an issue on GitHub with your use case."),errorMode:ol("The errorMode option has been removed. If you are using this through svelte-preprocess with TypeScript, use the https://www.typescriptlang.org/tsconfig#verbatimModuleSyntax setting instead"),varsReport:ol("The vars option has been removed. If you are using this through svelte-preprocess with TypeScript, use the https://www.typescriptlang.org/tsconfig#verbatimModuleSyntax setting instead")});function ol(t){return e=>{e!==void 0&&x6(null,t)}}const mw=new Set;function Y2(t){mw.has(t)||(mw.add(t),t(null))}function Zg(t){return e=>{e!==void 0&&Y2(t)}}function vw(t,e){return(n,r)=>(n!==void 0&&Y2(t),e(n,r))}function gw(t,e=!1){return(n,r)=>{const i={};(n&&typeof n!="object"||Array.isArray(n))&&Ps(`${r} should be an object`);for(const s in n)s in t||(e?i[s]=n[s]:b6(null,`${r?`${r}.${s}`:s}`));for(const s in t){const a=t[s];i[s]=a(n&&n[s],r?`${r}.${s}`:s)}return i}}function Vo(t,e){return(n,r)=>n===void 0?t:e(n,r)}function Cu(t,e=!0){return Vo(t,(n,r)=>(typeof n!="string"&&Ps(`${r} should be a string, if specified`),!e&&n===""&&Ps(`${r} cannot be empty`),n))}function hs(t){return Vo(t,(e,n)=>(typeof e!="boolean"&&Ps(`${n} should be true or false, if specified`),e))}function yw(t,e=t[0]){return Vo(e,(n,r)=>{if(!t.includes(n)){const i=t.length>2?`${r} should be one of ${t.slice(0,-1).map(s=>`"${s}"`).join(", ")} or "${t[t.length-1]}"`:`${r} should be either "${t[0]}" or "${t[1]}"`;Ps(i)}return n})}function mA(t){return Vo(t,(e,n)=>(typeof e!="function"&&Ps(`${n} should be a function, if specified`),e))}function Ps(t){_6(null,t)}const _G={1:{color:"#FF0000"},2:{color:"#0000FF"},3:{color:"#FFCC00"},4:{color:"#66CC33"},5:{color:"#808080"},6:{color:"#800000"},7:{color:"#800080"},8:{color:"#AA00FF"},9:{color:"#6464FF"},10:{color:"#FF00FF"},11:{color:"#C0C0C0"},12:{color:"#FFFFFF"}};function io(t,e=_G){return t.map(n=>n.toSVGPath().map(r=>{var s,a;return{path:r.encode(),attributes:{stroke:((s=e[n.layerId])==null?void 0:s.color)??"transparent",fill:(n.needFill?(a=e[n.layerId])==null?void 0:a.color:"none")??"none",strokeWidth:n.strokeWidth.toString()}}}).flat()).flat()}class ca{constructor(e){vt(this,"props");this.props=e}rotate(e,n=0,r=0){const i=this.props.lib.position.x,s=this.props.lib.position.y;return n=i+at(n),r=s+at(r),this.props.lib.rotate(e,n,r),this.props.pins.forEach(a=>a.rotate(e,n,r)),this.props.elements.forEach(a=>a.rotate(e,n,r)),this}translate(e,n){return e=at(e),n=at(n),this.props.lib.translate(e,n),this.props.pins.forEach(r=>r.translate(e,n)),this.props.elements.forEach(r=>r.translate(e,n)),this}toSVGPath(){const e=this.props.pins.map(r=>r.toSVGPath()),n=this.props.elements.map(r=>r.toSVGPath());return e.concat(n).flat()}get layerId(){return this.props.lib.layerId}serialize(){return sL([this.props.lib,...this.props.pins,...this.props.elements])}assignId(e){let n=e;return this.props.lib.id=`gge${n}`,n++,this.props.pins.forEach(r=>{r.id=`gge${n}`,n++}),this.props.elements.forEach(r=>{r.id=`gge${n}`,n++}),n}assignPrefix(e){let n=this.props.elements.find(i=>i.command==="TEXT"&&i.type==="P");const r=XI(e,{x:at(this.position.x),y:at(this.position.y)});n===void 0?this.props.elements.push(r):n=r}get position(){return{x:Yr(this.props.lib.position.x),y:Yr(this.props.lib.position.y),a:this.props.lib.position.a}}get elements(){return[...this.props.pins,...this.props.elements]}get pins(){return this.props.pins}static createParts(e,n){const r=e.find(a=>a.command==="LIB"),i=e.filter(a=>a.command==="PAD"),s=new ca({lib:r,pins:i,elements:e.filter(a=>a.command!=="LIB"&&a.command!=="PAD")});return s.translate(-s.position.x,-s.position.y),s.rotate(-r.position.a),s.assignPrefix(n),s}}Li(["click","mousemove"]);function Wt(t,e=0,n=0){return t==="switch"?`${t}-${String(e).padStart(2,"0")}-${String(n).padStart(2,"0")}`:t==="padding"?`${t}-${String(e).padStart(2,"0")}`:`${t}`}let va=Ct({schemeVersion:"1.1",modules:{},row:0,col:0}),ll=Ct({schemeVersion:"1.1",modules:{},row:0,col:0}),Df=jt(!1),qc=jt("mx-19"),cl=jt(""),kf=jt(void 0),Ff=jt("wireless"),et={init:(t,e)=>{const n={};for(let r=0;r<t;(r+=1)-1)for(let i=0;i<e;(i+=1)-1){const s=Wt("switch",r,i);n[s]=et.createSwitch(r,i)}n.controller={x:3,y:0,a:0,width:2,height:1,row:t,col:0,enabled:!0,moduleType:"controller"},n.encoder={x:0,y:0,a:0,width:1,height:1,row:t,col:1,enabled:!1,moduleType:"encoder"},n.trackball={x:0,y:0,a:0,width:2,height:2,row:t,col:2,enabled:!1,moduleType:"trackball"},va.modules=structuredClone(n),Object.values(va.modules).find(r=>r.moduleType==="controller").variant="side1",va.row=t,va.col=e,ll.modules=structuredClone(n),Object.values(va.modules).find(r=>r.moduleType==="controller").variant="side2",ll.row=t,ll.col=e},createSwitch(t,e){return{x:e,y:t,a:0,width:1,height:1,row:t,col:e,enabled:!0,moduleType:"switch"}},createPadding(t,e){return{x:0,y:0,a:0,width:3,height:3,row:t,col:e,enabled:!0,moduleType:"padding"}},loadLayoutData(t,e,n){"schemeVersion"in e&&(e.schemeVersion==="1.1"?("modules"in e&&(t.modules={...t.modules,...e.modules}),"row"in e&&(t.row=e.row),"col"in e&&(t.col=e.col)):e.schemeVersion==="1.0"&&("modules"in e&&(t.modules=e.modules.flat().reduce((r,i)=>{const s=Wt(i.moduleType,i.row,i.col);return r[s]=i,i.moduleType==="controller"&&(i.variant??"")===""&&(n==="left"?r[s].variant="side-1":r[s].variant="side-2"),r},{})),"row"in e&&(t.row=e.row),"col"in e&&(t.col=e.col)))},get leftData(){return va},get rightData(){return ll},get isSplit(){return Q(Df)},set isSplit(t){st(Df,Ct(t))},get switchType(){return Q(qc)},set switchType(t){st(qc,Ct(t))},get keyPitch(){return Number(Q(qc).split("-")[1])},get keyboardName(){return Q(cl)},set keyboardName(t){st(cl,Ct(t.replace(/[^0-9a-zA-Z\-_]/g,""))),st(cl,Ct(Q(cl).slice(0,16)))},get minStabilizer(){return Q(kf)},set minStabilizer(t){st(kf,Ct(t))},get controllerType(){return Q(Ff)},set controllerType(t){st(Ff,Ct(t))},serialize:()=>({isSplit:Q(Df),switchType:Q(qc),keyboardName:Q(cl),minStabilizer:Q(kf),controllerType:Q(Ff),leftData:va,rightData:ll}),deserialize:t=>{const e=JSON.parse(t);"layout"in e&&(st(Df,Ct(e.layout.isSplit)),st(qc,Ct(e.layout.switchType??"mx-19")),st(cl,Ct(e.layout.keyboardName??Date.now().toString().slice(0,16))),st(kf,Ct(e.layout.minStabilizer)),st(Ff,Ct(e.layout.controllerType??"wireless")),et.loadLayoutData(va,e.layout.leftData,"left"),et.loadLayoutData(ll,e.layout.rightData,"right"),et.subscribers.forEach(n=>n()))},subscribers:[],subscribe:t=>(et.subscribers.push(t),()=>{et.subscribers=et.subscribers.filter(e=>e!==t)}),notify:()=>{et.subscribers.forEach(t=>t())}};var Pn=gI(()=>et),xG=an("<label>Minimum Stabilizer <select><option>None</option><option>2</option><option>2.25</option><option>2.75</option><option>3</option></select></label>"),bG=an('<div><label>Keyboard Type <select><option>Unibody</option><option>Split</option></select></label> <label>Controller Type <select><option>Wireless</option><option>Wired</option></select></label> <label>Switch Type <select><option>Cherry MX</option><option>Choc V2(19mm)</option><option>Choc V2(18mm)</option><option>Choc V2(17mm)</option><option>Choc V2(16mm)</option></select></label> <!> <label>Keyboard Name(Max 16 characters) <input type="text"></label></div>');function wG(t,e){$r(e,!1),Ju();var n=bG();An(n,"display","grid"),An(n,"grid-template-rows","1fr 1fr 1fr");var r=bt(n),i=je(bt(r));lh(i,()=>Pn().isSplit?"split":"unibody");var s;i.__change=E=>Pn(Pn().isSplit=E.target.value==="split");var a=bt(i);a.value=(a.__value="unibody")==null?"":"unibody";var o=je(a);o.value=(o.__value="split")==null?"":"split";var l=je(r,2),u=je(bt(l));en(()=>{Pn().controllerType,m9(()=>{})});var f=bt(u);f.value=(f.__value="wireless")==null?"":"wireless";var h=je(f);h.value=(h.__value="wired")==null?"":"wired";var p=je(l,2),v=je(bt(p));lh(v,()=>Pn().switchType);var P;v.__change=E=>Pn(Pn().switchType=E.target.value);var S=bt(v);S.value=(S.__value="mx-19")==null?"":"mx-19";var g=je(S);g.value=(g.__value="choc2-19")==null?"":"choc2-19";var m=je(g);m.value=(m.__value="choc2-18")==null?"":"choc2-18";var x=je(m);x.value=(x.__value="choc2-17")==null?"":"choc2-17";var w=je(x);w.value=(w.__value="choc2-16")==null?"":"choc2-16";var C=je(p,2);xr(C,()=>Pn().switchType==="mx-19",E=>{var N=xG(),I=je(bt(N));en(()=>{Pn().minStabilizer,m9(()=>{})});var L=bt(I);L.value=(L.__value=void 0)==null?"":void 0;var R=je(L);R.value=(R.__value=2)==null?"":2;var B=je(R);B.value=(B.__value=2.25)==null?"":2.25;var V=je(B);V.value=(V.__value=2.75)==null?"":2.75;var z=je(V);z.value=(z.__value=3)==null?"":3,ch(I,()=>Pn().minStabilizer,G=>Pn(Pn().minStabilizer=G)),kt(E,N)});var A=je(C,2),M=je(bt(A));en(()=>{s!==(s=Pn().isSplit?"split":"unibody")&&(i.value=(i.__value=Pn().isSplit?"split":"unibody")==null?"":Pn().isSplit?"split":"unibody",sc(i,Pn().isSplit?"split":"unibody")),P!==(P=Pn().switchType)&&(v.value=(v.__value=Pn().switchType)==null?"":Pn().switchType,sc(v,Pn().switchType))}),ch(u,()=>Pn().controllerType,E=>Pn(Pn().controllerType=E)),eT("blur",M,E=>{Pn(Pn().keyboardName=E.target.value),Pn().keyboardName===""&&Pn(Pn().keyboardName=Date.now().toString().slice(0,16))}),So(M,()=>Pn().keyboardName,E=>Pn(Pn().keyboardName=E)),kt(t,n),Vr()}Li(["change"]);var SG=an("<input>");function Nr(t,e){$r(e,!0);let n=ko(e,"value",15,0),r=xI(e,["$$slots","$$events","$$legacy","value","min"]);function i(o){const l=o.target;let u=parseFloat(l.value);isNaN(u)||e.min!==void 0&&n()<e.min?u=e.min:e.max!==void 0&&n()>e.max&&(u=r.max),n(u)}var s=SG();let a;en(()=>a=pI(s,a,{type:"number",onchange:i,min:e.min,...r},"svelte-1cu8pc0")),So(s,n),kt(t,s),Vr()}function PG(t,e){Object.values(e().modules).filter(n=>n.moduleType==="switch").forEach(n=>{n.x=n.col,n.y=n.row,n.variant="default",n.width=1,n.height=1,n.a=0})}var EG=(t,e)=>{Object.values(e().modules).filter(n=>n.moduleType==="switch"&&n.row<e().row&&n.col<e().col).forEach(n=>n.enabled=!0)},CG=an("<button>Copy Position</button>"),TG=an('<input type="checkbox" class="switch-enable svelte-c8s80o">'),AG=an('<div id="matrix-size"></div> <label>row: <!></label> <label>col:<!></label> <br> <button>Check All</button> <button>Add Padding</button> <button>Reset Position</button> <!> <div id="edit-switch-selector" class="svelte-c8s80o"><!> <label>Trackball <input type="checkbox" class="switch-enable svelte-c8s80o"></label></div>',1);function MG(t,e){$r(e,!0);let n=ko(e,"layoutData",7);function r(){Object.values(n().modules).filter(I=>I.moduleType!=="controller").forEach(I=>{I.enabled=!1});const w=Object.values(et.leftData.modules),C=et.leftData.col,A=Math.max(...w.filter(I=>I.enabled&&I.col<C).map(I=>I.x)),M=Math.min(...w.filter(I=>I.enabled&&I.col<C).map(I=>I.x));n().row=et.leftData.row,n().col=et.leftData.col,w.filter(I=>I.moduleType!=="controller"&&I.enabled).forEach(I=>{const L=I.moduleType==="switch"&&I.col<C?C-I.col-1:I.col,R=Wt(I.moduleType,I.row,L),B=n().modules[R];B&&(B.x=A-I.x+M,B.y=I.y,B.width=I.width,B.height=I.height,B.a=-I.a,B.variant=I.variant,B.enabled=I.enabled)});const E=Object.values(et.leftData.modules).find(I=>I.moduleType==="controller"),N=Object.values(n().modules).find(I=>I.moduleType==="controller");E&&N&&(N.x=A-E.x+M+(et.controllerType==="wireless",0),N.y=E.y,N.variant=E.variant==="side-1"?"side-2":"side-1")}function i(w,C){for(let A=0;A<w;(A+=1)-1)for(let M=0;M<C;(M+=1)-1){const E=Wt("switch",A,M);n().modules[E]||(n().modules[E]=et.createSwitch(A,M))}n().row=w,n().col=C}var s=AG(),a=je(tr(s),2),o=je(bt(a));Nr(o,{get value(){return n().row},min:1,get max(){return e.maxRow},step:1,onchange:w=>i(Number(w.target.value),n().col)});var l=je(a,2),u=je(bt(l));Nr(u,{get value(){return n().col},min:1,get max(){return e.maxCol},step:1,onchange:w=>i(n().row,Number(w.target.value))});var f=je(l),h=je(f,3);h.__click=[EG,n];var p=je(h,2);p.__click=()=>{const w=Object.values(n().modules).find(C=>C.moduleType==="padding"&&C.enabled==!1);if(w)w.enabled=!0;else{const C=Object.values(n().modules).filter(A=>A.moduleType==="padding").length;n().modules[Wt("padding",C,0)]=et.createPadding(C,0)}};var v=je(p,2);v.__click=[PG,n];var P=je(v,2);xr(P,()=>et.isSplit&&e.boardType==="right",w=>{var C=CG();C.__click=r,kt(w,C)});var S=je(P,2),g=bt(S);Mi(g,16,()=>Array.from({length:n().row},(w,C)=>C),w=>w,(w,C)=>{var A=Ks(),M=tr(A);Mi(M,17,()=>Array.from({length:n().col},(E,N)=>N),E=>`${C}-${E}`,(E,N)=>{var I=TG();en(()=>Fn(I,"style",`grid-row: ${C+1}; grid-col:${Q(N)+1}`)),Iu(I,()=>n().modules[Wt("switch",C,Q(N))].enabled,L=>n().modules[Wt("switch",C,Q(N))].enabled=L),kt(E,I)}),kt(w,A)});var m=je(g,2),x=je(bt(m));An(x,"grid-col","1"),en(()=>{Jr(f,` Available pins: ${e.maxPin??""} `),Fn(S,"style",`grid-template-columns: repeat(${n().col},35px); grid-template-rows: repeat(${n().row},35px)`)}),Iu(x,()=>n().modules[Wt("trackball")].enabled,w=>n().modules[Wt("trackball")].enabled=w),kt(t,s),Vr()}Li(["click"]);var RG=(t,e,n)=>{const r=Q(e)[Number(t.currentTarget.value)];n.onSelected(r.moduleType,r.row,r.col)},IG=an("<option> </option>"),LG=(t,e,n)=>{t.currentTarget.value==="ISO"?(e().modules[Wt(n.moduleTypeSelected,n.rowSelected,n.colSelected)].width=2,e().modules[Wt(n.moduleTypeSelected,n.rowSelected,n.colSelected)].height=1.25):(e().modules[Wt(n.moduleTypeSelected,n.rowSelected,n.colSelected)].width=1,e().modules[Wt(n.moduleTypeSelected,n.rowSelected,n.colSelected)].height=1)},OG=an('<label class="svelte-1y8timp">a: <!></label> <label class="svelte-1y8timp">width: <!></label> <label class="svelte-1y8timp">variant: <select class="svelte-1y8timp"><option>default</option><option>ISO</option></select></label>',1),NG=an('<label class="svelte-1y8timp">variant: <select class="svelte-1y8timp"><option>side-1</option><option>side-2</option></select></label>'),DG=an('<label class="svelte-1y8timp">a: <!></label> <label class="svelte-1y8timp">width: <!></label> <label class="svelte-1y8timp">height: <!></label>',1),kG=an('<label class="svelte-1y8timp">a: <!></label> <label class="svelte-1y8timp">width: <!></label> <label class="svelte-1y8timp">height: <!></label>',1),FG=an('<div> </div> <label class="svelte-1y8timp">x: <!></label> <label class="svelte-1y8timp">y: <!></label> <!>',1),UG=an('<div>Move Selected Modules</div> <label class="svelte-1y8timp">x: <!></label> <label class="svelte-1y8timp">y: <!></label> <label class="svelte-1y8timp">a: <!></label>',1),BG=an('<div>Switch editor</div> <select class="svelte-1y8timp"></select> <div id="sw-editor" class="svelte-1y8timp"><!></div>',1);function $G(t,e){$r(e,!0);let n=ko(e,"layoutData",7),r=Yt(()=>e.selectedModules.length),i=Yt(()=>Object.entries(n().modules).filter(f=>f[1].enabled).sort((f,h)=>f[0]>h[0]?1:-1).map(f=>f[1]));var s=BG(),a=je(tr(s),2);a.__change=[RG,i,e],lh(a,()=>Q(i).findIndex(f=>f===e.selectedModules[0]));var o;Mi(a,21,()=>Q(i),Vl,(f,h,p)=>{var v=IG();v.value=(v.__value=p)==null?"":p;var P=bt(v);en(()=>Jr(P,Wt(Q(h).moduleType,Q(h).row,Q(h).col))),kt(f,v)});var l=je(a,2),u=bt(l);xr(u,()=>Q(r)==1,f=>{var h=FG(),p=tr(h),v=bt(p),P=je(p,2),S=je(bt(P));Nr(S,{min:"0",step:"0.125",get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].x},set value(w){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].x=w}});var g=je(P,2),m=je(bt(g));Nr(m,{min:"0",step:"0.125",get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].y},set value(w){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].y=w}});var x=je(g,2);xr(x,()=>e.selectedModules[0].moduleType==="switch",w=>{var C=OG(),A=tr(C),M=je(bt(A));Nr(M,{min:"-90",max:"90",step:"10",get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].a},set value(V){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].a=V}});var E=je(A,2),N=je(bt(E));Nr(N,{step:"0.25",min:"1",get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].width},set value(V){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].width=V},onchange:()=>{n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].variant==="ISO"&&(n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].width=2)}});var I=je(E,2),L=je(bt(I));L.__change=[LG,n,e];var R=bt(L);R.value=((R.__value="")==null,"");var B=je(R);B.value=(B.__value="ISO")==null?"":"ISO",ch(L,()=>n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].variant,V=>n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].variant=V),kt(w,C)},w=>{var C=Ks(),A=tr(C);xr(A,()=>e.selectedModules[0].moduleType==="controller"&&et.controllerType==="wireless",M=>{var E=NG(),N=je(bt(E)),I=bt(N);I.value=(I.__value="side-1")==null?"":"side-1";var L=je(I);L.value=(L.__value="side-2")==null?"":"side-2",ch(N,()=>n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].variant,R=>n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].variant=R),kt(M,E)},M=>{var E=Ks(),N=tr(E);xr(N,()=>e.selectedModules[0].moduleType==="padding",I=>{var L=DG(),R=tr(L),B=je(bt(R));Nr(B,{min:"-90",max:"90",step:"10",get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].a},set value(y){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].a=y}});var V=je(R,2),z=je(bt(V));Nr(z,{get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].width},set value(y){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].width=y},min:.25,step:.125});var G=je(V,2),O=je(bt(G));Nr(O,{step:"0.25",min:"0.125",get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].height},set value(y){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].height=y}}),kt(I,L)},I=>{var L=Ks(),R=tr(L);xr(R,()=>e.selectedModules[0].moduleType==="trackball",B=>{var V=kG(),z=tr(V),G=je(bt(z));Nr(G,{min:"-180",max:"180",step:"10",get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].a},set value(F){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].a=F}});var O=je(z,2),y=je(bt(O));Nr(y,{get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].width},set value(F){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].width=F},min:.25,step:.25});var b=je(O,2),k=je(bt(b));Nr(k,{step:"0.25",min:"0.25",get value(){return n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].height},set value(F){n().modules[Wt(e.moduleTypeSelected,e.rowSelected,e.colSelected)].height=F}}),kt(B,V)},null,!0),kt(I,L)},!0),kt(M,E)},!0),kt(w,C)}),en(()=>Jr(v,`Edit Selected Module${e.rowSelected??""},${e.colSelected??""}`)),kt(f,h)},f=>{var h=UG(),p=je(tr(h),2),v=je(bt(p));Nr(v,{min:"-5",step:"0.125",get value(){return e.prevMovX},onchange:x=>e.onMoveSelected(parseFloat(x.target.value),e.prevMovY)});var P=je(p,2),S=je(bt(P));Nr(S,{min:"-5",step:"0.125",get value(){return e.prevMovY},onchange:x=>e.onMoveSelected(e.prevMovX,parseFloat(x.target.value))});var g=je(P,2),m=je(bt(g));Nr(m,{min:"-90",max:"90",step:"5",get value(){return e.prevMovRot},onchange:x=>e.onRotateSelected(parseFloat(x.target.value))}),kt(f,h)}),en(()=>{o!==(o=Q(i).findIndex(f=>f===e.selectedModules[0]))&&(a.value=(a.__value=Q(i).findIndex(f=>f===e.selectedModules[0]))==null?"":Q(i).findIndex(f=>f===e.selectedModules[0]),sc(a,Q(i).findIndex(f=>f===e.selectedModules[0])))}),kt(t,s),Vr()}Li(["change"]);class vA{constructor(e,n){this.module=e,this._side=n}rotate(e,n=0,r=0){return this.module.rotate(e,n,r),this}translate(e,n){return this.module.translate(e,n),this}get side(){return this._side}get parts(){return this.module}get elements(){return this.module.elements}get position(){return this.module.position}assignId(e){return this.elements.reduce((n,r)=>(r.id=`gge${n}`,n+1),e)}serialize(){return[this.module.serialize()]}assignNet(e,n){const r=this.module.pins.find(i=>i.number==n);if(r)return r.setNet(e),{x:r.position.x,y:r.position.y,padNumber:r.number,net:e}}}const VG="LIB~0~0~package`MX_SOCKET_HANDSOLDERING`Contributor`sekigon.gonnoc`link`https://www.lcsc.com/datasheet/lcsc_datasheet_2208291600_Kailh-CPG151101S11-16_C5156480.pdf`Supplier`LCSC`Supplier Part`C5156480`~0~~gge1~2#@$PAD~RECT~27.46100000000024~-5.001000000000207~11.811~11.811~2~~1~0~33.36610000000019 -10.906500000000054 21.555099999999584 -10.906500000000053 21.555099999999584 0.9045000000000956 33.36610000000019 0.9045000000000941~0~gge2~0~~Y#@$PAD~RECT~-27.46100000000024~4.9989999999998~11.811~11.811~2~~2~0~-21.555099999999584 -0.9065000000000483 -33.36610000000019 -0.9065000000000468 -33.36610000000019 10.904500000000102 -21.555099999999584 10.9045000000001~0~gge3~0~~Y#@$TRACK~1~3~~27.559000000000193 -42.5590000000002 -27.5590000000002 -42.55900000000019 -27.559000000000193 12.559000000000204 27.5590000000002 12.559000000000196 27.559000000000193 -42.5590000000002~gge4#@$CIRCLE~28.44499999999971~-11.614000000000036~0.118~0.2362~101~gge5#@$CIRCLE~12.597999999999956~-5.000000000000002~2.854~5.7087~12~gge6#@$CIRCLE~-12.597999999999956~5.000000000000002~2.854~5.7087~12~gge7#@$SOLIDREGION~12~~M-0.7497000000003031 -3.6239999999997963A0.50005 0.50005 0 0 0 -1.09060000000045 -3.150000000000091L-1.09060000000045 -3.1498999999998887A0.50005 0.50005 0 0 0 -0.59060000000045 -2.6498999999998887L-0.5905000000002477 -2.6498999999998887A0.50005 0.50005 0 0 0 -0.4314000000003947 -2.6759000000001834L-0.4314000000003947 -2.6759000000001834A13.946 13.946 0 0 0 8.347899999999752 -11.45550000000003L8.347899999999752 -11.45550000000003A0.5 0.5 0 0 0 8.376400000000102 -11.621900000000098L8.376400000000102 -11.621900000000098A0.5 0.5 0 0 0 7.8764000000001015 -12.121900000000098L7.8764000000001015 -12.121900000000098A0.5 0.5 0 0 0 7.399999999999634 -11.773700000000192L7.399999999999634 -11.773700000000192A12.946000000000002 12.946000000000002 0 0 1 -0.7497000000003031 -3.6239999999997963z~solid~gge8#@$SOLIDREGION~12~~M-0.5905000000002478 -3.6502000000000407L-4.685000000000401 -3.6502000000000403L-21.65350000000035 -3.650200000000038A0.5 0.5 0 0 0 -21.65350000000035 -2.650200000000038L-4.6850000000004 -2.6502000000000403L-0.5905000000002477 -2.6502000000000407A0.5 0.5 0 0 0 -0.5905000000002478 -3.6502000000000407z~solid~gge9#@$SOLIDREGION~12~~M21.653400000000147 -12.114399999999934L7.873899999999592 -12.114399999999934A0.5 0.5 0 0 0 7.873899999999592 -11.114399999999934L21.653400000000147 -11.114399999999934A0.5 0.5 0 0 0 21.653400000000147 -12.114399999999934z~solid~gge10#@$SOLIDREGION~12~~M9.808699999999591 11.615299999999932A0.5 0.5 0 0 0 10.308699999999591 12.115299999999932L10.309799999999997 12.115299999999932A0.5 0.5 0 0 0 10.447699999999715 12.0958999999998L10.447699999999715 12.0958999999998A16.3959 16.3959 0 0 0 21.899099999999635 0.6440999999999777L21.899099999999635 0.6440999999999777A0.5 0.5 0 0 0 21.918899999999667 0.5052999999998038L21.918899999999667 0.5052999999998038A0.5 0.5 0 0 0 21.418899999999667 0.005299999999803837L21.418899999999667 0.005299999999803837A0.5 0.5 0 0 0 20.935300000000097 0.378499999999801L20.935300000000097 0.378499999999801A15.3959 15.3959 0 0 1 10.18199999999979 11.13200000000006L10.18199999999979 11.13200000000006A0.5 0.5 0 0 0 9.808699999999591 11.615200000000184z~solid~gge11#@$SOLIDREGION~12~~M-21.65350000000035 12.114000000000035L8.149599999999738 12.114000000000031L10.314800000000107 12.114000000000031A0.5 0.5 0 0 0 10.314800000000107 11.114000000000031L8.149599999999738 11.114000000000031L-21.65350000000035 11.114000000000035A0.5 0.5 0 0 0 -21.65350000000035 12.114000000000035z~solid~gge12#@$TRACK~1~12~~37.40099999999983 -52.40099999999985 -37.40200000000005 -52.40099999999984 -37.402000000000044 22.402000000000044 37.40099999999984 22.402000000000033 37.40099999999983 -52.400999999999854~gge13#@$CIRCLE~-1.83697019872103e-15~-15~3.74~7.4803~12~gge14#@$CIRCLE~-20.000000000000004~-14.999999999999998~1.969~3.937~12~gge15#@$CIRCLE~19.999999999999996~-15.000000000000002~1.969~3.937~12~gge16#@$SOLIDREGION~100~~M-22.145700000000033 8.345899999999805L-22.145700000000033 1.6529000000000478L-28.444900000000416 1.6529000000000487L-28.444900000000416 8.345899999999805z~solid~gge17#@$SOLIDREGION~100~~M-21.515699999999924 8.345899999999803L-21.515699999999924 1.6529000000000478L-22.1850000000004 1.6529000000000478L-22.1850000000004 8.345899999999805z~cutout~gge18#@$SOLIDREGION~100~~M28.444900000000416 -1.6541000000002022L28.444900000000416 -8.347099999999958L22.145700000000033 -8.347099999999958L22.145700000000033 -1.6541000000002013z~solid~gge19#@$SOLIDREGION~100~~M22.243999999999687 -8.347000000000211L21.220400000000154 -8.34700000000021L21.220400000000154 -1.6541000000002013L22.243999999999687 -1.6541000000002013L22.243999999999687 -8.347000000000211z~cutout~gge20#@$SOLIDREGION~99~~M5.010800000000019 11.574200000000019A15.747999999999998 15.747999999999998 0 0 0 21.259799999999814 -0.0005999999998519913L21.259799999999814 -10.63020000000006A1.2071 1.2071 0 0 0 20.510800000000017 -11.614199999999984L7.8739999999997945 -11.614199999999984A11.811 11.811 0 0 1 -3.9369999999998986 -4.134399999999913L-21.65350000000035 -4.1343999999999115L-21.65350000000035 11.57420000000002z~solid~gge21#@$TRACK~1~4~~-0.5906000000004502 -4.134500000000116 -4.685099999999694 -4.1345000000001155 -21.653599999999642 -4.134500000000114~gge22#@$TRACK~1~4~~21.653599999999642 -11.614700000000086 7.873999999999796 -11.614700000000084~gge23#@$TRACK~1~4~~21.653599999999642 -11.614700000000086 21.653599999999642 -10.930400000000192~gge24#@$TRACK~1~4~~-21.653599999999642 10.929000000000089 -21.653599999999642 11.613800000000085~gge25#@$TRACK~1~4~~-21.653599999999642 -3.150099999999836 -21.653599999999642 -0.930400000000188~gge26#@$TRACK~1~4~~21.653599999999642 -10.930400000000192 21.653599999999642 2.5046999999999553~gge27#@$TRACK~1~4~~-21.653599999999642 11.613800000000085 12.544700000000375 11.613800000000081~gge28#@$TRACK~1~4~~-21.653599999999642 -3.1505999999999377 -21.653599999999642 -4.134500000000114~gge29#@$TRACK~1~4~~-0.5906000000004502 -4.134500000000116 0.39379999999982773 -4.134500000000116~gge30#@$ARC~1~4~~M21.65350000000035 2.5048000000001567A9.0694 9.0694 0 0 1 12.584100000000037 11.574200000000017~~gge31#@$ARC~1~4~~M-21.61409999999978 11.57420000000002A0.0394 0.0394 0 0 0 -21.65350000000035 11.613600000000135~~gge32#@$ARC~1~4~~M21.65229999999974 3.148900000000137A0.0002999999999999999 0.0002999999999999999 0 0 1 21.652399999999943 3.149100000000087~~gge33#@$ARC~1~4~~M0.3936999999996255 -4.134399999999914A10.4529 10.4529 0 0 0 7.8739999999997945 -11.614700000000086~~gge34#@$HOLE~12.597999999999956~-5.000000000000002~5.9055~gge35~-180#@$HOLE~-12.597999999999956~5.000000000000002~5.9055~gge36~-180#@$HOLE~-1.83697019872103e-15~-15~7.874~gge37~-180#@$HOLE~-20.000000000000004~-14.999999999999998~3.7402~gge38~-180#@$HOLE~19.999999999999996~-15.000000000000002~3.7402~gge39~-180",qG="LIB~0~0~package`CHOC_V2_SOCKET_HANDSOLDERING`Contributor`sekigon.gonnoc`link`https://img.jlc.com/pdf/applyPasteComponent/2022-03-10/1040576A/4a61c01671f44ec993d78f40fbf3ae23/%E5%87%AF%E5%8D%8E%E7%9F%AE%E8%BD%B4%E8%BD%B4%E5%BA%A7.pdf`3DModel`CONN-SMD_HOTPLUGPAKAGE__C9900010116`Supplier`LCSC`Supplier Part`C5333465`~0~~gge1~2#@$PAD~RECT~-23.524000000000342~-4.331099999999876~11.811~13.7795~2~~2~0~-17.618099999999686 -11.220800000000052 -29.42910000000029 -11.22080000000005 -29.42910000000029 2.558700000000048 -17.618099999999686 2.5587000000000466~0~gge2~0~~Y#@$PAD~RECT~23.524000000000342~4.330899999999926~11.811~13.7795~2~~1~0~29.429099999999835 -2.5587999999997955 17.618099999999686 -2.558799999999794 17.618099999999686 11.220700000000305 29.429099999999835 11.220700000000303~0~gge3~0~~Y#@$TRACK~1~3~~17.71600000000035 -8.661099999999808 -37.402000000000044 -8.6610999999998 -37.40200000000004 46.45690000000014 17.716000000000356 46.45690000000013 17.71600000000035 -8.661099999999806~gge6#@$CIRCLE~25.886000000000422~13.483900000000173~0.118~0.2362~101~gge7#@$SOLIDREGION~100~~M-19.586599999999635 -7.480299999999713L-25.885800000000017 -7.480299999999712L-25.885800000000017 -1.1810999999997844L-19.586599999999635 -1.181099999999785z~solid~gge8#@$SOLIDREGION~100~~M25.885800000000017 1.1811000000002392L19.586599999999635 1.1811000000002398L19.586599999999635 7.480300000000168L25.885800000000017 7.480300000000167z~solid~gge9#@$SOLIDREGION~100~~M19.606300000000374 1.1811000000002398L19.606300000000374 7.47640000000001L19.610200000000077 7.480300000000168L18.78740000000016 7.480300000000168L18.78740000000016 1.18110000000024z~cutout~gge10#@$SOLIDREGION~100~~M-19.59439999999995 -7.480299999999713L-19.59439999999995 -1.181099999999785L-18.791299999999865 -1.1810999999997853L-18.791299999999865 -7.480299999999713z~cutout~gge11#@$SOLIDREGION~99~~M18.89760000000024 -0.7873999999997091L18.89760000000024 -2.1653999999998654A2.559 2.559 0 0 0 16.338600000000042 -4.724400000000061L5.708599999999932 -4.7244000000000606A5.708599999999999 5.708599999999999 0 0 1 -1.2776740055504328e-15 -10.432999999999993L-1.2776740055504328e-15 -10.432999999999993L-3.1495999999997384 -13.58259999999973L-15.551199999999882 -13.582599999999728L-18.89760000000024 -10.236199999999824L-18.89760000000024 2.1640999999999644L-18.897299999999632 2.1644000000001165A2.5592 2.5592 0 0 0 -16.33809999999994 4.723600000000262L-4.920900000000073 4.723600000000261A4.9213 4.9213 0 0 1 0.00039999999990077297 9.644900000000234L0.0003999999999008694 10.432400000000143L3.149900000000345 13.581900000000132L18.89760000000024 13.582600000000182L18.89810000000034 10.235599999999975L18.89810000000034 10.235100000000328z~solid~gge12#@$TRACK~1~4~~18.899999999999636 9.447900000000116 18.899999999999636 13.577900000000225 18.899999999999636 13.577900000000225 3.149999999999636 13.577900000000227~gge13#@$TRACK~1~4~~4.920200000000476 -4.723599999999807 16.33730000000014 -4.723599999999808~gge14#@$TRACK~1~4~~-0.0015999999995970893 10.433899999999994 -0.0015999999995971858 9.645899999999983~gge15#@$TRACK~1~4~~-18.897299999999632 2.1644000000001165 -16.338200000000143 4.72350000000006 -16.338200000000143 4.723600000000262~gge16#@$TRACK~1~4~~-18.897299999999632 2.1644000000001165 -18.897299999999632 0.7867000000001121~gge17#@$TRACK~1~4~~-4.920900000000073 4.723600000000261 -16.338200000000143 4.723600000000263~gge18#@$TRACK~1~4~~-18.89760000000024 -9.448799999999663 -18.89760000000024 -10.236199999999824 -15.55119999999988 -13.582599999999728 -3.1495999999997366 -13.58259999999973 4.440892098500626e-16 -10.432999999999993~gge19#@$TRACK~1~4~~-1.2776740055504328e-15 -10.432999999999993 -1.1812453165855505e-15 -9.645599999999831~gge20#@$ARC~1~4~~M-1.1812453165855503e-15 -9.645599999999831A4.9212 4.9212 0 0 0 4.921199999999771 -4.7244000000000606~~gge21#@$TRACK~1~4~~18.89760000000024 -2.1653999999998654 18.89760000000024 -0.787399999999709~gge22#@$ARC~1~4~~M0.0003999999999007729 9.644600000000082A4.9212 4.9212 0 0 0 -4.920900000000073 4.723600000000261~~gge23#@$ARC~1~4~~M3.1477999999997355 13.583399999999983A3.5135 3.5135 0 0 1 -0.0020000000004061764 10.429399999999987~~gge24#@$ARC~1~4~~M16.338600000000042 -4.724400000000061A2.559 2.559 0 0 1 18.89760000000024 -2.1653999999998654~~gge25#@$CIRCLE~-9.842999999999847~-4.331099999999878~2.854~5.7087~12~gge26#@$CIRCLE~9.841999999999643~4.330899999999928~2.854~5.7087~12~gge27#@$SOLIDREGION~12~~M0.3536000000003683 -10.786599999999908L-2.7960000000002783 -13.936200000000099A0.5 0.5 0 0 0 -3.1495999999997384 -14.08259999999973L-15.551199999999882 -14.082599999999728A0.5 0.5 0 0 0 -15.904800000000252 -13.936200000000097L-19.2511999999997 -10.58979999999974A0.5 0.5 0 0 0 -19.39760000000024 -10.236199999999824L-19.39760000000024 2.16540000000032A0.5 0.5 0 0 0 -19.2511999999997 2.519000000000235L-16.692200000000412 5.077999999999976A0.5 0.5 0 0 0 -16.338600000000042 5.224400000000061L-5.118099999999685 5.2244000000000606A0.5 0.5 0 0 0 -5.118099999999685 4.2244000000000606L-16.131500000000415 4.224400000000061L-18.39760000000024 1.958300000000238L-18.39760000000024 -10.029099999999742L-15.344100000000255 -13.082599999999728L-3.3567000000002754 -13.08259999999973L-0.35360000000037084 -10.079400000000078A0.5 0.5 0 0 0 0.3536000000003683 -10.786599999999908z~solid~gge28#@$SOLIDREGION~12~~M3.199300000000223 13.084299999999985A3.0135000000000005 3.0135000000000005 0 0 1 0.49759999999969423 10.37920000000031A0.5 0.5 0 1 0 -0.4975999999996917 10.476599999999962A4.0135 4.0135 0 0 0 3.1005000000004674 14.07950000000028A0.5 0.5 0 1 0 3.199300000000223 13.084299999999985z~solid~gge29#@$SOLIDREGION~12~~M0.5003999999999009 10.432400000000143L0.5003999999999008 9.644600000000082A0.5 0.5 0 0 0 -0.49960000000009924 9.644600000000082L-0.49960000000009913 10.432400000000143A0.5 0.5 0 0 0 0.5003999999999009 10.432400000000143z~solid~gge30#@$SOLIDREGION~12~~M-0.5015999999995971 9.645899999999983A4.4212 4.4212 0 0 0 -4.922899999999571 5.22499999999991A0.5 0.5 0 1 1 -4.922899999999571 4.22499999999991A5.4212 5.4212 0 0 1 0.4984000000004028 9.645899999999983A0.5 0.5 0 1 1 -0.5015999999995971 9.645899999999983z~solid~gge31#@$SOLIDREGION~12~~M4.921199999999771 -4.2244000000000606L16.338600000000042 -4.224400000000061A0.5 0.5 0 0 0 16.338600000000042 -5.224400000000061L4.921199999999771 -5.2244000000000606A0.5 0.5 0 0 0 4.921199999999771 -4.2244000000000606z~solid~gge32#@$SOLIDREGION~12~~M16.337400000000343 -4.2235999999998075A2.059 2.059 0 0 1 18.396600000000035 -2.1646999999998138A0.5 0.5 0 1 0 19.396600000000035 -2.1646999999998138A3.059 3.059 0 0 0 16.33719999999994 -5.2235999999998075A0.5 0.5 0 1 0 16.337400000000343 -4.2235999999998075z~solid~gge33#@$SOLIDREGION~12~~M0.49889999999959284 -9.64489999999978A4.4212 4.4212 0 0 0 4.920200000000476 -5.223599999999807A0.5 0.5 0 1 1 4.920200000000476 -4.223599999999807A5.4212 5.4212 0 0 1 -0.5011000000004072 -9.64489999999978A0.5 0.5 0 1 1 0.49889999999959284 -9.64489999999978z~solid~gge34#@$SOLIDREGION~12~~M18.39760000000024 -2.1653999999998654L18.39760000000024 13.082600000000182L3.1495999999997384 13.082600000000184A0.5 0.5 0 0 0 3.1495999999997384 14.082600000000184L18.89760000000024 14.082600000000182A0.5 0.5 0 0 0 19.39760000000024 13.582600000000182L19.39760000000024 -2.1653999999998654A0.5 0.5 0 0 0 18.39760000000024 -2.1653999999998654z~solid~gge35#@$TRACK~1~12~~27.559000000000193 -18.50410000000011 -47.24399999999969 -18.5041000000001 -47.24399999999968 56.29890000000024 27.559000000000204 56.29890000000023 27.559000000000193 -18.504100000000108~gge36#@$CIRCLE~-9.842999999999845~18.897899999999936~4.724~9.4488~12~gge37#@$CIRCLE~-29.528000000000244~40.74790000000031~0.984~1.9685~12~gge38#@$HOLE~9.841999999999643~4.330899999999928~5.9055~gge39~-180#@$HOLE~-9.842999999999847~-4.331099999999878~5.9055~gge40~-180#@$HOLE~-9.842999999999845~18.897899999999936~9.4488~gge41~-180#@$HOLE~-29.528000000000244~40.74790000000031~1.9685~gge42~-180",gA="LIB~0~0~package`D_SOD-123F_HANDSOLDERING`Contributor`sekigon.gonnoc`3DModel`SOD-123F_L2.7-W1.6-LS3.8-RD`link`http://www.jinghenggroup.com/DATABOOK2010/10ZENER/MM1Z2V0THRUMM1Z120SOD123.pdf`Supplier`LCSC`Supplier Part`C81598`~0~~gge1~2#@$PAD~RECT~-7.416999999999916~9.083205309275815e-16~5.1181~3.937~2~~2~0~-4.858299999999872 -1.9684999999999484 -9.976400000000012 -1.9684999999999477 -9.976400000000012 1.9684999999999504 -4.858299999999872 1.9684999999999497~0~gge2~0~~Y#@$PAD~RECT~7.22400000000016~-8.846848477040676e-16~5.1181~3.937~2~~1~0~9.783399999999801 -1.9684999999999502 4.665300000000116 -1.9684999999999497 4.665300000000116 1.9684999999999484 9.783399999999801 1.968499999999948~0~gge3~0~~Y#@$CIRCLE~7.480000000000018~3.15000000000009~0.118~0.2362~101~gge6#@$SOLIDREGION~100~~M-7.4801000000002205 -1.0826999999999307L-7.4801000000002205 1.0826999999999325L-5.1574999999998 1.0826999999999323L-5.1574999999998 -1.082699999999931z~solid~gge7#@$SOLIDREGION~100~~M7.4801000000002205 1.0826999999999307L7.4801000000002205 -1.0826999999999325L5.1574999999998 -1.0826999999999323L5.1574999999998 1.082699999999931z~solid~gge8#@$SOLIDREGION~99~~M5.3146999999999025 3.149600000000191L5.3146999999999025 -3.149600000000192L-5.315200000000004 -3.149600000000191L-5.315200000000004 3.149600000000192z~solid~gge9#@$TRACK~0.6~4~~5.418000000000121 3.646999999999934 -5.418400000000019 3.6469999999999354~gge10#@$TRACK~0.6~4~~5.418000000000119 -3.6462000000001358 -5.4184000000000205 -3.6462000000001344~gge11#@$TRACK~0.6~4~~-5.4184000000000205 -3.646200000000135 -5.4184000000000205 -2.8861999999999166~gge12#@$TRACK~0.6~4~~-5.418400000000019 3.646999999999935 -5.418400000000019 2.8870000000001714~gge13#@$TRACK~0.6~4~~3.609199999999873 -3.4493000000002216 3.609199999999874 3.45010000000002~gge14#@$SOLIDREGION~4~~M5.11790000000019 -3.9461000000001154L5.117900000000191 -2.686299999999847L6.317900000000009 -2.6862999999998474L6.317900000000008 -3.946100000000116z~solid~gge15#@$SOLIDREGION~4~~M5.1179000000001915 3.9468999999999137L5.117900000000191 2.6871000000001L6.317900000000009 2.6871000000000995L6.31790000000001 3.9468999999999133z~solid~gge16#@$SOLIDREGION~12~~M7.99980000000005 -0.4996000000001014L7.99980000000005 0.25640000000021146L4.976200000000063 0.25640000000021185L4.976200000000063 -0.499600000000101z~solid~gge17#@$SOLIDREGION~12~~M-8.012000000000171 -0.37770000000000337L-8.012000000000171 0.37829999999985475L-4.988400000000183 0.37829999999985436L-4.988400000000183 -0.37770000000000375z~solid~gge18#@$SOLIDREGION~12~~M-6.878299999999854 1.5122000000001217L-6.122299999999996 1.5122000000001214L-6.122299999999996 -1.5113999999998662L-6.878299999999854 -1.511399999999866z~solid~gge19",HG="LIB~0~0~package`MS88SF2_1-1-3-SIDE2`Contributor`sekigon.gonnoc`link``~0~~gge1~2~~1735116197~0~~yes#@$PAD~RECT~0~0~5.1181~4.2126~11~~1~1.378~2.5595000000002983 -2.1062999999999192 -2.558600000000297 -2.1062999999999192 -2.558600000000297 2.1062999999999192 2.5595000000002983 2.1062999999999192~0~gge2~3.3464~0.2951999999995678 0 -0.2951999999995678 0~Y#@$PAD~OVAL~0~5~5.1181~4.2126~11~~2~1.378~-0.45280000000002474 5 0.45280000000002474 5~0~gge3~3.3464~0.2951999999995678 5 -0.2951999999995678 5~Y#@$PAD~OVAL~0~10~5.1181~4.2126~11~~3~1.378~-0.45280000000002474 10 0.45280000000002474 10~0~gge4~3.3464~0.2951999999995678 10 -0.2951999999995678 10~Y#@$PAD~OVAL~0~15~5.1181~4.2126~11~~4~1.378~-0.45280000000002474 15 0.45280000000002474 15~0~gge5~3.3464~0.29470000000037544 15 -0.29569999999966967 15~Y#@$PAD~OVAL~0~20~5.1181~4.2126~11~~5~1.378~-0.45280000000002474 20 0.45280000000002474 20~0~gge6~3.3464~0.2951999999995678 20 -0.2951999999995678 20~Y#@$PAD~OVAL~0~25~5.1181~4.2126~11~~6~1.378~-0.45280000000002474 25 0.45280000000002474 25~0~gge7~3.3464~0.2951999999995678 25 -0.2951999999995678 25~Y#@$PAD~OVAL~0~30~5.1181~4.2126~11~~7~1.378~-0.45280000000002474 30 0.45280000000002474 30~0~gge8~3.3464~0.2951999999995678 29.999899999999798 -0.2951999999995678 29.999899999999798~Y#@$PAD~OVAL~0~35~5.1181~4.2126~11~~8~1.378~-0.45280000000002474 35 0.45280000000002474 35~0~gge9~3.3464~0.2951999999995678 34.9998999999998 -0.2951999999995678 34.9998999999998~Y#@$PAD~OVAL~0~40~5.1181~4.2126~11~~9~1.378~-0.45280000000002474 40 0.45280000000002474 40~0~gge10~3.3464~0.2951999999995678 39.9998999999998 -0.2951999999995678 39.9998999999998~Y#@$PAD~OVAL~-74.80199999999968~40~5.1181~4.2126~11~~10~1.378~-75.25470000000041 40 -74.34919999999966 40~0~gge11~3.3464~-74.50780000000032 39.9998999999998 -75.09820000000036 39.9998999999998~Y#@$PAD~OVAL~-74.80199999999968~35~5.1181~4.2126~11~~11~1.378~-75.25470000000041 35 -74.34919999999966 35~0~gge12~3.3464~-74.50780000000032 34.9998999999998 -75.09820000000036 34.9998999999998~Y#@$PAD~OVAL~-74.80199999999968~30~5.1181~4.2126~11~~12~1.378~-75.25470000000041 30 -74.34919999999966 30~0~gge13~3.3464~-74.50780000000032 29.999899999999798 -75.09820000000036 29.999899999999798~Y#@$PAD~OVAL~-74.80199999999968~25~5.1181~4.2126~11~~13~1.378~-75.25470000000041 25 -74.34919999999966 25~0~gge14~3.3464~-74.50780000000032 25 -75.09820000000036 25~Y#@$PAD~OVAL~-74.80199999999968~20~5.1181~4.2126~11~~14~1.378~-75.25470000000041 20 -74.34919999999966 20~0~gge15~3.3464~-74.50780000000032 20 -75.09820000000036 20~Y#@$PAD~OVAL~-74.80199999999968~15~5.1181~4.2126~11~~15~1.378~-75.25470000000041 15 -74.34919999999966 15~0~gge16~3.3464~-74.50780000000032 15 -75.09820000000036 15~Y#@$PAD~OVAL~-74.80199999999968~10~5.1181~4.2126~11~~16~1.378~-75.25470000000041 10 -74.34919999999966 10~0~gge17~3.3464~-74.50780000000032 10 -75.09820000000036 10~Y#@$PAD~OVAL~-74.80199999999968~5~5.1181~4.2126~11~~17~1.378~-75.25470000000041 5 -74.34919999999966 5~0~gge18~3.3464~-74.50780000000032 5 -75.09820000000036 5~Y#@$PAD~OVAL~-74.80199999999968~0~5.1181~4.2126~11~~18~1.378~-75.25470000000041 0 -74.34919999999966 0~0~gge19~3.3464~-74.50780000000032 0 -75.09820000000036 0~Y#@$TRACK~1~4~~82.67649999999958 -27.559000000000196 -303.1495 -27.559000000000196 -303.1495 86.61400000000003 82.67649999999958 86.61400000000003 82.67649999999958 -27.559000000000196~gge20#@$TRACK~1~12~~-7.873999999999796 -23.621999999999844 -7.873999999999796 -27.559000000000196 0 -27.559000000000196 0 -23.621999999999844~gge21#@$TRACK~1~12~~76.77149999999983 -27.559000000000196 5.905499999999847 -27.559000000000196 5.905499999999847 -3.936999999999898 76.77149999999983 -3.936999999999898 76.77149999999983 -27.559000000000196~gge22#@$TRACK~1~12~~-19.685499999999593 -27.559000000000196 -55.118499999999585 -27.559000000000196 -55.118499999999585 0 -19.685499999999593 0 -19.685499999999593 -27.559000000000196~gge23#@$CIRCLE~-68.89699999999993~-21.652999999999793~1.969~1~12~gge24#@$ARC~1~12~~M0 -23.621999999999844A3.937 3.937 0 1 1 -7.873999999999796 -23.621999999999844~~gge25",zG="LIB~0~0~package`MS88SF2_1-1-3-SIDE1`Contributor`sekigon.gonnoc`link``~0~~gge1~2~~1735116174~0~~yes#@$PAD~RECT~0~0~5.1181~4.2126~11~~1~1.378~2.5595000000002983 -2.1062999999999192 -2.558600000000297 -2.1062999999999192 -2.558600000000297 2.1062999999999192 2.5595000000002983 2.1062999999999192~0~gge2~3.3464~0.2951999999995678 0 -0.2951999999995678 0~Y#@$PAD~OVAL~0~5~5.1181~4.2126~11~~2~1.378~-0.45280000000002474 5 0.45280000000002474 5~0~gge3~3.3464~0.2951999999995678 5 -0.2951999999995678 5~Y#@$PAD~OVAL~0~10~5.1181~4.2126~11~~3~1.378~-0.45280000000002474 10 0.45280000000002474 10~0~gge4~3.3464~0.2951999999995678 10 -0.2951999999995678 10~Y#@$PAD~OVAL~0~15~5.1181~4.2126~11~~4~1.378~-0.45280000000002474 15 0.45280000000002474 15~0~gge5~3.3464~0.29470000000037544 15 -0.29569999999966967 15~Y#@$PAD~OVAL~0~20~5.1181~4.2126~11~~5~1.378~-0.45280000000002474 20 0.45280000000002474 20~0~gge6~3.3464~0.2951999999995678 20 -0.2951999999995678 20~Y#@$PAD~OVAL~0~25~5.1181~4.2126~11~~6~1.378~-0.45280000000002474 25 0.45280000000002474 25~0~gge7~3.3464~0.2951999999995678 25 -0.2951999999995678 25~Y#@$PAD~OVAL~0~30~5.1181~4.2126~11~~7~1.378~-0.45280000000002474 30 0.45280000000002474 30~0~gge8~3.3464~0.2951999999995678 29.999899999999798 -0.2951999999995678 29.999899999999798~Y#@$PAD~OVAL~0~35~5.1181~4.2126~11~~8~1.378~-0.45280000000002474 35 0.45280000000002474 35~0~gge9~3.3464~0.2951999999995678 34.9998999999998 -0.2951999999995678 34.9998999999998~Y#@$PAD~OVAL~0~40~5.1181~4.2126~11~~9~1.378~-0.45280000000002474 40 0.45280000000002474 40~0~gge10~3.3464~0.2951999999995678 39.9998999999998 -0.2951999999995678 39.9998999999998~Y#@$PAD~OVAL~-74.80199999999968~40~5.1181~4.2126~11~~10~1.378~-75.25470000000041 40 -74.34919999999966 40~0~gge11~3.3464~-74.50780000000032 39.9998999999998 -75.09820000000036 39.9998999999998~Y#@$PAD~OVAL~-74.80199999999968~35~5.1181~4.2126~11~~11~1.378~-75.25470000000041 35 -74.34919999999966 35~0~gge12~3.3464~-74.50780000000032 34.9998999999998 -75.09820000000036 34.9998999999998~Y#@$PAD~OVAL~-74.80199999999968~30~5.1181~4.2126~11~~12~1.378~-75.25470000000041 30 -74.34919999999966 30~0~gge13~3.3464~-74.50780000000032 29.999899999999798 -75.09820000000036 29.999899999999798~Y#@$PAD~OVAL~-74.80199999999968~25~5.1181~4.2126~11~~13~1.378~-75.25470000000041 25 -74.34919999999966 25~0~gge14~3.3464~-74.50780000000032 25 -75.09820000000036 25~Y#@$PAD~OVAL~-74.80199999999968~20~5.1181~4.2126~11~~14~1.378~-75.25470000000041 20 -74.34919999999966 20~0~gge15~3.3464~-74.50780000000032 20 -75.09820000000036 20~Y#@$PAD~OVAL~-74.80199999999968~15~5.1181~4.2126~11~~15~1.378~-75.25470000000041 15 -74.34919999999966 15~0~gge16~3.3464~-74.50780000000032 15 -75.09820000000036 15~Y#@$PAD~OVAL~-74.80199999999968~10~5.1181~4.2126~11~~16~1.378~-75.25470000000041 10 -74.34919999999966 10~0~gge17~3.3464~-74.50780000000032 10 -75.09820000000036 10~Y#@$PAD~OVAL~-74.80199999999968~5~5.1181~4.2126~11~~17~1.378~-75.25470000000041 5 -74.34919999999966 5~0~gge18~3.3464~-74.50780000000032 5 -75.09820000000036 5~Y#@$PAD~OVAL~-74.80199999999968~0~5.1181~4.2126~11~~18~1.378~-75.25470000000041 0 -74.34919999999966 0~0~gge19~3.3464~-74.50780000000032 0 -75.09820000000036 0~Y#@$TRACK~1~4~~228.34550000000036 -27.559000000000196 -157.48050000000012 -27.559000000000196 -157.48050000000012 86.61400000000003 228.34550000000036 86.61400000000003 228.34550000000036 -27.559000000000196~gge20#@$TRACK~1~12~~-74.80299999999988 -23.621999999999844 -74.80299999999988 -27.559000000000196 -66.92900000000009 -27.559000000000196 -66.92900000000009 -23.621999999999844~gge21#@$TRACK~1~12~~-80.70849999999973 -27.559000000000196 -151.57449999999972 -27.559000000000196 -151.57449999999972 -3.936999999999898 -80.70849999999973 -3.936999999999898 -80.70849999999973 -27.559000000000196~gge22#@$TRACK~1~12~~-19.685499999999593 -27.559000000000196 -55.118499999999585 -27.559000000000196 -55.118499999999585 0 -19.685499999999593 0 -19.685499999999593 -27.559000000000196~gge23#@$CIRCLE~-5.904999999999745~-21.652999999999793~1.969~1~12~gge24#@$ARC~1~12~~M-66.92900000000009 -23.621999999999844A3.937 3.937 0 1 1 -74.80299999999988 -23.621999999999844~~gge25",GG="LIB~0~0~package`RP2040_3U_RL`Contributor`sekigon.gonnoc`link``~0~~gge1~2~~1735360586~0~~yes#@$PAD~OVAL~-74.80299999999988~10~5.1181~4.2126~11~~18~1.378~-75.2556999999997 10 -74.35019999999986 10~0~gge2~3.3464~-74.50839999999971 9.999899999999798 -75.09879999999976 9.999899999999798~Y#@$PAD~OVAL~-74.80299999999988~15~5.1181~4.2126~11~~17~1.378~-75.2556999999997 15 -74.35019999999986 15~0~gge3~3.3464~-74.50839999999971 14.999899999999798 -75.09879999999976 14.999899999999798~Y#@$PAD~OVAL~-74.80299999999988~20~5.1181~4.2126~11~~16~1.378~-75.2556999999997 20 -74.35019999999986 20~0~gge4~3.3464~-74.50839999999971 19.999899999999798 -75.09879999999976 19.999899999999798~Y#@$PAD~OVAL~-74.80299999999988~25~5.1181~4.2126~11~~15~1.378~-75.2556999999997 25 -74.35019999999986 25~0~gge5~3.3464~-74.50839999999971 24.999899999999798 -75.09879999999976 24.999899999999798~Y#@$PAD~OVAL~-74.80299999999988~30~5.1181~4.2126~11~~14~1.378~-75.2556999999997 30 -74.35019999999986 30~0~gge6~3.3464~-74.50839999999971 29.999899999999798 -75.09879999999976 29.999899999999798~Y#@$PAD~OVAL~-74.80299999999988~35~5.1181~4.2126~11~~13~1.378~-75.2556999999997 35 -74.35019999999986 35~0~gge7~3.3464~-74.50839999999971 34.9998999999998 -75.09879999999976 34.9998999999998~Y#@$PAD~OVAL~-74.80299999999988~40~5.1181~4.2126~11~~12~1.378~-75.2556999999997 40 -74.35019999999986 40~0~gge8~3.3464~-74.50839999999971 39.99980000000005 -75.09879999999976 39.99980000000005~Y#@$PAD~OVAL~0~40~5.1181~4.2126~11~~11~1.378~-0.45280000000002474 40 0.45280000000002474 40~0~gge9~3.3464~0.29470000000037544 39.99980000000005 -0.29569999999966967 39.99980000000005~Y#@$PAD~OVAL~0~35~5.1181~4.2126~11~~10~1.378~-0.45280000000002474 35 0.45280000000002474 35~0~gge10~3.3464~0.29470000000037544 34.99980000000005 -0.29569999999966967 34.99980000000005~Y#@$PAD~OVAL~-0.0010000000002037268~30~5.1181~4.2126~11~~9~1.378~-0.45380000000022847 30 0.451799999999821 30~0~gge11~3.3464~0.29470000000037544 29.999899999999798 -0.29569999999966967 29.999899999999798~Y#@$PAD~OVAL~-0.0010000000002037268~25~5.1181~4.2126~11~~8~1.378~-0.45380000000022847 25 0.451799999999821 25~0~gge12~3.3464~0.29470000000037544 24.999899999999798 -0.29569999999966967 24.999899999999798~Y#@$PAD~OVAL~-0.0010000000002037268~20~5.1181~4.2126~11~~7~1.378~-0.45380000000022847 20 0.451799999999821 20~0~gge13~3.3464~0.29470000000037544 19.999899999999798 -0.29569999999966967 19.999899999999798~Y#@$PAD~OVAL~-0.0010000000002037268~15~5.1181~4.2126~11~~6~1.378~-0.45380000000022847 15 0.451799999999821 15~0~gge14~3.3464~0.29470000000037544 15 -0.29569999999966967 15~Y#@$PAD~OVAL~-0.0010000000002037268~10~5.1181~4.2126~11~~5~1.378~-0.45380000000022847 10 0.451799999999821 10~0~gge15~3.3464~0.29470000000037544 10 -0.29569999999966967 10~Y#@$PAD~OVAL~-0.0010000000002037268~5~5.1181~4.2126~11~~4~1.378~-0.45380000000022847 5 0.451799999999821 5~0~gge16~3.3464~0.2942000000002736 5 -0.29619999999977153 5~Y#@$PAD~OVAL~-0.0010000000002037268~0~5.1181~4.2126~11~~3~1.378~-0.45380000000022847 0 0.451799999999821 0~0~gge17~3.3464~0.29470000000037544 0 -0.29569999999966967 0~Y#@$PAD~OVAL~-0.0010000000002037268~-5~5.1181~4.2126~11~~2~1.378~-0.45380000000022847 -5 0.451799999999821 -5~0~gge18~3.3464~0.29470000000037544 -5 -0.29569999999966967 -5~Y#@$PAD~RECT~0~-10~5.1181~4.2126~11~~1~1.378~2.5590000000001965 -12.10629999999992 -2.5591000000003987 -12.10629999999992 -2.5591000000003987 -7.893700000000081 2.5590000000001965 -7.893700000000081~0~gge19~3.3464~0.29470000000037544 -10 -0.29569999999966967 -10~Y#@$PAD~OVAL~-74.80299999999988~5~5.1181~4.2126~11~~19~1.378~-75.2556999999997 5 -74.35019999999986 5~0~gge20~3.3464~-74.50839999999971 5 -75.09879999999976 5~Y#@$PAD~OVAL~-74.80299999999988~0~5.1181~4.2126~11~~20~1.378~-75.2556999999997 0 -74.35019999999986 0~0~gge21~3.3464~-74.50839999999971 0 -75.09879999999976 0~Y#@$PAD~OVAL~-74.80299999999988~-5~5.1181~4.2126~11~~21~1.378~-75.2556999999997 -5 -74.35019999999986 -5~0~gge22~3.3464~-74.50839999999971 -5 -75.09879999999976 -5~Y#@$PAD~OVAL~-74.80299999999988~-10~5.1181~4.2126~11~~22~1.378~-75.2556999999997 -10 -74.35019999999986 -10~0~gge23~3.3464~-74.50839999999971 -10 -75.09879999999976 -10~Y#@$TRACK~1~4~~59.05450000000019 -27.559000000000196 -133.85850000000028 -27.559000000000196 -133.85850000000028 74.80299999999988 59.05450000000019 74.80299999999988 59.05450000000019 -27.559000000000196~gge24#@$TRACK~1~12~~-19.685499999999593 -27.559000000000196 -55.118499999999585 -27.559000000000196 -55.118499999999585 0 -19.685499999999593 0 -19.685499999999593 -27.559000000000196~gge25#@$TRACK~1~12~~55.11750000000029 -27.559000000000196 19.6845000000003 -27.559000000000196 19.6845000000003 0 55.11750000000029 0 55.11750000000029 -27.559000000000196~gge26#@$TRACK~1~12~~-94.48850000000039 -27.559000000000196 -129.92150000000038 -27.559000000000196 -129.92150000000038 0 -94.48850000000039 0 -94.48850000000039 -27.559000000000196~gge27",Uf={x:0,y:3.81},_w={x:2.5,y:-4.8},Xl=class Xl extends vA{constructor(n,r,i){super(ca.createParts(Bo(GG),"U1"),r);vt(this,"splitSide","unibody");vt(this,"keyPitch");this.keyPitch=n,this.splitSide=i,this.keyPitch!=19&&this.parts.elements.filter(s=>s.command==="PAD").forEach(s=>{const a=s;a.number>this.pinCount/2&&a.translate(at(19-this.keyPitch),0)})}get pinCount(){return Xl.PIN_COUNT}static get pinCount(){return Xl.PIN_COUNT}static layoutGrid(n){return{top:.5,left:1.5}}assignPorts(n,r,i){const s=this.position,a=Math.cos(s.a*(Math.PI/180)),o=Math.sin(s.a*Math.PI/180),l=at(s.x-this.keyPitch*a+5.08*o),u=at(s.y+this.keyPitch*o+5.08*a),f=at(s.x-0*a+5.08*o),h=at(s.y+0*o+5.08*a);n.left.length;const p=this.pinCount;if(n.left.length+r.length>p)throw new Error(`Too many switches. row + col should be less than equal to ${p}`);let v=r.filter(E=>E.ports.col.x<=l+this.keyPitch).sort((E,N)=>Math.abs(E.colToControllerPort.x-l)-Math.abs(N.colToControllerPort.x-l));const P=this.pinCount/2;v.length>P&&v.splice(P);let S=r.filter(E=>v.indexOf(E)<0).sort((E,N)=>Math.abs(E.colToControllerPort.x-f)-Math.abs(N.colToControllerPort.x-f));const g=this.pinCount/2;S.length>g&&(S.splice(g),v=r.filter(E=>S.indexOf(E)<0).sort((E,N)=>Math.abs(E.colToControllerPort.x-l)-Math.abs(N.colToControllerPort.x-l)));let m=v.map(E=>({sw:E,port:E.colToControllerPort})),x=S.map(E=>({sw:E,port:E.colToControllerPort}));const w=n.top.map(E=>({sw:E,port:E.ports.row,toLeft:Math.abs(E.ports.row.x-l)+Math.abs(E.ports.row.y-u),toRight:Math.abs(E.ports.row.x-f)+Math.abs(E.ports.row.y-h)}));m.length<x.length?m.unshift(...w.sort((E,N)=>E.toLeft-N.toLeft).slice(0,1)):x.unshift(...w.sort((E,N)=>E.toRight-N.toRight).slice(0,1));const C=n.left.slice(1).map(E=>({sw:E,port:E.ports.row})).sort((E,N)=>E.sw.ports.row.y-N.sw.ports.row.y),A=n.right.slice(1).map(E=>({sw:E,port:E.ports.row})).sort((E,N)=>E.sw.ports.row.y-N.sw.ports.row.y);if(i==="left")if(P-m.length>0){const E=P-m.length;m.push(...C.slice(0,E)),x.push(...A.slice(E))}else x.push(...A);else if(g-x.length>0){const E=g-x.length;x.push(...A.slice(0,E)),m.push(...C.slice(E))}else m.push(...C);let M=[];return m.filter(E=>E.port.net.includes("COL")&&E.port.x<=l+this.keyPitch).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2+1+m.indexOf(E))})}),x.filter(E=>E.port.net.includes("COL")&&E.port.x>l+this.keyPitch).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2-x.indexOf(E))})}),m.filter(E=>E.port.net.includes("COL")&&E.port.x>l+this.keyPitch).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2+1+m.indexOf(E))})}),x.filter(E=>E.port.net.includes("COL")&&E.port.x<=l+this.keyPitch).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2-x.indexOf(E))})}),m.filter(E=>E.port.net.includes("ROW")).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2+1+m.indexOf(E))})}),x.filter(E=>E.port.net.includes("ROW")).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2-x.indexOf(E))})}),M}isInControllerZone(n,r){const i=n-(this.position.x-9.5),s=r-(this.position.y+5.08);return Math.abs(i)<40/2&&Math.abs(s)<10.16/2}isPositionInTrackProhibitionZone(n,r,i){let s=0,a=r-(this.position.y+5.08);return i<=this.pinCount/2?s=n-(this.position.x-this.keyPitch):s=n-this.position.x,Math.abs(s)<2.5&&Math.abs(a)<7.85}get position(){return this.module.position}get size(){return{w:19,h:19}}get trackAreaOutline(){const n=this.position;return Math.cos(n.a*(Math.PI/180)),Math.sin(n.a*Math.PI/180),[{x:this.position.x-this.size.w-8,y:this.position.y-5},{x:this.position.x-this.size.w-8,y:this.position.y+this.size.h+2},{x:this.position.x+8,y:this.position.y+this.size.h+2},{x:this.position.x+8,y:this.position.y-5}]}get boardAreaOutline(){const n=this.position;return[{x:n.x+15+2,y:n.y-7},{x:n.x-19-15-2,y:n.y-7},{x:n.x-19-15-2,y:n.y+25},{x:n.x+15+2,y:n.y+25}]}get batteryAreaOutline(){}get partsAreaOutline(){const n=this.position;return[{x:n.x+15+2,y:n.y-8},{x:n.x-19-15-2,y:n.y-8},{x:n.x-19-15-2,y:n.y+19+1},{x:n.x+15+2,y:n.y+19+1}]}get usbCenterlineAll(){return[{x:this.position.x-9.5,y:this.position.y-8},{x:this.position.x+10.5,y:this.position.y-8},{x:this.position.x-28.5,y:this.position.y-8}]}get usbAreaOutline(){return this.usbCenterlineAll.map(r=>[{x:r.x+5,y:r.y},{x:r.x-5,y:r.y},{x:r.x-5,y:r.y+9},{x:r.x+5,y:r.y+9}])}get usbCenterline(){return this.position,this.splitSide==="left"?[this.usbCenterlineAll[0],this.usbCenterlineAll[1]]:this.splitSide==="right"?[this.usbCenterlineAll[0],this.usbCenterlineAll[2]]:[this.usbCenterlineAll[0]]}get powerSwitchPos(){}get ledPos(){}get pinPos(){const n=this.position;return Array.from({length:this.pinCount/2}).map((r,i)=>[{x:n.x,y:n.y-1.27*2+1.27*i},{x:n.x-this.keyPitch,y:n.y-1.27*2+1.27*i}]).flat()}get adjustPinPos(){const n=this.position;return{x:n.x-1,y:n.y-6}}static createControllerModule(n,r,i,s,a="left",o){return new Xl(s,a,o).translate(n,r).rotate(i%360)}};vt(Xl,"PIN_COUNT",22);let Nu=Xl;const Wl=class Wl extends vA{constructor(n,r,i){var e=(...awe)=>(super(...awe),vt(this,"keyPitch"),vt(this,"useExpandPort"),this);r=="left"?e(ca.createParts(Bo(zG),"U1"),r):e(ca.createParts(Bo(HG),"U1"),r),this.keyPitch=n,this.keyPitch!=19&&this.parts.elements.filter(s=>s.command==="PAD").forEach(s=>{const a=s;r==="right"&&a.number>this.pinCount/2?a.translate(at(19-this.keyPitch),0):r==="left"&&a.number<=this.pinCount/2&&a.translate(-at(19-this.keyPitch),0)}),this.useExpandPort=i}get pinCount(){return Wl.PIN_COUNT}static get pinCount(){return Wl.PIN_COUNT}static layoutGrid(n){return n==="side-1"?{top:.5,left:1.5}:{top:.5,left:3.5}}assignPorts(n,r,i){const s=this.position,a=Math.cos(s.a*(Math.PI/180)),o=Math.sin(s.a*Math.PI/180),l=at(s.x-this.keyPitch*a+5.08*o),u=at(s.y+this.keyPitch*o+5.08*a),f=at(s.x-0*a+5.08*o),h=at(s.y+0*o+5.08*a);n.left.length;const p=this.useExpandPort?this.pinCount-4:this.pinCount;if(n.left.length+r.length>p)throw new Error(`Too many switches. row + col should be less than equal to ${p}`);let v=r.filter(E=>E.ports.col.x<=l+this.keyPitch).sort((E,N)=>Math.abs(E.colToControllerPort.x-l)-Math.abs(N.colToControllerPort.x-l));const P=this.useExpandPort?this.pinCount/2-2:this.pinCount/2;v.length>P&&v.splice(P);let S=r.filter(E=>v.indexOf(E)<0).sort((E,N)=>Math.abs(E.colToControllerPort.x-f)-Math.abs(N.colToControllerPort.x-f));const g=this.useExpandPort?this.pinCount/2-2:this.pinCount/2;S.length>g&&(S.splice(g),v=r.filter(E=>S.indexOf(E)<0).sort((E,N)=>Math.abs(E.colToControllerPort.x-l)-Math.abs(N.colToControllerPort.x-l)));let m=v.map(E=>({sw:E,port:E.colToControllerPort})),x=S.map(E=>({sw:E,port:E.colToControllerPort}));const w=n.top.map(E=>({sw:E,port:E.ports.row,toLeft:Math.abs(E.ports.row.x-l)+Math.abs(E.ports.row.y-u),toRight:Math.abs(E.ports.row.x-f)+Math.abs(E.ports.row.y-h)}));m.length<x.length?m.unshift(...w.sort((E,N)=>E.toLeft-N.toLeft).slice(0,1)):x.unshift(...w.sort((E,N)=>E.toRight-N.toRight).slice(0,1));const C=n.left.slice(1).map(E=>({sw:E,port:E.ports.row})).sort((E,N)=>E.sw.ports.row.y-N.sw.ports.row.y),A=n.right.slice(1).map(E=>({sw:E,port:E.ports.row})).sort((E,N)=>E.sw.ports.row.y-N.sw.ports.row.y);if(i==="left")if(P-m.length>0){const E=P-m.length;m.push(...C.slice(0,E)),x.push(...A.slice(E))}else x.push(...A);else if(g-x.length>0){const E=g-x.length;x.push(...A.slice(0,E)),m.push(...C.slice(E))}else m.push(...C);let M=[];return m.filter(E=>E.port.net.includes("COL")&&E.port.x<=l+this.keyPitch).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2+1+m.indexOf(E))})}),x.filter(E=>E.port.net.includes("COL")&&E.port.x>l+this.keyPitch).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2-x.indexOf(E))})}),m.filter(E=>E.port.net.includes("COL")&&E.port.x>l+this.keyPitch).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2+1+m.indexOf(E))})}),x.filter(E=>E.port.net.includes("COL")&&E.port.x<=l+this.keyPitch).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2-x.indexOf(E))})}),m.filter(E=>E.port.net.includes("ROW")).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2+1+m.indexOf(E))})}),x.filter(E=>E.port.net.includes("ROW")).forEach(E=>{M.push({sw:E.sw,swPort:E.port,controller:this.assignNet(E.port.net,this.pinCount/2-x.indexOf(E))})}),M}isInControllerZone(n,r){const i=n-(this.position.x-9.5),s=r-(this.position.y+5.08);return Math.abs(i)<40/2&&Math.abs(s)<10.16/2}isPositionInTrackProhibitionZone(n,r,i){let s=0,a=r-(this.position.y+5.08);return i<=this.pinCount/2?s=n-(this.position.x-this.keyPitch):s=n-this.position.x,Math.abs(s)<2.5&&Math.abs(a)<6.35}get position(){return this.module.position}get size(){return{w:19,h:19}}get trackAreaOutline(){const n=this.position;return Math.cos(n.a*(Math.PI/180)),Math.sin(n.a*Math.PI/180),[{x:this.position.x-this.size.w-(this.side=="left"?2:7),y:this.position.y-2},{x:this.position.x-this.size.w-(this.side=="left"?2:7),y:this.position.y+this.size.h+2},{x:this.position.x+(this.side=="left"?7:2),y:this.position.y+this.size.h+2},{x:this.position.x+(this.side=="left"?7:2),y:this.position.y-2}]}transformPoint(n){return this.side==="right"?n:{x:this.position.x+(this.position.x-n.x)-19,y:n.y}}transformPoints(n){return this.side==="right"?n:n.map(r=>this.transformPoint(r)).reverse()}get boardAreaOutline(){const n=this.position,r=[{x:n.x+19+2,y:n.y-7},{x:n.x-19*4-2,y:n.y-7},{x:n.x-19*4-2,y:n.y+25},{x:n.x+19+2,y:n.y+25}];return this.transformPoints(r)}get batteryAreaOutline(){const n=this.position,r=[{x:n.x-19+2,y:n.y-8},{x:n.x-19*4-2,y:n.y-8},{x:n.x-19*4-2,y:n.y+25},{x:n.x-11.5,y:n.y+25},{x:n.x-11.5,y:n.y+25-15},{x:n.x-19+2,y:n.y+25-15}];return this.transformPoints(r)}get partsAreaOutline(){const n=this.position,r=[{x:n.x+19+2,y:n.y-8},{x:n.x-19-2,y:n.y-8},{x:n.x-19-2,y:n.y+25},{x:n.x+19+2,y:n.y+25}];return this.transformPoints(r)}get usbAreaOutline(){const n=this.usbCenterline[0],r=[{x:n.x+10/2,y:n.y},{x:n.x-10/2,y:n.y},{x:n.x-10/2,y:n.y+9},{x:n.x+10/2,y:n.y+9}];return[this.transformPoints(r)]}get usbCenterline(){const n=this.position,r={x:n.x-9.5,y:n.y-8};return[this.transformPoint(r)]}get powerSwitchPos(){const n=this.position,r={x:n.x-5,y:n.y+18};return this.transformPoint(r)}get ledPos(){const n=this.position,r={x:n.x-17.5,y:n.y-5.5};return this.transformPoint(r)}get adjustPinPos(){const n=this.position,r={x:n.x-1,y:n.y-6};return this.transformPoint(r)}get pinPos(){const n=this.position;return Array.from({length:this.pinCount/2}).map((r,i)=>[{x:n.x+(19-this.keyPitch),y:n.y+1.27*i},{x:n.x-19,y:n.y+1.27*i}]).flat()}static createControllerModule(n,r,i,s,a="left",o){return new Wl(s,a,o).translate(n,r).rotate(i%360)}};vt(Wl,"PIN_COUNT",18);let Du=Wl;function XG(t,e,n,r,i,s){const a=(e-19)/2;return r==="wired"?Nu.createControllerModule(t.x+40+9.5+a,t.y+30-9.5,t.a??0,e,n,s):Du.createControllerModule(t.x+40+9.5+(n==="left"?-a:a),t.y+30-9.5,t.a??0,e,n,i)}function WG(t){return t==="wired"?Nu.pinCount:Du.pinCount}function YG(t,e){return t==="wired"?Nu.layoutGrid(e):Du.layoutGrid(e)}function jG(t,e,n,r,i,s,a){const{left:o,top:l}=Q(e).getBoundingClientRect();st(n,t.clientX-o+Q(e).scrollLeft),st(r,t.clientY-l+Q(e).scrollTop),Q(i).style.top=`${Q(r)}px`,Q(i).style.left=`${Q(n)}px`,Q(i).style.display="block",window.addEventListener("mouseup",s),window.addEventListener("mousemove",a)}var ZG=(t,e,n)=>e()(Q(n).moduleType,Q(n).row,Q(n).col),KG=an('<button class="switch svelte-194udr0"> </button>'),JG=(t,e,n)=>e()(Q(n).moduleType,Q(n).row,Q(n).col),QG=an('<button><div id="controller-label" class="svelte-194udr0">Controller</div></button>'),eX=(t,e,n)=>e()(Q(n).moduleType,Q(n).row,Q(n).col),tX=an('<button class="padding svelte-194udr0"></button>'),nX=(t,e,n)=>e()(Q(n).moduleType,Q(n).row,Q(n).col),rX=an('<button class="trackball svelte-194udr0"></button>'),iX=an('<div>Switch Placement</div> <div id="placement" class="svelte-194udr0"><div id="placement-area" class="svelte-194udr0"><div id="switch-container" role="none" tabindex="-1" class="svelte-194udr0"><!> <!> <!> <!> <div class="switch-multiselect-boundingbox svelte-194udr0"></div></div></div></div>',1);function sX(t,e){$r(e,!0);let n=ko(e,"selectedModules",31,()=>Ct([])),r=ko(e,"onClick",3,()=>{}),i=ko(e,"onMouseUp",3,()=>{}),s=jt(void 0),a=jt(void 0),o=jt(void 0),l=jt(void 0);function u(R){window.removeEventListener("mouseup",u),window.removeEventListener("mousemove",f);const{left:B,top:V}=Q(a).getBoundingClientRect(),z=R.clientX-B+Q(a).scrollLeft,G=R.clientY-V+Q(a).scrollTop;h(z,G),st(o,void 0),st(l,void 0),Q(s).style.width="0px",Q(s).style.height="0px",Q(s).style.display="none",i()()}function f(R){if(Q(o)===void 0||Q(l)===void 0)return;const{left:B,top:V}=Q(a).getBoundingClientRect(),z=R.clientX-B+Q(a).scrollLeft,G=R.clientY-V+Q(a).scrollTop;Q(s).style.left=`${Math.min(z,Q(o))}px`,Q(s).style.top=`${Math.min(G,Q(l))}px`,Q(s).style.width=`${Math.abs(z-Q(o))}px`,Q(s).style.height=`${Math.abs(G-Q(l))}px`,h(z,G)}function h(R,B){n(Object.values(e.layoutData.modules).filter(V=>{const z=Math.min(R,Q(o))<e.gridToPx(V.x+V.width/2)&&e.gridToPx(V.x-V.width/2)<Math.max(R,Q(o)),G=Math.min(B,Q(l))<e.gridToPx(V.y+V.height/2)&&e.gridToPx(V.y-V.height/2)<Math.max(B,Q(l));return z&&G&&V.enabled&&(V.moduleType==="switch"&&V.row<e.layoutData.row&&V.col<e.layoutData.col||V.moduleType!=="switch")}))}function p(R){return Object.values(e.layoutData.modules).filter(B=>B.moduleType===R)}const v=Yt(()=>p("switch").filter(R=>R.row<e.layoutData.row&&R.col<e.layoutData.col)),P=Yt(()=>p("controller")),S=Yt(()=>p("padding")),g=Yt(()=>p("trackball"));var m=iX(),x=tr(m);An(x,"margin-top","10px");var w=je(x,2),C=bt(w),A=bt(C);A.__mousedown=[jG,a,o,l,s,u,f],A.__mouseup=u,A.__mousemove=f;var M=bt(A);Mi(M,17,()=>Q(v),R=>Wt(R.moduleType,R.row,R.col),(R,B)=>{var V=Ks(),z=tr(V);xr(z,()=>Q(B).enabled&&Q(B).row<e.layoutData.row&&Q(B).col<e.layoutData.col,G=>{var O=KG();O.__click=[ZG,r,B];const y=Yt(()=>n().includes(Q(B)));en(()=>Bc(O,"selected",Q(y)));const b=Yt(()=>`${e.gridToPx(Q(B).x-Q(B).width/2)}px`);en(()=>An(O,"left",Q(b)));const k=Yt(()=>`${e.gridToPx(Q(B).y-Q(B).height/2)}px`);en(()=>An(O,"top",Q(k))),An(O,"z-index","6");var F=bt(O);en(()=>{Bc(O,"iso",Q(B).variant==="ISO"),An(O,"width",`${Q(B).width*e.swGrid}px`),An(O,"height",`${Q(B).height*e.swGrid}px`),An(O,"transform",`rotate(${Q(B).a}deg)`),Jr(F,`${Q(B).row},${Q(B).col}`)}),kt(G,O)}),kt(R,V)});var E=je(M,2);Mi(E,17,()=>Q(P),R=>Wt(R.moduleType,R.row,R.col),(R,B)=>{var V=Ks(),z=tr(V);xr(z,()=>Q(B).enabled,G=>{var O=QG();O.__click=[JG,r,B];const y=Yt(()=>n().includes(Q(B))),b=Yt(()=>`${e.gridToPx(Q(B).x-YG(et.controllerType,Q(B).variant??"").left)}px`),k=Yt(()=>`${e.gridToPx(Q(B).y-Q(B).height/2)}px`);en(()=>{Ku(O,`${`controller controller-${et.controllerType}`??""} svelte-194udr0`),Bc(O,"selected",Q(y)),An(O,"left",Q(b)),An(O,"top",Q(k)),An(O,"transform",`rotate(${Q(B).a}deg)`),An(O,"z-index","4")}),kt(G,O)}),kt(R,V)});var N=je(E,2);Mi(N,17,()=>Q(S),R=>Wt(R.moduleType,R.row,R.col),(R,B)=>{var V=Ks(),z=tr(V);xr(z,()=>Q(B).enabled,G=>{var O=tX();O.__click=[eX,r,B];const y=Yt(()=>n().includes(Q(B)));en(()=>Bc(O,"selected",Q(y)));const b=Yt(()=>`${e.gridToPx(Q(B).x-Q(B).width/2)}px`);en(()=>An(O,"left",Q(b)));const k=Yt(()=>`${e.gridToPx(Q(B).y-Q(B).height/2)}px`);en(()=>An(O,"top",Q(k))),An(O,"z-index","2"),O.textContent="",en(()=>{An(O,"transform",`rotate(${Q(B).a}deg)`),An(O,"width",`${Q(B).width*e.swGrid}px`),An(O,"height",`${Q(B).height*e.swGrid}px`)}),kt(G,O)}),kt(R,V)});var I=je(N,2);Mi(I,17,()=>Q(g),R=>Wt(R.moduleType,R.row,R.col),(R,B)=>{var V=Ks(),z=tr(V);xr(z,()=>Q(B).enabled,G=>{var O=rX();O.__click=[nX,r,B];const y=Yt(()=>n().includes(Q(B)));en(()=>Bc(O,"selected",Q(y)));const b=Yt(()=>`${e.gridToPx(Q(B).x-Q(B).width/2)}px`);en(()=>An(O,"left",Q(b)));const k=Yt(()=>`${e.gridToPx(Q(B).y-Q(B).height/2)}px`);en(()=>An(O,"top",Q(k))),An(O,"z-index","2"),O.textContent="",en(()=>{An(O,"transform",`rotate(${Q(B).a}deg)`),An(O,"width",`${Q(B).width*e.swGrid}px`),An(O,"height",`${Q(B).height*e.swGrid}px`)}),kt(G,O)}),kt(R,V)});var L=je(I,2);uh(L,R=>st(s,R),()=>Q(s)),uh(A,R=>st(a,R),()=>Q(a)),en(()=>{Fn(A,"style",`height: ${(e.maxY-e.minY+2)*e.swGrid}px`),An(L,"display",Q(o)===void 0?"none":"block")}),kt(t,m),Vr()}Li(["mousedown","mouseup","mousemove","click"]);function aX(t,e,n,r,i){const s=t.ctrlKey?.05:.125;t.key==="Delete"?(t.preventDefault(),Q(e).forEach(a=>{a.moduleType!=="controller"&&(a.enabled=!1)}),st(e,Ct([]))):t.key==="ArrowLeft"?(t.preventDefault(),n(-s+Q(r),Q(i))):t.key==="ArrowRight"?(t.preventDefault(),n(s+Q(r),Q(i))):t.key==="ArrowUp"?(t.preventDefault(),n(Q(r),-s+Q(i))):t.key==="ArrowDown"&&(t.preventDefault(),n(Q(r),s+Q(i)))}var oX=an('<div id="container" tabindex="-1" role="none" class="svelte-1r19k4i"><div id="selector"><!> <!></div> <!></div>');function xw(t,e){$r(e,!0);const n=50;let r=jt(0),i=jt(0),s=jt("switch"),a=Ct(e.boardType==="unibody-or-left"?et.leftData:et.rightData),o=jt(Ct([]));const l=Yt(()=>WG(et.controllerType)-(Object.values(a.modules).some(B=>B.moduleType==="trackball"&&B.enabled)?4:0)),u=Yt(()=>{let B=Q(l)-a.col,V=Q(l)-a.row;return B<1&&(B=1,V=Q(l)-1),V<1&&(V=1,B=Q(l)-1),{maxRow:B,maxCol:V}}),f=Yt(()=>Q(u).maxRow),h=Yt(()=>Q(u).maxCol);Qi(()=>{a.row<1?a.row=1:a.row>Q(f)&&(a.row=Q(f)),a.col<1?a.col=1:a.col>Q(h)&&(a.col=Q(h)),a.row+a.col>Q(l)&&(a.col=Q(l)-a.row),Object.values(a.modules).filter(B=>(B.row>=a.row||B.col>=a.col)&&B.moduleType==="switch").forEach(B=>B.enabled=!1),et.notify()});let p=Yt(()=>{const B=Object.values(a.modules).filter(V=>V.enabled).map(V=>V.y);return{minY:Math.min(...B),maxY:Math.max(...B)}}),v=Yt(()=>Q(p).minY),P=Yt(()=>Q(p).maxY),S=Yt(()=>Q(o).length);function g(B){return B*n+20}let m=jt(0),x=jt(0),w=jt(0);function C(B,V,z){console.log(V,z),st(r,Ct(V)),st(i,Ct(z)),st(s,Ct(B)),st(o,Ct([a.modules[Wt(B,V,z)]]))}function A(B,V){Q(o).forEach(z=>{z.x+=B-Q(m),z.y+=V-Q(x)}),st(m,Ct(B)),st(x,Ct(V))}function M(B){let[V,z]=Q(o).reduce((G,O)=>(G[0]+=O.x,G[1]+=O.y,G),[0,0]);V/=Q(S),z/=Q(S),Q(o).forEach(G=>{if(G.moduleType==="controller")return;const O=G.x-V,y=G.y-z,b=Math.sqrt(O**2+y**2),k=Math.atan2(y,O);G.x=V+b*Math.cos(k+(B-Q(w))*(Math.PI/180)),G.y=z+b*Math.sin(k+(B-Q(w))*(Math.PI/180)),G.a+=B-Q(w)}),st(w,Ct(B))}Qi(()=>{const B=Object.values(a.modules).filter(G=>G.enabled&&(G.col<a.col||G.moduleType!=="switch")),V=Math.min(...B.map(G=>G.x)),z=Math.min(...B.map(G=>G.y));V<0&&Object.values(a.modules).forEach(G=>{G.x-=V}),z<0&&Object.values(a.modules).forEach(G=>{G.y-=z})}),D2(()=>{const B=et.subscribe(()=>{const V=e.boardType==="unibody-or-left"?et.leftData:et.rightData;a.modules=V.modules,a.row=V.row,a.col=V.col});return()=>{B()}});var E=oX();E.__keydown=[aX,o,A,m,x];var N=bt(E),I=bt(N);MG(I,{get layoutData(){return a},get boardType(){return e.boardType},get maxRow(){return Q(f)},get maxCol(){return Q(h)},get maxPin(){return Q(l)}});var L=je(I,2);$G(L,{get layoutData(){return a},get selectedModules(){return Q(o)},get moduleTypeSelected(){return Q(s)},get rowSelected(){return Q(r)},get colSelected(){return Q(i)},get prevMovX(){return Q(m)},get prevMovY(){return Q(x)},get prevMovRot(){return Q(w)},onMoveSelected:A,onRotateSelected:M,onSelected:C});var R=je(N,2);sX(R,{get selectedModules(){return Q(o)},set selectedModules(B){st(o,Ct(B))},get layoutData(){return a},swGrid:n,gridToPx:g,onClick:C,get minY(){return Q(v)},get maxY(){return Q(P)},onMouseUp:()=>{st(m,0),st(x,0),st(w,0)}}),kt(t,E),Vr()}Li(["keydown"]);var lX=an('<div id="sub" class="svelte-ea3md0"><!></div>'),cX=an('<!> <div id="container"><div id="main" class="svelte-ea3md0"><!></div> <!></div>',1);function uX(t,e){$r(e,!1),Ju();var n=cX(),r=tr(n);wG(r,{});var i=je(r,2),s=bt(i),a=bt(s);xw(a,{boardType:"unibody-or-left"});var o=je(s,2);xr(o,()=>et.isSplit,l=>{var u=lX(),f=bt(u);xw(f,{boardType:"right"}),kt(l,u)}),en(()=>Ku(i,`${(et.isSplit?"split":"")??""} svelte-ea3md0`)),kt(t,n),Vr()}let bw=jt(void 0),ww=jt(""),Sw=jt(void 0),Pw=jt("");const ys={get board(){return Q(bw)},set:t=>{st(bw,Ct(t)),ys.subscribers.forEach(e=>e(t))},get layout(){return Q(ww)},setLayout:t=>{st(ww,Ct(t))},subscribers:[],subscribe:t=>(ys.subscribers.push(t),()=>{ys.subscribers=ys.subscribers.filter(e=>e!==t)})},Qs={get board(){return Q(Sw)},get layout(){return Q(Pw)},set:t=>{st(Sw,Ct(t)),Qs.subscribers.forEach(e=>e(t))},setLayout:t=>{st(Pw,Ct(t))},subscribers:[],subscribe:t=>(Qs.subscribers.push(t),()=>{Qs.subscribers=Qs.subscribers.filter(e=>e!==t)})};function Tu(t){return t==="unibody-or-left"?ys:Qs}var jv={},yA={exports:{}};(function(t){(function(){var e={};e.version="6.4.2.2",e.use_lines=!0,e.use_xyz=!1;var n=!1;t.exports?(t.exports=e,n=!0):typeof document<"u"?window.ClipperLib=e:self.ClipperLib=e;var r;if(n){var i="chrome";r="Netscape"}else{var i=navigator.userAgent.toString().toLowerCase();r=navigator.appName}var s={};i.indexOf("chrome")!=-1&&i.indexOf("chromium")==-1?s.chrome=1:s.chrome=0,i.indexOf("chromium")!=-1?s.chromium=1:s.chromium=0,i.indexOf("safari")!=-1&&i.indexOf("chrome")==-1&&i.indexOf("chromium")==-1?s.safari=1:s.safari=0,i.indexOf("firefox")!=-1?s.firefox=1:s.firefox=0,i.indexOf("firefox/17")!=-1?s.firefox17=1:s.firefox17=0,i.indexOf("firefox/15")!=-1?s.firefox15=1:s.firefox15=0,i.indexOf("firefox/3")!=-1?s.firefox3=1:s.firefox3=0,i.indexOf("opera")!=-1?s.opera=1:s.opera=0,i.indexOf("msie 10")!=-1?s.msie10=1:s.msie10=0,i.indexOf("msie 9")!=-1?s.msie9=1:s.msie9=0,i.indexOf("msie 8")!=-1?s.msie8=1:s.msie8=0,i.indexOf("msie 7")!=-1?s.msie7=1:s.msie7=0,i.indexOf("msie ")!=-1?s.msie=1:s.msie=0,e.biginteger_used=null;var a;function o(c,d,_){e.biginteger_used=1,c!=null&&(typeof c=="number"&&typeof d>"u"?this.fromInt(c):typeof c=="number"?this.fromNumber(c,d,_):d==null&&typeof c!="string"?this.fromString(c,256):this.fromString(c,d))}function l(){return new o(null,void 0,void 0)}function u(c,d,_,T,D,q){for(;--q>=0;){var Y=d*this[c++]+_[T]+D;D=Math.floor(Y/67108864),_[T++]=Y&67108863}return D}function f(c,d,_,T,D,q){for(var Y=d&32767,ce=d>>15;--q>=0;){var ue=this[c]&32767,Ce=this[c++]>>15,Ye=ce*ue+Ce*Y;ue=Y*ue+((Ye&32767)<<15)+_[T]+(D&1073741823),D=(ue>>>30)+(Ye>>>15)+ce*Ce+(D>>>30),_[T++]=ue&1073741823}return D}function h(c,d,_,T,D,q){for(var Y=d&16383,ce=d>>14;--q>=0;){var ue=this[c]&16383,Ce=this[c++]>>14,Ye=ce*ue+Ce*Y;ue=Y*ue+((Ye&16383)<<14)+_[T]+D,D=(ue>>28)+(Ye>>14)+ce*Ce,_[T++]=ue&268435455}return D}r=="Microsoft Internet Explorer"?(o.prototype.am=f,a=30):r!="Netscape"?(o.prototype.am=u,a=26):(o.prototype.am=h,a=28),o.prototype.DB=a,o.prototype.DM=(1<<a)-1,o.prototype.DV=1<<a;var p=52;o.prototype.FV=Math.pow(2,p),o.prototype.F1=p-a,o.prototype.F2=2*a-p;var v="0123456789abcdefghijklmnopqrstuvwxyz",P=new Array,S,g;for(S=48,g=0;g<=9;++g)P[S++]=g;for(S=97,g=10;g<36;++g)P[S++]=g;for(S=65,g=10;g<36;++g)P[S++]=g;function m(c){return v.charAt(c)}function x(c,d){var _=P[c.charCodeAt(d)];return _??-1}function w(c){for(var d=this.t-1;d>=0;--d)c[d]=this[d];c.t=this.t,c.s=this.s}function C(c){this.t=1,this.s=c<0?-1:0,c>0?this[0]=c:c<-1?this[0]=c+this.DV:this.t=0}function A(c){var d=l();return d.fromInt(c),d}function M(c,d){var _;if(d==16)_=4;else if(d==8)_=3;else if(d==256)_=8;else if(d==2)_=1;else if(d==32)_=5;else if(d==4)_=2;else{this.fromRadix(c,d);return}this.t=0,this.s=0;for(var T=c.length,D=!1,q=0;--T>=0;){var Y=_==8?c[T]&255:x(c,T);if(Y<0){c.charAt(T)=="-"&&(D=!0);continue}D=!1,q==0?this[this.t++]=Y:q+_>this.DB?(this[this.t-1]|=(Y&(1<<this.DB-q)-1)<<q,this[this.t++]=Y>>this.DB-q):this[this.t-1]|=Y<<q,q+=_,q>=this.DB&&(q-=this.DB)}_==8&&c[0]&128&&(this.s=-1,q>0&&(this[this.t-1]|=(1<<this.DB-q)-1<<q)),this.clamp(),D&&o.ZERO.subTo(this,this)}function E(){for(var c=this.s&this.DM;this.t>0&&this[this.t-1]==c;)--this.t}function N(c){if(this.s<0)return"-"+this.negate().toString(c);var d;if(c==16)d=4;else if(c==8)d=3;else if(c==2)d=1;else if(c==32)d=5;else if(c==4)d=2;else return this.toRadix(c);var _=(1<<d)-1,T,D=!1,q="",Y=this.t,ce=this.DB-Y*this.DB%d;if(Y-- >0)for(ce<this.DB&&(T=this[Y]>>ce)>0&&(D=!0,q=m(T));Y>=0;)ce<d?(T=(this[Y]&(1<<ce)-1)<<d-ce,T|=this[--Y]>>(ce+=this.DB-d)):(T=this[Y]>>(ce-=d)&_,ce<=0&&(ce+=this.DB,--Y)),T>0&&(D=!0),D&&(q+=m(T));return D?q:"0"}function I(){var c=l();return o.ZERO.subTo(this,c),c}function L(){return this.s<0?this.negate():this}function R(c){var d=this.s-c.s;if(d!=0)return d;var _=this.t;if(d=_-c.t,d!=0)return this.s<0?-d:d;for(;--_>=0;)if((d=this[_]-c[_])!=0)return d;return 0}function B(c){var d=1,_;return(_=c>>>16)!=0&&(c=_,d+=16),(_=c>>8)!=0&&(c=_,d+=8),(_=c>>4)!=0&&(c=_,d+=4),(_=c>>2)!=0&&(c=_,d+=2),(_=c>>1)!=0&&(c=_,d+=1),d}function V(){return this.t<=0?0:this.DB*(this.t-1)+B(this[this.t-1]^this.s&this.DM)}function z(c,d){var _;for(_=this.t-1;_>=0;--_)d[_+c]=this[_];for(_=c-1;_>=0;--_)d[_]=0;d.t=this.t+c,d.s=this.s}function G(c,d){for(var _=c;_<this.t;++_)d[_-c]=this[_];d.t=Math.max(this.t-c,0),d.s=this.s}function O(c,d){var _=c%this.DB,T=this.DB-_,D=(1<<T)-1,q=Math.floor(c/this.DB),Y=this.s<<_&this.DM,ce;for(ce=this.t-1;ce>=0;--ce)d[ce+q+1]=this[ce]>>T|Y,Y=(this[ce]&D)<<_;for(ce=q-1;ce>=0;--ce)d[ce]=0;d[q]=Y,d.t=this.t+q+1,d.s=this.s,d.clamp()}function y(c,d){d.s=this.s;var _=Math.floor(c/this.DB);if(_>=this.t){d.t=0;return}var T=c%this.DB,D=this.DB-T,q=(1<<T)-1;d[0]=this[_]>>T;for(var Y=_+1;Y<this.t;++Y)d[Y-_-1]|=(this[Y]&q)<<D,d[Y-_]=this[Y]>>T;T>0&&(d[this.t-_-1]|=(this.s&q)<<D),d.t=this.t-_,d.clamp()}function b(c,d){for(var _=0,T=0,D=Math.min(c.t,this.t);_<D;)T+=this[_]-c[_],d[_++]=T&this.DM,T>>=this.DB;if(c.t<this.t){for(T-=c.s;_<this.t;)T+=this[_],d[_++]=T&this.DM,T>>=this.DB;T+=this.s}else{for(T+=this.s;_<c.t;)T-=c[_],d[_++]=T&this.DM,T>>=this.DB;T-=c.s}d.s=T<0?-1:0,T<-1?d[_++]=this.DV+T:T>0&&(d[_++]=T),d.t=_,d.clamp()}function k(c,d){var _=this.abs(),T=c.abs(),D=_.t;for(d.t=D+T.t;--D>=0;)d[D]=0;for(D=0;D<T.t;++D)d[D+_.t]=_.am(0,T[D],d,D,0,_.t);d.s=0,d.clamp(),this.s!=c.s&&o.ZERO.subTo(d,d)}function F(c){for(var d=this.abs(),_=c.t=2*d.t;--_>=0;)c[_]=0;for(_=0;_<d.t-1;++_){var T=d.am(_,d[_],c,2*_,0,1);(c[_+d.t]+=d.am(_+1,2*d[_],c,2*_+1,T,d.t-_-1))>=d.DV&&(c[_+d.t]-=d.DV,c[_+d.t+1]=1)}c.t>0&&(c[c.t-1]+=d.am(_,d[_],c,2*_,0,1)),c.s=0,c.clamp()}function H(c,d,_){var T=c.abs();if(!(T.t<=0)){var D=this.abs();if(D.t<T.t){d!=null&&d.fromInt(0),_!=null&&this.copyTo(_);return}_==null&&(_=l());var q=l(),Y=this.s,ce=c.s,ue=this.DB-B(T[T.t-1]);ue>0?(T.lShiftTo(ue,q),D.lShiftTo(ue,_)):(T.copyTo(q),D.copyTo(_));var Ce=q.t,Ye=q[Ce-1];if(Ye!=0){var Ve=Ye*(1<<this.F1)+(Ce>1?q[Ce-2]>>this.F2:0),ct=this.FV/Ve,Dt=(1<<this.F1)/Ve,Kt=1<<this.F2,Vt=_.t,Sn=Vt-Ce,Er=d??l();for(q.dlShiftTo(Sn,Er),_.compareTo(Er)>=0&&(_[_.t++]=1,_.subTo(Er,_)),o.ONE.dlShiftTo(Ce,Er),Er.subTo(q,q);q.t<Ce;)q[q.t++]=0;for(;--Sn>=0;){var _i=_[--Vt]==Ye?this.DM:Math.floor(_[Vt]*ct+(_[Vt-1]+Kt)*Dt);if((_[Vt]+=q.am(0,_i,_,Sn,0,Ce))<_i)for(q.dlShiftTo(Sn,Er),_.subTo(Er,_);_[Vt]<--_i;)_.subTo(Er,_)}d!=null&&(_.drShiftTo(Ce,d),Y!=ce&&o.ZERO.subTo(d,d)),_.t=Ce,_.clamp(),ue>0&&_.rShiftTo(ue,_),Y<0&&o.ZERO.subTo(_,_)}}}function W(c){var d=l();return this.abs().divRemTo(c,null,d),this.s<0&&d.compareTo(o.ZERO)>0&&c.subTo(d,d),d}function ne(c){this.m=c}function Z(c){return c.s<0||c.compareTo(this.m)>=0?c.mod(this.m):c}function K(c){return c}function ae(c){c.divRemTo(this.m,null,c)}function se(c,d,_){c.multiplyTo(d,_),this.reduce(_)}function ye(c,d){c.squareTo(d),this.reduce(d)}ne.prototype.convert=Z,ne.prototype.revert=K,ne.prototype.reduce=ae,ne.prototype.mulTo=se,ne.prototype.sqrTo=ye;function me(){if(this.t<1)return 0;var c=this[0];if(!(c&1))return 0;var d=c&3;return d=d*(2-(c&15)*d)&15,d=d*(2-(c&255)*d)&255,d=d*(2-((c&65535)*d&65535))&65535,d=d*(2-c*d%this.DV)%this.DV,d>0?this.DV-d:-d}function Ae(c){this.m=c,this.mp=c.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<c.DB-15)-1,this.mt2=2*c.t}function Ue(c){var d=l();return c.abs().dlShiftTo(this.m.t,d),d.divRemTo(this.m,null,d),c.s<0&&d.compareTo(o.ZERO)>0&&this.m.subTo(d,d),d}function He(c){var d=l();return c.copyTo(d),this.reduce(d),d}function Qe(c){for(;c.t<=this.mt2;)c[c.t++]=0;for(var d=0;d<this.m.t;++d){var _=c[d]&32767,T=_*this.mpl+((_*this.mph+(c[d]>>15)*this.mpl&this.um)<<15)&c.DM;for(_=d+this.m.t,c[_]+=this.m.am(0,T,c,d,0,this.m.t);c[_]>=c.DV;)c[_]-=c.DV,c[++_]++}c.clamp(),c.drShiftTo(this.m.t,c),c.compareTo(this.m)>=0&&c.subTo(this.m,c)}function ie(c,d){c.squareTo(d),this.reduce(d)}function dt(c,d,_){c.multiplyTo(d,_),this.reduce(_)}Ae.prototype.convert=Ue,Ae.prototype.revert=He,Ae.prototype.reduce=Qe,Ae.prototype.mulTo=dt,Ae.prototype.sqrTo=ie;function ke(){return(this.t>0?this[0]&1:this.s)==0}function ut(c,d){if(c>4294967295||c<1)return o.ONE;var _=l(),T=l(),D=d.convert(this),q=B(c)-1;for(D.copyTo(_);--q>=0;)if(d.sqrTo(_,T),(c&1<<q)>0)d.mulTo(T,D,_);else{var Y=_;_=T,T=Y}return d.revert(_)}function tt(c,d){var _;return c<256||d.isEven()?_=new ne(d):_=new Ae(d),this.exp(c,_)}o.prototype.copyTo=w,o.prototype.fromInt=C,o.prototype.fromString=M,o.prototype.clamp=E,o.prototype.dlShiftTo=z,o.prototype.drShiftTo=G,o.prototype.lShiftTo=O,o.prototype.rShiftTo=y,o.prototype.subTo=b,o.prototype.multiplyTo=k,o.prototype.squareTo=F,o.prototype.divRemTo=H,o.prototype.invDigit=me,o.prototype.isEven=ke,o.prototype.exp=ut,o.prototype.toString=N,o.prototype.negate=I,o.prototype.abs=L,o.prototype.compareTo=R,o.prototype.bitLength=V,o.prototype.mod=W,o.prototype.modPowInt=tt,o.ZERO=A(0),o.ONE=A(1);function Pt(){var c=l();return this.copyTo(c),c}function lt(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function re(){return this.t==0?this.s:this[0]<<24>>24}function X(){return this.t==0?this.s:this[0]<<16>>16}function te(c){return Math.floor(Math.LN2*this.DB/Math.log(c))}function fe(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function de(c){if(c==null&&(c=10),this.signum()==0||c<2||c>36)return"0";var d=this.chunkSize(c),_=Math.pow(c,d),T=A(_),D=l(),q=l(),Y="";for(this.divRemTo(T,D,q);D.signum()>0;)Y=(_+q.intValue()).toString(c).substr(1)+Y,D.divRemTo(T,D,q);return q.intValue().toString(c)+Y}function he(c,d){this.fromInt(0),d==null&&(d=10);for(var _=this.chunkSize(d),T=Math.pow(d,_),D=!1,q=0,Y=0,ce=0;ce<c.length;++ce){var ue=x(c,ce);if(ue<0){c.charAt(ce)=="-"&&this.signum()==0&&(D=!0);continue}Y=d*Y+ue,++q>=_&&(this.dMultiply(T),this.dAddOffset(Y,0),q=0,Y=0)}q>0&&(this.dMultiply(Math.pow(d,q)),this.dAddOffset(Y,0)),D&&o.ZERO.subTo(this,this)}function Be(c,d,_){if(typeof d=="number")if(c<2)this.fromInt(1);else for(this.fromNumber(c,_),this.testBit(c-1)||this.bitwiseTo(o.ONE.shiftLeft(c-1),ge,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(d);)this.dAddOffset(2,0),this.bitLength()>c&&this.subTo(o.ONE.shiftLeft(c-1),this);else{var T=new Array,D=c&7;T.length=(c>>3)+1,d.nextBytes(T),D>0?T[0]&=(1<<D)-1:T[0]=0,this.fromString(T,256)}}function Ie(){var c=this.t,d=new Array;d[0]=this.s;var _=this.DB-c*this.DB%8,T,D=0;if(c-- >0)for(_<this.DB&&(T=this[c]>>_)!=(this.s&this.DM)>>_&&(d[D++]=T|this.s<<this.DB-_);c>=0;)_<8?(T=(this[c]&(1<<_)-1)<<8-_,T|=this[--c]>>(_+=this.DB-8)):(T=this[c]>>(_-=8)&255,_<=0&&(_+=this.DB,--c)),T&128&&(T|=-256),D==0&&(this.s&128)!=(T&128)&&++D,(D>0||T!=this.s)&&(d[D++]=T);return d}function Ge(c){return this.compareTo(c)==0}function xt(c){return this.compareTo(c)<0?this:c}function Oe(c){return this.compareTo(c)>0?this:c}function Ke(c,d,_){var T,D,q=Math.min(c.t,this.t);for(T=0;T<q;++T)_[T]=d(this[T],c[T]);if(c.t<this.t){for(D=c.s&this.DM,T=q;T<this.t;++T)_[T]=d(this[T],D);_.t=this.t}else{for(D=this.s&this.DM,T=q;T<c.t;++T)_[T]=d(D,c[T]);_.t=c.t}_.s=d(this.s,c.s),_.clamp()}function _t(c,d){return c&d}function ve(c){var d=l();return this.bitwiseTo(c,_t,d),d}function ge(c,d){return c|d}function we(c){var d=l();return this.bitwiseTo(c,ge,d),d}function Me(c,d){return c^d}function Ze(c){var d=l();return this.bitwiseTo(c,Me,d),d}function le(c,d){return c&~d}function $e(c){var d=l();return this.bitwiseTo(c,le,d),d}function be(){for(var c=l(),d=0;d<this.t;++d)c[d]=this.DM&~this[d];return c.t=this.t,c.s=~this.s,c}function Le(c){var d=l();return c<0?this.rShiftTo(-c,d):this.lShiftTo(c,d),d}function ze(c){var d=l();return c<0?this.lShiftTo(-c,d):this.rShiftTo(c,d),d}function ft(c){if(c==0)return-1;var d=0;return c&65535||(c>>=16,d+=16),c&255||(c>>=8,d+=8),c&15||(c>>=4,d+=4),c&3||(c>>=2,d+=2),c&1||++d,d}function Rt(){for(var c=0;c<this.t;++c)if(this[c]!=0)return c*this.DB+ft(this[c]);return this.s<0?this.t*this.DB:-1}function on(c){for(var d=0;c!=0;)c&=c-1,++d;return d}function Wn(){for(var c=0,d=this.s&this.DM,_=0;_<this.t;++_)c+=on(this[_]^d);return c}function Jt(c){var d=Math.floor(c/this.DB);return d>=this.t?this.s!=0:(this[d]&1<<c%this.DB)!=0}function Qn(c,d){var _=o.ONE.shiftLeft(c);return this.bitwiseTo(_,d,_),_}function vr(c){return this.changeBit(c,ge)}function ss(c){return this.changeBit(c,le)}function Ns(c){return this.changeBit(c,Me)}function yi(c,d){for(var _=0,T=0,D=Math.min(c.t,this.t);_<D;)T+=this[_]+c[_],d[_++]=T&this.DM,T>>=this.DB;if(c.t<this.t){for(T+=c.s;_<this.t;)T+=this[_],d[_++]=T&this.DM,T>>=this.DB;T+=this.s}else{for(T+=this.s;_<c.t;)T+=c[_],d[_++]=T&this.DM,T>>=this.DB;T+=c.s}d.s=T<0?-1:0,T>0?d[_++]=T:T<-1&&(d[_++]=this.DV+T),d.t=_,d.clamp()}function da(c){var d=l();return this.addTo(c,d),d}function no(c){var d=l();return this.subTo(c,d),d}function Jo(c){var d=l();return this.multiplyTo(c,d),d}function ha(){var c=l();return this.squareTo(c),c}function as(c){var d=l();return this.divRemTo(c,d,null),d}function os(c){var d=l();return this.divRemTo(c,null,d),d}function ls(c){var d=l(),_=l();return this.divRemTo(c,d,_),new Array(d,_)}function Qo(c){this[this.t]=this.am(0,c-1,this,0,0,this.t),++this.t,this.clamp()}function Nc(c,d){if(c!=0){for(;this.t<=d;)this[this.t++]=0;for(this[d]+=c;this[d]>=this.DV;)this[d]-=this.DV,++d>=this.t&&(this[this.t++]=0),++this[d]}}function si(){}function el(c){return c}function Dc(c,d,_){c.multiplyTo(d,_)}function pa(c,d){c.squareTo(d)}si.prototype.convert=el,si.prototype.revert=el,si.prototype.mulTo=Dc,si.prototype.sqrTo=pa;function kc(c){return this.exp(c,new si)}function J(c,d,_){var T=Math.min(this.t+c.t,d);for(_.s=0,_.t=T;T>0;)_[--T]=0;var D;for(D=_.t-this.t;T<D;++T)_[T+this.t]=this.am(0,c[T],_,T,0,this.t);for(D=Math.min(c.t,d);T<D;++T)this.am(0,c[T],_,T,0,d-T);_.clamp()}function _e(c,d,_){--d;var T=_.t=this.t+c.t-d;for(_.s=0;--T>=0;)_[T]=0;for(T=Math.max(d-this.t,0);T<c.t;++T)_[this.t+T-d]=this.am(d-T,c[T],_,0,0,this.t+T-d);_.clamp(),_.drShiftTo(1,_)}function Pe(c){this.r2=l(),this.q3=l(),o.ONE.dlShiftTo(2*c.t,this.r2),this.mu=this.r2.divide(c),this.m=c}function Te(c){if(c.s<0||c.t>2*this.m.t)return c.mod(this.m);if(c.compareTo(this.m)<0)return c;var d=l();return c.copyTo(d),this.reduce(d),d}function xe(c){return c}function nt(c){for(c.drShiftTo(this.m.t-1,this.r2),c.t>this.m.t+1&&(c.t=this.m.t+1,c.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);c.compareTo(this.r2)<0;)c.dAddOffset(1,this.m.t+1);for(c.subTo(this.r2,c);c.compareTo(this.m)>=0;)c.subTo(this.m,c)}function mt(c,d){c.squareTo(d),this.reduce(d)}function wt(c,d,_){c.multiplyTo(d,_),this.reduce(_)}Pe.prototype.convert=Te,Pe.prototype.revert=xe,Pe.prototype.reduce=nt,Pe.prototype.mulTo=wt,Pe.prototype.sqrTo=mt;function St(c,d){var _=c.bitLength(),T,D=A(1),q;if(_<=0)return D;_<18?T=1:_<48?T=3:_<144?T=4:_<768?T=5:T=6,_<8?q=new ne(d):d.isEven()?q=new Pe(d):q=new Ae(d);var Y=new Array,ce=3,ue=T-1,Ce=(1<<T)-1;if(Y[1]=q.convert(this),T>1){var Ye=l();for(q.sqrTo(Y[1],Ye);ce<=Ce;)Y[ce]=l(),q.mulTo(Ye,Y[ce-2],Y[ce]),ce+=2}var Ve=c.t-1,ct,Dt=!0,Kt=l(),Vt;for(_=B(c[Ve])-1;Ve>=0;){for(_>=ue?ct=c[Ve]>>_-ue&Ce:(ct=(c[Ve]&(1<<_+1)-1)<<ue-_,Ve>0&&(ct|=c[Ve-1]>>this.DB+_-ue)),ce=T;!(ct&1);)ct>>=1,--ce;if((_-=ce)<0&&(_+=this.DB,--Ve),Dt)Y[ct].copyTo(D),Dt=!1;else{for(;ce>1;)q.sqrTo(D,Kt),q.sqrTo(Kt,D),ce-=2;ce>0?q.sqrTo(D,Kt):(Vt=D,D=Kt,Kt=Vt),q.mulTo(Kt,Y[ct],D)}for(;Ve>=0&&!(c[Ve]&1<<_);)q.sqrTo(D,Kt),Vt=D,D=Kt,Kt=Vt,--_<0&&(_=this.DB-1,--Ve)}return q.revert(D)}function Bt(c){var d=this.s<0?this.negate():this.clone(),_=c.s<0?c.negate():c.clone();if(d.compareTo(_)<0){var T=d;d=_,_=T}var D=d.getLowestSetBit(),q=_.getLowestSetBit();if(q<0)return d;for(D<q&&(q=D),q>0&&(d.rShiftTo(q,d),_.rShiftTo(q,_));d.signum()>0;)(D=d.getLowestSetBit())>0&&d.rShiftTo(D,d),(D=_.getLowestSetBit())>0&&_.rShiftTo(D,_),d.compareTo(_)>=0?(d.subTo(_,d),d.rShiftTo(1,d)):(_.subTo(d,_),_.rShiftTo(1,_));return q>0&&_.lShiftTo(q,_),_}function Ut(c){if(c<=0)return 0;var d=this.DV%c,_=this.s<0?c-1:0;if(this.t>0)if(d==0)_=this[0]%c;else for(var T=this.t-1;T>=0;--T)_=(d*_+this[T])%c;return _}function Ot(c){var d=c.isEven();if(this.isEven()&&d||c.signum()==0)return o.ZERO;for(var _=c.clone(),T=this.clone(),D=A(1),q=A(0),Y=A(0),ce=A(1);_.signum()!=0;){for(;_.isEven();)_.rShiftTo(1,_),d?((!D.isEven()||!q.isEven())&&(D.addTo(this,D),q.subTo(c,q)),D.rShiftTo(1,D)):q.isEven()||q.subTo(c,q),q.rShiftTo(1,q);for(;T.isEven();)T.rShiftTo(1,T),d?((!Y.isEven()||!ce.isEven())&&(Y.addTo(this,Y),ce.subTo(c,ce)),Y.rShiftTo(1,Y)):ce.isEven()||ce.subTo(c,ce),ce.rShiftTo(1,ce);_.compareTo(T)>=0?(_.subTo(T,_),d&&D.subTo(Y,D),q.subTo(ce,q)):(T.subTo(_,T),d&&Y.subTo(D,Y),ce.subTo(q,ce))}if(T.compareTo(o.ONE)!=0)return o.ZERO;if(ce.compareTo(c)>=0)return ce.subtract(c);if(ce.signum()<0)ce.addTo(c,ce);else return ce;return ce.signum()<0?ce.add(c):ce}var Ft=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],vn=(1<<26)/Ft[Ft.length-1];function Yn(c){var d,_=this.abs();if(_.t==1&&_[0]<=Ft[Ft.length-1]){for(d=0;d<Ft.length;++d)if(_[0]==Ft[d])return!0;return!1}if(_.isEven())return!1;for(d=1;d<Ft.length;){for(var T=Ft[d],D=d+1;D<Ft.length&&T<vn;)T*=Ft[D++];for(T=_.modInt(T);d<D;)if(T%Ft[d++]==0)return!1}return _.millerRabin(c)}function Rn(c){var d=this.subtract(o.ONE),_=d.getLowestSetBit();if(_<=0)return!1;var T=d.shiftRight(_);c=c+1>>1,c>Ft.length&&(c=Ft.length);for(var D=l(),q=0;q<c;++q){D.fromInt(Ft[Math.floor(Math.random()*Ft.length)]);var Y=D.modPow(T,this);if(Y.compareTo(o.ONE)!=0&&Y.compareTo(d)!=0){for(var ce=1;ce++<_&&Y.compareTo(d)!=0;)if(Y=Y.modPowInt(2,this),Y.compareTo(o.ONE)==0)return!1;if(Y.compareTo(d)!=0)return!1}}return!0}o.prototype.chunkSize=te,o.prototype.toRadix=de,o.prototype.fromRadix=he,o.prototype.fromNumber=Be,o.prototype.bitwiseTo=Ke,o.prototype.changeBit=Qn,o.prototype.addTo=yi,o.prototype.dMultiply=Qo,o.prototype.dAddOffset=Nc,o.prototype.multiplyLowerTo=J,o.prototype.multiplyUpperTo=_e,o.prototype.modInt=Ut,o.prototype.millerRabin=Rn,o.prototype.clone=Pt,o.prototype.intValue=lt,o.prototype.byteValue=re,o.prototype.shortValue=X,o.prototype.signum=fe,o.prototype.toByteArray=Ie,o.prototype.equals=Ge,o.prototype.min=xt,o.prototype.max=Oe,o.prototype.and=ve,o.prototype.or=we,o.prototype.xor=Ze,o.prototype.andNot=$e,o.prototype.not=be,o.prototype.shiftLeft=Le,o.prototype.shiftRight=ze,o.prototype.getLowestSetBit=Rt,o.prototype.bitCount=Wn,o.prototype.testBit=Jt,o.prototype.setBit=vr,o.prototype.clearBit=ss,o.prototype.flipBit=Ns,o.prototype.add=da,o.prototype.subtract=no,o.prototype.multiply=Jo,o.prototype.divide=as,o.prototype.remainder=os,o.prototype.divideAndRemainder=ls,o.prototype.modPow=St,o.prototype.modInverse=Ot,o.prototype.pow=kc,o.prototype.gcd=Bt,o.prototype.isProbablePrime=Yn,o.prototype.square=ha;var yt=o;yt.prototype.IsNegative=function(){return this.compareTo(yt.ZERO)==-1},yt.op_Equality=function(c,d){return c.compareTo(d)==0},yt.op_Inequality=function(c,d){return c.compareTo(d)!=0},yt.op_GreaterThan=function(c,d){return c.compareTo(d)>0},yt.op_LessThan=function(c,d){return c.compareTo(d)<0},yt.op_Addition=function(c,d){return new yt(c,void 0,void 0).add(new yt(d,void 0,void 0))},yt.op_Subtraction=function(c,d){return new yt(c,void 0,void 0).subtract(new yt(d,void 0,void 0))},yt.Int128Mul=function(c,d){return new yt(c,void 0,void 0).multiply(new yt(d,void 0,void 0))},yt.op_Division=function(c,d){return c.divide(d)},yt.prototype.ToDouble=function(){return parseFloat(this.toString())};var Nt=function(c,d){var _;if(typeof Object.getOwnPropertyNames>"u"){for(_ in d.prototype)(typeof c.prototype[_]>"u"||c.prototype[_]===Object.prototype[_])&&(c.prototype[_]=d.prototype[_]);for(_ in d)typeof c[_]>"u"&&(c[_]=d[_]);c.$baseCtor=d}else{for(var T=Object.getOwnPropertyNames(d.prototype),D=0;D<T.length;D++)typeof Object.getOwnPropertyDescriptor(c.prototype,T[D])>"u"&&Object.defineProperty(c.prototype,T[D],Object.getOwnPropertyDescriptor(d.prototype,T[D]));for(_ in d)typeof c[_]>"u"&&(c[_]=d[_]);c.$baseCtor=d}};e.Path=function(){return[]},e.Path.prototype.push=Array.prototype.push,e.Paths=function(){return[]},e.Paths.prototype.push=Array.prototype.push,e.DoublePoint=function(){var c=arguments;this.X=0,this.Y=0,c.length===1?(this.X=c[0].X,this.Y=c[0].Y):c.length===2&&(this.X=c[0],this.Y=c[1])},e.DoublePoint0=function(){this.X=0,this.Y=0},e.DoublePoint0.prototype=e.DoublePoint.prototype,e.DoublePoint1=function(c){this.X=c.X,this.Y=c.Y},e.DoublePoint1.prototype=e.DoublePoint.prototype,e.DoublePoint2=function(c,d){this.X=c,this.Y=d},e.DoublePoint2.prototype=e.DoublePoint.prototype,e.PolyNode=function(){this.m_Parent=null,this.m_polygon=new e.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},e.PolyNode.prototype.IsHoleNode=function(){for(var c=!0,d=this.m_Parent;d!==null;)c=!c,d=d.m_Parent;return c},e.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},e.PolyNode.prototype.Contour=function(){return this.m_polygon},e.PolyNode.prototype.AddChild=function(c){var d=this.m_Childs.length;this.m_Childs.push(c),c.m_Parent=this,c.m_Index=d},e.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},e.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},e.PolyNode.prototype.Childs=function(){return this.m_Childs},e.PolyNode.prototype.Parent=function(){return this.m_Parent},e.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},e.PolyTree=function(){this.m_AllPolys=[],e.PolyNode.call(this)},e.PolyTree.prototype.Clear=function(){for(var c=0,d=this.m_AllPolys.length;c<d;c++)this.m_AllPolys[c]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},e.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},e.PolyTree.prototype.Total=function(){var c=this.m_AllPolys.length;return c>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&c--,c},Nt(e.PolyTree,e.PolyNode),e.Math_Abs_Int64=e.Math_Abs_Int32=e.Math_Abs_Double=function(c){return Math.abs(c)},e.Math_Max_Int32_Int32=function(c,d){return Math.max(c,d)},s.msie||s.opera||s.safari?e.Cast_Int32=function(c){return c|0}:e.Cast_Int32=function(c){return~~c},typeof Number.toInteger>"u"&&(Number.toInteger=null),s.chrome?e.Cast_Int64=function(c){return c<-2147483648||c>2147483647?c<0?Math.ceil(c):Math.floor(c):~~c}:s.firefox&&typeof Number.toInteger=="function"?e.Cast_Int64=function(c){return Number.toInteger(c)}:s.msie7||s.msie8?e.Cast_Int64=function(c){return parseInt(c,10)}:s.msie?e.Cast_Int64=function(c){return c<-2147483648||c>2147483647?c<0?Math.ceil(c):Math.floor(c):c|0}:e.Cast_Int64=function(c){return c<0?Math.ceil(c):Math.floor(c)},e.Clear=function(c){c.length=0},e.PI=3.141592653589793,e.PI2=2*3.141592653589793,e.IntPoint=function(){var c=arguments,d=c.length;if(this.X=0,this.Y=0,e.use_xyz)if(this.Z=0,d===3)this.X=c[0],this.Y=c[1],this.Z=c[2];else if(d===2)this.X=c[0],this.Y=c[1],this.Z=0;else if(d===1)if(c[0]instanceof e.DoublePoint){var _=c[0];this.X=e.Clipper.Round(_.X),this.Y=e.Clipper.Round(_.Y),this.Z=0}else{var T=c[0];typeof T.Z>"u"&&(T.Z=0),this.X=T.X,this.Y=T.Y,this.Z=T.Z}else this.X=0,this.Y=0,this.Z=0;else if(d===2)this.X=c[0],this.Y=c[1];else if(d===1)if(c[0]instanceof e.DoublePoint){var _=c[0];this.X=e.Clipper.Round(_.X),this.Y=e.Clipper.Round(_.Y)}else{var T=c[0];this.X=T.X,this.Y=T.Y}else this.X=0,this.Y=0},e.IntPoint.op_Equality=function(c,d){return c.X===d.X&&c.Y===d.Y},e.IntPoint.op_Inequality=function(c,d){return c.X!==d.X||c.Y!==d.Y},e.IntPoint0=function(){this.X=0,this.Y=0,e.use_xyz&&(this.Z=0)},e.IntPoint0.prototype=e.IntPoint.prototype,e.IntPoint1=function(c){this.X=c.X,this.Y=c.Y,e.use_xyz&&(typeof c.Z>"u"?this.Z=0:this.Z=c.Z)},e.IntPoint1.prototype=e.IntPoint.prototype,e.IntPoint1dp=function(c){this.X=e.Clipper.Round(c.X),this.Y=e.Clipper.Round(c.Y),e.use_xyz&&(this.Z=0)},e.IntPoint1dp.prototype=e.IntPoint.prototype,e.IntPoint2=function(c,d,_){this.X=c,this.Y=d,e.use_xyz&&(typeof _>"u"?this.Z=0:this.Z=_)},e.IntPoint2.prototype=e.IntPoint.prototype,e.IntRect=function(){var c=arguments,d=c.length;if(d===4)this.left=c[0],this.top=c[1],this.right=c[2],this.bottom=c[3];else if(d===1){var _=c[0];this.left=_.left,this.top=_.top,this.right=_.right,this.bottom=_.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},e.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},e.IntRect0.prototype=e.IntRect.prototype,e.IntRect1=function(c){this.left=c.left,this.top=c.top,this.right=c.right,this.bottom=c.bottom},e.IntRect1.prototype=e.IntRect.prototype,e.IntRect4=function(c,d,_,T){this.left=c,this.top=d,this.right=_,this.bottom=T},e.IntRect4.prototype=e.IntRect.prototype,e.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},e.PolyType={ptSubject:0,ptClip:1},e.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},e.JoinType={jtSquare:0,jtRound:1,jtMiter:2},e.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},e.EdgeSide={esLeft:0,esRight:1},e.Direction={dRightToLeft:0,dLeftToRight:1},e.TEdge=function(){this.Bot=new e.IntPoint0,this.Curr=new e.IntPoint0,this.Top=new e.IntPoint0,this.Delta=new e.IntPoint0,this.Dx=0,this.PolyTyp=e.PolyType.ptSubject,this.Side=e.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},e.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new e.IntPoint0},e.MyIntersectNodeSort=function(){},e.MyIntersectNodeSort.Compare=function(c,d){var _=d.Pt.Y-c.Pt.Y;return _>0?1:_<0?-1:0},e.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},e.Scanbeam=function(){this.Y=0,this.Next=null},e.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},e.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},e.OutPt=function(){this.Idx=0,this.Pt=new e.IntPoint0,this.Next=null,this.Prev=null},e.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new e.IntPoint0},e.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},e.ClipperBase.horizontal=-9007199254740992,e.ClipperBase.Skip=-2,e.ClipperBase.Unassigned=-1,e.ClipperBase.tolerance=1e-20,e.ClipperBase.loRange=47453132,e.ClipperBase.hiRange=0xfffffffffffff,e.ClipperBase.near_zero=function(c){return c>-e.ClipperBase.tolerance&&c<e.ClipperBase.tolerance},e.ClipperBase.IsHorizontal=function(c){return c.Delta.Y===0},e.ClipperBase.prototype.PointIsVertex=function(c,d){var _=d;do{if(e.IntPoint.op_Equality(_.Pt,c))return!0;_=_.Next}while(_!==d);return!1},e.ClipperBase.prototype.PointOnLineSegment=function(c,d,_,T){return T?c.X===d.X&&c.Y===d.Y||c.X===_.X&&c.Y===_.Y||c.X>d.X==c.X<_.X&&c.Y>d.Y==c.Y<_.Y&&yt.op_Equality(yt.Int128Mul(c.X-d.X,_.Y-d.Y),yt.Int128Mul(_.X-d.X,c.Y-d.Y)):c.X===d.X&&c.Y===d.Y||c.X===_.X&&c.Y===_.Y||c.X>d.X==c.X<_.X&&c.Y>d.Y==c.Y<_.Y&&(c.X-d.X)*(_.Y-d.Y)===(_.X-d.X)*(c.Y-d.Y)},e.ClipperBase.prototype.PointOnPolygon=function(c,d,_){for(var T=d;;){if(this.PointOnLineSegment(c,T.Pt,T.Next.Pt,_))return!0;if(T=T.Next,T===d)break}return!1},e.ClipperBase.prototype.SlopesEqual=e.ClipperBase.SlopesEqual=function(){var c=arguments,d=c.length,_,T,D,q,Y,ce,ue;return d===3?(_=c[0],T=c[1],ue=c[2],ue?yt.op_Equality(yt.Int128Mul(_.Delta.Y,T.Delta.X),yt.Int128Mul(_.Delta.X,T.Delta.Y)):e.Cast_Int64(_.Delta.Y*T.Delta.X)===e.Cast_Int64(_.Delta.X*T.Delta.Y)):d===4?(D=c[0],q=c[1],Y=c[2],ue=c[3],ue?yt.op_Equality(yt.Int128Mul(D.Y-q.Y,q.X-Y.X),yt.Int128Mul(D.X-q.X,q.Y-Y.Y)):e.Cast_Int64((D.Y-q.Y)*(q.X-Y.X))-e.Cast_Int64((D.X-q.X)*(q.Y-Y.Y))===0):(D=c[0],q=c[1],Y=c[2],ce=c[3],ue=c[4],ue?yt.op_Equality(yt.Int128Mul(D.Y-q.Y,Y.X-ce.X),yt.Int128Mul(D.X-q.X,Y.Y-ce.Y)):e.Cast_Int64((D.Y-q.Y)*(Y.X-ce.X))-e.Cast_Int64((D.X-q.X)*(Y.Y-ce.Y))===0)},e.ClipperBase.SlopesEqual3=function(c,d,_){return _?yt.op_Equality(yt.Int128Mul(c.Delta.Y,d.Delta.X),yt.Int128Mul(c.Delta.X,d.Delta.Y)):e.Cast_Int64(c.Delta.Y*d.Delta.X)===e.Cast_Int64(c.Delta.X*d.Delta.Y)},e.ClipperBase.SlopesEqual4=function(c,d,_,T){return T?yt.op_Equality(yt.Int128Mul(c.Y-d.Y,d.X-_.X),yt.Int128Mul(c.X-d.X,d.Y-_.Y)):e.Cast_Int64((c.Y-d.Y)*(d.X-_.X))-e.Cast_Int64((c.X-d.X)*(d.Y-_.Y))===0},e.ClipperBase.SlopesEqual5=function(c,d,_,T,D){return D?yt.op_Equality(yt.Int128Mul(c.Y-d.Y,_.X-T.X),yt.Int128Mul(c.X-d.X,_.Y-T.Y)):e.Cast_Int64((c.Y-d.Y)*(_.X-T.X))-e.Cast_Int64((c.X-d.X)*(_.Y-T.Y))===0},e.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var c=0,d=this.m_edges.length;c<d;++c){for(var _=0,T=this.m_edges[c].length;_<T;++_)this.m_edges[c][_]=null;e.Clear(this.m_edges[c])}e.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},e.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var c=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=c}this.m_CurrentLM=null},e.ClipperBase.prototype.RangeTest=function(c,d){d.Value?(c.X>e.ClipperBase.hiRange||c.Y>e.ClipperBase.hiRange||-c.X>e.ClipperBase.hiRange||-c.Y>e.ClipperBase.hiRange)&&e.Error("Coordinate outside allowed range in RangeTest()."):(c.X>e.ClipperBase.loRange||c.Y>e.ClipperBase.loRange||-c.X>e.ClipperBase.loRange||-c.Y>e.ClipperBase.loRange)&&(d.Value=!0,this.RangeTest(c,d))},e.ClipperBase.prototype.InitEdge=function(c,d,_,T){c.Next=d,c.Prev=_,c.Curr.X=T.X,c.Curr.Y=T.Y,e.use_xyz&&(c.Curr.Z=T.Z),c.OutIdx=-1},e.ClipperBase.prototype.InitEdge2=function(c,d){c.Curr.Y>=c.Next.Curr.Y?(c.Bot.X=c.Curr.X,c.Bot.Y=c.Curr.Y,e.use_xyz&&(c.Bot.Z=c.Curr.Z),c.Top.X=c.Next.Curr.X,c.Top.Y=c.Next.Curr.Y,e.use_xyz&&(c.Top.Z=c.Next.Curr.Z)):(c.Top.X=c.Curr.X,c.Top.Y=c.Curr.Y,e.use_xyz&&(c.Top.Z=c.Curr.Z),c.Bot.X=c.Next.Curr.X,c.Bot.Y=c.Next.Curr.Y,e.use_xyz&&(c.Bot.Z=c.Next.Curr.Z)),this.SetDx(c),c.PolyTyp=d},e.ClipperBase.prototype.FindNextLocMin=function(c){for(var d;;){for(;e.IntPoint.op_Inequality(c.Bot,c.Prev.Bot)||e.IntPoint.op_Equality(c.Curr,c.Top);)c=c.Next;if(c.Dx!==e.ClipperBase.horizontal&&c.Prev.Dx!==e.ClipperBase.horizontal)break;for(;c.Prev.Dx===e.ClipperBase.horizontal;)c=c.Prev;for(d=c;c.Dx===e.ClipperBase.horizontal;)c=c.Next;if(c.Top.Y!==c.Prev.Bot.Y){d.Prev.Bot.X<c.Bot.X&&(c=d);break}}return c},e.ClipperBase.prototype.ProcessBound=function(c,d){var _,T=c,D;if(T.OutIdx===e.ClipperBase.Skip){if(c=T,d){for(;c.Top.Y===c.Next.Bot.Y;)c=c.Next;for(;c!==T&&c.Dx===e.ClipperBase.horizontal;)c=c.Prev}else{for(;c.Top.Y===c.Prev.Bot.Y;)c=c.Prev;for(;c!==T&&c.Dx===e.ClipperBase.horizontal;)c=c.Next}if(c===T)d?T=c.Next:T=c.Prev;else{d?c=T.Next:c=T.Prev;var q=new e.LocalMinima;q.Next=null,q.Y=c.Bot.Y,q.LeftBound=null,q.RightBound=c,c.WindDelta=0,T=this.ProcessBound(c,d),this.InsertLocalMinima(q)}return T}if(c.Dx===e.ClipperBase.horizontal&&(d?_=c.Prev:_=c.Next,_.Dx===e.ClipperBase.horizontal?_.Bot.X!==c.Bot.X&&_.Top.X!==c.Bot.X&&this.ReverseHorizontal(c):_.Bot.X!==c.Bot.X&&this.ReverseHorizontal(c)),_=c,d){for(;T.Top.Y===T.Next.Bot.Y&&T.Next.OutIdx!==e.ClipperBase.Skip;)T=T.Next;if(T.Dx===e.ClipperBase.horizontal&&T.Next.OutIdx!==e.ClipperBase.Skip){for(D=T;D.Prev.Dx===e.ClipperBase.horizontal;)D=D.Prev;D.Prev.Top.X>T.Next.Top.X&&(T=D.Prev)}for(;c!==T;)c.NextInLML=c.Next,c.Dx===e.ClipperBase.horizontal&&c!==_&&c.Bot.X!==c.Prev.Top.X&&this.ReverseHorizontal(c),c=c.Next;c.Dx===e.ClipperBase.horizontal&&c!==_&&c.Bot.X!==c.Prev.Top.X&&this.ReverseHorizontal(c),T=T.Next}else{for(;T.Top.Y===T.Prev.Bot.Y&&T.Prev.OutIdx!==e.ClipperBase.Skip;)T=T.Prev;if(T.Dx===e.ClipperBase.horizontal&&T.Prev.OutIdx!==e.ClipperBase.Skip){for(D=T;D.Next.Dx===e.ClipperBase.horizontal;)D=D.Next;(D.Next.Top.X===T.Prev.Top.X||D.Next.Top.X>T.Prev.Top.X)&&(T=D.Next)}for(;c!==T;)c.NextInLML=c.Prev,c.Dx===e.ClipperBase.horizontal&&c!==_&&c.Bot.X!==c.Next.Top.X&&this.ReverseHorizontal(c),c=c.Prev;c.Dx===e.ClipperBase.horizontal&&c!==_&&c.Bot.X!==c.Next.Top.X&&this.ReverseHorizontal(c),T=T.Prev}return T},e.ClipperBase.prototype.AddPath=function(c,d,_){e.use_lines?!_&&d===e.PolyType.ptClip&&e.Error("AddPath: Open paths must be subject."):_||e.Error("AddPath: Open paths have been disabled.");var T=c.length-1;if(_)for(;T>0&&e.IntPoint.op_Equality(c[T],c[0]);)--T;for(;T>0&&e.IntPoint.op_Equality(c[T],c[T-1]);)--T;if(_&&T<2||!_&&T<1)return!1;for(var D=new Array,q=0;q<=T;q++)D.push(new e.TEdge);var Y=!0;D[1].Curr.X=c[1].X,D[1].Curr.Y=c[1].Y,e.use_xyz&&(D[1].Curr.Z=c[1].Z);var ce={Value:this.m_UseFullRange};this.RangeTest(c[0],ce),this.m_UseFullRange=ce.Value,ce.Value=this.m_UseFullRange,this.RangeTest(c[T],ce),this.m_UseFullRange=ce.Value,this.InitEdge(D[0],D[1],D[T],c[0]),this.InitEdge(D[T],D[0],D[T-1],c[T]);for(var q=T-1;q>=1;--q)ce.Value=this.m_UseFullRange,this.RangeTest(c[q],ce),this.m_UseFullRange=ce.Value,this.InitEdge(D[q],D[q+1],D[q-1],c[q]);for(var ue=D[0],Ce=ue,Ye=ue;;){if(Ce.Curr===Ce.Next.Curr&&(_||Ce.Next!==ue)){if(Ce===Ce.Next)break;Ce===ue&&(ue=Ce.Next),Ce=this.RemoveEdge(Ce),Ye=Ce;continue}if(Ce.Prev===Ce.Next)break;if(_&&e.ClipperBase.SlopesEqual4(Ce.Prev.Curr,Ce.Curr,Ce.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(Ce.Prev.Curr,Ce.Curr,Ce.Next.Curr))){Ce===ue&&(ue=Ce.Next),Ce=this.RemoveEdge(Ce),Ce=Ce.Prev,Ye=Ce;continue}if(Ce=Ce.Next,Ce===Ye||!_&&Ce.Next===ue)break}if(!_&&Ce===Ce.Next||_&&Ce.Prev===Ce.Next)return!1;_||(this.m_HasOpenPaths=!0,ue.Prev.OutIdx=e.ClipperBase.Skip),Ce=ue;do this.InitEdge2(Ce,d),Ce=Ce.Next,Y&&Ce.Curr.Y!==ue.Curr.Y&&(Y=!1);while(Ce!==ue);if(Y){if(_)return!1;Ce.Prev.OutIdx=e.ClipperBase.Skip;var Ve=new e.LocalMinima;for(Ve.Next=null,Ve.Y=Ce.Bot.Y,Ve.LeftBound=null,Ve.RightBound=Ce,Ve.RightBound.Side=e.EdgeSide.esRight,Ve.RightBound.WindDelta=0;Ce.Bot.X!==Ce.Prev.Top.X&&this.ReverseHorizontal(Ce),Ce.Next.OutIdx!==e.ClipperBase.Skip;)Ce.NextInLML=Ce.Next,Ce=Ce.Next;return this.InsertLocalMinima(Ve),this.m_edges.push(D),!0}this.m_edges.push(D);var ct,Dt=null;for(e.IntPoint.op_Equality(Ce.Prev.Bot,Ce.Prev.Top)&&(Ce=Ce.Next);Ce=this.FindNextLocMin(Ce),Ce!==Dt;){Dt===null&&(Dt=Ce);var Ve=new e.LocalMinima;Ve.Next=null,Ve.Y=Ce.Bot.Y,Ce.Dx<Ce.Prev.Dx?(Ve.LeftBound=Ce.Prev,Ve.RightBound=Ce,ct=!1):(Ve.LeftBound=Ce,Ve.RightBound=Ce.Prev,ct=!0),Ve.LeftBound.Side=e.EdgeSide.esLeft,Ve.RightBound.Side=e.EdgeSide.esRight,_?Ve.LeftBound.Next===Ve.RightBound?Ve.LeftBound.WindDelta=-1:Ve.LeftBound.WindDelta=1:Ve.LeftBound.WindDelta=0,Ve.RightBound.WindDelta=-Ve.LeftBound.WindDelta,Ce=this.ProcessBound(Ve.LeftBound,ct),Ce.OutIdx===e.ClipperBase.Skip&&(Ce=this.ProcessBound(Ce,ct));var Kt=this.ProcessBound(Ve.RightBound,!ct);Kt.OutIdx===e.ClipperBase.Skip&&(Kt=this.ProcessBound(Kt,!ct)),Ve.LeftBound.OutIdx===e.ClipperBase.Skip?Ve.LeftBound=null:Ve.RightBound.OutIdx===e.ClipperBase.Skip&&(Ve.RightBound=null),this.InsertLocalMinima(Ve),ct||(Ce=Kt)}return!0},e.ClipperBase.prototype.AddPaths=function(c,d,_){for(var T=!1,D=0,q=c.length;D<q;++D)this.AddPath(c[D],d,_)&&(T=!0);return T},e.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(c,d,_){return e.IntPoint.op_Equality(c,_)||e.IntPoint.op_Equality(c,d)||e.IntPoint.op_Equality(_,d)?!1:c.X!==_.X?d.X>c.X==d.X<_.X:d.Y>c.Y==d.Y<_.Y},e.ClipperBase.prototype.RemoveEdge=function(c){c.Prev.Next=c.Next,c.Next.Prev=c.Prev;var d=c.Next;return c.Prev=null,d},e.ClipperBase.prototype.SetDx=function(c){c.Delta.X=c.Top.X-c.Bot.X,c.Delta.Y=c.Top.Y-c.Bot.Y,c.Delta.Y===0?c.Dx=e.ClipperBase.horizontal:c.Dx=c.Delta.X/c.Delta.Y},e.ClipperBase.prototype.InsertLocalMinima=function(c){if(this.m_MinimaList===null)this.m_MinimaList=c;else if(c.Y>=this.m_MinimaList.Y)c.Next=this.m_MinimaList,this.m_MinimaList=c;else{for(var d=this.m_MinimaList;d.Next!==null&&c.Y<d.Next.Y;)d=d.Next;c.Next=d.Next,d.Next=c}},e.ClipperBase.prototype.PopLocalMinima=function(c,d){return d.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===c?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},e.ClipperBase.prototype.ReverseHorizontal=function(c){var d=c.Top.X;c.Top.X=c.Bot.X,c.Bot.X=d,e.use_xyz&&(d=c.Top.Z,c.Top.Z=c.Bot.Z,c.Bot.Z=d)},e.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var c=this.m_MinimaList;c!==null;){this.InsertScanbeam(c.Y);var d=c.LeftBound;d!==null&&(d.Curr.X=d.Bot.X,d.Curr.Y=d.Bot.Y,e.use_xyz&&(d.Curr.Z=d.Bot.Z),d.OutIdx=e.ClipperBase.Unassigned),d=c.RightBound,d!==null&&(d.Curr.X=d.Bot.X,d.Curr.Y=d.Bot.Y,e.use_xyz&&(d.Curr.Z=d.Bot.Z),d.OutIdx=e.ClipperBase.Unassigned),c=c.Next}this.m_ActiveEdges=null}},e.ClipperBase.prototype.InsertScanbeam=function(c){if(this.m_Scanbeam===null)this.m_Scanbeam=new e.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=c;else if(c>this.m_Scanbeam.Y){var d=new e.Scanbeam;d.Y=c,d.Next=this.m_Scanbeam,this.m_Scanbeam=d}else{for(var _=this.m_Scanbeam;_.Next!==null&&c<=_.Next.Y;)_=_.Next;if(c===_.Y)return;var T=new e.Scanbeam;T.Y=c,T.Next=_.Next,_.Next=T}},e.ClipperBase.prototype.PopScanbeam=function(c){return this.m_Scanbeam===null?(c.v=0,!1):(c.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},e.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},e.ClipperBase.prototype.CreateOutRec=function(){var c=new e.OutRec;return c.Idx=e.ClipperBase.Unassigned,c.IsHole=!1,c.IsOpen=!1,c.FirstLeft=null,c.Pts=null,c.BottomPt=null,c.PolyNode=null,this.m_PolyOuts.push(c),c.Idx=this.m_PolyOuts.length-1,c},e.ClipperBase.prototype.DisposeOutRec=function(c){var d=this.m_PolyOuts[c];d.Pts=null,d=null,this.m_PolyOuts[c]=null},e.ClipperBase.prototype.UpdateEdgeIntoAEL=function(c){c.NextInLML===null&&e.Error("UpdateEdgeIntoAEL: invalid call");var d=c.PrevInAEL,_=c.NextInAEL;return c.NextInLML.OutIdx=c.OutIdx,d!==null?d.NextInAEL=c.NextInLML:this.m_ActiveEdges=c.NextInLML,_!==null&&(_.PrevInAEL=c.NextInLML),c.NextInLML.Side=c.Side,c.NextInLML.WindDelta=c.WindDelta,c.NextInLML.WindCnt=c.WindCnt,c.NextInLML.WindCnt2=c.WindCnt2,c=c.NextInLML,c.Curr.X=c.Bot.X,c.Curr.Y=c.Bot.Y,c.PrevInAEL=d,c.NextInAEL=_,e.ClipperBase.IsHorizontal(c)||this.InsertScanbeam(c.Top.Y),c},e.ClipperBase.prototype.SwapPositionsInAEL=function(c,d){if(!(c.NextInAEL===c.PrevInAEL||d.NextInAEL===d.PrevInAEL)){if(c.NextInAEL===d){var _=d.NextInAEL;_!==null&&(_.PrevInAEL=c);var T=c.PrevInAEL;T!==null&&(T.NextInAEL=d),d.PrevInAEL=T,d.NextInAEL=c,c.PrevInAEL=d,c.NextInAEL=_}else if(d.NextInAEL===c){var D=c.NextInAEL;D!==null&&(D.PrevInAEL=d);var q=d.PrevInAEL;q!==null&&(q.NextInAEL=c),c.PrevInAEL=q,c.NextInAEL=d,d.PrevInAEL=c,d.NextInAEL=D}else{var Y=c.NextInAEL,ce=c.PrevInAEL;c.NextInAEL=d.NextInAEL,c.NextInAEL!==null&&(c.NextInAEL.PrevInAEL=c),c.PrevInAEL=d.PrevInAEL,c.PrevInAEL!==null&&(c.PrevInAEL.NextInAEL=c),d.NextInAEL=Y,d.NextInAEL!==null&&(d.NextInAEL.PrevInAEL=d),d.PrevInAEL=ce,d.PrevInAEL!==null&&(d.PrevInAEL.NextInAEL=d)}c.PrevInAEL===null?this.m_ActiveEdges=c:d.PrevInAEL===null&&(this.m_ActiveEdges=d)}},e.ClipperBase.prototype.DeleteFromAEL=function(c){var d=c.PrevInAEL,_=c.NextInAEL;d===null&&_===null&&c!==this.m_ActiveEdges||(d!==null?d.NextInAEL=_:this.m_ActiveEdges=_,_!==null&&(_.PrevInAEL=d),c.NextInAEL=null,c.PrevInAEL=null)},e.Clipper=function(c){typeof c>"u"&&(c=0),this.m_PolyOuts=null,this.m_ClipType=e.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=e.PolyFillType.pftEvenOdd,this.m_SubjFillType=e.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,e.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=e.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&c)!==0,this.StrictlySimple=(2&c)!==0,this.PreserveCollinear=(4&c)!==0,e.use_xyz&&(this.ZFillFunction=null)},e.Clipper.ioReverseSolution=1,e.Clipper.ioStrictlySimple=2,e.Clipper.ioPreserveCollinear=4,e.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),e.ClipperBase.prototype.Clear.call(this))},e.Clipper.prototype.InsertMaxima=function(c){var d=new e.Maxima;if(d.X=c,this.m_Maxima===null)this.m_Maxima=d,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(c<this.m_Maxima.X)d.Next=this.m_Maxima,d.Prev=null,this.m_Maxima=d;else{for(var _=this.m_Maxima;_.Next!==null&&c>=_.Next.X;)_=_.Next;if(c===_.X)return;d.Next=_.Next,d.Prev=_,_.Next!==null&&(_.Next.Prev=d),_.Next=d}},e.Clipper.prototype.Execute=function(){var c=arguments,d=c.length,_=c[1]instanceof e.PolyTree;if(d===4&&!_){var T=c[0],D=c[1],q=c[2],Y=c[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&e.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,e.Clear(D),this.m_SubjFillType=q,this.m_ClipFillType=Y,this.m_ClipType=T,this.m_UsingPolyTree=!1;try{var ce=this.ExecuteInternal();ce&&this.BuildResult(D)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return ce}else if(d===4&&_){var T=c[0],ue=c[1],q=c[2],Y=c[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=q,this.m_ClipFillType=Y,this.m_ClipType=T,this.m_UsingPolyTree=!0;try{var ce=this.ExecuteInternal();ce&&this.BuildResult2(ue)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return ce}else if(d===2&&!_){var T=c[0],D=c[1];return this.Execute(T,D,e.PolyFillType.pftEvenOdd,e.PolyFillType.pftEvenOdd)}else if(d===2&&_){var T=c[0],ue=c[1];return this.Execute(T,ue,e.PolyFillType.pftEvenOdd,e.PolyFillType.pftEvenOdd)}},e.Clipper.prototype.FixHoleLinkage=function(c){if(!(c.FirstLeft===null||c.IsHole!==c.FirstLeft.IsHole&&c.FirstLeft.Pts!==null)){for(var d=c.FirstLeft;d!==null&&(d.IsHole===c.IsHole||d.Pts===null);)d=d.FirstLeft;c.FirstLeft=d}},e.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var c={},d={};if(!this.PopScanbeam(c))return!1;for(this.InsertLocalMinimaIntoAEL(c.v);this.PopScanbeam(d)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(d.v))return!1;this.ProcessEdgesAtTopOfScanbeam(d.v),c.v=d.v,this.InsertLocalMinimaIntoAEL(c.v)}var _,T,D;for(T=0,D=this.m_PolyOuts.length;T<D;T++)_=this.m_PolyOuts[T],!(_.Pts===null||_.IsOpen)&&(_.IsHole^this.ReverseSolution)==this.Area$1(_)>0&&this.ReversePolyPtLinks(_.Pts);for(this.JoinCommonEdges(),T=0,D=this.m_PolyOuts.length;T<D;T++)_=this.m_PolyOuts[T],_.Pts!==null&&(_.IsOpen?this.FixupOutPolyline(_):this.FixupOutPolygon(_));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},e.Clipper.prototype.DisposeAllPolyPts=function(){for(var c=0,d=this.m_PolyOuts.length;c<d;++c)this.DisposeOutRec(c);e.Clear(this.m_PolyOuts)},e.Clipper.prototype.AddJoin=function(c,d,_){var T=new e.Join;T.OutPt1=c,T.OutPt2=d,T.OffPt.X=_.X,T.OffPt.Y=_.Y,e.use_xyz&&(T.OffPt.Z=_.Z),this.m_Joins.push(T)},e.Clipper.prototype.AddGhostJoin=function(c,d){var _=new e.Join;_.OutPt1=c,_.OffPt.X=d.X,_.OffPt.Y=d.Y,e.use_xyz&&(_.OffPt.Z=d.Z),this.m_GhostJoins.push(_)},e.Clipper.prototype.SetZ=function(c,d,_){if(this.ZFillFunction!==null){if(c.Z!==0||this.ZFillFunction===null)return;e.IntPoint.op_Equality(c,d.Bot)?c.Z=d.Bot.Z:e.IntPoint.op_Equality(c,d.Top)?c.Z=d.Top.Z:e.IntPoint.op_Equality(c,_.Bot)?c.Z=_.Bot.Z:e.IntPoint.op_Equality(c,_.Top)?c.Z=_.Top.Z:this.ZFillFunction(d.Bot,d.Top,_.Bot,_.Top,c)}},e.Clipper.prototype.InsertLocalMinimaIntoAEL=function(c){for(var d={},_,T;this.PopLocalMinima(c,d);){_=d.v.LeftBound,T=d.v.RightBound;var D=null;if(_===null?(this.InsertEdgeIntoAEL(T,null),this.SetWindingCount(T),this.IsContributing(T)&&(D=this.AddOutPt(T,T.Bot))):T===null?(this.InsertEdgeIntoAEL(_,null),this.SetWindingCount(_),this.IsContributing(_)&&(D=this.AddOutPt(_,_.Bot)),this.InsertScanbeam(_.Top.Y)):(this.InsertEdgeIntoAEL(_,null),this.InsertEdgeIntoAEL(T,_),this.SetWindingCount(_),T.WindCnt=_.WindCnt,T.WindCnt2=_.WindCnt2,this.IsContributing(_)&&(D=this.AddLocalMinPoly(_,T,_.Bot)),this.InsertScanbeam(_.Top.Y)),T!==null&&(e.ClipperBase.IsHorizontal(T)?(T.NextInLML!==null&&this.InsertScanbeam(T.NextInLML.Top.Y),this.AddEdgeToSEL(T)):this.InsertScanbeam(T.Top.Y)),!(_===null||T===null)){if(D!==null&&e.ClipperBase.IsHorizontal(T)&&this.m_GhostJoins.length>0&&T.WindDelta!==0)for(var q=0,Y=this.m_GhostJoins.length;q<Y;q++){var ce=this.m_GhostJoins[q];this.HorzSegmentsOverlap(ce.OutPt1.Pt.X,ce.OffPt.X,T.Bot.X,T.Top.X)&&this.AddJoin(ce.OutPt1,D,ce.OffPt)}if(_.OutIdx>=0&&_.PrevInAEL!==null&&_.PrevInAEL.Curr.X===_.Bot.X&&_.PrevInAEL.OutIdx>=0&&e.ClipperBase.SlopesEqual5(_.PrevInAEL.Curr,_.PrevInAEL.Top,_.Curr,_.Top,this.m_UseFullRange)&&_.WindDelta!==0&&_.PrevInAEL.WindDelta!==0){var ue=this.AddOutPt(_.PrevInAEL,_.Bot);this.AddJoin(D,ue,_.Top)}if(_.NextInAEL!==T){if(T.OutIdx>=0&&T.PrevInAEL.OutIdx>=0&&e.ClipperBase.SlopesEqual5(T.PrevInAEL.Curr,T.PrevInAEL.Top,T.Curr,T.Top,this.m_UseFullRange)&&T.WindDelta!==0&&T.PrevInAEL.WindDelta!==0){var ue=this.AddOutPt(T.PrevInAEL,T.Bot);this.AddJoin(D,ue,T.Top)}var Ce=_.NextInAEL;if(Ce!==null)for(;Ce!==T;)this.IntersectEdges(T,Ce,_.Curr),Ce=Ce.NextInAEL}}}},e.Clipper.prototype.InsertEdgeIntoAEL=function(c,d){if(this.m_ActiveEdges===null)c.PrevInAEL=null,c.NextInAEL=null,this.m_ActiveEdges=c;else if(d===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,c))c.PrevInAEL=null,c.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=c,this.m_ActiveEdges=c;else{for(d===null&&(d=this.m_ActiveEdges);d.NextInAEL!==null&&!this.E2InsertsBeforeE1(d.NextInAEL,c);)d=d.NextInAEL;c.NextInAEL=d.NextInAEL,d.NextInAEL!==null&&(d.NextInAEL.PrevInAEL=c),c.PrevInAEL=d,d.NextInAEL=c}},e.Clipper.prototype.E2InsertsBeforeE1=function(c,d){return d.Curr.X===c.Curr.X?d.Top.Y>c.Top.Y?d.Top.X<e.Clipper.TopX(c,d.Top.Y):c.Top.X>e.Clipper.TopX(d,c.Top.Y):d.Curr.X<c.Curr.X},e.Clipper.prototype.IsEvenOddFillType=function(c){return c.PolyTyp===e.PolyType.ptSubject?this.m_SubjFillType===e.PolyFillType.pftEvenOdd:this.m_ClipFillType===e.PolyFillType.pftEvenOdd},e.Clipper.prototype.IsEvenOddAltFillType=function(c){return c.PolyTyp===e.PolyType.ptSubject?this.m_ClipFillType===e.PolyFillType.pftEvenOdd:this.m_SubjFillType===e.PolyFillType.pftEvenOdd},e.Clipper.prototype.IsContributing=function(c){var d,_;switch(c.PolyTyp===e.PolyType.ptSubject?(d=this.m_SubjFillType,_=this.m_ClipFillType):(d=this.m_ClipFillType,_=this.m_SubjFillType),d){case e.PolyFillType.pftEvenOdd:if(c.WindDelta===0&&c.WindCnt!==1)return!1;break;case e.PolyFillType.pftNonZero:if(Math.abs(c.WindCnt)!==1)return!1;break;case e.PolyFillType.pftPositive:if(c.WindCnt!==1)return!1;break;default:if(c.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case e.ClipType.ctIntersection:switch(_){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return c.WindCnt2!==0;case e.PolyFillType.pftPositive:return c.WindCnt2>0;default:return c.WindCnt2<0}case e.ClipType.ctUnion:switch(_){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return c.WindCnt2===0;case e.PolyFillType.pftPositive:return c.WindCnt2<=0;default:return c.WindCnt2>=0}case e.ClipType.ctDifference:if(c.PolyTyp===e.PolyType.ptSubject)switch(_){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return c.WindCnt2===0;case e.PolyFillType.pftPositive:return c.WindCnt2<=0;default:return c.WindCnt2>=0}else switch(_){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return c.WindCnt2!==0;case e.PolyFillType.pftPositive:return c.WindCnt2>0;default:return c.WindCnt2<0}case e.ClipType.ctXor:if(c.WindDelta===0)switch(_){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return c.WindCnt2===0;case e.PolyFillType.pftPositive:return c.WindCnt2<=0;default:return c.WindCnt2>=0}else return!0}return!0},e.Clipper.prototype.SetWindingCount=function(c){for(var d=c.PrevInAEL;d!==null&&(d.PolyTyp!==c.PolyTyp||d.WindDelta===0);)d=d.PrevInAEL;if(d===null){var _=c.PolyTyp===e.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;c.WindDelta===0?c.WindCnt=_===e.PolyFillType.pftNegative?-1:1:c.WindCnt=c.WindDelta,c.WindCnt2=0,d=this.m_ActiveEdges}else if(c.WindDelta===0&&this.m_ClipType!==e.ClipType.ctUnion)c.WindCnt=1,c.WindCnt2=d.WindCnt2,d=d.NextInAEL;else if(this.IsEvenOddFillType(c)){if(c.WindDelta===0){for(var T=!0,D=d.PrevInAEL;D!==null;)D.PolyTyp===d.PolyTyp&&D.WindDelta!==0&&(T=!T),D=D.PrevInAEL;c.WindCnt=T?0:1}else c.WindCnt=c.WindDelta;c.WindCnt2=d.WindCnt2,d=d.NextInAEL}else d.WindCnt*d.WindDelta<0?Math.abs(d.WindCnt)>1?d.WindDelta*c.WindDelta<0?c.WindCnt=d.WindCnt:c.WindCnt=d.WindCnt+c.WindDelta:c.WindCnt=c.WindDelta===0?1:c.WindDelta:c.WindDelta===0?c.WindCnt=d.WindCnt<0?d.WindCnt-1:d.WindCnt+1:d.WindDelta*c.WindDelta<0?c.WindCnt=d.WindCnt:c.WindCnt=d.WindCnt+c.WindDelta,c.WindCnt2=d.WindCnt2,d=d.NextInAEL;if(this.IsEvenOddAltFillType(c))for(;d!==c;)d.WindDelta!==0&&(c.WindCnt2=c.WindCnt2===0?1:0),d=d.NextInAEL;else for(;d!==c;)c.WindCnt2+=d.WindDelta,d=d.NextInAEL},e.Clipper.prototype.AddEdgeToSEL=function(c){this.m_SortedEdges===null?(this.m_SortedEdges=c,c.PrevInSEL=null,c.NextInSEL=null):(c.NextInSEL=this.m_SortedEdges,c.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=c,this.m_SortedEdges=c)},e.Clipper.prototype.PopEdgeFromSEL=function(c){if(c.v=this.m_SortedEdges,c.v===null)return!1;var d=c.v;return this.m_SortedEdges=c.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),d.NextInSEL=null,d.PrevInSEL=null,!0},e.Clipper.prototype.CopyAELToSEL=function(){var c=this.m_ActiveEdges;for(this.m_SortedEdges=c;c!==null;)c.PrevInSEL=c.PrevInAEL,c.NextInSEL=c.NextInAEL,c=c.NextInAEL},e.Clipper.prototype.SwapPositionsInSEL=function(c,d){if(!(c.NextInSEL===null&&c.PrevInSEL===null)&&!(d.NextInSEL===null&&d.PrevInSEL===null)){if(c.NextInSEL===d){var _=d.NextInSEL;_!==null&&(_.PrevInSEL=c);var T=c.PrevInSEL;T!==null&&(T.NextInSEL=d),d.PrevInSEL=T,d.NextInSEL=c,c.PrevInSEL=d,c.NextInSEL=_}else if(d.NextInSEL===c){var _=c.NextInSEL;_!==null&&(_.PrevInSEL=d);var T=d.PrevInSEL;T!==null&&(T.NextInSEL=c),c.PrevInSEL=T,c.NextInSEL=d,d.PrevInSEL=c,d.NextInSEL=_}else{var _=c.NextInSEL,T=c.PrevInSEL;c.NextInSEL=d.NextInSEL,c.NextInSEL!==null&&(c.NextInSEL.PrevInSEL=c),c.PrevInSEL=d.PrevInSEL,c.PrevInSEL!==null&&(c.PrevInSEL.NextInSEL=c),d.NextInSEL=_,d.NextInSEL!==null&&(d.NextInSEL.PrevInSEL=d),d.PrevInSEL=T,d.PrevInSEL!==null&&(d.PrevInSEL.NextInSEL=d)}c.PrevInSEL===null?this.m_SortedEdges=c:d.PrevInSEL===null&&(this.m_SortedEdges=d)}},e.Clipper.prototype.AddLocalMaxPoly=function(c,d,_){this.AddOutPt(c,_),d.WindDelta===0&&this.AddOutPt(d,_),c.OutIdx===d.OutIdx?(c.OutIdx=-1,d.OutIdx=-1):c.OutIdx<d.OutIdx?this.AppendPolygon(c,d):this.AppendPolygon(d,c)},e.Clipper.prototype.AddLocalMinPoly=function(c,d,_){var T,D,q;if(e.ClipperBase.IsHorizontal(d)||c.Dx>d.Dx?(T=this.AddOutPt(c,_),d.OutIdx=c.OutIdx,c.Side=e.EdgeSide.esLeft,d.Side=e.EdgeSide.esRight,D=c,D.PrevInAEL===d?q=d.PrevInAEL:q=D.PrevInAEL):(T=this.AddOutPt(d,_),c.OutIdx=d.OutIdx,c.Side=e.EdgeSide.esRight,d.Side=e.EdgeSide.esLeft,D=d,D.PrevInAEL===c?q=c.PrevInAEL:q=D.PrevInAEL),q!==null&&q.OutIdx>=0&&q.Top.Y<_.Y&&D.Top.Y<_.Y){var Y=e.Clipper.TopX(q,_.Y),ce=e.Clipper.TopX(D,_.Y);if(Y===ce&&D.WindDelta!==0&&q.WindDelta!==0&&e.ClipperBase.SlopesEqual5(new e.IntPoint2(Y,_.Y),q.Top,new e.IntPoint2(ce,_.Y),D.Top,this.m_UseFullRange)){var ue=this.AddOutPt(q,_);this.AddJoin(T,ue,D.Top)}}return T},e.Clipper.prototype.AddOutPt=function(c,d){if(c.OutIdx<0){var _=this.CreateOutRec();_.IsOpen=c.WindDelta===0;var T=new e.OutPt;return _.Pts=T,T.Idx=_.Idx,T.Pt.X=d.X,T.Pt.Y=d.Y,e.use_xyz&&(T.Pt.Z=d.Z),T.Next=T,T.Prev=T,_.IsOpen||this.SetHoleState(c,_),c.OutIdx=_.Idx,T}else{var _=this.m_PolyOuts[c.OutIdx],D=_.Pts,q=c.Side===e.EdgeSide.esLeft;if(q&&e.IntPoint.op_Equality(d,D.Pt))return D;if(!q&&e.IntPoint.op_Equality(d,D.Prev.Pt))return D.Prev;var T=new e.OutPt;return T.Idx=_.Idx,T.Pt.X=d.X,T.Pt.Y=d.Y,e.use_xyz&&(T.Pt.Z=d.Z),T.Next=D,T.Prev=D.Prev,T.Prev.Next=T,D.Prev=T,q&&(_.Pts=T),T}},e.Clipper.prototype.GetLastOutPt=function(c){var d=this.m_PolyOuts[c.OutIdx];return c.Side===e.EdgeSide.esLeft?d.Pts:d.Pts.Prev},e.Clipper.prototype.SwapPoints=function(c,d){var _=new e.IntPoint1(c.Value);c.Value.X=d.Value.X,c.Value.Y=d.Value.Y,e.use_xyz&&(c.Value.Z=d.Value.Z),d.Value.X=_.X,d.Value.Y=_.Y,e.use_xyz&&(d.Value.Z=_.Z)},e.Clipper.prototype.HorzSegmentsOverlap=function(c,d,_,T){var D;return c>d&&(D=c,c=d,d=D),_>T&&(D=_,_=T,T=D),c<T&&_<d},e.Clipper.prototype.SetHoleState=function(c,d){for(var _=c.PrevInAEL,T=null;_!==null;)_.OutIdx>=0&&_.WindDelta!==0&&(T===null?T=_:T.OutIdx===_.OutIdx&&(T=null)),_=_.PrevInAEL;T===null?(d.FirstLeft=null,d.IsHole=!1):(d.FirstLeft=this.m_PolyOuts[T.OutIdx],d.IsHole=!d.FirstLeft.IsHole)},e.Clipper.prototype.GetDx=function(c,d){return c.Y===d.Y?e.ClipperBase.horizontal:(d.X-c.X)/(d.Y-c.Y)},e.Clipper.prototype.FirstIsBottomPt=function(c,d){for(var _=c.Prev;e.IntPoint.op_Equality(_.Pt,c.Pt)&&_!==c;)_=_.Prev;var T=Math.abs(this.GetDx(c.Pt,_.Pt));for(_=c.Next;e.IntPoint.op_Equality(_.Pt,c.Pt)&&_!==c;)_=_.Next;var D=Math.abs(this.GetDx(c.Pt,_.Pt));for(_=d.Prev;e.IntPoint.op_Equality(_.Pt,d.Pt)&&_!==d;)_=_.Prev;var q=Math.abs(this.GetDx(d.Pt,_.Pt));for(_=d.Next;e.IntPoint.op_Equality(_.Pt,d.Pt)&&_!==d;)_=_.Next;var Y=Math.abs(this.GetDx(d.Pt,_.Pt));return Math.max(T,D)===Math.max(q,Y)&&Math.min(T,D)===Math.min(q,Y)?this.Area(c)>0:T>=q&&T>=Y||D>=q&&D>=Y},e.Clipper.prototype.GetBottomPt=function(c){for(var d=null,_=c.Next;_!==c;)_.Pt.Y>c.Pt.Y?(c=_,d=null):_.Pt.Y===c.Pt.Y&&_.Pt.X<=c.Pt.X&&(_.Pt.X<c.Pt.X?(d=null,c=_):_.Next!==c&&_.Prev!==c&&(d=_)),_=_.Next;if(d!==null)for(;d!==_;)for(this.FirstIsBottomPt(_,d)||(c=d),d=d.Next;e.IntPoint.op_Inequality(d.Pt,c.Pt);)d=d.Next;return c},e.Clipper.prototype.GetLowermostRec=function(c,d){c.BottomPt===null&&(c.BottomPt=this.GetBottomPt(c.Pts)),d.BottomPt===null&&(d.BottomPt=this.GetBottomPt(d.Pts));var _=c.BottomPt,T=d.BottomPt;return _.Pt.Y>T.Pt.Y?c:_.Pt.Y<T.Pt.Y?d:_.Pt.X<T.Pt.X?c:_.Pt.X>T.Pt.X||_.Next===_?d:T.Next===T||this.FirstIsBottomPt(_,T)?c:d},e.Clipper.prototype.OutRec1RightOfOutRec2=function(c,d){do if(c=c.FirstLeft,c===d)return!0;while(c!==null);return!1},e.Clipper.prototype.GetOutRec=function(c){for(var d=this.m_PolyOuts[c];d!==this.m_PolyOuts[d.Idx];)d=this.m_PolyOuts[d.Idx];return d},e.Clipper.prototype.AppendPolygon=function(c,d){var _=this.m_PolyOuts[c.OutIdx],T=this.m_PolyOuts[d.OutIdx],D;this.OutRec1RightOfOutRec2(_,T)?D=T:this.OutRec1RightOfOutRec2(T,_)?D=_:D=this.GetLowermostRec(_,T);var q=_.Pts,Y=q.Prev,ce=T.Pts,ue=ce.Prev;c.Side===e.EdgeSide.esLeft?d.Side===e.EdgeSide.esLeft?(this.ReversePolyPtLinks(ce),ce.Next=q,q.Prev=ce,Y.Next=ue,ue.Prev=Y,_.Pts=ue):(ue.Next=q,q.Prev=ue,ce.Prev=Y,Y.Next=ce,_.Pts=ce):d.Side===e.EdgeSide.esRight?(this.ReversePolyPtLinks(ce),Y.Next=ue,ue.Prev=Y,ce.Next=q,q.Prev=ce):(Y.Next=ce,ce.Prev=Y,q.Prev=ue,ue.Next=q),_.BottomPt=null,D===T&&(T.FirstLeft!==_&&(_.FirstLeft=T.FirstLeft),_.IsHole=T.IsHole),T.Pts=null,T.BottomPt=null,T.FirstLeft=_;var Ce=c.OutIdx,Ye=d.OutIdx;c.OutIdx=-1,d.OutIdx=-1;for(var Ve=this.m_ActiveEdges;Ve!==null;){if(Ve.OutIdx===Ye){Ve.OutIdx=Ce,Ve.Side=c.Side;break}Ve=Ve.NextInAEL}T.Idx=_.Idx},e.Clipper.prototype.ReversePolyPtLinks=function(c){if(c!==null){var d,_;d=c;do _=d.Next,d.Next=d.Prev,d.Prev=_,d=_;while(d!==c)}},e.Clipper.SwapSides=function(c,d){var _=c.Side;c.Side=d.Side,d.Side=_},e.Clipper.SwapPolyIndexes=function(c,d){var _=c.OutIdx;c.OutIdx=d.OutIdx,d.OutIdx=_},e.Clipper.prototype.IntersectEdges=function(c,d,_){var T=c.OutIdx>=0,D=d.OutIdx>=0;if(e.use_xyz&&this.SetZ(_,c,d),e.use_lines&&(c.WindDelta===0||d.WindDelta===0)){if(c.WindDelta===0&&d.WindDelta===0)return;c.PolyTyp===d.PolyTyp&&c.WindDelta!==d.WindDelta&&this.m_ClipType===e.ClipType.ctUnion?c.WindDelta===0?D&&(this.AddOutPt(c,_),T&&(c.OutIdx=-1)):T&&(this.AddOutPt(d,_),D&&(d.OutIdx=-1)):c.PolyTyp!==d.PolyTyp&&(c.WindDelta===0&&Math.abs(d.WindCnt)===1&&(this.m_ClipType!==e.ClipType.ctUnion||d.WindCnt2===0)?(this.AddOutPt(c,_),T&&(c.OutIdx=-1)):d.WindDelta===0&&Math.abs(c.WindCnt)===1&&(this.m_ClipType!==e.ClipType.ctUnion||c.WindCnt2===0)&&(this.AddOutPt(d,_),D&&(d.OutIdx=-1)));return}if(c.PolyTyp===d.PolyTyp)if(this.IsEvenOddFillType(c)){var q=c.WindCnt;c.WindCnt=d.WindCnt,d.WindCnt=q}else c.WindCnt+d.WindDelta===0?c.WindCnt=-c.WindCnt:c.WindCnt+=d.WindDelta,d.WindCnt-c.WindDelta===0?d.WindCnt=-d.WindCnt:d.WindCnt-=c.WindDelta;else this.IsEvenOddFillType(d)?c.WindCnt2=c.WindCnt2===0?1:0:c.WindCnt2+=d.WindDelta,this.IsEvenOddFillType(c)?d.WindCnt2=d.WindCnt2===0?1:0:d.WindCnt2-=c.WindDelta;var Y,ce,ue,Ce;c.PolyTyp===e.PolyType.ptSubject?(Y=this.m_SubjFillType,ue=this.m_ClipFillType):(Y=this.m_ClipFillType,ue=this.m_SubjFillType),d.PolyTyp===e.PolyType.ptSubject?(ce=this.m_SubjFillType,Ce=this.m_ClipFillType):(ce=this.m_ClipFillType,Ce=this.m_SubjFillType);var Ye,Ve;switch(Y){case e.PolyFillType.pftPositive:Ye=c.WindCnt;break;case e.PolyFillType.pftNegative:Ye=-c.WindCnt;break;default:Ye=Math.abs(c.WindCnt);break}switch(ce){case e.PolyFillType.pftPositive:Ve=d.WindCnt;break;case e.PolyFillType.pftNegative:Ve=-d.WindCnt;break;default:Ve=Math.abs(d.WindCnt);break}if(T&&D)Ye!==0&&Ye!==1||Ve!==0&&Ve!==1||c.PolyTyp!==d.PolyTyp&&this.m_ClipType!==e.ClipType.ctXor?this.AddLocalMaxPoly(c,d,_):(this.AddOutPt(c,_),this.AddOutPt(d,_),e.Clipper.SwapSides(c,d),e.Clipper.SwapPolyIndexes(c,d));else if(T)(Ve===0||Ve===1)&&(this.AddOutPt(c,_),e.Clipper.SwapSides(c,d),e.Clipper.SwapPolyIndexes(c,d));else if(D)(Ye===0||Ye===1)&&(this.AddOutPt(d,_),e.Clipper.SwapSides(c,d),e.Clipper.SwapPolyIndexes(c,d));else if((Ye===0||Ye===1)&&(Ve===0||Ve===1)){var ct,Dt;switch(ue){case e.PolyFillType.pftPositive:ct=c.WindCnt2;break;case e.PolyFillType.pftNegative:ct=-c.WindCnt2;break;default:ct=Math.abs(c.WindCnt2);break}switch(Ce){case e.PolyFillType.pftPositive:Dt=d.WindCnt2;break;case e.PolyFillType.pftNegative:Dt=-d.WindCnt2;break;default:Dt=Math.abs(d.WindCnt2);break}if(c.PolyTyp!==d.PolyTyp)this.AddLocalMinPoly(c,d,_);else if(Ye===1&&Ve===1)switch(this.m_ClipType){case e.ClipType.ctIntersection:ct>0&&Dt>0&&this.AddLocalMinPoly(c,d,_);break;case e.ClipType.ctUnion:ct<=0&&Dt<=0&&this.AddLocalMinPoly(c,d,_);break;case e.ClipType.ctDifference:(c.PolyTyp===e.PolyType.ptClip&&ct>0&&Dt>0||c.PolyTyp===e.PolyType.ptSubject&&ct<=0&&Dt<=0)&&this.AddLocalMinPoly(c,d,_);break;case e.ClipType.ctXor:this.AddLocalMinPoly(c,d,_);break}else e.Clipper.SwapSides(c,d)}},e.Clipper.prototype.DeleteFromSEL=function(c){var d=c.PrevInSEL,_=c.NextInSEL;d===null&&_===null&&c!==this.m_SortedEdges||(d!==null?d.NextInSEL=_:this.m_SortedEdges=_,_!==null&&(_.PrevInSEL=d),c.NextInSEL=null,c.PrevInSEL=null)},e.Clipper.prototype.ProcessHorizontals=function(){for(var c={};this.PopEdgeFromSEL(c);)this.ProcessHorizontal(c.v)},e.Clipper.prototype.GetHorzDirection=function(c,d){c.Bot.X<c.Top.X?(d.Left=c.Bot.X,d.Right=c.Top.X,d.Dir=e.Direction.dLeftToRight):(d.Left=c.Top.X,d.Right=c.Bot.X,d.Dir=e.Direction.dRightToLeft)},e.Clipper.prototype.ProcessHorizontal=function(c){var d={Dir:null,Left:null,Right:null};this.GetHorzDirection(c,d);for(var _=d.Dir,T=d.Left,D=d.Right,q=c.WindDelta===0,Y=c,ce=null;Y.NextInLML!==null&&e.ClipperBase.IsHorizontal(Y.NextInLML);)Y=Y.NextInLML;Y.NextInLML===null&&(ce=this.GetMaximaPair(Y));var ue=this.m_Maxima;if(ue!==null)if(_===e.Direction.dLeftToRight){for(;ue!==null&&ue.X<=c.Bot.X;)ue=ue.Next;ue!==null&&ue.X>=Y.Top.X&&(ue=null)}else{for(;ue.Next!==null&&ue.Next.X<c.Bot.X;)ue=ue.Next;ue.X<=Y.Top.X&&(ue=null)}for(var Ce=null;;){for(var Ye=c===Y,Ve=this.GetNextInAEL(c,_);Ve!==null;){if(ue!==null)if(_===e.Direction.dLeftToRight)for(;ue!==null&&ue.X<Ve.Curr.X;)c.OutIdx>=0&&!q&&this.AddOutPt(c,new e.IntPoint2(ue.X,c.Bot.Y)),ue=ue.Next;else for(;ue!==null&&ue.X>Ve.Curr.X;)c.OutIdx>=0&&!q&&this.AddOutPt(c,new e.IntPoint2(ue.X,c.Bot.Y)),ue=ue.Prev;if(_===e.Direction.dLeftToRight&&Ve.Curr.X>D||_===e.Direction.dRightToLeft&&Ve.Curr.X<T||Ve.Curr.X===c.Top.X&&c.NextInLML!==null&&Ve.Dx<c.NextInLML.Dx)break;if(c.OutIdx>=0&&!q){e.use_xyz&&(_===e.Direction.dLeftToRight?this.SetZ(Ve.Curr,c,Ve):this.SetZ(Ve.Curr,Ve,c)),Ce=this.AddOutPt(c,Ve.Curr);for(var ct=this.m_SortedEdges;ct!==null;){if(ct.OutIdx>=0&&this.HorzSegmentsOverlap(c.Bot.X,c.Top.X,ct.Bot.X,ct.Top.X)){var Dt=this.GetLastOutPt(ct);this.AddJoin(Dt,Ce,ct.Top)}ct=ct.NextInSEL}this.AddGhostJoin(Ce,c.Bot)}if(Ve===ce&&Ye){c.OutIdx>=0&&this.AddLocalMaxPoly(c,ce,c.Top),this.DeleteFromAEL(c),this.DeleteFromAEL(ce);return}if(_===e.Direction.dLeftToRight){var Kt=new e.IntPoint2(Ve.Curr.X,c.Curr.Y);this.IntersectEdges(c,Ve,Kt)}else{var Kt=new e.IntPoint2(Ve.Curr.X,c.Curr.Y);this.IntersectEdges(Ve,c,Kt)}var Vt=this.GetNextInAEL(Ve,_);this.SwapPositionsInAEL(c,Ve),Ve=Vt}if(c.NextInLML===null||!e.ClipperBase.IsHorizontal(c.NextInLML))break;c=this.UpdateEdgeIntoAEL(c),c.OutIdx>=0&&this.AddOutPt(c,c.Bot),d={Dir:_,Left:T,Right:D},this.GetHorzDirection(c,d),_=d.Dir,T=d.Left,D=d.Right}if(c.OutIdx>=0&&Ce===null){Ce=this.GetLastOutPt(c);for(var ct=this.m_SortedEdges;ct!==null;){if(ct.OutIdx>=0&&this.HorzSegmentsOverlap(c.Bot.X,c.Top.X,ct.Bot.X,ct.Top.X)){var Dt=this.GetLastOutPt(ct);this.AddJoin(Dt,Ce,ct.Top)}ct=ct.NextInSEL}this.AddGhostJoin(Ce,c.Top)}if(c.NextInLML!==null)if(c.OutIdx>=0){if(Ce=this.AddOutPt(c,c.Top),c=this.UpdateEdgeIntoAEL(c),c.WindDelta===0)return;var Sn=c.PrevInAEL,Vt=c.NextInAEL;if(Sn!==null&&Sn.Curr.X===c.Bot.X&&Sn.Curr.Y===c.Bot.Y&&Sn.WindDelta===0&&Sn.OutIdx>=0&&Sn.Curr.Y>Sn.Top.Y&&e.ClipperBase.SlopesEqual3(c,Sn,this.m_UseFullRange)){var Dt=this.AddOutPt(Sn,c.Bot);this.AddJoin(Ce,Dt,c.Top)}else if(Vt!==null&&Vt.Curr.X===c.Bot.X&&Vt.Curr.Y===c.Bot.Y&&Vt.WindDelta!==0&&Vt.OutIdx>=0&&Vt.Curr.Y>Vt.Top.Y&&e.ClipperBase.SlopesEqual3(c,Vt,this.m_UseFullRange)){var Dt=this.AddOutPt(Vt,c.Bot);this.AddJoin(Ce,Dt,c.Top)}}else c=this.UpdateEdgeIntoAEL(c);else c.OutIdx>=0&&this.AddOutPt(c,c.Top),this.DeleteFromAEL(c)},e.Clipper.prototype.GetNextInAEL=function(c,d){return d===e.Direction.dLeftToRight?c.NextInAEL:c.PrevInAEL},e.Clipper.prototype.IsMinima=function(c){return c!==null&&c.Prev.NextInLML!==c&&c.Next.NextInLML!==c},e.Clipper.prototype.IsMaxima=function(c,d){return c!==null&&c.Top.Y===d&&c.NextInLML===null},e.Clipper.prototype.IsIntermediate=function(c,d){return c.Top.Y===d&&c.NextInLML!==null},e.Clipper.prototype.GetMaximaPair=function(c){return e.IntPoint.op_Equality(c.Next.Top,c.Top)&&c.Next.NextInLML===null?c.Next:e.IntPoint.op_Equality(c.Prev.Top,c.Top)&&c.Prev.NextInLML===null?c.Prev:null},e.Clipper.prototype.GetMaximaPairEx=function(c){var d=this.GetMaximaPair(c);return d===null||d.OutIdx===e.ClipperBase.Skip||d.NextInAEL===d.PrevInAEL&&!e.ClipperBase.IsHorizontal(d)?null:d},e.Clipper.prototype.ProcessIntersections=function(c){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(c),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,e.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},e.Clipper.prototype.BuildIntersectList=function(c){if(this.m_ActiveEdges!==null){var d=this.m_ActiveEdges;for(this.m_SortedEdges=d;d!==null;)d.PrevInSEL=d.PrevInAEL,d.NextInSEL=d.NextInAEL,d.Curr.X=e.Clipper.TopX(d,c),d=d.NextInAEL;for(var _=!0;_&&this.m_SortedEdges!==null;){for(_=!1,d=this.m_SortedEdges;d.NextInSEL!==null;){var T=d.NextInSEL,D=new e.IntPoint0;if(d.Curr.X>T.Curr.X){this.IntersectPoint(d,T,D),D.Y<c&&(D=new e.IntPoint2(e.Clipper.TopX(d,c),c));var q=new e.IntersectNode;q.Edge1=d,q.Edge2=T,q.Pt.X=D.X,q.Pt.Y=D.Y,e.use_xyz&&(q.Pt.Z=D.Z),this.m_IntersectList.push(q),this.SwapPositionsInSEL(d,T),_=!0}else d=T}if(d.PrevInSEL!==null)d.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},e.Clipper.prototype.EdgesAdjacent=function(c){return c.Edge1.NextInSEL===c.Edge2||c.Edge1.PrevInSEL===c.Edge2},e.Clipper.IntersectNodeSort=function(c,d){return d.Pt.Y-c.Pt.Y},e.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var c=this.m_IntersectList.length,d=0;d<c;d++){if(!this.EdgesAdjacent(this.m_IntersectList[d])){for(var _=d+1;_<c&&!this.EdgesAdjacent(this.m_IntersectList[_]);)_++;if(_===c)return!1;var T=this.m_IntersectList[d];this.m_IntersectList[d]=this.m_IntersectList[_],this.m_IntersectList[_]=T}this.SwapPositionsInSEL(this.m_IntersectList[d].Edge1,this.m_IntersectList[d].Edge2)}return!0},e.Clipper.prototype.ProcessIntersectList=function(){for(var c=0,d=this.m_IntersectList.length;c<d;c++){var _=this.m_IntersectList[c];this.IntersectEdges(_.Edge1,_.Edge2,_.Pt),this.SwapPositionsInAEL(_.Edge1,_.Edge2)}this.m_IntersectList.length=0};var Bn=function(c){return c<0?Math.ceil(c-.5):Math.round(c)},cn=function(c){return c<0?Math.ceil(c-.5):Math.floor(c+.5)},Ir=function(c){return c<0?-Math.round(Math.abs(c)):Math.round(c)},Di=function(c){return c<0?(c-=.5,c<-2147483648?Math.ceil(c):c|0):(c+=.5,c>2147483647?Math.floor(c):c|0)};s.msie?e.Clipper.Round=Bn:s.chromium?e.Clipper.Round=Ir:s.safari?e.Clipper.Round=Di:e.Clipper.Round=cn,e.Clipper.TopX=function(c,d){return d===c.Top.Y?c.Top.X:c.Bot.X+e.Clipper.Round(c.Dx*(d-c.Bot.Y))},e.Clipper.prototype.IntersectPoint=function(c,d,_){_.X=0,_.Y=0;var T,D;if(c.Dx===d.Dx){_.Y=c.Curr.Y,_.X=e.Clipper.TopX(c,_.Y);return}if(c.Delta.X===0)_.X=c.Bot.X,e.ClipperBase.IsHorizontal(d)?_.Y=d.Bot.Y:(D=d.Bot.Y-d.Bot.X/d.Dx,_.Y=e.Clipper.Round(_.X/d.Dx+D));else if(d.Delta.X===0)_.X=d.Bot.X,e.ClipperBase.IsHorizontal(c)?_.Y=c.Bot.Y:(T=c.Bot.Y-c.Bot.X/c.Dx,_.Y=e.Clipper.Round(_.X/c.Dx+T));else{T=c.Bot.X-c.Bot.Y*c.Dx,D=d.Bot.X-d.Bot.Y*d.Dx;var q=(D-T)/(c.Dx-d.Dx);_.Y=e.Clipper.Round(q),Math.abs(c.Dx)<Math.abs(d.Dx)?_.X=e.Clipper.Round(c.Dx*q+T):_.X=e.Clipper.Round(d.Dx*q+D)}if(_.Y<c.Top.Y||_.Y<d.Top.Y){if(c.Top.Y>d.Top.Y)return _.Y=c.Top.Y,_.X=e.Clipper.TopX(d,c.Top.Y),_.X<c.Top.X;_.Y=d.Top.Y,Math.abs(c.Dx)<Math.abs(d.Dx)?_.X=e.Clipper.TopX(c,_.Y):_.X=e.Clipper.TopX(d,_.Y)}_.Y>c.Curr.Y&&(_.Y=c.Curr.Y,Math.abs(c.Dx)>Math.abs(d.Dx)?_.X=e.Clipper.TopX(d,_.Y):_.X=e.Clipper.TopX(c,_.Y))},e.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(c){for(var d=this.m_ActiveEdges;d!==null;){var _=this.IsMaxima(d,c);if(_){var T=this.GetMaximaPairEx(d);_=T===null||!e.ClipperBase.IsHorizontal(T)}if(_){this.StrictlySimple&&this.InsertMaxima(d.Top.X);var D=d.PrevInAEL;this.DoMaxima(d),D===null?d=this.m_ActiveEdges:d=D.NextInAEL}else{if(this.IsIntermediate(d,c)&&e.ClipperBase.IsHorizontal(d.NextInLML)?(d=this.UpdateEdgeIntoAEL(d),d.OutIdx>=0&&this.AddOutPt(d,d.Bot),this.AddEdgeToSEL(d)):(d.Curr.X=e.Clipper.TopX(d,c),d.Curr.Y=c),e.use_xyz&&(d.Top.Y===c?d.Curr.Z=d.Top.Z:d.Bot.Y===c?d.Curr.Z=d.Bot.Z:d.Curr.Z=0),this.StrictlySimple){var D=d.PrevInAEL;if(d.OutIdx>=0&&d.WindDelta!==0&&D!==null&&D.OutIdx>=0&&D.Curr.X===d.Curr.X&&D.WindDelta!==0){var q=new e.IntPoint1(d.Curr);e.use_xyz&&this.SetZ(q,D,d);var Y=this.AddOutPt(D,q),ce=this.AddOutPt(d,q);this.AddJoin(Y,ce,q)}}d=d.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,d=this.m_ActiveEdges;d!==null;){if(this.IsIntermediate(d,c)){var Y=null;d.OutIdx>=0&&(Y=this.AddOutPt(d,d.Top)),d=this.UpdateEdgeIntoAEL(d);var D=d.PrevInAEL,ue=d.NextInAEL;if(D!==null&&D.Curr.X===d.Bot.X&&D.Curr.Y===d.Bot.Y&&Y!==null&&D.OutIdx>=0&&D.Curr.Y===D.Top.Y&&e.ClipperBase.SlopesEqual5(d.Curr,d.Top,D.Curr,D.Top,this.m_UseFullRange)&&d.WindDelta!==0&&D.WindDelta!==0){var ce=this.AddOutPt(ePrev2,d.Bot);this.AddJoin(Y,ce,d.Top)}else if(ue!==null&&ue.Curr.X===d.Bot.X&&ue.Curr.Y===d.Bot.Y&&Y!==null&&ue.OutIdx>=0&&ue.Curr.Y===ue.Top.Y&&e.ClipperBase.SlopesEqual5(d.Curr,d.Top,ue.Curr,ue.Top,this.m_UseFullRange)&&d.WindDelta!==0&&ue.WindDelta!==0){var ce=this.AddOutPt(ue,d.Bot);this.AddJoin(Y,ce,d.Top)}}d=d.NextInAEL}},e.Clipper.prototype.DoMaxima=function(c){var d=this.GetMaximaPairEx(c);if(d===null){c.OutIdx>=0&&this.AddOutPt(c,c.Top),this.DeleteFromAEL(c);return}for(var _=c.NextInAEL;_!==null&&_!==d;)this.IntersectEdges(c,_,c.Top),this.SwapPositionsInAEL(c,_),_=c.NextInAEL;c.OutIdx===-1&&d.OutIdx===-1?(this.DeleteFromAEL(c),this.DeleteFromAEL(d)):c.OutIdx>=0&&d.OutIdx>=0?(c.OutIdx>=0&&this.AddLocalMaxPoly(c,d,c.Top),this.DeleteFromAEL(c),this.DeleteFromAEL(d)):e.use_lines&&c.WindDelta===0?(c.OutIdx>=0&&(this.AddOutPt(c,c.Top),c.OutIdx=e.ClipperBase.Unassigned),this.DeleteFromAEL(c),d.OutIdx>=0&&(this.AddOutPt(d,c.Top),d.OutIdx=e.ClipperBase.Unassigned),this.DeleteFromAEL(d)):e.Error("DoMaxima error")},e.Clipper.ReversePaths=function(c){for(var d=0,_=c.length;d<_;d++)c[d].reverse()},e.Clipper.Orientation=function(c){return e.Clipper.Area(c)>=0},e.Clipper.prototype.PointCount=function(c){if(c===null)return 0;var d=0,_=c;do d++,_=_.Next;while(_!==c);return d},e.Clipper.prototype.BuildResult=function(c){e.Clear(c);for(var d=0,_=this.m_PolyOuts.length;d<_;d++){var T=this.m_PolyOuts[d];if(T.Pts!==null){var D=T.Pts.Prev,q=this.PointCount(D);if(!(q<2)){for(var Y=new Array(q),ce=0;ce<q;ce++)Y[ce]=D.Pt,D=D.Prev;c.push(Y)}}}},e.Clipper.prototype.BuildResult2=function(c){c.Clear();for(var d=0,_=this.m_PolyOuts.length;d<_;d++){var T=this.m_PolyOuts[d],D=this.PointCount(T.Pts);if(!(T.IsOpen&&D<2||!T.IsOpen&&D<3)){this.FixHoleLinkage(T);var q=new e.PolyNode;c.m_AllPolys.push(q),T.PolyNode=q,q.m_polygon.length=D;for(var Y=T.Pts.Prev,ce=0;ce<D;ce++)q.m_polygon[ce]=Y.Pt,Y=Y.Prev}}for(var d=0,_=this.m_PolyOuts.length;d<_;d++){var T=this.m_PolyOuts[d];T.PolyNode!==null&&(T.IsOpen?(T.PolyNode.IsOpen=!0,c.AddChild(T.PolyNode)):T.FirstLeft!==null&&T.FirstLeft.PolyNode!==null?T.FirstLeft.PolyNode.AddChild(T.PolyNode):c.AddChild(T.PolyNode))}},e.Clipper.prototype.FixupOutPolyline=function(c){for(var d=c.Pts,_=d.Prev;d!==_;)if(d=d.Next,e.IntPoint.op_Equality(d.Pt,d.Prev.Pt)){d===_&&(_=d.Prev);var T=d.Prev;T.Next=d.Next,d.Next.Prev=T,d=T}d===d.Prev&&(c.Pts=null)},e.Clipper.prototype.FixupOutPolygon=function(c){var d=null;c.BottomPt=null;for(var _=c.Pts,T=this.PreserveCollinear||this.StrictlySimple;;){if(_.Prev===_||_.Prev===_.Next){c.Pts=null;return}if(e.IntPoint.op_Equality(_.Pt,_.Next.Pt)||e.IntPoint.op_Equality(_.Pt,_.Prev.Pt)||e.ClipperBase.SlopesEqual4(_.Prev.Pt,_.Pt,_.Next.Pt,this.m_UseFullRange)&&(!T||!this.Pt2IsBetweenPt1AndPt3(_.Prev.Pt,_.Pt,_.Next.Pt)))d=null,_.Prev.Next=_.Next,_.Next.Prev=_.Prev,_=_.Prev;else{if(_===d)break;d===null&&(d=_),_=_.Next}}c.Pts=_},e.Clipper.prototype.DupOutPt=function(c,d){var _=new e.OutPt;return _.Pt.X=c.Pt.X,_.Pt.Y=c.Pt.Y,e.use_xyz&&(_.Pt.Z=c.Pt.Z),_.Idx=c.Idx,d?(_.Next=c.Next,_.Prev=c,c.Next.Prev=_,c.Next=_):(_.Prev=c.Prev,_.Next=c,c.Prev.Next=_,c.Prev=_),_},e.Clipper.prototype.GetOverlap=function(c,d,_,T,D){return c<d?_<T?(D.Left=Math.max(c,_),D.Right=Math.min(d,T)):(D.Left=Math.max(c,T),D.Right=Math.min(d,_)):_<T?(D.Left=Math.max(d,_),D.Right=Math.min(c,T)):(D.Left=Math.max(d,T),D.Right=Math.min(c,_)),D.Left<D.Right},e.Clipper.prototype.JoinHorz=function(c,d,_,T,D,q){var Y=c.Pt.X>d.Pt.X?e.Direction.dRightToLeft:e.Direction.dLeftToRight,ce=_.Pt.X>T.Pt.X?e.Direction.dRightToLeft:e.Direction.dLeftToRight;if(Y===ce)return!1;if(Y===e.Direction.dLeftToRight){for(;c.Next.Pt.X<=D.X&&c.Next.Pt.X>=c.Pt.X&&c.Next.Pt.Y===D.Y;)c=c.Next;q&&c.Pt.X!==D.X&&(c=c.Next),d=this.DupOutPt(c,!q),e.IntPoint.op_Inequality(d.Pt,D)&&(c=d,c.Pt.X=D.X,c.Pt.Y=D.Y,e.use_xyz&&(c.Pt.Z=D.Z),d=this.DupOutPt(c,!q))}else{for(;c.Next.Pt.X>=D.X&&c.Next.Pt.X<=c.Pt.X&&c.Next.Pt.Y===D.Y;)c=c.Next;!q&&c.Pt.X!==D.X&&(c=c.Next),d=this.DupOutPt(c,q),e.IntPoint.op_Inequality(d.Pt,D)&&(c=d,c.Pt.X=D.X,c.Pt.Y=D.Y,e.use_xyz&&(c.Pt.Z=D.Z),d=this.DupOutPt(c,q))}if(ce===e.Direction.dLeftToRight){for(;_.Next.Pt.X<=D.X&&_.Next.Pt.X>=_.Pt.X&&_.Next.Pt.Y===D.Y;)_=_.Next;q&&_.Pt.X!==D.X&&(_=_.Next),T=this.DupOutPt(_,!q),e.IntPoint.op_Inequality(T.Pt,D)&&(_=T,_.Pt.X=D.X,_.Pt.Y=D.Y,e.use_xyz&&(_.Pt.Z=D.Z),T=this.DupOutPt(_,!q))}else{for(;_.Next.Pt.X>=D.X&&_.Next.Pt.X<=_.Pt.X&&_.Next.Pt.Y===D.Y;)_=_.Next;!q&&_.Pt.X!==D.X&&(_=_.Next),T=this.DupOutPt(_,q),e.IntPoint.op_Inequality(T.Pt,D)&&(_=T,_.Pt.X=D.X,_.Pt.Y=D.Y,e.use_xyz&&(_.Pt.Z=D.Z),T=this.DupOutPt(_,q))}return Y===e.Direction.dLeftToRight===q?(c.Prev=_,_.Next=c,d.Next=T,T.Prev=d):(c.Next=_,_.Prev=c,d.Prev=T,T.Next=d),!0},e.Clipper.prototype.JoinPoints=function(c,d,_){var T=c.OutPt1,D=new e.OutPt,q=c.OutPt2,Y=new e.OutPt,ce=c.OutPt1.Pt.Y===c.OffPt.Y;if(ce&&e.IntPoint.op_Equality(c.OffPt,c.OutPt1.Pt)&&e.IntPoint.op_Equality(c.OffPt,c.OutPt2.Pt)){if(d!==_)return!1;for(D=c.OutPt1.Next;D!==T&&e.IntPoint.op_Equality(D.Pt,c.OffPt);)D=D.Next;var ue=D.Pt.Y>c.OffPt.Y;for(Y=c.OutPt2.Next;Y!==q&&e.IntPoint.op_Equality(Y.Pt,c.OffPt);)Y=Y.Next;var Ce=Y.Pt.Y>c.OffPt.Y;return ue===Ce?!1:ue?(D=this.DupOutPt(T,!1),Y=this.DupOutPt(q,!0),T.Prev=q,q.Next=T,D.Next=Y,Y.Prev=D,c.OutPt1=T,c.OutPt2=D,!0):(D=this.DupOutPt(T,!0),Y=this.DupOutPt(q,!1),T.Next=q,q.Prev=T,D.Prev=Y,Y.Next=D,c.OutPt1=T,c.OutPt2=D,!0)}else if(ce){for(D=T;T.Prev.Pt.Y===T.Pt.Y&&T.Prev!==D&&T.Prev!==q;)T=T.Prev;for(;D.Next.Pt.Y===D.Pt.Y&&D.Next!==T&&D.Next!==q;)D=D.Next;if(D.Next===T||D.Next===q)return!1;for(Y=q;q.Prev.Pt.Y===q.Pt.Y&&q.Prev!==Y&&q.Prev!==D;)q=q.Prev;for(;Y.Next.Pt.Y===Y.Pt.Y&&Y.Next!==q&&Y.Next!==T;)Y=Y.Next;if(Y.Next===q||Y.Next===T)return!1;var Ye={Left:null,Right:null};if(!this.GetOverlap(T.Pt.X,D.Pt.X,q.Pt.X,Y.Pt.X,Ye))return!1;var Ve=Ye.Left,ct=Ye.Right,Dt=new e.IntPoint0,Kt;return T.Pt.X>=Ve&&T.Pt.X<=ct?(Dt.X=T.Pt.X,Dt.Y=T.Pt.Y,e.use_xyz&&(Dt.Z=T.Pt.Z),Kt=T.Pt.X>D.Pt.X):q.Pt.X>=Ve&&q.Pt.X<=ct?(Dt.X=q.Pt.X,Dt.Y=q.Pt.Y,e.use_xyz&&(Dt.Z=q.Pt.Z),Kt=q.Pt.X>Y.Pt.X):D.Pt.X>=Ve&&D.Pt.X<=ct?(Dt.X=D.Pt.X,Dt.Y=D.Pt.Y,e.use_xyz&&(Dt.Z=D.Pt.Z),Kt=D.Pt.X>T.Pt.X):(Dt.X=Y.Pt.X,Dt.Y=Y.Pt.Y,e.use_xyz&&(Dt.Z=Y.Pt.Z),Kt=Y.Pt.X>q.Pt.X),c.OutPt1=T,c.OutPt2=q,this.JoinHorz(T,D,q,Y,Dt,Kt)}else{for(D=T.Next;e.IntPoint.op_Equality(D.Pt,T.Pt)&&D!==T;)D=D.Next;var Vt=D.Pt.Y>T.Pt.Y||!e.ClipperBase.SlopesEqual4(T.Pt,D.Pt,c.OffPt,this.m_UseFullRange);if(Vt){for(D=T.Prev;e.IntPoint.op_Equality(D.Pt,T.Pt)&&D!==T;)D=D.Prev;if(D.Pt.Y>T.Pt.Y||!e.ClipperBase.SlopesEqual4(T.Pt,D.Pt,c.OffPt,this.m_UseFullRange))return!1}for(Y=q.Next;e.IntPoint.op_Equality(Y.Pt,q.Pt)&&Y!==q;)Y=Y.Next;var Sn=Y.Pt.Y>q.Pt.Y||!e.ClipperBase.SlopesEqual4(q.Pt,Y.Pt,c.OffPt,this.m_UseFullRange);if(Sn){for(Y=q.Prev;e.IntPoint.op_Equality(Y.Pt,q.Pt)&&Y!==q;)Y=Y.Prev;if(Y.Pt.Y>q.Pt.Y||!e.ClipperBase.SlopesEqual4(q.Pt,Y.Pt,c.OffPt,this.m_UseFullRange))return!1}return D===T||Y===q||D===Y||d===_&&Vt===Sn?!1:Vt?(D=this.DupOutPt(T,!1),Y=this.DupOutPt(q,!0),T.Prev=q,q.Next=T,D.Next=Y,Y.Prev=D,c.OutPt1=T,c.OutPt2=D,!0):(D=this.DupOutPt(T,!0),Y=this.DupOutPt(q,!1),T.Next=q,q.Prev=T,D.Prev=Y,Y.Next=D,c.OutPt1=T,c.OutPt2=D,!0)}},e.Clipper.GetBounds=function(c){for(var d=0,_=c.length;d<_&&c[d].length===0;)d++;if(d===_)return new e.IntRect(0,0,0,0);var T=new e.IntRect;for(T.left=c[d][0].X,T.right=T.left,T.top=c[d][0].Y,T.bottom=T.top;d<_;d++)for(var D=0,q=c[d].length;D<q;D++)c[d][D].X<T.left?T.left=c[d][D].X:c[d][D].X>T.right&&(T.right=c[d][D].X),c[d][D].Y<T.top?T.top=c[d][D].Y:c[d][D].Y>T.bottom&&(T.bottom=c[d][D].Y);return T},e.Clipper.prototype.GetBounds2=function(c){var d=c,_=new e.IntRect;for(_.left=c.Pt.X,_.right=c.Pt.X,_.top=c.Pt.Y,_.bottom=c.Pt.Y,c=c.Next;c!==d;)c.Pt.X<_.left&&(_.left=c.Pt.X),c.Pt.X>_.right&&(_.right=c.Pt.X),c.Pt.Y<_.top&&(_.top=c.Pt.Y),c.Pt.Y>_.bottom&&(_.bottom=c.Pt.Y),c=c.Next;return _},e.Clipper.PointInPolygon=function(c,d){var _=0,T=d.length;if(T<3)return 0;for(var D=d[0],q=1;q<=T;++q){var Y=q===T?d[0]:d[q];if(Y.Y===c.Y&&(Y.X===c.X||D.Y===c.Y&&Y.X>c.X==D.X<c.X))return-1;if(D.Y<c.Y!=Y.Y<c.Y){if(D.X>=c.X)if(Y.X>c.X)_=1-_;else{var ce=(D.X-c.X)*(Y.Y-c.Y)-(Y.X-c.X)*(D.Y-c.Y);if(ce===0)return-1;ce>0==Y.Y>D.Y&&(_=1-_)}else if(Y.X>c.X){var ce=(D.X-c.X)*(Y.Y-c.Y)-(Y.X-c.X)*(D.Y-c.Y);if(ce===0)return-1;ce>0==Y.Y>D.Y&&(_=1-_)}}D=Y}return _},e.Clipper.prototype.PointInPolygon=function(c,d){var _=0,T=d,D=c.X,q=c.Y,Y=d.Pt.X,ce=d.Pt.Y;do{d=d.Next;var ue=d.Pt.X,Ce=d.Pt.Y;if(Ce===q&&(ue===D||ce===q&&ue>D==Y<D))return-1;if(ce<q!=Ce<q){if(Y>=D)if(ue>D)_=1-_;else{var Ye=(Y-D)*(Ce-q)-(ue-D)*(ce-q);if(Ye===0)return-1;Ye>0==Ce>ce&&(_=1-_)}else if(ue>D){var Ye=(Y-D)*(Ce-q)-(ue-D)*(ce-q);if(Ye===0)return-1;Ye>0==Ce>ce&&(_=1-_)}}Y=ue,ce=Ce}while(T!==d);return _},e.Clipper.prototype.Poly2ContainsPoly1=function(c,d){var _=c;do{var T=this.PointInPolygon(_.Pt,d);if(T>=0)return T>0;_=_.Next}while(_!==c);return!0},e.Clipper.prototype.FixupFirstLefts1=function(c,d){for(var _,T,D=0,q=this.m_PolyOuts.length;D<q;D++)_=this.m_PolyOuts[D],T=e.Clipper.ParseFirstLeft(_.FirstLeft),_.Pts!==null&&T===c&&this.Poly2ContainsPoly1(_.Pts,d.Pts)&&(_.FirstLeft=d)},e.Clipper.prototype.FixupFirstLefts2=function(c,d){for(var _=d.FirstLeft,T,D,q=0,Y=this.m_PolyOuts.length;q<Y;q++)T=this.m_PolyOuts[q],!(T.Pts===null||T===d||T===c)&&(D=e.Clipper.ParseFirstLeft(T.FirstLeft),!(D!==_&&D!==c&&D!==d)&&(this.Poly2ContainsPoly1(T.Pts,c.Pts)?T.FirstLeft=c:this.Poly2ContainsPoly1(T.Pts,d.Pts)?T.FirstLeft=d:(T.FirstLeft===c||T.FirstLeft===d)&&(T.FirstLeft=_)))},e.Clipper.prototype.FixupFirstLefts3=function(c,d){for(var _,T,D=0,q=this.m_PolyOuts.length;D<q;D++)_=this.m_PolyOuts[D],T=e.Clipper.ParseFirstLeft(_.FirstLeft),_.Pts!==null&&T===c&&(_.FirstLeft=d)},e.Clipper.ParseFirstLeft=function(c){for(;c!==null&&c.Pts===null;)c=c.FirstLeft;return c},e.Clipper.prototype.JoinCommonEdges=function(){for(var c=0,d=this.m_Joins.length;c<d;c++){var _=this.m_Joins[c],T=this.GetOutRec(_.OutPt1.Idx),D=this.GetOutRec(_.OutPt2.Idx);if(!(T.Pts===null||D.Pts===null)&&!(T.IsOpen||D.IsOpen)){var q;T===D?q=T:this.OutRec1RightOfOutRec2(T,D)?q=D:this.OutRec1RightOfOutRec2(D,T)?q=T:q=this.GetLowermostRec(T,D),this.JoinPoints(_,T,D)&&(T===D?(T.Pts=_.OutPt1,T.BottomPt=null,D=this.CreateOutRec(),D.Pts=_.OutPt2,this.UpdateOutPtIdxs(D),this.Poly2ContainsPoly1(D.Pts,T.Pts)?(D.IsHole=!T.IsHole,D.FirstLeft=T,this.m_UsingPolyTree&&this.FixupFirstLefts2(D,T),(D.IsHole^this.ReverseSolution)==this.Area$1(D)>0&&this.ReversePolyPtLinks(D.Pts)):this.Poly2ContainsPoly1(T.Pts,D.Pts)?(D.IsHole=T.IsHole,T.IsHole=!D.IsHole,D.FirstLeft=T.FirstLeft,T.FirstLeft=D,this.m_UsingPolyTree&&this.FixupFirstLefts2(T,D),(T.IsHole^this.ReverseSolution)==this.Area$1(T)>0&&this.ReversePolyPtLinks(T.Pts)):(D.IsHole=T.IsHole,D.FirstLeft=T.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(T,D))):(D.Pts=null,D.BottomPt=null,D.Idx=T.Idx,T.IsHole=q.IsHole,q===D&&(T.FirstLeft=D.FirstLeft),D.FirstLeft=T,this.m_UsingPolyTree&&this.FixupFirstLefts3(D,T)))}}},e.Clipper.prototype.UpdateOutPtIdxs=function(c){var d=c.Pts;do d.Idx=c.Idx,d=d.Prev;while(d!==c.Pts)},e.Clipper.prototype.DoSimplePolygons=function(){for(var c=0;c<this.m_PolyOuts.length;){var d=this.m_PolyOuts[c++],_=d.Pts;if(!(_===null||d.IsOpen))do{for(var T=_.Next;T!==d.Pts;){if(e.IntPoint.op_Equality(_.Pt,T.Pt)&&T.Next!==_&&T.Prev!==_){var D=_.Prev,q=T.Prev;_.Prev=q,q.Next=_,T.Prev=D,D.Next=T,d.Pts=_;var Y=this.CreateOutRec();Y.Pts=T,this.UpdateOutPtIdxs(Y),this.Poly2ContainsPoly1(Y.Pts,d.Pts)?(Y.IsHole=!d.IsHole,Y.FirstLeft=d,this.m_UsingPolyTree&&this.FixupFirstLefts2(Y,d)):this.Poly2ContainsPoly1(d.Pts,Y.Pts)?(Y.IsHole=d.IsHole,d.IsHole=!Y.IsHole,Y.FirstLeft=d.FirstLeft,d.FirstLeft=Y,this.m_UsingPolyTree&&this.FixupFirstLefts2(d,Y)):(Y.IsHole=d.IsHole,Y.FirstLeft=d.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(d,Y)),T=_}T=T.Next}_=_.Next}while(_!==d.Pts)}},e.Clipper.Area=function(c){if(!Array.isArray(c))return 0;var d=c.length;if(d<3)return 0;for(var _=0,T=0,D=d-1;T<d;++T)_+=(c[D].X+c[T].X)*(c[D].Y-c[T].Y),D=T;return-_*.5},e.Clipper.prototype.Area=function(c){var d=c;if(c===null)return 0;var _=0;do _=_+(c.Prev.Pt.X+c.Pt.X)*(c.Prev.Pt.Y-c.Pt.Y),c=c.Next;while(c!==d);return _*.5},e.Clipper.prototype.Area$1=function(c){return this.Area(c.Pts)},e.Clipper.SimplifyPolygon=function(c,d){var _=new Array,T=new e.Clipper(0);return T.StrictlySimple=!0,T.AddPath(c,e.PolyType.ptSubject,!0),T.Execute(e.ClipType.ctUnion,_,d,d),_},e.Clipper.SimplifyPolygons=function(c,d){typeof d>"u"&&(d=e.PolyFillType.pftEvenOdd);var _=new Array,T=new e.Clipper(0);return T.StrictlySimple=!0,T.AddPaths(c,e.PolyType.ptSubject,!0),T.Execute(e.ClipType.ctUnion,_,d,d),_},e.Clipper.DistanceSqrd=function(c,d){var _=c.X-d.X,T=c.Y-d.Y;return _*_+T*T},e.Clipper.DistanceFromLineSqrd=function(c,d,_){var T=d.Y-_.Y,D=_.X-d.X,q=T*d.X+D*d.Y;return q=T*c.X+D*c.Y-q,q*q/(T*T+D*D)},e.Clipper.SlopesNearCollinear=function(c,d,_,T){return Math.abs(c.X-d.X)>Math.abs(c.Y-d.Y)?c.X>d.X==c.X<_.X?e.Clipper.DistanceFromLineSqrd(c,d,_)<T:d.X>c.X==d.X<_.X?e.Clipper.DistanceFromLineSqrd(d,c,_)<T:e.Clipper.DistanceFromLineSqrd(_,c,d)<T:c.Y>d.Y==c.Y<_.Y?e.Clipper.DistanceFromLineSqrd(c,d,_)<T:d.Y>c.Y==d.Y<_.Y?e.Clipper.DistanceFromLineSqrd(d,c,_)<T:e.Clipper.DistanceFromLineSqrd(_,c,d)<T},e.Clipper.PointsAreClose=function(c,d,_){var T=c.X-d.X,D=c.Y-d.Y;return T*T+D*D<=_},e.Clipper.ExcludeOp=function(c){var d=c.Prev;return d.Next=c.Next,c.Next.Prev=d,d.Idx=0,d},e.Clipper.CleanPolygon=function(c,d){typeof d>"u"&&(d=1.415);var _=c.length;if(_===0)return new Array;for(var T=new Array(_),D=0;D<_;++D)T[D]=new e.OutPt;for(var D=0;D<_;++D)T[D].Pt=c[D],T[D].Next=T[(D+1)%_],T[D].Next.Prev=T[D],T[D].Idx=0;for(var q=d*d,Y=T[0];Y.Idx===0&&Y.Next!==Y.Prev;)e.Clipper.PointsAreClose(Y.Pt,Y.Prev.Pt,q)?(Y=e.Clipper.ExcludeOp(Y),_--):e.Clipper.PointsAreClose(Y.Prev.Pt,Y.Next.Pt,q)?(e.Clipper.ExcludeOp(Y.Next),Y=e.Clipper.ExcludeOp(Y),_-=2):e.Clipper.SlopesNearCollinear(Y.Prev.Pt,Y.Pt,Y.Next.Pt,q)?(Y=e.Clipper.ExcludeOp(Y),_--):(Y.Idx=1,Y=Y.Next);_<3&&(_=0);for(var ce=new Array(_),D=0;D<_;++D)ce[D]=new e.IntPoint1(Y.Pt),Y=Y.Next;return T=null,ce},e.Clipper.CleanPolygons=function(c,d){for(var _=new Array(c.length),T=0,D=c.length;T<D;T++)_[T]=e.Clipper.CleanPolygon(c[T],d);return _},e.Clipper.Minkowski=function(c,d,_,T){var D=T?1:0,q=c.length,Y=d.length,ce=new Array;if(_)for(var ue=0;ue<Y;ue++){for(var Ce=new Array(q),Ye=0,Ve=c.length,ct=c[Ye];Ye<Ve;Ye++,ct=c[Ye])Ce[Ye]=new e.IntPoint2(d[ue].X+ct.X,d[ue].Y+ct.Y);ce.push(Ce)}else for(var ue=0;ue<Y;ue++){for(var Ce=new Array(q),Ye=0,Ve=c.length,ct=c[Ye];Ye<Ve;Ye++,ct=c[Ye])Ce[Ye]=new e.IntPoint2(d[ue].X-ct.X,d[ue].Y-ct.Y);ce.push(Ce)}for(var Dt=new Array,ue=0;ue<Y-1+D;ue++)for(var Ye=0;Ye<q;Ye++){var Kt=new Array;Kt.push(ce[ue%Y][Ye%q]),Kt.push(ce[(ue+1)%Y][Ye%q]),Kt.push(ce[(ue+1)%Y][(Ye+1)%q]),Kt.push(ce[ue%Y][(Ye+1)%q]),e.Clipper.Orientation(Kt)||Kt.reverse(),Dt.push(Kt)}return Dt},e.Clipper.MinkowskiSum=function(c,d,_){if(d[0]instanceof Array){for(var D=d,Y=new e.Paths,q=new e.Clipper,ce=0;ce<D.length;++ce){var ue=e.Clipper.Minkowski(c,D[ce],!0,_);if(q.AddPaths(ue,e.PolyType.ptSubject,!0),_){var T=e.Clipper.TranslatePath(D[ce],c[0]);q.AddPath(T,e.PolyType.ptClip,!0)}}return q.Execute(e.ClipType.ctUnion,Y,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),Y}else{var T=d,D=e.Clipper.Minkowski(c,T,!0,_),q=new e.Clipper;return q.AddPaths(D,e.PolyType.ptSubject,!0),q.Execute(e.ClipType.ctUnion,D,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),D}},e.Clipper.TranslatePath=function(c,d){for(var _=new e.Path,T=0;T<c.length;T++)_.push(new e.IntPoint2(c[T].X+d.X,c[T].Y+d.Y));return _},e.Clipper.MinkowskiDiff=function(c,d){var _=e.Clipper.Minkowski(c,d,!1,!0),T=new e.Clipper;return T.AddPaths(_,e.PolyType.ptSubject,!0),T.Execute(e.ClipType.ctUnion,_,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),_},e.Clipper.PolyTreeToPaths=function(c){var d=new Array;return e.Clipper.AddPolyNodeToPaths(c,e.Clipper.NodeType.ntAny,d),d},e.Clipper.AddPolyNodeToPaths=function(c,d,_){var T=!0;switch(d){case e.Clipper.NodeType.ntOpen:return;case e.Clipper.NodeType.ntClosed:T=!c.IsOpen;break}c.m_polygon.length>0&&T&&_.push(c.m_polygon);for(var D=0,q=c.Childs(),Y=q.length,ce=q[D];D<Y;D++,ce=q[D])e.Clipper.AddPolyNodeToPaths(ce,d,_)},e.Clipper.OpenPathsFromPolyTree=function(c){for(var d=new e.Paths,_=0,T=c.ChildCount();_<T;_++)c.Childs()[_].IsOpen&&d.push(c.Childs()[_].m_polygon);return d},e.Clipper.ClosedPathsFromPolyTree=function(c){var d=new e.Paths;return e.Clipper.AddPolyNodeToPaths(c,e.Clipper.NodeType.ntClosed,d),d},Nt(e.Clipper,e.ClipperBase),e.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},e.ClipperOffset=function(c,d){typeof c>"u"&&(c=2),typeof d>"u"&&(d=e.ClipperOffset.def_arc_tolerance),this.m_destPolys=new e.Paths,this.m_srcPoly=new e.Path,this.m_destPoly=new e.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new e.IntPoint0,this.m_polyNodes=new e.PolyNode,this.MiterLimit=c,this.ArcTolerance=d,this.m_lowest.X=-1},e.ClipperOffset.two_pi=6.28318530717959,e.ClipperOffset.def_arc_tolerance=.25,e.ClipperOffset.prototype.Clear=function(){e.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},e.ClipperOffset.Round=e.Clipper.Round,e.ClipperOffset.prototype.AddPath=function(c,d,_){var T=c.length-1;if(!(T<0)){var D=new e.PolyNode;if(D.m_jointype=d,D.m_endtype=_,_===e.EndType.etClosedLine||_===e.EndType.etClosedPolygon)for(;T>0&&e.IntPoint.op_Equality(c[0],c[T]);)T--;D.m_polygon.push(c[0]);for(var q=0,Y=0,ce=1;ce<=T;ce++)e.IntPoint.op_Inequality(D.m_polygon[q],c[ce])&&(q++,D.m_polygon.push(c[ce]),(c[ce].Y>D.m_polygon[Y].Y||c[ce].Y===D.m_polygon[Y].Y&&c[ce].X<D.m_polygon[Y].X)&&(Y=q));if(!(_===e.EndType.etClosedPolygon&&q<2)&&(this.m_polyNodes.AddChild(D),_===e.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new e.IntPoint2(this.m_polyNodes.ChildCount()-1,Y);else{var ue=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(D.m_polygon[Y].Y>ue.Y||D.m_polygon[Y].Y===ue.Y&&D.m_polygon[Y].X<ue.X)&&(this.m_lowest=new e.IntPoint2(this.m_polyNodes.ChildCount()-1,Y))}}},e.ClipperOffset.prototype.AddPaths=function(c,d,_){for(var T=0,D=c.length;T<D;T++)this.AddPath(c[T],d,_)},e.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!e.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var c=0;c<this.m_polyNodes.ChildCount();c++){var d=this.m_polyNodes.Childs()[c];(d.m_endtype===e.EndType.etClosedPolygon||d.m_endtype===e.EndType.etClosedLine&&e.Clipper.Orientation(d.m_polygon))&&d.m_polygon.reverse()}else for(var c=0;c<this.m_polyNodes.ChildCount();c++){var d=this.m_polyNodes.Childs()[c];d.m_endtype===e.EndType.etClosedLine&&!e.Clipper.Orientation(d.m_polygon)&&d.m_polygon.reverse()}},e.ClipperOffset.GetUnitNormal=function(c,d){var _=d.X-c.X,T=d.Y-c.Y;if(_===0&&T===0)return new e.DoublePoint2(0,0);var D=1/Math.sqrt(_*_+T*T);return _*=D,T*=D,new e.DoublePoint2(T,-_)},e.ClipperOffset.prototype.DoOffset=function(c){if(this.m_destPolys=new Array,this.m_delta=c,e.ClipperBase.near_zero(c)){for(var d=0;d<this.m_polyNodes.ChildCount();d++){var _=this.m_polyNodes.Childs()[d];_.m_endtype===e.EndType.etClosedPolygon&&this.m_destPolys.push(_.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var T;this.ArcTolerance<=0?T=e.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(c)*e.ClipperOffset.def_arc_tolerance?T=Math.abs(c)*e.ClipperOffset.def_arc_tolerance:T=this.ArcTolerance;var D=3.14159265358979/Math.acos(1-T/Math.abs(c));this.m_sin=Math.sin(e.ClipperOffset.two_pi/D),this.m_cos=Math.cos(e.ClipperOffset.two_pi/D),this.m_StepsPerRad=D/e.ClipperOffset.two_pi,c<0&&(this.m_sin=-this.m_sin);for(var d=0;d<this.m_polyNodes.ChildCount();d++){var _=this.m_polyNodes.Childs()[d];this.m_srcPoly=_.m_polygon;var q=this.m_srcPoly.length;if(!(q===0||c<=0&&(q<3||_.m_endtype!==e.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,q===1){if(_.m_jointype===e.JoinType.jtRound)for(var Y=1,ce=0,ue=1;ue<=D;ue++){this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[0].X+Y*c),e.ClipperOffset.Round(this.m_srcPoly[0].Y+ce*c)));var Ce=Y;Y=Y*this.m_cos-this.m_sin*ce,ce=Ce*this.m_sin+ce*this.m_cos}else for(var Y=-1,ce=-1,ue=0;ue<4;++ue)this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[0].X+Y*c),e.ClipperOffset.Round(this.m_srcPoly[0].Y+ce*c))),Y<0?Y=1:ce<0?ce=1:Y=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var ue=0;ue<q-1;ue++)this.m_normals.push(e.ClipperOffset.GetUnitNormal(this.m_srcPoly[ue],this.m_srcPoly[ue+1]));if(_.m_endtype===e.EndType.etClosedLine||_.m_endtype===e.EndType.etClosedPolygon?this.m_normals.push(e.ClipperOffset.GetUnitNormal(this.m_srcPoly[q-1],this.m_srcPoly[0])):this.m_normals.push(new e.DoublePoint1(this.m_normals[q-2])),_.m_endtype===e.EndType.etClosedPolygon){for(var Ye=q-1,ue=0;ue<q;ue++)Ye=this.OffsetPoint(ue,Ye,_.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(_.m_endtype===e.EndType.etClosedLine){for(var Ye=q-1,ue=0;ue<q;ue++)Ye=this.OffsetPoint(ue,Ye,_.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var Ve=this.m_normals[q-1],ue=q-1;ue>0;ue--)this.m_normals[ue]=new e.DoublePoint2(-this.m_normals[ue-1].X,-this.m_normals[ue-1].Y);this.m_normals[0]=new e.DoublePoint2(-Ve.X,-Ve.Y),Ye=0;for(var ue=q-1;ue>=0;ue--)Ye=this.OffsetPoint(ue,Ye,_.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var Ye=0,ue=1;ue<q-1;++ue)Ye=this.OffsetPoint(ue,Ye,_.m_jointype);var ct;if(_.m_endtype===e.EndType.etOpenButt){var ue=q-1;ct=new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[ue].X+this.m_normals[ue].X*c),e.ClipperOffset.Round(this.m_srcPoly[ue].Y+this.m_normals[ue].Y*c)),this.m_destPoly.push(ct),ct=new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[ue].X-this.m_normals[ue].X*c),e.ClipperOffset.Round(this.m_srcPoly[ue].Y-this.m_normals[ue].Y*c)),this.m_destPoly.push(ct)}else{var ue=q-1;Ye=q-2,this.m_sinA=0,this.m_normals[ue]=new e.DoublePoint2(-this.m_normals[ue].X,-this.m_normals[ue].Y),_.m_endtype===e.EndType.etOpenSquare?this.DoSquare(ue,Ye):this.DoRound(ue,Ye)}for(var ue=q-1;ue>0;ue--)this.m_normals[ue]=new e.DoublePoint2(-this.m_normals[ue-1].X,-this.m_normals[ue-1].Y);this.m_normals[0]=new e.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),Ye=q-1;for(var ue=Ye-1;ue>0;--ue)Ye=this.OffsetPoint(ue,Ye,_.m_jointype);_.m_endtype===e.EndType.etOpenButt?(ct=new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*c),e.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*c)),this.m_destPoly.push(ct),ct=new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*c),e.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*c)),this.m_destPoly.push(ct)):(Ye=1,this.m_sinA=0,_.m_endtype===e.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},e.ClipperOffset.prototype.Execute=function(){var c=arguments,d=c[0]instanceof e.PolyTree;if(d){var _=c[0],T=c[1];_.Clear(),this.FixOrientations(),this.DoOffset(T);var D=new e.Clipper(0);if(D.AddPaths(this.m_destPolys,e.PolyType.ptSubject,!0),T>0)D.Execute(e.ClipType.ctUnion,_,e.PolyFillType.pftPositive,e.PolyFillType.pftPositive);else{var q=e.Clipper.GetBounds(this.m_destPolys),Y=new e.Path;if(Y.push(new e.IntPoint2(q.left-10,q.bottom+10)),Y.push(new e.IntPoint2(q.right+10,q.bottom+10)),Y.push(new e.IntPoint2(q.right+10,q.top-10)),Y.push(new e.IntPoint2(q.left-10,q.top-10)),D.AddPath(Y,e.PolyType.ptSubject,!0),D.ReverseSolution=!0,D.Execute(e.ClipType.ctUnion,_,e.PolyFillType.pftNegative,e.PolyFillType.pftNegative),_.ChildCount()===1&&_.Childs()[0].ChildCount()>0){var ce=_.Childs()[0];_.Childs()[0]=ce.Childs()[0],_.Childs()[0].m_Parent=_;for(var ue=1;ue<ce.ChildCount();ue++)_.AddChild(ce.Childs()[ue])}else _.Clear()}}else{var _=c[0],T=c[1];e.Clear(_),this.FixOrientations(),this.DoOffset(T);var D=new e.Clipper(0);if(D.AddPaths(this.m_destPolys,e.PolyType.ptSubject,!0),T>0)D.Execute(e.ClipType.ctUnion,_,e.PolyFillType.pftPositive,e.PolyFillType.pftPositive);else{var q=e.Clipper.GetBounds(this.m_destPolys),Y=new e.Path;Y.push(new e.IntPoint2(q.left-10,q.bottom+10)),Y.push(new e.IntPoint2(q.right+10,q.bottom+10)),Y.push(new e.IntPoint2(q.right+10,q.top-10)),Y.push(new e.IntPoint2(q.left-10,q.top-10)),D.AddPath(Y,e.PolyType.ptSubject,!0),D.ReverseSolution=!0,D.Execute(e.ClipType.ctUnion,_,e.PolyFillType.pftNegative,e.PolyFillType.pftNegative),_.length>0&&_.splice(0,1)}}},e.ClipperOffset.prototype.OffsetPoint=function(c,d,_){if(this.m_sinA=this.m_normals[d].X*this.m_normals[c].Y-this.m_normals[c].X*this.m_normals[d].Y,Math.abs(this.m_sinA*this.m_delta)<1){var T=this.m_normals[d].X*this.m_normals[c].X+this.m_normals[c].Y*this.m_normals[d].Y;if(T>0)return this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[c].X+this.m_normals[d].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[c].Y+this.m_normals[d].Y*this.m_delta))),d}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[c].X+this.m_normals[d].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[c].Y+this.m_normals[d].Y*this.m_delta))),this.m_destPoly.push(new e.IntPoint1(this.m_srcPoly[c])),this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[c].X+this.m_normals[c].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[c].Y+this.m_normals[c].Y*this.m_delta)));else switch(_){case e.JoinType.jtMiter:{var D=1+(this.m_normals[c].X*this.m_normals[d].X+this.m_normals[c].Y*this.m_normals[d].Y);D>=this.m_miterLim?this.DoMiter(c,d,D):this.DoSquare(c,d);break}case e.JoinType.jtSquare:this.DoSquare(c,d);break;case e.JoinType.jtRound:this.DoRound(c,d);break}return d=c,d},e.ClipperOffset.prototype.DoSquare=function(c,d){var _=Math.tan(Math.atan2(this.m_sinA,this.m_normals[d].X*this.m_normals[c].X+this.m_normals[d].Y*this.m_normals[c].Y)/4);this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[c].X+this.m_delta*(this.m_normals[d].X-this.m_normals[d].Y*_)),e.ClipperOffset.Round(this.m_srcPoly[c].Y+this.m_delta*(this.m_normals[d].Y+this.m_normals[d].X*_)))),this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[c].X+this.m_delta*(this.m_normals[c].X+this.m_normals[c].Y*_)),e.ClipperOffset.Round(this.m_srcPoly[c].Y+this.m_delta*(this.m_normals[c].Y-this.m_normals[c].X*_))))},e.ClipperOffset.prototype.DoMiter=function(c,d,_){var T=this.m_delta/_;this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[c].X+(this.m_normals[d].X+this.m_normals[c].X)*T),e.ClipperOffset.Round(this.m_srcPoly[c].Y+(this.m_normals[d].Y+this.m_normals[c].Y)*T)))},e.ClipperOffset.prototype.DoRound=function(c,d){for(var _=Math.atan2(this.m_sinA,this.m_normals[d].X*this.m_normals[c].X+this.m_normals[d].Y*this.m_normals[c].Y),T=Math.max(e.Cast_Int32(e.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(_))),1),D=this.m_normals[d].X,q=this.m_normals[d].Y,Y,ce=0;ce<T;++ce)this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[c].X+D*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[c].Y+q*this.m_delta))),Y=D,D=D*this.m_cos-this.m_sin*q,q=Y*this.m_sin+q*this.m_cos;this.m_destPoly.push(new e.IntPoint2(e.ClipperOffset.Round(this.m_srcPoly[c].X+this.m_normals[c].X*this.m_delta),e.ClipperOffset.Round(this.m_srcPoly[c].Y+this.m_normals[c].Y*this.m_delta)))},e.Error=function(c){try{throw new Error(c)}catch(d){alert(d.message)}},e.JS={},e.JS.AreaOfPolygon=function(c,d){return d||(d=1),e.Clipper.Area(c)/(d*d)},e.JS.AreaOfPolygons=function(c,d){d||(d=1);for(var _=0,T=0;T<c.length;T++)_+=e.Clipper.Area(c[T]);return _/(d*d)},e.JS.BoundsOfPath=function(c,d){return e.JS.BoundsOfPaths([c],d)},e.JS.BoundsOfPaths=function(c,d){d||(d=1);var _=e.Clipper.GetBounds(c);return _.left/=d,_.bottom/=d,_.right/=d,_.top/=d,_},e.JS.Clean=function(T,d){if(!(T instanceof Array))return[];var _=T[0]instanceof Array,T=e.JS.Clone(T);if(typeof d!="number"||d===null)return e.Error("Delta is not a number in Clean()."),T;if(T.length===0||T.length===1&&T[0].length===0||d<0)return T;_||(T=[T]);for(var D=T.length,q,Y,ce,ue,Ce,Ye,Ve,ct=[],Dt=0;Dt<D;Dt++)if(Y=T[Dt],q=Y.length,q!==0){if(q<3){ce=Y,ct.push(ce);continue}for(ce=Y,ue=d*d,Ce=Y[0],Ye=1,Ve=1;Ve<q;Ve++)(Y[Ve].X-Ce.X)*(Y[Ve].X-Ce.X)+(Y[Ve].Y-Ce.Y)*(Y[Ve].Y-Ce.Y)<=ue||(ce[Ye]=Y[Ve],Ce=Y[Ve],Ye++);Ce=Y[Ye-1],(Y[0].X-Ce.X)*(Y[0].X-Ce.X)+(Y[0].Y-Ce.Y)*(Y[0].Y-Ce.Y)<=ue&&Ye--,Ye<q&&ce.splice(Ye,q-Ye),ce.length&&ct.push(ce)}return!_&&ct.length?ct=ct[0]:!_&&ct.length===0?ct=[]:_&&ct.length===0&&(ct=[[]]),ct},e.JS.Clone=function(c){if(!(c instanceof Array))return[];if(c.length===0)return[];if(c.length===1&&c[0].length===0)return[[]];var d=c[0]instanceof Array;d||(c=[c]);var _=c.length,T,D,q,Y,ce=new Array(_);for(D=0;D<_;D++){for(T=c[D].length,Y=new Array(T),q=0;q<T;q++)Y[q]={X:c[D][q].X,Y:c[D][q].Y};ce[D]=Y}return d||(ce=ce[0]),ce},e.JS.Lighten=function(c,d){if(!(c instanceof Array))return[];if(typeof d!="number"||d===null)return e.Error("Tolerance is not a number in Lighten()."),e.JS.Clone(c);if(c.length===0||c.length===1&&c[0].length===0||d<0)return e.JS.Clone(c);var _=c[0]instanceof Array;_||(c=[c]);var T,D,q,Y,ce,ue,Ce,Ye,Ve,ct,Dt,Kt,Vt,Sn,Er,_i,Vn,wg=c.length,bf=d*d,ma=[];for(T=0;T<wg;T++)if(q=c[T],ue=q.length,ue!==0){for(Y=0;Y<1e6;Y++){for(ce=[],ue=q.length,q[ue-1].X!==q[0].X||q[ue-1].Y!==q[0].Y?(Kt=1,q.push({X:q[0].X,Y:q[0].Y}),ue=q.length):Kt=0,Dt=[],D=0;D<ue-2;D++)Ce=q[D],Ve=q[D+1],Ye=q[D+2],_i=Ce.X,Vn=Ce.Y,Vt=Ye.X-_i,Sn=Ye.Y-Vn,(Vt!==0||Sn!==0)&&(Er=((Ve.X-_i)*Vt+(Ve.Y-Vn)*Sn)/(Vt*Vt+Sn*Sn),Er>1?(_i=Ye.X,Vn=Ye.Y):Er>0&&(_i+=Vt*Er,Vn+=Sn*Er)),Vt=Ve.X-_i,Sn=Ve.Y-Vn,ct=Vt*Vt+Sn*Sn,ct<=bf&&(Dt[D+1]=1,D++);for(ce.push({X:q[0].X,Y:q[0].Y}),D=1;D<ue-1;D++)Dt[D]||ce.push({X:q[D].X,Y:q[D].Y});if(ce.push({X:q[ue-1].X,Y:q[ue-1].Y}),Kt&&q.pop(),Dt.length)q=ce;else break}ue=ce.length,ce[ue-1].X===ce[0].X&&ce[ue-1].Y===ce[0].Y&&ce.pop(),ce.length>2&&ma.push(ce)}return _||(ma=ma[0]),typeof ma>"u"&&(ma=[]),ma},e.JS.PerimeterOfPath=function(c,d,_){if(typeof c>"u")return 0;var T=Math.sqrt,D=0,q,Y,ce=0,ue=0,Ce=0,Ye=0,Ve=c.length;if(Ve<2)return 0;for(d&&(c[Ve]=c[0],Ve++);--Ve;)q=c[Ve],ce=q.X,ue=q.Y,Y=c[Ve-1],Ce=Y.X,Ye=Y.Y,D+=T((ce-Ce)*(ce-Ce)+(ue-Ye)*(ue-Ye));return d&&c.pop(),D/_},e.JS.PerimeterOfPaths=function(c,d,_){_||(_=1);for(var T=0,D=0;D<c.length;D++)T+=e.JS.PerimeterOfPath(c[D],d,_);return T},e.JS.ScaleDownPath=function(c,d){var _,T;for(d||(d=1),_=c.length;_--;)T=c[_],T.X=T.X/d,T.Y=T.Y/d},e.JS.ScaleDownPaths=function(c,d){var _,T,D;for(d||(d=1),_=c.length;_--;)for(T=c[_].length;T--;)D=c[_][T],D.X=D.X/d,D.Y=D.Y/d},e.JS.ScaleUpPath=function(c,d){var _,T,D=Math.round;for(d||(d=1),_=c.length;_--;)T=c[_],T.X=D(T.X*d),T.Y=D(T.Y*d)},e.JS.ScaleUpPaths=function(c,d){var _,T,D,q=Math.round;for(d||(d=1),_=c.length;_--;)for(T=c[_].length;T--;)D=c[_][T],D.X=q(D.X*d),D.Y=q(D.Y*d)},e.ExPolygons=function(){return[]},e.ExPolygon=function(){this.outer=null,this.holes=null},e.JS.AddOuterPolyNodeToExPolygons=function(c,d){var _=new e.ExPolygon;_.outer=c.Contour();var T=c.Childs(),D=T.length;_.holes=new Array(D);var q,Y,ce,ue,Ce,Ye;for(ce=0;ce<D;ce++)for(q=T[ce],_.holes[ce]=q.Contour(),ue=0,Ce=q.Childs(),Ye=Ce.length;ue<Ye;ue++)Y=Ce[ue],e.JS.AddOuterPolyNodeToExPolygons(Y,d);d.push(_)},e.JS.ExPolygonsToPaths=function(c){var d,_,T,D,q=new e.Paths;for(d=0,T=c.length;d<T;d++)for(q.push(c[d].outer),_=0,D=c[d].holes.length;_<D;_++)q.push(c[d].holes[_]);return q},e.JS.PolyTreeToExPolygons=function(c){var d=new e.ExPolygons,_,T,D,q;for(T=0,D=c.Childs(),q=D.length;T<q;T++)_=D[T],e.JS.AddOuterPolyNodeToExPolygons(_,d);return d}})()})(yA);var fX=yA.exports;Object.defineProperty(jv,"__esModule",{value:!0});jv.setErrorCallback=void 0;var dX=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),hX=fX,Tn=pX(hX);function pX(t){return t&&t.__esModule?t:{default:t}}function Ew(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}function mX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var dx=void 0;jv.setErrorCallback=function(e){dx=e};Tn.default.Error=function(t){dx&&dx(t)};var Bf=new Tn.default.Clipper,Hc=new Tn.default.ClipperOffset,vX=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;mX(this,t),this.paths=e,r&&(this.paths=this.paths.map(yX)),i&&(this.paths=this.paths.map(Cw)),s&&(this.paths=this.paths.map(Tw)),this.closed=n}return dX(t,[{key:"_clip",value:function(n){var r=new Tn.default.PolyTree;Bf.Clear(),Bf.AddPaths(this.paths,Tn.default.PolyType.ptSubject,this.closed);for(var i=arguments.length,s=Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];for(var o=0;o<s.length;o++){var l=s[o];Bf.AddPaths(l.paths,Tn.default.PolyType.ptClip,l.closed)}Bf.Execute(n,r);var u=Tn.default.Clipper.PolyTreeToPaths(r);return new t(u,this.closed)}},{key:"union",value:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return this._clip.apply(this,[Tn.default.ClipType.ctUnion].concat(r))}},{key:"difference",value:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return this._clip.apply(this,[Tn.default.ClipType.ctDifference].concat(r))}},{key:"intersect",value:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return this._clip.apply(this,[Tn.default.ClipType.ctIntersection].concat(r))}},{key:"xor",value:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return this._clip.apply(this,[Tn.default.ClipType.ctXor].concat(r))}},{key:"offset",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.jointType,s=i===void 0?"jtSquare":i,a=r.endType,o=a===void 0?"etClosedPolygon":a,l=r.miterLimit,u=l===void 0?2:l,f=r.roundPrecision,h=f===void 0?.25:f;Hc.Clear(),Hc.ArcTolerance=h,Hc.MiterLimit=u;var p=new Tn.default.Paths;return Hc.AddPaths(this.paths,Tn.default.JoinType[s],Tn.default.EndType[o]),Hc.Execute(p,n),new t(p,!0)}},{key:"scaleUp",value:function(n){return Tn.default.JS.ScaleUpPaths(this.paths,n),this}},{key:"scaleDown",value:function(n){return Tn.default.JS.ScaleDownPaths(this.paths,n),this}},{key:"firstPoint",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.paths.length!==0){var r=this.paths[0],i=r[0];return n?hx(i):i}}},{key:"lastPoint",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.paths.length!==0){var r=this.paths[this.paths.length-1],i=this.closed?r[0]:r[r.length-1];return n?hx(i):i}}},{key:"areas",value:function(){var n=this,r=this.paths.map(function(i,s){return n.area(s)});return r}},{key:"area",value:function(n){var r=this.paths[n],i=Tn.default.Clipper.Area(r);return i}},{key:"totalArea",value:function(){return this.areas().reduce(function(n,r){return n+r},0)}},{key:"perimeter",value:function(n){var r=this.paths[n],i=Tn.default.JS.PerimeterOfPath(r,this.closed,1);return i}},{key:"perimeters",value:function(){var n=this;return this.paths.map(function(r){return Tn.default.JS.PerimeterOfPath(r,n.closed,1)})}},{key:"totalPerimeter",value:function(){var n=Tn.default.JS.PerimeterOfPaths(this.paths,this.closed);return n}},{key:"reverse",value:function(){return Tn.default.Clipper.ReversePaths(this.paths),this}},{key:"thresholdArea",value:function(n){for(var r=[].concat(Ew(this.paths)),i=0;i<r.length;i++){var s=r[i],a=Math.abs(Tn.default.Clipper.Area(s));if(a<n){var o=this.paths.indexOf(s);this.paths.splice(o,1)}}return this}},{key:"join",value:function(n){var r;return(r=this.paths).splice.apply(r,[this.paths.length,0].concat(Ew(n.paths))),this}},{key:"clone",value:function(){return new t(Tn.default.JS.Clone(this.paths),this.closed)}},{key:"shapeBounds",value:function(){return Tn.default.JS.BoundsOfPaths(this.paths)}},{key:"pathBounds",value:function(n){var r=this.paths[n];return Tn.default.JS.BoundsOfPath(r)}},{key:"clean",value:function(n){return new t(Tn.default.Clipper.CleanPolygons(this.paths,n),this.closed)}},{key:"orientation",value:function(n){var r=this.paths[n];return Tn.default.Clipper.Orientation(r)}},{key:"pointInShape",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;r&&(n=px(n)),i&&(n=mx(n));for(var s=0;s<this.paths.length;s++){var a=this.pointInPath(s,n),o=this.orientation(s);if(!a&&o||a&&!o)return!1}return!0}},{key:"pointInPath",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;i&&(r=px(r)),s&&(r=mx(r));var a=this.paths[n],o={X:Math.round(r.X),Y:Math.round(r.Y)};return Tn.default.Clipper.PointInPolygon(o,a)>0}},{key:"fixOrientation",value:function(){return this.closed?(this.totalArea()<0&&this.reverse(),this):this}},{key:"simplify",value:function(n){if(this.closed){var r=Tn.default.Clipper.SimplifyPolygons(this.paths,Tn.default.PolyFillType[n]);return new t(r,!0)}else return this}},{key:"separateShapes",value:function(){var n=[];if(this.closed){for(var u=new WeakMap,f=[],h=[],p=0;p<this.paths.length;p++){var v=this.paths[p],P=this.orientation(p);if(P){var S=this.area(p);u.set(v,S),f.push(v)}else h.push(v)}f.sort(function(V,z){return u.get(V)-u.get(z)});var g=!0,m=!1,x=void 0;try{for(var w=f[Symbol.iterator](),C;!(g=(C=w.next()).done);g=!0){for(var A=C.value,M=[A],E=this.paths.indexOf(A),N=[].concat(h),I=0;I<N.length;I++){var L=N[I],R=this.pointInPath(E,L[0]);if(R){M.push(L);var B=h.indexOf(L);h.splice(B,1)}}n.push(new t(M,!0))}}catch(V){m=!0,x=V}finally{try{!g&&w.return&&w.return()}finally{if(m)throw x}}}else{var r=!0,i=!1,s=void 0;try{for(var a=this.paths[Symbol.iterator](),o;!(r=(o=a.next()).done);r=!0){var l=o.value;n.push(new t([l],!1))}}catch(V){i=!0,s=V}finally{try{!r&&a.return&&a.return()}finally{if(i)throw s}}}return n}},{key:"round",value:function(){return new t(this.paths.map(Cw),this.closed)}},{key:"removeDuplicates",value:function(){return new t(this.paths.map(Tw),this.closed)}},{key:"mapToLower",value:function(){return this.paths.map(gX)}}]),t}(),ji=jv.default=vX;function gX(t){return t.map(hx)}function hx(t){var e=t.X,n=t.Y;return{x:e,y:n}}function yX(t){return t.map(px)}function px(t){var e=t.x,n=t.y;return{X:e,Y:n}}function Cw(t){return t.map(mx)}function mx(t){var e=t.X,n=t.Y;return{X:Math.round(e),Y:Math.round(n)}}function Tw(t){return t.filter(_X)}function _X(t,e,n){if(e===0)return!0;var r=n[e-1];return!(t.X===r.X&&t.Y===r.Y)}var j2={exports:{}},_A={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Qa,function(){function n(x,w,C,A,M){(function E(N,I,L,R,B){for(;R>L;){if(R-L>600){var V=R-L+1,z=I-L+1,G=Math.log(V),O=.5*Math.exp(2*G/3),y=.5*Math.sqrt(G*O*(V-O)/V)*(z-V/2<0?-1:1),b=Math.max(L,Math.floor(I-z*O/V+y)),k=Math.min(R,Math.floor(I+(V-z)*O/V+y));E(N,I,b,k,B)}var F=N[I],H=L,W=R;for(r(N,L,I),B(N[R],F)>0&&r(N,L,R);H<W;){for(r(N,H,W),H++,W--;B(N[H],F)<0;)H++;for(;B(N[W],F)>0;)W--}B(N[L],F)===0?r(N,L,W):r(N,++W,R),W<=I&&(L=W+1),I<=W&&(R=W-1)}})(x,w,C||0,A||x.length-1,M||i)}function r(x,w,C){var A=x[w];x[w]=x[C],x[C]=A}function i(x,w){return x<w?-1:x>w?1:0}var s=function(x){x===void 0&&(x=9),this._maxEntries=Math.max(4,x),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function a(x,w,C){if(!C)return w.indexOf(x);for(var A=0;A<w.length;A++)if(C(x,w[A]))return A;return-1}function o(x,w){l(x,0,x.children.length,w,x)}function l(x,w,C,A,M){M||(M=g(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var E=w;E<C;E++){var N=x.children[E];u(M,x.leaf?A(N):N)}return M}function u(x,w){return x.minX=Math.min(x.minX,w.minX),x.minY=Math.min(x.minY,w.minY),x.maxX=Math.max(x.maxX,w.maxX),x.maxY=Math.max(x.maxY,w.maxY),x}function f(x,w){return x.minX-w.minX}function h(x,w){return x.minY-w.minY}function p(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}function v(x){return x.maxX-x.minX+(x.maxY-x.minY)}function P(x,w){return x.minX<=w.minX&&x.minY<=w.minY&&w.maxX<=x.maxX&&w.maxY<=x.maxY}function S(x,w){return w.minX<=x.maxX&&w.minY<=x.maxY&&w.maxX>=x.minX&&w.maxY>=x.minY}function g(x){return{children:x,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(x,w,C,A,M){for(var E=[w,C];E.length;)if(!((C=E.pop())-(w=E.pop())<=A)){var N=w+Math.ceil((C-w)/A/2)*A;n(x,N,w,C,M),E.push(w,N,N,C)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(x){var w=this.data,C=[];if(!S(x,w))return C;for(var A=this.toBBox,M=[];w;){for(var E=0;E<w.children.length;E++){var N=w.children[E],I=w.leaf?A(N):N;S(x,I)&&(w.leaf?C.push(N):P(x,I)?this._all(N,C):M.push(N))}w=M.pop()}return C},s.prototype.collides=function(x){var w=this.data;if(!S(x,w))return!1;for(var C=[];w;){for(var A=0;A<w.children.length;A++){var M=w.children[A],E=w.leaf?this.toBBox(M):M;if(S(x,E)){if(w.leaf||P(x,E))return!0;C.push(M)}}w=C.pop()}return!1},s.prototype.load=function(x){if(!x||!x.length)return this;if(x.length<this._minEntries){for(var w=0;w<x.length;w++)this.insert(x[w]);return this}var C=this._build(x.slice(),0,x.length-1,0);if(this.data.children.length)if(this.data.height===C.height)this._splitRoot(this.data,C);else{if(this.data.height<C.height){var A=this.data;this.data=C,C=A}this._insert(C,this.data.height-C.height-1,!0)}else this.data=C;return this},s.prototype.insert=function(x){return x&&this._insert(x,this.data.height-1),this},s.prototype.clear=function(){return this.data=g([]),this},s.prototype.remove=function(x,w){if(!x)return this;for(var C,A,M,E=this.data,N=this.toBBox(x),I=[],L=[];E||I.length;){if(E||(E=I.pop(),A=I[I.length-1],C=L.pop(),M=!0),E.leaf){var R=a(x,E.children,w);if(R!==-1)return E.children.splice(R,1),I.push(E),this._condense(I),this}M||E.leaf||!P(E,N)?A?(C++,E=A.children[C],M=!1):E=null:(I.push(E),L.push(C),C=0,A=E,E=E.children[0])}return this},s.prototype.toBBox=function(x){return x},s.prototype.compareMinX=function(x,w){return x.minX-w.minX},s.prototype.compareMinY=function(x,w){return x.minY-w.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(x){return this.data=x,this},s.prototype._all=function(x,w){for(var C=[];x;)x.leaf?w.push.apply(w,x.children):C.push.apply(C,x.children),x=C.pop();return w},s.prototype._build=function(x,w,C,A){var M,E=C-w+1,N=this._maxEntries;if(E<=N)return o(M=g(x.slice(w,C+1)),this.toBBox),M;A||(A=Math.ceil(Math.log(E)/Math.log(N)),N=Math.ceil(E/Math.pow(N,A-1))),(M=g([])).leaf=!1,M.height=A;var I=Math.ceil(E/N),L=I*Math.ceil(Math.sqrt(N));m(x,w,C,L,this.compareMinX);for(var R=w;R<=C;R+=L){var B=Math.min(R+L-1,C);m(x,R,B,I,this.compareMinY);for(var V=R;V<=B;V+=I){var z=Math.min(V+I-1,B);M.children.push(this._build(x,V,z,A-1))}}return o(M,this.toBBox),M},s.prototype._chooseSubtree=function(x,w,C,A){for(;A.push(w),!w.leaf&&A.length-1!==C;){for(var M=1/0,E=1/0,N=void 0,I=0;I<w.children.length;I++){var L=w.children[I],R=p(L),B=(V=x,z=L,(Math.max(z.maxX,V.maxX)-Math.min(z.minX,V.minX))*(Math.max(z.maxY,V.maxY)-Math.min(z.minY,V.minY))-R);B<E?(E=B,M=R<M?R:M,N=L):B===E&&R<M&&(M=R,N=L)}w=N||w.children[0]}var V,z;return w},s.prototype._insert=function(x,w,C){var A=C?x:this.toBBox(x),M=[],E=this._chooseSubtree(A,this.data,w,M);for(E.children.push(x),u(E,A);w>=0&&M[w].children.length>this._maxEntries;)this._split(M,w),w--;this._adjustParentBBoxes(A,M,w)},s.prototype._split=function(x,w){var C=x[w],A=C.children.length,M=this._minEntries;this._chooseSplitAxis(C,M,A);var E=this._chooseSplitIndex(C,M,A),N=g(C.children.splice(E,C.children.length-E));N.height=C.height,N.leaf=C.leaf,o(C,this.toBBox),o(N,this.toBBox),w?x[w-1].children.push(N):this._splitRoot(C,N)},s.prototype._splitRoot=function(x,w){this.data=g([x,w]),this.data.height=x.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(x,w,C){for(var A,M,E,N,I,L,R,B=1/0,V=1/0,z=w;z<=C-w;z++){var G=l(x,0,z,this.toBBox),O=l(x,z,C,this.toBBox),y=(M=G,E=O,N=void 0,I=void 0,L=void 0,R=void 0,N=Math.max(M.minX,E.minX),I=Math.max(M.minY,E.minY),L=Math.min(M.maxX,E.maxX),R=Math.min(M.maxY,E.maxY),Math.max(0,L-N)*Math.max(0,R-I)),b=p(G)+p(O);y<B?(B=y,A=z,V=b<V?b:V):y===B&&b<V&&(V=b,A=z)}return A||C-w},s.prototype._chooseSplitAxis=function(x,w,C){var A=x.leaf?this.compareMinX:f,M=x.leaf?this.compareMinY:h;this._allDistMargin(x,w,C,A)<this._allDistMargin(x,w,C,M)&&x.children.sort(A)},s.prototype._allDistMargin=function(x,w,C,A){x.children.sort(A);for(var M=this.toBBox,E=l(x,0,w,M),N=l(x,C-w,C,M),I=v(E)+v(N),L=w;L<C-w;L++){var R=x.children[L];u(E,x.leaf?M(R):R),I+=v(E)}for(var B=C-w-1;B>=w;B--){var V=x.children[B];u(N,x.leaf?M(V):V),I+=v(N)}return I},s.prototype._adjustParentBBoxes=function(x,w,C){for(var A=C;A>=0;A--)u(w[A],x)},s.prototype._condense=function(x){for(var w=x.length-1,C=void 0;w>=0;w--)x[w].children.length===0?w>0?(C=x[w-1].children).splice(C.indexOf(x[w]),1):this.clear():o(x[w],this.toBBox)},s})})(_A);var xX=_A.exports;class bX{constructor(e=[],n=wX){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:r}=this,i=n[e];for(;e>0;){const s=e-1>>1,a=n[s];if(r(i,a)>=0)break;n[e]=a,e=s}n[e]=i}_down(e){const{data:n,compare:r}=this,i=this.length>>1,s=n[e];for(;e<i;){let a=(e<<1)+1,o=n[a];const l=a+1;if(l<this.length&&r(n[l],o)<0&&(a=l,o=n[l]),r(o,s)>=0)break;n[e]=o,e=a}n[e]=s}}function wX(t,e){return t<e?-1:t>e?1:0}const SX=Object.freeze(Object.defineProperty({__proto__:null,default:bX},Symbol.toStringTag,{value:"Module"})),PX=E6(SX);var Zv={exports:{}},EX=function(e,n,r,i){var s=e[0],a=e[1],o=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var l=(i-r)/2,u=0,f=l-1;u<l;f=u++){var h=n[r+u*2+0],p=n[r+u*2+1],v=n[r+f*2+0],P=n[r+f*2+1],S=p>a!=P>a&&s<(v-h)*(a-p)/(P-p)+h;S&&(o=!o)}return o},CX=function(e,n,r,i){var s=e[0],a=e[1],o=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var l=i-r,u=0,f=l-1;u<l;f=u++){var h=n[u+r][0],p=n[u+r][1],v=n[f+r][0],P=n[f+r][1],S=p>a!=P>a&&s<(v-h)*(a-p)/(P-p)+h;S&&(o=!o)}return o},xA=EX,bA=CX;Zv.exports=function(e,n,r,i){return n.length>0&&Array.isArray(n[0])?bA(e,n,r,i):xA(e,n,r,i)};Zv.exports.nested=bA;Zv.exports.flat=xA;var TX=Zv.exports,vx={exports:{}};(function(t,e){(function(n,r){r(e)})(Qa,function(n){const i=33306690738754706e-32;function s(S,g,m,x,w){let C,A,M,E,N=g[0],I=x[0],L=0,R=0;I>N==I>-N?(C=N,N=g[++L]):(C=I,I=x[++R]);let B=0;if(L<S&&R<m)for(I>N==I>-N?(M=C-((A=N+C)-N),N=g[++L]):(M=C-((A=I+C)-I),I=x[++R]),C=A,M!==0&&(w[B++]=M);L<S&&R<m;)I>N==I>-N?(M=C-((A=C+N)-(E=A-C))+(N-E),N=g[++L]):(M=C-((A=C+I)-(E=A-C))+(I-E),I=x[++R]),C=A,M!==0&&(w[B++]=M);for(;L<S;)M=C-((A=C+N)-(E=A-C))+(N-E),N=g[++L],C=A,M!==0&&(w[B++]=M);for(;R<m;)M=C-((A=C+I)-(E=A-C))+(I-E),I=x[++R],C=A,M!==0&&(w[B++]=M);return C===0&&B!==0||(w[B++]=C),B}function a(S){return new Float64Array(S)}const o=33306690738754716e-32,l=22204460492503146e-32,u=11093356479670487e-47,f=a(4),h=a(8),p=a(12),v=a(16),P=a(4);n.orient2d=function(S,g,m,x,w,C){const A=(g-C)*(m-w),M=(S-w)*(x-C),E=A-M;if(A===0||M===0||A>0!=M>0)return E;const N=Math.abs(A+M);return Math.abs(E)>=o*N?E:-function(I,L,R,B,V,z,G){let O,y,b,k,F,H,W,ne,Z,K,ae,se,ye,me,Ae,Ue,He,Qe;const ie=I-V,dt=R-V,ke=L-z,ut=B-z;F=(Ae=(ne=ie-(W=(H=134217729*ie)-(H-ie)))*(K=ut-(Z=(H=134217729*ut)-(H-ut)))-((me=ie*ut)-W*Z-ne*Z-W*K))-(ae=Ae-(He=(ne=ke-(W=(H=134217729*ke)-(H-ke)))*(K=dt-(Z=(H=134217729*dt)-(H-dt)))-((Ue=ke*dt)-W*Z-ne*Z-W*K))),f[0]=Ae-(ae+F)+(F-He),F=(ye=me-((se=me+ae)-(F=se-me))+(ae-F))-(ae=ye-Ue),f[1]=ye-(ae+F)+(F-Ue),F=(Qe=se+ae)-se,f[2]=se-(Qe-F)+(ae-F),f[3]=Qe;let tt=function(te,fe){let de=fe[0];for(let he=1;he<te;he++)de+=fe[he];return de}(4,f),Pt=l*G;if(tt>=Pt||-tt>=Pt||(O=I-(ie+(F=I-ie))+(F-V),b=R-(dt+(F=R-dt))+(F-V),y=L-(ke+(F=L-ke))+(F-z),k=B-(ut+(F=B-ut))+(F-z),O===0&&y===0&&b===0&&k===0)||(Pt=u*G+i*Math.abs(tt),(tt+=ie*k+ut*O-(ke*b+dt*y))>=Pt||-tt>=Pt))return tt;F=(Ae=(ne=O-(W=(H=134217729*O)-(H-O)))*(K=ut-(Z=(H=134217729*ut)-(H-ut)))-((me=O*ut)-W*Z-ne*Z-W*K))-(ae=Ae-(He=(ne=y-(W=(H=134217729*y)-(H-y)))*(K=dt-(Z=(H=134217729*dt)-(H-dt)))-((Ue=y*dt)-W*Z-ne*Z-W*K))),P[0]=Ae-(ae+F)+(F-He),F=(ye=me-((se=me+ae)-(F=se-me))+(ae-F))-(ae=ye-Ue),P[1]=ye-(ae+F)+(F-Ue),F=(Qe=se+ae)-se,P[2]=se-(Qe-F)+(ae-F),P[3]=Qe;const lt=s(4,f,4,P,h);F=(Ae=(ne=ie-(W=(H=134217729*ie)-(H-ie)))*(K=k-(Z=(H=134217729*k)-(H-k)))-((me=ie*k)-W*Z-ne*Z-W*K))-(ae=Ae-(He=(ne=ke-(W=(H=134217729*ke)-(H-ke)))*(K=b-(Z=(H=134217729*b)-(H-b)))-((Ue=ke*b)-W*Z-ne*Z-W*K))),P[0]=Ae-(ae+F)+(F-He),F=(ye=me-((se=me+ae)-(F=se-me))+(ae-F))-(ae=ye-Ue),P[1]=ye-(ae+F)+(F-Ue),F=(Qe=se+ae)-se,P[2]=se-(Qe-F)+(ae-F),P[3]=Qe;const re=s(lt,h,4,P,p);F=(Ae=(ne=O-(W=(H=134217729*O)-(H-O)))*(K=k-(Z=(H=134217729*k)-(H-k)))-((me=O*k)-W*Z-ne*Z-W*K))-(ae=Ae-(He=(ne=y-(W=(H=134217729*y)-(H-y)))*(K=b-(Z=(H=134217729*b)-(H-b)))-((Ue=y*b)-W*Z-ne*Z-W*K))),P[0]=Ae-(ae+F)+(F-He),F=(ye=me-((se=me+ae)-(F=se-me))+(ae-F))-(ae=ye-Ue),P[1]=ye-(ae+F)+(F-Ue),F=(Qe=se+ae)-se,P[2]=se-(Qe-F)+(ae-F),P[3]=Qe;const X=s(re,p,4,P,v);return v[X-1]}(S,g,m,x,w,C,N)},n.orient2dfast=function(S,g,m,x,w,C){return(g-C)*(m-w)-(S-w)*(x-C)},Object.defineProperty(n,"__esModule",{value:!0})})})(vx,vx.exports);var AX=vx.exports,Aw=xX,zd=PX,MX=TX,RX=AX.orient2d;zd.default&&(zd=zd.default);j2.exports=wA;j2.exports.default=wA;function wA(t,e,n){e=Math.max(0,e===void 0?2:e),n=n||0;var r=DX(t),i=new Aw(16);i.toBBox=function(x){return{minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]}},i.compareMinX=function(x,w){return x[0]-w[0]},i.compareMinY=function(x,w){return x[1]-w[1]},i.load(t);for(var s=[],a=0,o;a<r.length;a++){var l=r[a];i.remove(l),o=Iw(l,o),s.push(o)}var u=new Aw(16);for(a=0;a<s.length;a++)u.insert(Kg(s[a]));for(var f=e*e,h=n*n;s.length;){var p=s.shift(),v=p.p,P=p.next.p,S=Jg(v,P);if(!(S<h)){var g=S/f;l=IX(i,p.prev.p,v,P,p.next.next.p,g,u),l&&Math.min(Jg(l,v),Jg(l,P))<=g&&(s.push(p),s.push(Iw(l,p)),i.remove(l),u.remove(p),u.insert(Kg(p)),u.insert(Kg(p.next)))}}p=o;var m=[];do m.push(p.p),p=p.next;while(p!==o);return m.push(p.p),m}function IX(t,e,n,r,i,s,a){for(var o=new zd([],LX),l=t.data;l;){for(var u=0;u<l.children.length;u++){var f=l.children[u],h=l.leaf?Qg(f,n,r):OX(n,r,f);h>s||o.push({node:f,dist:h})}for(;o.length&&!o.peek().node.children;){var p=o.pop(),v=p.node,P=Qg(v,e,n),S=Qg(v,r,i);if(p.dist<P&&p.dist<S&&Rw(n,v,a)&&Rw(r,v,a))return v}l=o.pop(),l&&(l=l.node)}return null}function LX(t,e){return t.dist-e.dist}function OX(t,e,n){if(Mw(t,n)||Mw(e,n))return 0;var r=$f(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(r===0)return 0;var i=$f(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(i===0)return 0;var s=$f(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(s===0)return 0;var a=$f(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return a===0?0:Math.min(r,i,s,a)}function Mw(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Rw(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),s=Math.max(t[0],e[0]),a=Math.max(t[1],e[1]),o=n.search({minX:r,minY:i,maxX:s,maxY:a}),l=0;l<o.length;l++)if(NX(o[l].p,o[l].next.p,t,e))return!1;return!0}function ql(t,e,n){return RX(t[0],t[1],e[0],e[1],n[0],n[1])}function NX(t,e,n,r){return t!==r&&e!==n&&ql(t,e,n)>0!=ql(t,e,r)>0&&ql(n,r,t)>0!=ql(n,r,e)>0}function Kg(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function DX(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var o=[e,n,r,i],l=o.slice();for(s=0;s<t.length;s++)MX(t[s],o)||l.push(t[s]);return FX(l)}function Iw(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Jg(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Qg(t,e,n){var r=e[0],i=e[1],s=n[0]-r,a=n[1]-i;if(s!==0||a!==0){var o=((t[0]-r)*s+(t[1]-i)*a)/(s*s+a*a);o>1?(r=n[0],i=n[1]):o>0&&(r+=s*o,i+=a*o)}return s=t[0]-r,a=t[1]-i,s*s+a*a}function $f(t,e,n,r,i,s,a,o){var l=n-t,u=r-e,f=a-i,h=o-s,p=t-i,v=e-s,P=l*l+u*u,S=l*f+u*h,g=f*f+h*h,m=l*p+u*v,x=f*p+h*v,w=P*g-S*S,C,A,M,E,N=w,I=w;w===0?(A=0,N=1,E=x,I=g):(A=S*x-g*m,E=P*x-S*m,A<0?(A=0,E=x,I=g):A>N&&(A=N,E=x+S,I=g)),E<0?(E=0,-m<0?A=0:-m>P?A=N:(A=-m,N=P)):E>I&&(E=I,-m+S<0?A=0:-m+S>P?A=N:(A=-m+S,N=P)),C=A===0?0:A/N,M=E===0?0:E/I;var L=(1-C)*t+C*n,R=(1-C)*e+C*r,B=(1-M)*i+M*a,V=(1-M)*s+M*o,z=B-L,G=V-R;return z*z+G*G}function kX(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function FX(t){t.sort(kX);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&ql(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&ql(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}var UX=j2.exports;const Lw=KT(UX);var BX=({dataset:t,epsilon:e,epsilonCompare:n,minimumPoints:r,distanceFunction:i})=>{e=e||1,n=n||((x,w)=>x<w),r=r||2,i=i||((x,w)=>Math.abs(x-w));var s={},a=x=>s[x],o=x=>{s[x]=!0},l={},u=x=>l[x],f=x=>{l[x]=!0},h=(x,w)=>{for(var C=0;C<w.length;C+=1){var A=w[C];x.indexOf(A)<0&&x.push(A)}},p=x=>{for(var w=[],C=0;C<t.length;C+=1){var A=i(t[x],t[C]);n(A,e)&&w.push(C)}return w},v=[],P=[],S=()=>P.push([])-1,g=(x,w)=>{P[x].push(w),f(w)},m=(x,w)=>{for(var C=0;C<w.length;C+=1){var A=w[C];if(!a(A)){o(A);var M=p(A);M.length>=r&&h(w,M)}u(A)||g(x,A)}};return t.forEach((x,w)=>{if(!a(w)){o(w);var C=p(w);if(C.length<r)v.push(w);else{var A=S();g(A,w),m(A,C)}}}),{clusters:P,noise:v}};const $X=KT(BX);function SA(t){const e=Math.cos(-sn(t.position.a)),n=Math.sin(-sn(t.position.a)),r=t.swCenter.x,i=t.swCenter.y,s=t.size.w/2,a=t.size.h/2,o=[[r-s*e-a*n,i-s*n+a*e],[r+s*e-a*n,i+s*n+a*e],[r+s*e+a*n,i+s*n-a*e],[r-s*e+a*n,i-s*n-a*e]];let l=Math.ceil(t.size.w/(t.size.h/4));const u=t.size.w/l;o.push(...Array.from({length:l},(h,p)=>[[r-(s-(p+1)*u)*e-a*n,i-(s-(p+1)*u)*n+a*e],[r-(s-(p+1)*u)*e+a*n,i-(s-(p+1)*u)*n-a*e]]).flat()),l=Math.ceil(t.size.h/(t.size.h/4));const f=t.size.h/l;return o.push(...Array.from({length:l},(h,p)=>[[r-s*e-(a-(p+1)*f)*n,i-s*n+(a-(p+1)*f)*e],[r+s*e-(a-(p+1)*f)*n,i+s*n+(a-(p+1)*f)*e]]).flat()),o}function gx(t,e){const n=t.map(a=>SA(a)).flat();let r=Lw(n,1),i=new ji([r.map(a=>({X:a[0]*e,Y:a[1]*e}))]).clean(.3*e).offset(3*e).offset(-3*e);return t.filter(a=>!i.pointInShape({X:a.swCenter.x*e,Y:a.swCenter.y*e})).length>0&&(r=Lw(n,2),i=new ji([r.map(a=>({X:a[0]*e,Y:a[1]*e}))]).clean(.3*e).offset(3*e).offset(-3*e)),i}function VX(t,e=5){const n=t.map(s=>SA(s)),{clusters:r,noise:i}=$X({dataset:n,epsilon:e,distanceFunction:(s,a)=>s.map(o=>a.map(l=>Math.hypot(o[0]-l[0],o[1]-l[1]))).flat().some(o=>o<e)?0:1/0});return i.length==0?r.map(s=>s.map(a=>t[a])):r.concat([i]).map(s=>s.map(a=>t[a]))}function qX(t,e){return t.map(n=>{const r=Math.cos(-sn(n.a)),i=Math.sin(-sn(n.a)),s=n.w/2,a=n.h/2;return new ji([[{X:(n.x-s*r-a*i)*e,Y:(n.y-s*i+a*r)*e},{X:(n.x+s*r-a*i)*e,Y:(n.y+s*i+a*r)*e},{X:(n.x+s*r+a*i)*e,Y:(n.y+s*i-a*r)*e},{X:(n.x-s*r+a*i)*e,Y:(n.y-s*i-a*r)*e}]])})}function HX(t,e){return t.map(n=>{const r=Math.cos(-sn(n.a)),i=Math.sin(-sn(n.a)),s=n.w/2,a=n.h/2;return new ji([[{X:(n.x-s*r-a*i)*e,Y:(n.y-s*i+a*r)*e},{X:(n.x+s*r-a*i)*e,Y:(n.y+s*i+a*r)*e},{X:(n.x+s*r+a*i)*e,Y:(n.y+s*i-a*r)*e},{X:(n.x-s*r+a*i)*e,Y:(n.y-s*i-a*r)*e}]])})}function Po(t,e){return t.paths[0].map(n=>({x:n.X/e,y:n.Y/e})).toReversed()}function zX(t,e=19){const r=t.switches.sort((p,v)=>p.swCenter.y-v.swCenter.y)[0],i=t.switches.filter(p=>p.swCenter.y-r.swCenter.y<19),s=r.swCenter.y+r.size.h/2,a=Math.min(...i.map(p=>p.swCenter.x-p.size.w/2)),o=Math.max(...i.map(p=>p.swCenter.x+p.size.w/2)),l=gx(t.switches,1e4).union(new ji([[{X:a*1e4,Y:s*1e4},{X:o*1e4,Y:s*1e4},{X:o*1e4,Y:(s-e)*1e4},{X:a*1e4,Y:(s-e)*1e4}]])),u=new ji([t.controller.trackAreaOutline.map(p=>({X:p.x*1e4,Y:(p.y+(19-e)/2)*1e4}))]),f=l.union(u).clean(.1*((21-e)/2)*1e4).offset((21-e)/2*1e4),h=f.clean(.05*1e4).offset(.5*1e4);return{trackOutlinePoints:Po(f,1e4),pcbOutlinePoints:Po(h,1e4)}}function Z2(t,e,n,r=19){const s=t.switches.sort((A,M)=>A.swCenter.y-M.swCenter.y)[0],a=t.switches.filter(A=>A.swCenter.y-s.swCenter.y<19),o=s.swCenter.y+s.size.h/2,l=Math.min(...a.map(A=>A.swCenter.x-A.size.w/2)),u=Math.max(...a.map(A=>A.swCenter.x+A.size.w/2)),f=gx(t.switches,1e4).union(new ji([[{X:l*1e4,Y:o*1e4},{X:u*1e4,Y:o*1e4},{X:u*1e4,Y:(o-r)*1e4},{X:l*1e4,Y:(o-r)*1e4}]])),h=new ji([t.controller.trackAreaOutline.map(A=>({X:A.x*1e4,Y:A.y*1e4}))]);f.union(h).clean(.1*1e4).offset(1*1e4).clean(.05*1e4).offset(.5*1e4);const P=VX(t.switches,r/4).map(A=>gx(A,1e4)).map(A=>A.clean(.1*1e4).offset(1*1e4).offset(-.3*1e4)),S=qX(t.padding,1e4),g=HX(t.trackball,1e4),m=f.clean(.1*(23-r)/2*1e4).offset((23-r)/2*1e4).union(new ji([t.controller.boardAreaOutline.map(A=>({X:A.x*1e4,Y:A.y*1e4}))])).clean(.07*1e4).offset(.7*1e4),x=m.union(S.reduce((A,M)=>A.union(M),new ji([])).clean(.1*((23-r)/2+.7)*1e4).offset((23-r)/2+.7*1e4)).union(g.reduce((A,M)=>A.union(M),new ji([]))).clean(n*2*.1*1e4).offset(n*2*1e4).offset(-n*1e4),w=x.clean(.05*1e4).offset(.3*1e4),C=w.clean(e/3*2*.1*1e4).offset(e/3*2*1e4).clean(e/3*2*.1*1e4).offset(e/3*2*1e4).clean(e/3*2*.1*1e4).offset(e/3*2*1e4).offset(-e*1e4);return{caseOutlines:Po(C,1e4),bottomInnerLine:Po(m,1e4),bottomOuterLine:Po(x,1e4),topInnerLine:Po(w,1e4),topPlateOutlines:P.map(A=>Po(A,1e4)),padding:t.padding}}function GX(t){return[...t.topPlateOutlines.map(e=>Br("",12,1,[...e,e[0]].map(n=>[at(n.x),at(n.y)]).flat())),Br("",12,1,[...t.caseOutlines,t.caseOutlines[0]].map(e=>[at(e.x),at(e.y)]).flat()),Br("",12,1,[...t.bottomInnerLine,t.bottomInnerLine[0]].map(e=>[at(e.x),at(e.y)]).flat()),Br("",12,1,[...t.bottomOuterLine,t.bottomOuterLine[0]].map(e=>[at(e.x),at(e.y)]).flat()),Br("",12,1,[...t.topInnerLine,t.topInnerLine[0]].map(e=>[at(e.x),at(e.y)]).flat())]}const XX={head:{docType:"3",editorVersion:"6.5.47",newgId:!0,c_para:{},x:"0",y:"0",hasIdFlag:!0,importFlag:0,transformList:""},canvas:"CA~1000~1000~#000000~yes~#FFFFFF~1.9685~1000~1000~line~1.9685~mm~1~45~visible~0.5~4020~3629~1~yes",shape:[""],layers:["1~TopLayer~#FF0000~true~true~true~","2~BottomLayer~#0000FF~true~false~true~","3~TopSilkLayer~#FFCC00~true~false~true~","4~BottomSilkLayer~#66CC33~true~false~true~","5~TopPasteMaskLayer~#808080~true~false~true~","6~BottomPasteMaskLayer~#800000~true~false~true~","7~TopSolderMaskLayer~#800080~true~false~true~0.3","8~BottomSolderMaskLayer~#AA00FF~true~false~true~0.3","9~Ratlines~#6464FF~true~false~true~","10~BoardOutLine~#FF00FF~true~false~true~","11~Multi-Layer~#C0C0C0~true~false~true~","12~Document~#FFFFFF~true~false~true~","13~TopAssembly~#33CC99~false~false~false~","14~BottomAssembly~#5555FF~false~false~false~","15~Mechanical~#F022F0~false~false~false~","19~3DModel~#66CCFF~false~false~false~","21~Inner1~#999966~false~false~false~~","22~Inner2~#008000~false~false~false~~","23~Inner3~#00FF00~false~false~false~~","24~Inner4~#BC8E00~false~false~false~~","25~Inner5~#70DBFA~false~false~false~~","26~Inner6~#00CC66~false~false~false~~","27~Inner7~#9966FF~false~false~false~~","28~Inner8~#800080~false~false~false~~","29~Inner9~#008080~false~false~false~~","30~Inner10~#15935F~false~false~false~~","31~Inner11~#000080~false~false~false~~","32~Inner12~#00B400~false~false~false~~","33~Inner13~#2E4756~false~false~false~~","34~Inner14~#99842F~false~false~false~~","35~Inner15~#FFFFAA~false~false~false~~","36~Inner16~#99842F~false~false~false~~","37~Inner17~#2E4756~false~false~false~~","38~Inner18~#3535FF~false~false~false~~","39~Inner19~#8000BC~false~false~false~~","40~Inner20~#43AE5F~false~false~false~~","41~Inner21~#C3ECCE~false~false~false~~","42~Inner22~#728978~false~false~false~~","43~Inner23~#39503F~false~false~false~~","44~Inner24~#0C715D~false~false~false~~","45~Inner25~#5A8A80~false~false~false~~","46~Inner26~#2B937E~false~false~false~~","47~Inner27~#23999D~false~false~false~~","48~Inner28~#45B4E3~false~false~false~~","49~Inner29~#215DA1~false~false~false~~","50~Inner30~#4564D7~false~false~false~~","51~Inner31~#6969E9~false~false~false~~","52~Inner32~#9069E9~false~false~false~~","99~ComponentShapeLayer~#00CCCC~false~false~false~0.4","100~LeadShapeLayer~#CC9999~false~false~false~","101~ComponentMarkingLayer~#66FFCC~false~false~false~","Hole~Hole~#222222~false~false~true~","DRCError~DRCError~#FAD609~false~false~true~"],objects:["All~true~false","Component~true~true","Prefix~true~true","Name~true~false","Track~true~true","Pad~true~true","Via~true~true","Hole~true~true","Copper_Area~true~true","Circle~true~true","Arc~true~true","Solid_Region~true~true","Text~true~true","Image~true~true","Rect~true~true","Dimension~true~true","Protractor~true~true"],BBox:{x:0,y:0,width:286.5,height:318.1},preference:{hideFootprints:"",hideNets:""},DRCRULE:{Default:{trackWidth:1,clearance:.6,viaHoleDiameter:2.4,viaHoleD:1.2},isRealtime:!0,isDrcOnRoutingOrPlaceVia:!1,checkObjectToCopperarea:!0,showDRCRangeLine:!0},netColors:{}};class WX{constructor(e){vt(this,"props");vt(this,"rowCount");vt(this,"colCount");vt(this,"_assignedPorts",{rows:[],cols:[]});var n;this.props=e,this.rowCount=Math.max(...e.swModules.map(r=>r.matrix.row))+1,this.colCount=Math.max(...e.swModules.map(r=>r.matrix.col))+1;for(let r=0;r<this.colCount;r++)(n=this.props.swModules.filter(i=>i.matrix.col===r).sort((i,s)=>i.matrix.row-s.matrix.row).at(0))==null||n.plotViaForController(r)}get modules(){return[...this.props.swModules,this.props.controller]}get connections(){return[...this.props.matrixConnections,...this.props.controllerConnections]}get pcbOutlines(){return this.props.pcbOutlinePoints}get trackOutlines(){return this.props.trackOutlinePoints}get switches(){return this.props.swModules}get assignedPorts(){return this._assignedPorts}get netlist(){return this.props.netlist}get controller(){return this.props.controller}get matrixConnections(){return this.props.matrixConnections}get controllerConnections(){return this.props.controllerConnections}get pcbOutlineSegments(){if(!(this.props.pcbOutlinePoints.length<4))return Br("",10,1,[...this.props.pcbOutlinePoints,this.props.pcbOutlinePoints[0]].map(e=>[at(e.x),at(e.y)]).flat())}serialize(){const e=XX;let n=this.modules.reduce((i,s)=>s.assignId(i),1);this.connections.forEach(i=>i.id=`gge${n++}`);const r=(i,s)=>(i.id=`gge${s++}`,i);return e.shape=this.modules.map(i=>i.serialize()).flat().concat(this.connections.map(i=>i.serialize())).concat(this.props.pcbOutlinePoints.length>=4?r(Br("",10,1,[...this.props.pcbOutlinePoints,this.props.pcbOutlinePoints[0]].map(i=>[at(i.x),at(i.y)]).flat()),n).serialize():[]),JSON.stringify(e)}obstacle(e,n,r){const i=new Set,s=a=>`${a.x},${a.y}`;return this.modules.forEach(a=>{a.elements.map(o=>o.obstacle(e,n,r).flat()).flat(2).map(s).forEach(o=>i.add(o))}),this.connections.forEach(a=>{a.obstacle(e,n,r).forEach(o=>i.add(s(o)))}),i}getMatrixToControllerPorts(e="left"){let n=[],r={top:[],left:[],right:[]},i=!0;for(let a=0;a<this.rowCount;a++){const o=this.props.swModules.filter(l=>l.matrix.row===a).sort((l,u)=>l.matrix.col-u.matrix.col);o.length>0&&(i&&(i=!1,r.top.push(...o)),r.left.push(o[0]),r.right.push(o[o.length-1]))}for(let a=0;a<this.colCount;a++)this.props.swModules.filter(o=>o.matrix.col===a).forEach(o=>{o.colToControllerPort&&n.push(o)});const s=this.props.controller.assignPorts(r,n,e);return this._assignedPorts={rows:s.filter(a=>a.swPort.net.includes("ROW")&&a.controller!==void 0).map(a=>a.controller.padNumber),cols:s.filter(a=>a.swPort.net.includes("COL")&&a.controller!==void 0).map(a=>a.controller.padNumber)},s}routeMatrix(e){return e.routeMatrix(this)}routeController(e){const n=e.routeController(this);return this.props.netlist=[...n.connected,...n.notConnected],n}calcOutlines(){const e=zX(this,et.keyPitch);return Object.assign(this.props,e),this.props.pcbOutlinePoints}get padding(){return this.props.padding}get trackball(){return this.props.trackball}isPointInOutline(e){const n=this.props.trackOutlinePoints;if(n===void 0)return!0;const r=n.length;let i=!1;for(let s=0;s<r;s++){const a=(s+1)%r,{x:o,y:l}=n[s],{x:u,y:f}=n[a];if(Math.min(l,f)<e.y&&e.y<=Math.max(l,f)&&e.x<=Math.max(o,u)){const h=l!==f?o+(e.y-l)*(u-o)/(f-l):o;e.x<=h&&(i=!i)}}return i}}class PA{constructor(e){vt(this,"props");vt(this,"swCenter",{x:0,y:0});this.props=e,this.props.sw.translate(e.centerOffset.x,e.centerOffset.y),this.props.diode.translate(e.centerOffset.x+e.diodeOffset.x,e.centerOffset.y+e.diodeOffset.y).rotate(e.diodeOffset.angle),this.swCenter={x:0,y:0};const n=this.props.sw.pins.find(u=>u.number==1),r=this.props.sw.pins.find(u=>u.number==2),i=this.props.diode.pins.find(u=>u.number==1),s=this.props.diode.pins.find(u=>u.number==2);if(n===void 0||i===void 0||r===void 0||s===void 0)throw new Error("swPad1, diodePad1, swPad2, diodePad2 must be defined");const a=`ROW${e.matrix.row}`,o=`COL${e.matrix.col}`;i.assignNet(a),n.assignNet(o);const l=`SW${e.index}_2`;r.assignNet(l),s.assignNet(l)}get matrix(){return this.props.matrix}plotViaForController(e){const n=`COL${e}`;if(this._viaForController.assignNet(n),this.props.sw.pins.find(i=>i.number==1)===void 0)throw new Error("swPad1 must be defined");this.props.track.push(...this._viaTrack)}translate(e,n){return this.props.sw.translate(e,n),this.props.diode.translate(e,n),this.props.track.forEach(r=>r.translate(at(e),at(n))),this.props.via.forEach(r=>r.translate(at(e),at(n))),this.props.position.x+=e,this.props.position.y+=n,this._viaForController.translate(at(e),at(n)),this._viaTrack.forEach(r=>r.translate(at(e),at(n))),this.swCenter.x+=e,this.swCenter.y+=n,this}rotate(e,n=0,r=0){return this.props.sw.rotate(e,n-this.props.centerOffset.x,r-this.props.centerOffset.y),this.props.diode.rotate(e,n-this.props.centerOffset.x-this.props.diodeOffset.x,r-this.props.centerOffset.y-this.props.diodeOffset.y),this.props.track.forEach(i=>i.rotate(e,at(n+this.props.position.x),at(r+this.props.position.y))),this.props.via.forEach(i=>i.rotate(e,at(n+this.props.position.x),at(r+this.props.position.y))),this._viaForController.rotate(e,at(n+this.props.position.x),at(r+this.props.position.y)),this._viaTrack.forEach(i=>i.rotate(e,at(n+this.props.position.x),at(r+this.props.position.y))),this.props.angle+=e,this}serialize(){const e=[this.props.sw,this.props.diode].map(n=>n.serialize()).concat(this.props.track.map(n=>n.serialize()),this.props.via.map(n=>n.serialize()));return this._viaForController.net!==""&&e.push(this._viaForController.serialize()),e}assignId(e){return e=this.props.sw.assignId(e),e=this.props.diode.assignId(e),this.props.track.forEach((n,r)=>n.id=`gge${e+r}`),e+=this.props.track.length,this.props.via.forEach((n,r)=>n.id=`gge${e+r}`),e+=this.props.via.length,this._viaForController.net!==""&&(this._viaForController.id=`gge${e}`,e++),e}isSwModuleZone(e,n){const s=e-this.swCenter.x,a=n-this.swCenter.y;if(this.props.angle%90===0){const o=s,l=a;return-14/2<=o&&o<=14/2&&-14/2<=l&&l<=14/2}else{const o=this.props.angle*Math.PI/180,l=Math.cos(o),u=Math.sin(o),f=l*s-u*a,h=u*s+l*a;return-14/2<=f&&f<=14/2&&-14/2<=h&&h<=14/2}}get position(){return{x:this.props.position.x,y:this.props.position.y,a:this.props.angle}}get size(){return this.props.size}get elements(){return[...this.props.sw.elements,...this.props.sw.pins,...this.props.diode.elements,...this.props.diode.pins,...this.props.track,...this.props.via].concat(this._viaForController.net===""?[]:[this._viaForController])}get ports(){return{row:{net:this._rowPort.net,padNumber:2,x:this._rowPort.position.x,y:this._rowPort.position.y},col:{net:this._colPort.net,padNumber:1,x:this._colPort.position.x,y:this._colPort.position.y}}}get colToControllerPort(){return this._viaForController.net===""?void 0:{net:this._viaForController.net,padNumber:1,x:this._viaForController.position.x,y:this._viaForController.position.y}}calcConvexHull(e){const n=[...Object.values(this.getOutlines()),...Object.values(e.getOutlines())];let r=n[0];for(let a=1;a<n.length;a++)(n[a].y<r.y||n[a].y===r.y&&n[a].x<r.x)&&(r=n[a]);n.sort((a,o)=>{if(a===r)return-1;if(o===r)return 1;const l=Math.atan2(a.y-r.y,a.x-r.x),u=Math.atan2(o.y-r.y,o.x-r.x);if(l===u){const f=(a.x-r.x)**2+(a.y-r.y)**2,h=(o.x-r.x)**2+(o.y-r.y)**2;return f-h}return l-u});const i=[n[0]],s=(a,o,l)=>(o.x-a.x)*(l.y-a.y)-(o.y-a.y)*(l.x-a.x)>0;for(let a=1;a<n.length;a++){for(;i.length>=2&&!s(i[i.length-2],i[i.length-1],n[a]);)i.pop();i.push(n[a])}return i}}class K2 extends PA{constructor(n){super(n);vt(this,"__rowPort");vt(this,"__colPort");vt(this,"__viaForController");vt(this,"__viaTrack");const r=`SW${n.index}_2`,i=n.sw.pins.find(x=>x.number==1),s=n.sw.pins.find(x=>x.number==2),a=n.diode.pins.find(x=>x.number==1),o=n.diode.pins.find(x=>x.number==2),l=(s.position.y-s.height/2+o.position.y+o.height/2)/2,u=[[s.position.x,s.position.y],[s.position.x,l+1],[o.position.x,l-.75],[o.position.x,o.position.y]];n.track.push(...u.slice(0,-1).map((x,w)=>{const C=u[w+1];return Br(r,2,1,[x[0],x[1],C[0],C[1]])}));const f=`ROW${n.matrix.row}`,h=`COL${n.matrix.col}`,p=a.position.x,v=a.position.y-at(1),P=Br(f,2,1,[a.position.x,a.position.y,p,v]);n.track.push(P);const S=fh(f,p,v,2.4,.6);n.via.push(S),this.__rowPort=S,this.__colPort=i;const g=i.position.x-at(2),m=i.position.y+at(2.5);this.__viaForController=fh("",g,m,2.4,.6),this.__viaTrack=[Br(h,2,1,[this.__viaForController.position.x,this.__viaForController.position.y,this.__colPort.position.x,this.__colPort.position.y])]}get _rowPort(){return this.__rowPort}get _colPort(){return this.__colPort}get _viaForController(){return this.__viaForController}get _viaTrack(){return this.__viaTrack}getOutlines(){const n=this.size.w,r=this.size.h,i=this.swCenter.x,s=this.swCenter.y,a=this.position.a,o=Math.cos(a*Math.PI/180),l=Math.sin(a*Math.PI/180),u=n/2,f=r/2,h=n/2,p=-r/2,v=-n/2,P=-r/2,S=-n/2,g=r/2,m=i+u*o+f*l,x=s-u*l+f*o,w=i+h*o+p*l,C=s-h*l+p*o,A=i+v*o+P*l,M=s-v*l+P*o,E=i+S*o+g*l,N=s-S*l+g*o;return{p1:{x:m,y:x},p2:{x:w,y:C},p3:{x:A,y:M},p4:{x:E,y:N}}}static createMxSwModule(n,r,i,s=0,a=0,o=19,l=19,u=0,f=void 0){let h=[];if(f!==void 0&&o>=f*19){const P=f,S=[2,3,6,6.25,7].filter(m=>m<=P).pop(),g={2:23.876,3:38.1,6:95,"6.25":100,7:114.3}[S.toString()];g!==void 0&&(h.push(Tf(at(-g/2),at(-7),at(1.525)),Tf(at(g/2),at(-7),at(1.525)),Tf(at(-g/2),at(8.24),at(2)),Tf(at(g/2),at(8.24),at(2))),h.forEach(m=>m.translate(at(Uf.x),at(-Uf.y))))}const p=ca.createParts([...h,...Bo(VG)],`SW${n}`),v=ca.createParts(Bo(gA),`D${n}`);return new K2({sw:p,diode:v,track:[],via:[],position:{x:0,y:0},size:{w:o,h:l},matrix:{row:r,col:i},angle:0,centerOffset:{x:Uf.x,y:Uf.y},diodeOffset:{x:-7.5,y:-5,angle:90},index:n}).translate(s,a).rotate((u+180)%360)}}class J2 extends PA{constructor(n){super(n);vt(this,"__rowPort");vt(this,"__colPort");vt(this,"__viaForController");vt(this,"__viaTrack");const r=`SW${n.index}_2`,i=n.sw.pins.find(x=>x.number==1),s=n.sw.pins.find(x=>x.number==2),a=n.diode.pins.find(x=>x.number==1),o=n.diode.pins.find(x=>x.number==2),l=[[s.position.x,s.position.y],[s.position.x+.5,s.position.y],[s.position.x+.5,o.position.y-1],[s.position.x+.5-1,o.position.y],[o.position.x,o.position.y]];n.track.push(...l.slice(0,-1).map((x,w)=>{const C=l[w+1];return Br(r,2,1,[x[0],x[1],C[0],C[1]])}));const u=`ROW${n.matrix.row}`,f=`COL${n.matrix.col}`,h=a.position.x,p=a.position.y-at(1),v=Br(u,2,1,[a.position.x,a.position.y,h,p]);n.track.push(v);const P=fh(u,h,p,2.4,.6);n.via.push(P),this.__rowPort=P,this.__colPort=i;const S=i.position.x-at(4.5),g=i.position.y+at(9.5);this.__viaForController=fh("",S,g,2.4,.6);const m=[[this.__viaForController.position.x,this.__viaForController.position.y],[this.__viaForController.position.x,this.__viaForController.position.y-at(6.5)],[this.__viaForController.position.x+at(.5),this.__viaForController.position.y-at(7)],[this.__viaForController.position.x+at(3),this.__viaForController.position.y-at(7)],[this.__colPort.position.x,this.__colPort.position.y]];this.__viaTrack=m.slice(0,-1).map((x,w)=>Br(f,2,1,[x[0],x[1],m[w+1][0],m[w+1][1]]))}get _rowPort(){return this.__rowPort}get _colPort(){return this.__colPort}get _viaForController(){return this.__viaForController}get _viaTrack(){return this.__viaTrack}getOutlines(){const n=this.size.w,r=this.size.h,i=this.swCenter.x,s=this.swCenter.y,a=this.position.a,o=Math.cos(a*Math.PI/180),l=Math.sin(a*Math.PI/180),u=n/2,f=r/2,h=n/2,p=-r/2,v=-n/2,P=-r/2,S=-n/2,g=r/2,m=i+u*o+f*l,x=s-u*l+f*o,w=i+h*o+p*l,C=s-h*l+p*o,A=i+v*o+P*l,M=s-v*l+P*o,E=i+S*o+g*l,N=s-S*l+g*o;return{p1:{x:m,y:x},p2:{x:w,y:C},p3:{x:A,y:M},p4:{x:E,y:N}}}static createChocV2SwModule(n,r,i,s=0,a=0,o=19,l=19,u=0){const f=ca.createParts(Bo(qG),`SW${n}`),h=ca.createParts(Bo(gA),`D${n}`);return new J2({sw:f,diode:h,track:[],via:[],position:{x:0,y:0},size:{w:o,h:l},matrix:{row:r,col:i},angle:0,centerOffset:{x:_w.x,y:_w.y},diodeOffset:{x:-7,y:5,angle:90},index:n}).translate(s,a).rotate(u%360)}}function YX(t,e){return t.map((n,r)=>n.switchType===void 0||n.switchType.includes("mx")?K2.createMxSwModule(r+1,n.row,n.col,n.x+40,n.y+30,n.w,n.h,n.a,e):J2.createChocV2SwModule(r+1,n.row,n.col,n.x+40,n.y+30,n.w,n.h,n.a+180))}let Ow=class{constructor(e,n,r,i){vt(this,"parent");vt(this,"pos");vt(this,"costFromStart");vt(this,"estimatedTotalCost");this.parent=e,this.pos=n,this.costFromStart=r,this.estimatedTotalCost=i+r}};class jX{constructor(e){vt(this,"heap",[]);this.compare=e}push(e){this.heap.push(e),this.shiftUp(this.heap.length-1)}pop(){if(this.heap.length===0)return;const e=this.heap[0],n=this.heap.pop();return this.heap.length>0&&(this.heap[0]=n,this.shiftDown(0)),e}shiftUp(e){for(;e>0;){const n=e-1>>1;if(this.compare(this.heap[e],this.heap[n])>=0)break;[this.heap[e],this.heap[n]]=[this.heap[n],this.heap[e]],e=n}}shiftDown(e){const n=this.heap.length,r=this.heap[e];for(;;){const i=(e<<1)+1,s=(e<<1)+2;let a=-1;if(i<n){const o=this.heap[i];this.compare(o,r)<0&&(a=i)}if(s<n){const o=this.heap[s];this.compare(o,a===-1?r:this.heap[a])<0&&(a=s)}if(a===-1)break;[this.heap[e],this.heap[a]]=[this.heap[a],this.heap[e]],e=a}}}class Nw{constructor(e){this.gridSizePx=e,this.gridSizePx=e}optimizePath(e,n,r,i){let s=0;const a=5;let o=a;for(;n+o<e.length&&Array.from({length:o}).map((f,h)=>Math.hypot(e[n+1+h].x-e[n+h].x,e[n+1+h].y-e[n+h].y)).every(f=>f<=2*this.gridSizePx);)o++,s=o;if(s<a)return 0;let l=!1;for(let u=n;u<n+s;u++){const f=e[u];if([{x:f.x+1,y:f.y},{x:f.x-1,y:f.y},{x:f.x,y:f.y-1},{x:f.x,y:f.y+1}].some(p=>!i(p))){l=!0;break}}if(!l)return 0;for(let u=s;u>=a;u--){const f=e[n],h=e[n+u];let p=!0;for(let v=.01;v<1;v+=.01){const P={x:Math.round(f.x+(h.x-f.x)*v),y:Math.round(f.y+(h.y-f.y)*v)};if(!r(P)){p=!1;break}}if(p)return u}return 0}outputPath(e,n,r){const i=[];let s=e;for(;s;)i.unshift(s.pos),s=s.parent;if(i.length<=2)return i;const a=[i[0]];let o={x:i[1].x-i[0].x,y:i[1].y-i[0].y};for(let v=1;v<i.length-1;v++){const P={x:i[v+1].x-i[v].x,y:i[v+1].y-i[v].y};(o.x!==P.x||o.y!==P.y)&&(a.push({x:(i[v-1].x+i[v].x)/2,y:(i[v-1].y+i[v].y)/2}),a.push({x:(i[v+1].x+i[v].x)/2,y:(i[v+1].y+i[v].y)/2}),o=P)}for(let v=a.length-1;v>0;v--)a[v].x===a[v-1].x&&a[v].y===a[v-1].y&&a.splice(v,1);let l=!0;for(;l;){l=!1;for(let v=0;v<a.length-2;v++){const P={x:a[v+1].x-a[v].x,y:a[v+1].y-a[v].y},S={x:a[v+2].x-a[v+1].x,y:a[v+2].y-a[v+1].y},g=Math.atan2(P.y,P.x),m=Math.atan2(S.y,S.x),x=Math.abs(g-m);Math.abs(x)<.01&&(a.splice(v+1,1),v--,l=!0)}}const u=i[0],f=i[i.length-1];a.push(f);const h=[];let p=0;for(;p<a.length;)if(Math.hypot(a[p].x-f.x,a[p].y-f.y)<=10*this.gridSizePx||Math.hypot(a[p].x-u.x,a[p].y-u.y)<=10*this.gridSizePx)h.push(a[p]),p++;else{const v=this.optimizePath(a,p,n,r);v>0?(h.push(a[p]),h.push(a[p+v-1]),p+=v):(h.push(a[p]),p++)}return h}findShortestPath(e,n,r,i,s,a){const o=new jX((v,P)=>v.estimatedTotalCost==P.estimatedTotalCost?v.costFromStart-P.costFromStart:v.estimatedTotalCost-P.estimatedTotalCost),l=new Map,u=new Set,f=v=>`${v.x},${v.y}`,h=new Ow(null,e,0,s(e,e,n));o.push(h),l.set(f(e),h);let p=0;for(;p++<3e4;){const v=o.pop();if(!v)return console.log("No path found"),[];if(v.pos.x===n.x&&v.pos.y===n.y)return this.outputPath(v,r,a);const P=f(v.pos);u.add(P),l.delete(P);const S=[{x:v.pos.x+1,y:v.pos.y},{x:v.pos.x-1,y:v.pos.y},{x:v.pos.x,y:v.pos.y+1},{x:v.pos.x,y:v.pos.y-1}];for(const g of S){const m=f(g);if(u.has(m)||!r(g))continue;const x=i(g,n),w=v.costFromStart+x,C=l.get(m);if(C)w<C.costFromStart&&(C.costFromStart=w,C.estimatedTotalCost=w+s(g,e,n),C.parent=v,o.push(C));else{const A=new Ow(v,g,w,s(g,e,n));o.push(A),l.set(m,A)}}}return console.log("No path found - iteration limit reached"),[]}routeMatrix(e){let n=[],r=[];const i=at(Math.max(...e.switches.map(h=>h.position.y))+20),s=at(Math.max(...e.switches.map(h=>h.position.x))+20),a=(h,p)=>({x:Math.floor(h.x/p),y:Math.floor(h.y/p)}),o=h=>e.isPointInOutline({x:Yr((h.x+.5)*this.gridSizePx),y:Yr((h.y+.5)*this.gridSizePx)}),l=h=>p=>{const v=p.x>=0&&p.x<Math.ceil(s/this.gridSizePx)&&p.y>=0&&p.y<Math.ceil(i/this.gridSizePx)&&!h.has(`${p.x},${p.y}`),P=o(p);return v&&P},u=(h,p,v)=>p.slice(0,-1).map((P,S)=>{const g=p[S+1];return Br(h,v,1,[P.x,P.y,g.x,g.y])});let f=[];for(let h=0;h<e.rowCount;h++){const p=e.switches.filter(m=>m.matrix.row==h).sort((m,x)=>m.matrix.col-x.matrix.col);if(p.length===0)continue;const v=e.obstacle(p[0].ports.row.net,1,this.gridSizePx),P=(m,x)=>1,S=(m,x,w)=>Math.abs(m.x-x.x)>Math.abs(m.x-w.x)?Math.abs(m.x-w.x)*.99+Math.abs(m.y-w.y):Math.abs(m.x-w.x)+Math.abs(m.y-w.y)*.99,g=l(v);p.slice(0,-1).forEach((m,x)=>{const w=a(m.ports.row,this.gridSizePx),C=a(p[x+1].ports.row,this.gridSizePx);let A=!0;if(g(w)?g(C)||(console.error("Invalid start",p[x+1].ports.row),A=!1):(console.error("Invalid goal",m.ports.row),A=!1),!A){r.push({net:m.ports.row.net,pin:`SW-${m.matrix.row}-${m.matrix.col}`});return}const M=this.findShortestPath(w,C,g,P,S,o).map(E=>({x:(E.x+.5)*this.gridSizePx,y:(E.y+.5)*this.gridSizePx}));if(M.length===0)console.log(`No path found for ${m.ports.row.net}`),r.push({net:m.ports.row.net,pin:`SW-${m.matrix.row}-${m.matrix.col}`});else{M.push(p[x+1].ports.row),M.unshift({x:m.ports.row.x,y:m.ports.row.y});const E=u(m.ports.row.net,M,1);f.push(...E),e.matrixConnections.push(...E),n.push({net:m.ports.row.net,pin:`SW-${m.matrix.row}-${m.matrix.col}`})}})}for(let h=0;h<e.colCount;h++){const p=e.switches.filter(m=>m.matrix.col==h).sort((m,x)=>m.matrix.row-x.matrix.row);if(p.length===0)continue;const v=e.obstacle(p[0].ports.col.net,2,this.gridSizePx),P=(m,x)=>1,S=(m,x,w)=>Math.abs(m.y-x.y)>Math.abs(m.y-w.y)?Math.abs(m.x-w.x)+Math.abs(m.y-w.y)*.99:Math.abs(m.x-w.x)*.99+Math.abs(m.y-w.y),g=l(v);p.slice(0,-1).forEach((m,x)=>{const w=a(m.ports.col,this.gridSizePx),C=a(p[x+1].ports.col,this.gridSizePx);let A=!0;if(g(w)?g(C)||(console.error("Invalid start",p[x+1].ports.col),A=!1):(console.error("Invalid goal",m.ports.row),A=!1),!A){r.push({net:m.ports.row.net,pin:`SW-${m.matrix.row}-${m.matrix.col}`});return}const M=this.findShortestPath(w,C,g,P,S,o).map(E=>({x:(E.x+.5)*this.gridSizePx,y:(E.y+.5)*this.gridSizePx}));if(M.length===0)console.log(`No path found for ${m.ports.col.net}`),r.push({net:m.ports.row.net,pin:`SW-${m.matrix.row}-${m.matrix.col}`});else{M.push(p[x+1].ports.col),M.unshift({x:m.ports.col.x,y:m.ports.col.y});const E=u(m.ports.col.net,M,2);f.push(...E),e.matrixConnections.push(...E),n.push({net:m.ports.row.net,pin:`SW-${m.matrix.row}-${m.matrix.col}`})}})}return{connected:n,notConnected:r}}routeController(e){let n=[],r=[],i=[];const s=e.getMatrixToControllerPorts(e.controller.side),a=at(Math.max(...e.switches.map(v=>v.position.y))+20),o=at(Math.max(...e.switches.map(v=>v.position.x))+20),l=(v,P)=>({x:Math.floor(v.x/P),y:Math.floor(v.y/P)}),u=v=>e.isPointInOutline({x:Yr((v.x+.5)*this.gridSizePx),y:Yr((v.y+.5)*this.gridSizePx)}),f=(v,P,S)=>g=>{const m=g.x>=-10&&g.x<Math.ceil(o/this.gridSizePx)&&g.y>=-10&&g.y<Math.ceil(a/this.gridSizePx)&&!v.has(`${g.x},${g.y}`),x=P.matrix.row,w=P.matrix.col,C=e.switches.filter(N=>N.matrix.row!==x||N.matrix.col!==w).some(N=>N.isSwModuleZone(Yr((g.x+.5)*this.gridSizePx),Yr((g.y+.5)*this.gridSizePx))),A=e.controller.isInControllerZone(Yr((g.x+.5)*this.gridSizePx),Yr((g.y+.5)*this.gridSizePx)),M=e.controller.isPositionInTrackProhibitionZone(Yr((g.x+.5)*this.gridSizePx),Yr((g.y+.5)*this.gridSizePx),(S==null?void 0:S.padNumber)??0);return u(g)&&!M&&m&&(!C||A)},h=(v,P,S)=>P.slice(0,-1).map((g,m)=>{const x=P[m+1];return Br(v,S,1,[g.x,g.y,x.x,x.y])}),p=(v,P,S)=>{if(v.controller===void 0){console.log("No assigned controller pin found");return}const g=e.obstacle(v.controller.net,S,this.gridSizePx);P.forEach(E=>E.obstacle(v.swPort.net,S,this.gridSizePx).forEach(N=>g.add(`${N.x},${N.y}`)));const m=(E,N)=>{const I=E.x-N.x,L=E.y-N.y;return Math.abs(I)<24*this.gridSizePx&&L<0?1+Math.abs(L)/(50/this.gridSizePx):L>50?1+Math.abs(L)/(50/this.gridSizePx):1},x=(E,N,I)=>{const L=Math.abs(E.x-I.x),R=Math.abs(E.y-I.y);return Math.abs(E.y-N.y)<4?L*.9+R:L+R*.9},w=f(g,v.sw,v.controller),C=l(v.swPort,this.gridSizePx),A=l(v.controller,this.gridSizePx);if(w(C)){if(!w(A)){console.error("Invalid goal",v.controller);return}}else{console.error("Invalid start",v.sw);return}const M=this.findShortestPath(C,A,w,m,x,u).map(E=>({x:(E.x+.5)*this.gridSizePx,y:(E.y+.5)*this.gridSizePx}));if(M.length===0){console.log(`No path found for ${v.swPort.net}`);return}return M.push(v.controller),M.unshift(v.swPort),h(v.swPort.net,M,S)};return s.slice().forEach((v,P)=>{let S=p(v,n.flat(),1);S?(n.push(S),r.push({net:v.swPort.net,pin:`U1_${v.controller.padNumber}`})):(S=p(v,n.flat(),2),S?(n.push(S),r.push({net:v.swPort.net,pin:`U1_${v.controller.padNumber}`})):(console.error("Failed to route",v),i.push({net:v.swPort.net,pin:`U1_${v.controller.padNumber}`})))}),e.controllerConnections.push(...n.flat(2)),{connected:r,notConnected:i}}}const ZX=["cube","cylinder","sphere","tetrahedron","extrude","revolve","compose","union","difference","intersection","levelSet","smooth","ofMesh","hull"],KX=["add","subtract","intersect","decompose","warp","transform","translate","rotate","scale","mirror","calculateCurvature","calculateNormals","smoothByNormals","smoothOut","refine","refineToLength","refineToTolerance","setProperties","setTolerance","asOriginal","trimByPlane","split","splitByPlane","slice","project","hull"],JX=["square","circle","union","difference","intersection","compose","ofPolygons","hull"],QX=["add","subtract","intersect","rectClip","decompose","transform","translate","rotate","scale","mirror","simplify","offset","hull"],eW=["show","only","setMaterial"];function Vf(t,e,n,r,i){const s=i[t],a=n?s:s.prototype;for(const o of e){const l=a[o];a[o]=function(...u){const f=l(...u);return r.push(f),f}}}function Q2(t){const e=[];Vf("Manifold",KX,!1,e,t),Vf("Manifold",ZX,!0,e,t),Vf("CrossSection",QX,!1,e,t),Vf("CrossSection",JX,!0,e,t);for(const n of eW){const r=t[n];t[n]=function(...i){const s=r(...i);return e.push(s),s}}return t.cleanup=function(){for(const n of e)if(n instanceof Array)for(const r of n)r.delete();else n.delete();e.length=0},t.clone=function(n){return n.asOriginal()},t}const tW="modulepreload",nW=function(t){return"/auto-kdk/"+t},Dw={},rW=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=nW(l),l in Dw)return;Dw[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":tW,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((p,v)=>{h.addEventListener("load",p),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};var yh=(()=>{var t=import.meta.url;return async function(e={}){var n,r=e,i,s,a=new Promise((U,$)=>{i=U,s=$}),o=typeof window=="object",l=typeof importScripts=="function",u=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(u){const{createRequire:U}=await rW(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);var f=U(import.meta.url)}var h=!1;r.setup=function(){if(h)return;h=!0,r.initTBB();function U(pe,Ee,qe=it=>it){if(Ee)for(let it of Ee)pe.push_back(qe(it));return pe}function $(pe,Ee=qe=>qe){const qe=[],it=pe.size();for(let qt=0;qt<it;qt++)qe.push(Ee(pe.get(qt)));return qe}function ee(pe,Ee=qe=>qe){const qe=[],it=pe.size();for(let qt=0;qt<it;qt++){const Zn=pe.get(qt),or=Zn.size(),Hr=[];for(let rr=0;rr<or;rr++)Hr.push(Ee(Zn.get(rr)));qe.push(Hr)}return qe}function oe(pe){return pe[0].length<3&&(pe=[pe]),U(new r.Vector2_vec2,pe,Ee=>U(new r.Vector_vec2,Ee,qe=>qe instanceof Array?{x:qe[0],y:qe[1]}:qe))}function Se(pe){for(let Ee=0;Ee<pe.size();Ee++)pe.get(Ee).delete();pe.delete()}function Ne(pe){return pe[0]instanceof Array?{x:pe[0][0],y:pe[0][1]}:typeof pe[0]=="number"?{x:pe[0]||0,y:pe[1]||0}:pe[0]}function We(pe){return pe[0]instanceof Array?{x:pe[0][0],y:pe[0][1],z:pe[0][2]}:typeof pe[0]=="number"?{x:pe[0]||0,y:pe[1]||0,z:pe[2]||0}:pe[0]}function De(pe){return pe=="EvenOdd"?0:pe=="NonZero"?1:pe=="Negative"?3:2}function Je(pe){return pe=="Round"?1:pe=="Miter"?2:0}const rt=r.CrossSection;function pt(pe,Ee="Positive"){if(pe instanceof rt)return pe;{const qe=oe(pe),it=new rt(qe,De(Ee));return Se(qe),it}}r.CrossSection.prototype.translate=function(...pe){return this._Translate(Ne(pe))},r.CrossSection.prototype.scale=function(pe){return typeof pe=="number"?this._Scale({x:pe,y:pe}):this._Scale(Ne([pe]))},r.CrossSection.prototype.mirror=function(pe){return this._Mirror(Ne([pe]))},r.CrossSection.prototype.warp=function(pe){const Ee=Fc(function(it){const qt=X(it,"double"),Zn=X(it+8,"double"),or=[qt,Zn];pe(or),te(it,or[0],"double"),te(it+8,or[1],"double")},"vi"),qe=this._Warp(Ee);return Uc(Ee),qe},r.CrossSection.prototype.decompose=function(){const pe=this._Decompose(),Ee=$(pe);return pe.delete(),Ee},r.CrossSection.prototype.bounds=function(){const pe=this._Bounds();return{min:["x","y"].map(Ee=>pe.min[Ee]),max:["x","y"].map(Ee=>pe.max[Ee])}},r.CrossSection.prototype.offset=function(pe,Ee="Square",qe=2,it=0){return this._Offset(pe,Je(Ee),qe,it)},r.CrossSection.prototype.extrude=function(pe,Ee=0,qe=0,it=[1,1],qt=!1){it=Ne([it]);const Zn=r._Extrude(this._ToPolygons(),pe,Ee,qe,it);return qt?Zn.translate([0,0,-pe/2]):Zn},r.CrossSection.prototype.revolve=function(pe=0,Ee=360){return r._Revolve(this._ToPolygons(),pe,Ee)},r.CrossSection.prototype.add=function(pe){return this._add(pt(pe))},r.CrossSection.prototype.subtract=function(pe){return this._subtract(pt(pe))},r.CrossSection.prototype.intersect=function(pe){return this._intersect(pt(pe))},r.CrossSection.prototype.toPolygons=function(){const pe=this._ToPolygons(),Ee=ee(pe,qe=>[qe.x,qe.y]);return pe.delete(),Ee},r.Manifold.prototype.smoothOut=function(pe=60,Ee=0){return this._SmoothOut(pe,Ee)},r.Manifold.prototype.warp=function(pe){const Ee=Fc(function(qt){const Zn=X(qt,"double"),or=X(qt+8,"double"),Hr=X(qt+16,"double"),rr=[Zn,or,Hr];pe(rr),te(qt,rr[0],"double"),te(qt+8,rr[1],"double"),te(qt+16,rr[2],"double")},"vi"),qe=this._Warp(Ee);Uc(Ee);const it=qe.status();if(it.value!==0)throw new r.ManifoldError(it.value);return qe},r.Manifold.prototype.calculateNormals=function(pe,Ee=60){return this._CalculateNormals(pe,Ee)},r.Manifold.prototype.setProperties=function(pe,Ee){const qe=this.numProp(),it=Fc(function(Zn,or,Hr){const rr=[];for(let ir=0;ir<pe;++ir)rr[ir]=X(Zn+8*ir,"double");const tl=[];for(let ir=0;ir<3;++ir)tl[ir]=X(or+8*ir,"double");const nl=[];for(let ir=0;ir<qe;++ir)nl[ir]=X(Hr+8*ir,"double");Ee(rr,tl,nl);for(let ir=0;ir<pe;++ir)te(Zn+8*ir,rr[ir],"double")},"viii"),qt=this._SetProperties(pe,it);return Uc(it),qt},r.Manifold.prototype.translate=function(...pe){return this._Translate(We(pe))},r.Manifold.prototype.rotate=function(pe,Ee,qe){return Array.isArray(pe)?this._Rotate(...pe):this._Rotate(pe,Ee||0,qe||0)},r.Manifold.prototype.scale=function(pe){return typeof pe=="number"?this._Scale({x:pe,y:pe,z:pe}):this._Scale(We([pe]))},r.Manifold.prototype.mirror=function(pe){return this._Mirror(We([pe]))},r.Manifold.prototype.trimByPlane=function(pe,Ee=0){return this._TrimByPlane(We([pe]),Ee)},r.Manifold.prototype.slice=function(pe=0){const Ee=this._Slice(pe),qe=new rt(Ee,De("Positive"));return Se(Ee),qe},r.Manifold.prototype.project=function(){const pe=this._Project(),Ee=new rt(pe,De("Positive"));return Se(pe),Ee},r.Manifold.prototype.split=function(pe){const Ee=this._Split(pe),qe=$(Ee);return Ee.delete(),qe},r.Manifold.prototype.splitByPlane=function(pe,Ee=0){const qe=this._SplitByPlane(We([pe]),Ee),it=$(qe);return qe.delete(),it},r.Manifold.prototype.decompose=function(){const pe=this._Decompose(),Ee=$(pe);return pe.delete(),Ee},r.Manifold.prototype.boundingBox=function(){const pe=this._boundingBox();return{min:["x","y","z"].map(Ee=>pe.min[Ee]),max:["x","y","z"].map(Ee=>pe.max[Ee])}};class Xt{constructor({numProp:Ee=3,triVerts:qe=new Uint32Array,vertProperties:it=new Float32Array,mergeFromVert:qt,mergeToVert:Zn,runIndex:or,runOriginalID:Hr,faceID:rr,halfedgeTangent:tl,runTransform:nl}={}){this.numProp=Ee,this.triVerts=qe,this.vertProperties=it,this.mergeFromVert=qt,this.mergeToVert=Zn,this.runIndex=or,this.runOriginalID=Hr,this.faceID=rr,this.halfedgeTangent=tl,this.runTransform=nl}get numTri(){return this.triVerts.length/3}get numVert(){return this.vertProperties.length/this.numProp}get numRun(){return this.runOriginalID.length}merge(){const{changed:Ee,mesh:qe}=r._Merge(this);return Object.assign(this,{...qe}),Ee}verts(Ee){return this.triVerts.subarray(3*Ee,3*(Ee+1))}position(Ee){return this.vertProperties.subarray(this.numProp*Ee,this.numProp*Ee+3)}extras(Ee){return this.vertProperties.subarray(this.numProp*Ee+3,this.numProp*(Ee+1))}tangent(Ee){return this.halfedgeTangent.subarray(4*Ee,4*(Ee+1))}transform(Ee){const qe=new Array(16);for(const it of[0,1,2,3])for(const qt of[0,1,2])qe[4*it+qt]=this.runTransform[12*Ee+3*it+qt];return qe[15]=1,qe}}r.Mesh=Xt,r.Manifold.prototype.getMesh=function(pe=-1){return new Xt(this._GetMeshJS(pe))},r.ManifoldError=function(Ee,...qe){let it="Unknown error";switch(Ee){case r.status.NonFiniteVertex.value:it="Non-finite vertex";break;case r.status.NotManifold.value:it="Not manifold";break;case r.status.VertexOutOfBounds.value:it="Vertex index out of bounds";break;case r.status.PropertiesWrongLength.value:it="Properties have wrong length";break;case r.status.MissingPositionProperties.value:it="Less than three properties";break;case r.status.MergeVectorsDifferentLengths.value:it="Merge vectors have different lengths";break;case r.status.MergeIndexOutOfBounds.value:it="Merge index out of bounds";break;case r.status.TransformWrongLength.value:it="Transform vector has wrong length";break;case r.status.RunIndexWrongLength.value:it="Run index vector has wrong length";break;case r.status.FaceIDWrongLength.value:it="Face ID vector has wrong length";case r.status.InvalidConstruction.value:it="Manifold constructed with invalid parameters"}const qt=Error.apply(this,[it,...qe]);qt.name=this.name="ManifoldError",this.message=qt.message,this.stack=qt.stack,this.code=Ee},r.ManifoldError.prototype=Object.create(Error.prototype,{constructor:{value:r.ManifoldError,writable:!0,configurable:!0}}),r.CrossSection=function(pe,Ee="Positive"){const qe=oe(pe),it=new rt(qe,De(Ee));return Se(qe),it},r.CrossSection.ofPolygons=function(pe,Ee="Positive"){return new r.CrossSection(pe,Ee)},r.CrossSection.square=function(...pe){let Ee;pe.length==0?Ee={x:1,y:1}:typeof pe[0]=="number"?Ee={x:pe[0],y:pe[0]}:Ee=Ne(pe);const qe=pe[1]||!1;return r._Square(Ee,qe)},r.CrossSection.circle=function(pe,Ee=0){return r._Circle(pe,Ee)};function xn(pe){return function(...Ee){Ee.length==1&&(Ee=Ee[0]);const qe=new r.Vector_crossSection;for(const qt of Ee)qe.push_back(pt(qt));const it=r["_crossSection"+pe](qe);return qe.delete(),it}}r.CrossSection.compose=xn("Compose"),r.CrossSection.union=xn("UnionN"),r.CrossSection.difference=xn("DifferenceN"),r.CrossSection.intersection=xn("IntersectionN");function ar(pe,Ee){U(pe,Ee,qe=>qe instanceof Array?{x:qe[0],y:qe[1]}:qe)}r.CrossSection.hull=function(...pe){pe.length==1&&(pe=pe[0]);let Ee=new r.Vector_vec2;for(const it of pe)if(it instanceof rt)r._crossSectionCollectVertices(Ee,it);else if(it instanceof Array&&it.length==2&&typeof it[0]=="number")Ee.push_back({x:it[0],y:it[1]});else if(it.x)Ee.push_back(it);else{const Zn=it[0].length==2&&typeof it[0][0]=="number"||it[0].x?[it]:it;for(const or of Zn)ar(Ee,or)}const qe=r._crossSectionHullPoints(Ee);return Ee.delete(),qe},r.CrossSection.prototype=Object.create(rt.prototype),Object.defineProperty(r.CrossSection,Symbol.hasInstance,{get:()=>pe=>pe instanceof rt});const er=r.Manifold;r.Manifold=function(pe){const Ee=new er(pe),qe=Ee.status();if(qe.value!==0)throw new r.ManifoldError(qe.value);return Ee},r.Manifold.ofMesh=function(pe){return new r.Manifold(pe)},r.Manifold.tetrahedron=function(){return r._Tetrahedron()},r.Manifold.cube=function(...pe){let Ee;pe.length==0?Ee={x:1,y:1,z:1}:typeof pe[0]=="number"?Ee={x:pe[0],y:pe[0],z:pe[0]}:Ee=We(pe);const qe=pe[1]||!1;return r._Cube(Ee,qe)},r.Manifold.cylinder=function(pe,Ee,qe=-1,it=0,qt=!1){return r._Cylinder(pe,Ee,qe,it,qt)},r.Manifold.sphere=function(pe,Ee=0){return r._Sphere(pe,Ee)},r.Manifold.smooth=function(pe,Ee=[]){const qe=new r.Vector_smoothness;U(qe,Ee);const it=r._Smooth(pe,qe);return qe.delete(),it},r.Manifold.extrude=function(pe,Ee,qe=0,it=0,qt=[1,1],Zn=!1){return(pe instanceof rt?pe:r.CrossSection(pe,"Positive")).extrude(Ee,qe,it,qt,Zn)},r.Manifold.revolve=function(pe,Ee=0,qe=360){return(pe instanceof rt?pe:r.CrossSection(pe,"Positive")).revolve(Ee,qe)},r.Manifold.reserveIDs=function(pe){return r._ReserveIDs(pe)},r.Manifold.compose=function(pe){const Ee=new r.Vector_manifold;U(Ee,pe);const qe=r._manifoldCompose(Ee);return Ee.delete(),qe};function Fi(pe){return function(...Ee){Ee.length==1&&(Ee=Ee[0]);const qe=new r.Vector_manifold;for(const qt of Ee)qe.push_back(qt);const it=r["_manifold"+pe+"N"](qe);return qe.delete(),it}}r.Manifold.union=Fi("Union"),r.Manifold.difference=Fi("Difference"),r.Manifold.intersection=Fi("Intersection"),r.Manifold.levelSet=function(pe,Ee,qe,it=0,qt=-1){const Zn={min:{x:Ee.min[0],y:Ee.min[1],z:Ee.min[2]},max:{x:Ee.max[0],y:Ee.max[1],z:Ee.max[2]}},or=Fc(function(rr){const tl=X(rr,"double"),nl=X(rr+8,"double"),ir=X(rr+16,"double");return pe([tl,nl,ir])},"di"),Hr=r._LevelSet(or,Zn,qe,it,qt);return Uc(or),Hr};function Ui(pe,Ee){U(pe,Ee,qe=>qe instanceof Array?{x:qe[0],y:qe[1],z:qe[2]}:qe)}r.Manifold.hull=function(...pe){pe.length==1&&(pe=pe[0]);let Ee=new r.Vector_vec3;for(const it of pe)it instanceof er?r._manifoldCollectVertices(Ee,it):it instanceof Array&&it.length==3&&typeof it[0]=="number"?Ee.push_back({x:it[0],y:it[1],z:it[2]}):it.x?Ee.push_back(it):Ui(Ee,it);const qe=r._manifoldHullPoints(Ee);return Ee.delete(),qe},r.Manifold.prototype=Object.create(er.prototype),Object.defineProperty(r.Manifold,Symbol.hasInstance,{get:()=>pe=>pe instanceof er}),r.triangulate=function(pe,Ee=-1){const qe=oe(pe),it=$(r._Triangulate(qe,Ee),qt=>[qt[0],qt[1],qt[2]]);return Se(qe),it}};var p=Object.assign({},r),v="";function P(U){return r.locateFile?r.locateFile(U,v):v+U}var S,g;if(u){var m=f("fs"),x=f("path");v=f("url").fileURLToPath(new URL("/auto-kdk/assets/manifold-BrJGmODQ.js",import.meta.url)),g=U=>{U=He(U)?new URL(U):x.normalize(U);var $=m.readFileSync(U);return $},S=(U,$=!0)=>(U=He(U)?new URL(U):x.normalize(U),new Promise((ee,oe)=>{m.readFile(U,$?void 0:"utf8",(Se,Ne)=>{Se?oe(Se):ee($?Ne.buffer:Ne)})})),!r.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else(o||l)&&(l?v=self.location.href:typeof document<"u"&&document.currentScript&&(v=document.currentScript.src),t&&(v=t),v.startsWith("blob:")?v="":v=v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(g=U=>{var $=new XMLHttpRequest;return $.open("GET",U,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}),S=U=>He(U)?new Promise(($,ee)=>{var oe=new XMLHttpRequest;oe.open("GET",U,!0),oe.responseType="arraybuffer",oe.onload=()=>{(oe.status==200||oe.status==0&&oe.response)&&ee(oe.response),$(oe.status)},oe.onerror=$,oe.send(null)}):fetch(U,{credentials:"same-origin"}).then($=>$.ok?$.arrayBuffer():Promise.reject(new Error($.status+" : "+$.url))));r.print||console.log.bind(console);var w=r.printErr||console.error.bind(console);Object.assign(r,p),p=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&r.quit;var C;r.wasmBinary&&(C=r.wasmBinary);var A,M=!1,E,N,I,L,R,B,V,z;function G(){var U=A.buffer;r.HEAP8=E=new Int8Array(U),r.HEAP16=I=new Int16Array(U),r.HEAPU8=N=new Uint8Array(U),r.HEAPU16=L=new Uint16Array(U),r.HEAP32=R=new Int32Array(U),r.HEAPU32=B=new Uint32Array(U),r.HEAPF32=V=new Float32Array(U),r.HEAPF64=z=new Float64Array(U)}var O=[],y=[],b=[];function k(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)W(r.preRun.shift());re(O)}function F(){re(y)}function H(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Z(r.postRun.shift());re(b)}function W(U){O.unshift(U)}function ne(U){y.unshift(U)}function Z(U){b.unshift(U)}var K=0,ae=null;function se(U){var $;K++,($=r.monitorRunDependencies)==null||$.call(r,K)}function ye(U){var ee;if(K--,(ee=r.monitorRunDependencies)==null||ee.call(r,K),K==0&&ae){var $=ae;ae=null,$()}}function me(U){var ee;(ee=r.onAbort)==null||ee.call(r,U),U="Aborted("+U+")",w(U),M=!0,U+=". Build with -sASSERTIONS for more info.";var $=new WebAssembly.RuntimeError(U);throw s($),$}var Ae="data:application/octet-stream;base64,",Ue=U=>U.startsWith(Ae),He=U=>U.startsWith("file://");function Qe(){if(r.locateFile){var U="manifold.wasm";return Ue(U)?U:P(U)}return new URL("/auto-kdk/assets/manifold-CUOyaTWM.wasm",import.meta.url).href}var ie;function dt(U){if(U==ie&&C)return new Uint8Array(C);if(g)return g(U);throw"both async and sync fetching of the wasm failed"}function ke(U){return C?Promise.resolve().then(()=>dt(U)):S(U).then($=>new Uint8Array($),()=>dt(U))}function ut(U,$,ee){return ke(U).then(oe=>WebAssembly.instantiate(oe,$)).then(ee,oe=>{w(`failed to asynchronously prepare wasm: ${oe}`),me(oe)})}function tt(U,$,ee,oe){return!U&&typeof WebAssembly.instantiateStreaming=="function"&&!Ue($)&&!He($)&&!u&&typeof fetch=="function"?fetch($,{credentials:"same-origin"}).then(Se=>{var Ne=WebAssembly.instantiateStreaming(Se,ee);return Ne.then(oe,function(We){return w(`wasm streaming compile failed: ${We}`),w("falling back to ArrayBuffer instantiation"),ut($,ee,oe)})}):ut($,ee,oe)}function Pt(){return{a:QR}}function lt(){var U=Pt();function $(oe,Se){return ki=oe.exports,ki=e4(ki),A=ki.J,G(),Bn=ki.M,ne(ki.K),ye(),ki}se();function ee(oe){$(oe.instance)}if(r.instantiateWasm)try{return r.instantiateWasm(U,$)}catch(oe){w(`Module.instantiateWasm callback failed with error: ${oe}`),s(oe)}return ie||(ie=Qe()),tt(C,ie,U,ee).catch(s),{}}var re=U=>{for(;U.length>0;)U.shift()(r)};function X(U,$="i8"){switch($.endsWith("*")&&($="*"),$){case"i1":return E[U>>>0];case"i8":return E[U>>>0];case"i16":return I[U>>>1>>>0];case"i32":return R[U>>>2>>>0];case"i64":me("to do getValue(i64) use WASM_BIGINT");case"float":return V[U>>>2>>>0];case"double":return z[U>>>3>>>0];case"*":return B[U>>>2>>>0];default:me(`invalid type for getValue: ${$}`)}}r.noExitRuntime;function te(U,$,ee="i8"){switch(ee.endsWith("*")&&(ee="*"),ee){case"i1":E[U>>>0]=$;break;case"i8":E[U>>>0]=$;break;case"i16":I[U>>>1>>>0]=$;break;case"i32":R[U>>>2>>>0]=$;break;case"i64":me("to do setValue(i64) use WASM_BIGINT");case"float":V[U>>>2>>>0]=$;break;case"double":z[U>>>3>>>0]=$;break;case"*":B[U>>>2>>>0]=$;break;default:me(`invalid type for setValue: ${ee}`)}}class fe{constructor($){this.excPtr=$,this.ptr=$-24}set_type($){B[this.ptr+4>>>2>>>0]=$}get_type(){return B[this.ptr+4>>>2>>>0]}set_destructor($){B[this.ptr+8>>>2>>>0]=$}get_destructor(){return B[this.ptr+8>>>2>>>0]}set_caught($){$=$?1:0,E[this.ptr+12>>>0]=$}get_caught(){return E[this.ptr+12>>>0]!=0}set_rethrown($){$=$?1:0,E[this.ptr+13>>>0]=$}get_rethrown(){return E[this.ptr+13>>>0]!=0}init($,ee){this.set_adjusted_ptr(0),this.set_type($),this.set_destructor(ee)}set_adjusted_ptr($){B[this.ptr+16>>>2>>>0]=$}get_adjusted_ptr(){return B[this.ptr+16>>>2>>>0]}get_exception_ptr(){var $=n9(this.get_type());if($)return B[this.excPtr>>>2>>>0];var ee=this.get_adjusted_ptr();return ee!==0?ee:this.excPtr}}var de=0;function he(U,$,ee){U>>>=0,$>>>=0,ee>>>=0;var oe=new fe(U);throw oe.init($,ee),de=U,de}var Be=()=>{me("")},Ie={},Ge=U=>{for(;U.length;){var $=U.pop(),ee=U.pop();ee($)}};function xt(U){return this.fromWireType(B[U>>>2>>>0])}var Oe={},Ke={},_t={},ve,ge=U=>{throw new ve(U)},we=(U,$,ee)=>{U.forEach(function(De){_t[De]=$});function oe(De){var Je=ee(De);Je.length!==U.length&&ge("Mismatched type converter count");for(var rt=0;rt<U.length;++rt)Rt(U[rt],Je[rt])}var Se=new Array($.length),Ne=[],We=0;$.forEach((De,Je)=>{Ke.hasOwnProperty(De)?Se[Je]=Ke[De]:(Ne.push(De),Oe.hasOwnProperty(De)||(Oe[De]=[]),Oe[De].push(()=>{Se[Je]=Ke[De],++We,We===Ne.length&&oe(Se)}))}),Ne.length===0&&oe(Se)},Me=function(U){U>>>=0;var $=Ie[U];delete Ie[U];var ee=$.rawConstructor,oe=$.rawDestructor,Se=$.fields,Ne=Se.map(We=>We.getterReturnType).concat(Se.map(We=>We.setterArgumentType));we([U],Ne,We=>{var De={};return Se.forEach((Je,rt)=>{var pt=Je.fieldName,Xt=We[rt],xn=Je.getter,ar=Je.getterContext,er=We[rt+Se.length],Fi=Je.setter,Ui=Je.setterContext;De[pt]={read:pe=>Xt.fromWireType(xn(ar,pe)),write:(pe,Ee)=>{var qe=[];Fi(Ui,pe,er.toWireType(qe,Ee)),Ge(qe)}}}),[{name:$.name,fromWireType:Je=>{var rt={};for(var pt in De)rt[pt]=De[pt].read(Je);return oe(Je),rt},toWireType:(Je,rt)=>{for(var pt in De)if(!(pt in rt))throw new TypeError(`Missing field: "${pt}"`);var Xt=ee();for(pt in De)De[pt].write(Xt,rt[pt]);return Je!==null&&Je.push(oe,Xt),Xt},argPackAdvance:on,readValueFromPointer:xt,destructorFunction:oe}]})};function Ze(U,$,ee,oe,Se){}var le=()=>{for(var U=new Array(256),$=0;$<256;++$)U[$]=String.fromCharCode($);$e=U},$e,be=U=>{for(var $="",ee=U;N[ee>>>0];)$+=$e[N[ee++>>>0]];return $},Le,ze=U=>{throw new Le(U)};function ft(U,$,ee={}){var oe=$.name;if(U||ze(`type "${oe}" must have a positive integer typeid pointer`),Ke.hasOwnProperty(U)){if(ee.ignoreDuplicateRegistrations)return;ze(`Cannot register type '${oe}' twice`)}if(Ke[U]=$,delete _t[U],Oe.hasOwnProperty(U)){var Se=Oe[U];delete Oe[U],Se.forEach(Ne=>Ne())}}function Rt(U,$,ee={}){if(!("argPackAdvance"in $))throw new TypeError("registerType registeredInstance requires argPackAdvance");return ft(U,$,ee)}var on=8;function Wn(U,$,ee,oe){U>>>=0,$>>>=0,$=be($),Rt(U,{name:$,fromWireType:function(Se){return!!Se},toWireType:function(Se,Ne){return Ne?ee:oe},argPackAdvance:on,readValueFromPointer:function(Se){return this.fromWireType(N[Se>>>0])},destructorFunction:null})}var Jt=U=>({count:U.count,deleteScheduled:U.deleteScheduled,preservePointerOnDelete:U.preservePointerOnDelete,ptr:U.ptr,ptrType:U.ptrType,smartPtr:U.smartPtr,smartPtrType:U.smartPtrType}),Qn=U=>{function $(ee){return ee.$$.ptrType.registeredClass.name}ze($(U)+" instance already deleted")},vr=!1,ss=U=>{},Ns=U=>{U.smartPtr?U.smartPtrType.rawDestructor(U.smartPtr):U.ptrType.registeredClass.rawDestructor(U.ptr)},yi=U=>{U.count.value-=1;var $=U.count.value===0;$&&Ns(U)},da=(U,$,ee)=>{if($===ee)return U;if(ee.baseClass===void 0)return null;var oe=da(U,$,ee.baseClass);return oe===null?null:ee.downcast(oe)},no={},Jo=()=>Object.keys(si).length,ha=()=>{var U=[];for(var $ in si)si.hasOwnProperty($)&&U.push(si[$]);return U},as=[],os=()=>{for(;as.length;){var U=as.pop();U.$$.deleteScheduled=!1,U.delete()}},ls,Qo=U=>{ls=U,as.length&&ls&&ls(os)},Nc=()=>{r.getInheritedInstanceCount=Jo,r.getLiveInheritedInstances=ha,r.flushPendingDeletes=os,r.setDelayFunction=Qo},si={},el=(U,$)=>{for($===void 0&&ze("ptr should not be undefined");U.baseClass;)$=U.upcast($),U=U.baseClass;return $},Dc=(U,$)=>($=el(U,$),si[$]),pa=(U,$)=>{(!$.ptrType||!$.ptr)&&ge("makeClassHandle requires ptr and ptrType");var ee=!!$.smartPtrType,oe=!!$.smartPtr;return ee!==oe&&ge("Both smartPtrType and smartPtr must be specified"),$.count={value:1},J(Object.create(U,{$$:{value:$,writable:!0}}))};function kc(U){var $=this.getPointee(U);if(!$)return this.destructor(U),null;var ee=Dc(this.registeredClass,$);if(ee!==void 0){if(ee.$$.count.value===0)return ee.$$.ptr=$,ee.$$.smartPtr=U,ee.clone();var oe=ee.clone();return this.destructor(U),oe}function Se(){return this.isSmartPointer?pa(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:$,smartPtrType:this,smartPtr:U}):pa(this.registeredClass.instancePrototype,{ptrType:this,ptr:U})}var Ne=this.registeredClass.getActualType($),We=no[Ne];if(!We)return Se.call(this);var De;this.isConst?De=We.constPointerType:De=We.pointerType;var Je=da($,this.registeredClass,De.registeredClass);return Je===null?Se.call(this):this.isSmartPointer?pa(De.registeredClass.instancePrototype,{ptrType:De,ptr:Je,smartPtrType:this,smartPtr:U}):pa(De.registeredClass.instancePrototype,{ptrType:De,ptr:Je})}var J=U=>typeof FinalizationRegistry>"u"?(J=$=>$,U):(vr=new FinalizationRegistry($=>{yi($.$$)}),J=$=>{var ee=$.$$,oe=!!ee.smartPtr;if(oe){var Se={$$:ee};vr.register($,Se,$)}return $},ss=$=>vr.unregister($),J(U)),_e=()=>{Object.assign(Pe.prototype,{isAliasOf(U){if(!(this instanceof Pe)||!(U instanceof Pe))return!1;var $=this.$$.ptrType.registeredClass,ee=this.$$.ptr;U.$$=U.$$;for(var oe=U.$$.ptrType.registeredClass,Se=U.$$.ptr;$.baseClass;)ee=$.upcast(ee),$=$.baseClass;for(;oe.baseClass;)Se=oe.upcast(Se),oe=oe.baseClass;return $===oe&&ee===Se},clone(){if(this.$$.ptr||Qn(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var U=J(Object.create(Object.getPrototypeOf(this),{$$:{value:Jt(this.$$)}}));return U.$$.count.value+=1,U.$$.deleteScheduled=!1,U},delete(){this.$$.ptr||Qn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ze("Object already scheduled for deletion"),ss(this),yi(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Qn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ze("Object already scheduled for deletion"),as.push(this),as.length===1&&ls&&ls(os),this.$$.deleteScheduled=!0,this}})};function Pe(){}var Te=(U,$)=>Object.defineProperty($,"name",{value:U}),xe=(U,$,ee)=>{if(U[$].overloadTable===void 0){var oe=U[$];U[$]=function(...Se){return U[$].overloadTable.hasOwnProperty(Se.length)||ze(`Function '${ee}' called with an invalid number of arguments (${Se.length}) - expects one of (${U[$].overloadTable})!`),U[$].overloadTable[Se.length].apply(this,Se)},U[$].overloadTable=[],U[$].overloadTable[oe.argCount]=oe}},nt=(U,$,ee)=>{r.hasOwnProperty(U)?((ee===void 0||r[U].overloadTable!==void 0&&r[U].overloadTable[ee]!==void 0)&&ze(`Cannot register public name '${U}' twice`),xe(r,U,U),r.hasOwnProperty(ee)&&ze(`Cannot register multiple overloads of a function with the same number of arguments (${ee})!`),r[U].overloadTable[ee]=$):(r[U]=$,ee!==void 0&&(r[U].numArguments=ee))},mt=48,wt=57,St=U=>{if(U===void 0)return"_unknown";U=U.replace(/[^a-zA-Z0-9_]/g,"$");var $=U.charCodeAt(0);return $>=mt&&$<=wt?`_${U}`:U};function Bt(U,$,ee,oe,Se,Ne,We,De){this.name=U,this.constructor=$,this.instancePrototype=ee,this.rawDestructor=oe,this.baseClass=Se,this.getActualType=Ne,this.upcast=We,this.downcast=De,this.pureVirtualFunctions=[]}var Ut=(U,$,ee)=>{for(;$!==ee;)$.upcast||ze(`Expected null or instance of ${ee.name}, got an instance of ${$.name}`),U=$.upcast(U),$=$.baseClass;return U};function Ot(U,$){if($===null)return this.isReference&&ze(`null is not a valid ${this.name}`),0;$.$$||ze(`Cannot pass "${Sg($)}" as a ${this.name}`),$.$$.ptr||ze(`Cannot pass deleted object as a pointer of type ${this.name}`);var ee=$.$$.ptrType.registeredClass,oe=Ut($.$$.ptr,ee,this.registeredClass);return oe}function Ft(U,$){var ee;if($===null)return this.isReference&&ze(`null is not a valid ${this.name}`),this.isSmartPointer?(ee=this.rawConstructor(),U!==null&&U.push(this.rawDestructor,ee),ee):0;(!$||!$.$$)&&ze(`Cannot pass "${Sg($)}" as a ${this.name}`),$.$$.ptr||ze(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&$.$$.ptrType.isConst&&ze(`Cannot convert argument of type ${$.$$.smartPtrType?$.$$.smartPtrType.name:$.$$.ptrType.name} to parameter type ${this.name}`);var oe=$.$$.ptrType.registeredClass;if(ee=Ut($.$$.ptr,oe,this.registeredClass),this.isSmartPointer)switch($.$$.smartPtr===void 0&&ze("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:$.$$.smartPtrType===this?ee=$.$$.smartPtr:ze(`Cannot convert argument of type ${$.$$.smartPtrType?$.$$.smartPtrType.name:$.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:ee=$.$$.smartPtr;break;case 2:if($.$$.smartPtrType===this)ee=$.$$.smartPtr;else{var Se=$.clone();ee=this.rawShare(ee,Vn.toHandle(()=>Se.delete())),U!==null&&U.push(this.rawDestructor,ee)}break;default:ze("Unsupporting sharing policy")}return ee}function vn(U,$){if($===null)return this.isReference&&ze(`null is not a valid ${this.name}`),0;$.$$||ze(`Cannot pass "${Sg($)}" as a ${this.name}`),$.$$.ptr||ze(`Cannot pass deleted object as a pointer of type ${this.name}`),$.$$.ptrType.isConst&&ze(`Cannot convert argument of type ${$.$$.ptrType.name} to parameter type ${this.name}`);var ee=$.$$.ptrType.registeredClass,oe=Ut($.$$.ptr,ee,this.registeredClass);return oe}var Yn=()=>{Object.assign(Rn.prototype,{getPointee(U){return this.rawGetPointee&&(U=this.rawGetPointee(U)),U},destructor(U){var $;($=this.rawDestructor)==null||$.call(this,U)},argPackAdvance:on,readValueFromPointer:xt,fromWireType:kc})};function Rn(U,$,ee,oe,Se,Ne,We,De,Je,rt,pt){this.name=U,this.registeredClass=$,this.isReference=ee,this.isConst=oe,this.isSmartPointer=Se,this.pointeeType=Ne,this.sharingPolicy=We,this.rawGetPointee=De,this.rawConstructor=Je,this.rawShare=rt,this.rawDestructor=pt,!Se&&$.baseClass===void 0?oe?(this.toWireType=Ot,this.destructorFunction=null):(this.toWireType=vn,this.destructorFunction=null):this.toWireType=Ft}var yt=(U,$,ee)=>{r.hasOwnProperty(U)||ge("Replacing nonexistent public symbol"),r[U].overloadTable!==void 0&&ee!==void 0?r[U].overloadTable[ee]=$:(r[U]=$,r[U].argCount=ee)},Nt=(U,$,ee)=>{U=U.replace(/p/g,"i");var oe=r["dynCall_"+U];return oe($,...ee)},Bn,cn=U=>Bn.get(U),Ir=(U,$,ee=[])=>{if(U.includes("j"))return Nt(U,$,ee);var oe=cn($)(...ee);return U[0]=="p"?oe>>>0:oe},Di=(U,$)=>(...ee)=>Ir(U,$,ee),c=(U,$)=>{U=be(U);function ee(){return U.includes("j")||U.includes("p")?Di(U,$):cn($)}var oe=ee();return typeof oe!="function"&&ze(`unknown function pointer with signature ${U}: ${$}`),oe},d=(U,$)=>{var ee=Te($,function(oe){this.name=$,this.message=oe;var Se=new Error(oe).stack;Se!==void 0&&(this.stack=this.toString()+`
`+Se.replace(/^Error(:[^\n]*)?\n/,""))});return ee.prototype=Object.create(U.prototype),ee.prototype.constructor=ee,ee.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},ee},_,T=U=>{var $=t9(U),ee=be($);return Ds($),ee},D=(U,$)=>{var ee=[],oe={};function Se(Ne){if(!oe[Ne]&&!Ke[Ne]){if(_t[Ne]){_t[Ne].forEach(Se);return}ee.push(Ne),oe[Ne]=!0}}throw $.forEach(Se),new _(`${U}: `+ee.map(T).join([", "]))};function q(U,$,ee,oe,Se,Ne,We,De,Je,rt,pt,Xt,xn){U>>>=0,$>>>=0,ee>>>=0,oe>>>=0,Se>>>=0,Ne>>>=0,We>>>=0,De>>>=0,Je>>>=0,rt>>>=0,pt>>>=0,Xt>>>=0,xn>>>=0,pt=be(pt),Ne=c(Se,Ne),De&&(De=c(We,De)),rt&&(rt=c(Je,rt)),xn=c(Xt,xn);var ar=St(pt);nt(ar,function(){D(`Cannot construct ${pt} due to unbound types`,[oe])}),we([U,$,ee],oe?[oe]:[],er=>{var or;er=er[0];var Fi,Ui;oe?(Fi=er.registeredClass,Ui=Fi.instancePrototype):Ui=Pe.prototype;var pe=Te(pt,function(...Hr){if(Object.getPrototypeOf(this)!==Ee)throw new Le("Use 'new' to construct "+pt);if(qe.constructor_body===void 0)throw new Le(pt+" has no accessible constructor");var rr=qe.constructor_body[Hr.length];if(rr===void 0)throw new Le(`Tried to invoke ctor of ${pt} with invalid number of parameters (${Hr.length}) - expected (${Object.keys(qe.constructor_body).toString()}) parameters instead!`);return rr.apply(this,Hr)}),Ee=Object.create(Ui,{constructor:{value:pe}});pe.prototype=Ee;var qe=new Bt(pt,pe,Ee,xn,Fi,Ne,De,rt);qe.baseClass&&((or=qe.baseClass).__derivedClasses??(or.__derivedClasses=[]),qe.baseClass.__derivedClasses.push(qe));var it=new Rn(pt,qe,!0,!1,!1),qt=new Rn(pt+"*",qe,!1,!1,!1),Zn=new Rn(pt+" const*",qe,!1,!0,!1);return no[U]={pointerType:qt,constPointerType:Zn},yt(ar,pe),[it,qt,Zn]})}var Y=(U,$)=>{for(var ee=[],oe=0;oe<U;oe++)ee.push(B[$+oe*4>>>2>>>0]);return ee};function ce(U){for(var $=1;$<U.length;++$)if(U[$]!==null&&U[$].destructorFunction===void 0)return!0;return!1}function ue(U,$){if(!(U instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof U} which is not a function`);var ee=Te(U.name||"unknownFunctionName",function(){});ee.prototype=U.prototype;var oe=new ee,Se=U.apply(oe,$);return Se instanceof Object?Se:oe}function Ce(U,$,ee,oe){for(var Se=ce(U),Ne=U.length,We="",De="",Je=0;Je<Ne-2;++Je)We+=(Je!==0?", ":"")+"arg"+Je,De+=(Je!==0?", ":"")+"arg"+Je+"Wired";var rt=`
        return function (${We}) {
        if (arguments.length !== ${Ne-2}) {
          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${Ne-2}');
        }`;Se&&(rt+=`var destructors = [];
`);var pt=Se?"destructors":"null",Xt=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];$&&(rt+="var thisWired = classParam['toWireType']("+pt+`, this);
`);for(var Je=0;Je<Ne-2;++Je)rt+="var arg"+Je+"Wired = argType"+Je+"['toWireType']("+pt+", arg"+Je+`);
`,Xt.push("argType"+Je);if($&&(De="thisWired"+(De.length>0?", ":"")+De),rt+=(ee||oe?"var rv = ":"")+"invoker(fn"+(De.length>0?", ":"")+De+`);
`,Se)rt+=`runDestructors(destructors);
`;else for(var Je=$?1:2;Je<U.length;++Je){var xn=Je===1?"thisWired":"arg"+(Je-2)+"Wired";U[Je].destructorFunction!==null&&(rt+=`${xn}_dtor(${xn});
`,Xt.push(`${xn}_dtor`))}return ee&&(rt+=`var ret = retType['fromWireType'](rv);
return ret;
`),rt+=`}
`,[Xt,rt]}function Ye(U,$,ee,oe,Se,Ne){var We=$.length;We<2&&ze("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var De=$[1]!==null&&ee!==null,Je=ce($),rt=$[0].name!=="void",pt=[U,ze,oe,Se,Ge,$[0],$[1]],Xt=0;Xt<We-2;++Xt)pt.push($[Xt+2]);if(!Je)for(var Xt=De?1:2;Xt<$.length;++Xt)$[Xt].destructorFunction!==null&&pt.push($[Xt].destructorFunction);let[xn,ar]=Ce($,De,rt,Ne);xn.push(ar);var er=ue(Function,xn)(...pt);return Te(U,er)}var Ve=function(U,$,ee,oe,Se,Ne){U>>>=0,ee>>>=0,oe>>>=0,Se>>>=0,Ne>>>=0;var We=Y($,ee);Se=c(oe,Se),we([],[U],De=>{De=De[0];var Je=`constructor ${De.name}`;if(De.registeredClass.constructor_body===void 0&&(De.registeredClass.constructor_body=[]),De.registeredClass.constructor_body[$-1]!==void 0)throw new Le(`Cannot register multiple constructors with identical number of parameters (${$-1}) for class '${De.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return De.registeredClass.constructor_body[$-1]=()=>{D(`Cannot construct ${De.name} due to unbound types`,We)},we([],We,rt=>(rt.splice(1,0,null),De.registeredClass.constructor_body[$-1]=Ye(Je,rt,null,Se,Ne),[])),[]})},ct=U=>{U=U.trim();const $=U.indexOf("(");return $!==-1?U.substr(0,$):U},Dt=function(U,$,ee,oe,Se,Ne,We,De,Je){U>>>=0,$>>>=0,oe>>>=0,Se>>>=0,Ne>>>=0,We>>>=0;var rt=Y(ee,oe);$=be($),$=ct($),Ne=c(Se,Ne),we([],[U],pt=>{pt=pt[0];var Xt=`${pt.name}.${$}`;$.startsWith("@@")&&($=Symbol[$.substring(2)]),De&&pt.registeredClass.pureVirtualFunctions.push($);function xn(){D(`Cannot call ${Xt} due to unbound types`,rt)}var ar=pt.registeredClass.instancePrototype,er=ar[$];return er===void 0||er.overloadTable===void 0&&er.className!==pt.name&&er.argCount===ee-2?(xn.argCount=ee-2,xn.className=pt.name,ar[$]=xn):(xe(ar,$,Xt),ar[$].overloadTable[ee-2]=xn),we([],rt,Fi=>{var Ui=Ye(Xt,Fi,pt,Ne,We,Je);return ar[$].overloadTable===void 0?(Ui.argCount=ee-2,ar[$]=Ui):ar[$].overloadTable[ee-2]=Ui,[]}),[]})},Kt=[],Vt=[];function Sn(U){U>>>=0,U>9&&--Vt[U+1]===0&&(Vt[U]=void 0,Kt.push(U))}var Er=()=>Vt.length/2-5-Kt.length,_i=()=>{Vt.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=Er},Vn={toValue:U=>(U||ze("Cannot use deleted val. handle = "+U),Vt[U]),toHandle:U=>{switch(U){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const $=Kt.pop()||Vt.length;return Vt[$]=U,Vt[$+1]=1,$}}}},wg={name:"emscripten::val",fromWireType:U=>{var $=Vn.toValue(U);return Sn(U),$},toWireType:(U,$)=>Vn.toHandle($),argPackAdvance:on,readValueFromPointer:xt,destructorFunction:null};function bf(U){return U>>>=0,Rt(U,wg)}var ma=(U,$,ee)=>{switch($){case 1:return ee?function(oe){return this.fromWireType(E[oe>>>0])}:function(oe){return this.fromWireType(N[oe>>>0])};case 2:return ee?function(oe){return this.fromWireType(I[oe>>>1>>>0])}:function(oe){return this.fromWireType(L[oe>>>1>>>0])};case 4:return ee?function(oe){return this.fromWireType(R[oe>>>2>>>0])}:function(oe){return this.fromWireType(B[oe>>>2>>>0])};default:throw new TypeError(`invalid integer width (${$}): ${U}`)}};function iR(U,$,ee,oe){U>>>=0,$>>>=0,ee>>>=0,$=be($);function Se(){}Se.values={},Rt(U,{name:$,constructor:Se,fromWireType:function(Ne){return this.constructor.values[Ne]},toWireType:(Ne,We)=>We.value,argPackAdvance:on,readValueFromPointer:ma($,ee,oe),destructorFunction:null}),nt($,Se)}var wf=(U,$)=>{var ee=Ke[U];return ee===void 0&&ze(`${$} has unknown type ${T(U)}`),ee};function sR(U,$,ee){U>>>=0,$>>>=0;var oe=wf(U,"enum");$=be($);var Se=oe.constructor,Ne=Object.create(oe.constructor.prototype,{value:{value:ee},constructor:{value:Te(`${oe.name}_${$}`,function(){})}});Se.values[ee]=Ne,Se[$]=Ne}var Sg=U=>{if(U===null)return"null";var $=typeof U;return $==="object"||$==="array"||$==="function"?U.toString():""+U},aR=(U,$)=>{switch($){case 4:return function(ee){return this.fromWireType(V[ee>>>2>>>0])};case 8:return function(ee){return this.fromWireType(z[ee>>>3>>>0])};default:throw new TypeError(`invalid float width (${$}): ${U}`)}},oR=function(U,$,ee){U>>>=0,$>>>=0,ee>>>=0,$=be($),Rt(U,{name:$,fromWireType:oe=>oe,toWireType:(oe,Se)=>Se,argPackAdvance:on,readValueFromPointer:aR($,ee),destructorFunction:null})};function lR(U,$,ee,oe,Se,Ne,We){U>>>=0,ee>>>=0,oe>>>=0,Se>>>=0,Ne>>>=0;var De=Y($,ee);U=be(U),U=ct(U),Se=c(oe,Se),nt(U,function(){D(`Cannot call ${U} due to unbound types`,De)},$-1),we([],De,Je=>{var rt=[Je[0],null].concat(Je.slice(1));return yt(U,Ye(U,rt,null,Se,Ne,We),$-1),[]})}var cR=(U,$,ee)=>{switch($){case 1:return ee?oe=>E[oe>>>0]:oe=>N[oe>>>0];case 2:return ee?oe=>I[oe>>>1>>>0]:oe=>L[oe>>>1>>>0];case 4:return ee?oe=>R[oe>>>2>>>0]:oe=>B[oe>>>2>>>0];default:throw new TypeError(`invalid integer width (${$}): ${U}`)}};function uR(U,$,ee,oe,Se){U>>>=0,$>>>=0,ee>>>=0,$=be($);var Ne=pt=>pt;if(oe===0){var We=32-8*ee;Ne=pt=>pt<<We>>>We}var De=$.includes("unsigned"),Je=(pt,Xt)=>{},rt;De?rt=function(pt,Xt){return Je(Xt,this.name),Xt>>>0}:rt=function(pt,Xt){return Je(Xt,this.name),Xt},Rt(U,{name:$,fromWireType:Ne,toWireType:rt,argPackAdvance:on,readValueFromPointer:cR($,ee,oe!==0),destructorFunction:null})}function fR(U,$,ee){U>>>=0,ee>>>=0;var oe=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Se=oe[$];function Ne(We){var De=B[We>>>2>>>0],Je=B[We+4>>>2>>>0];return new Se(E.buffer,Je,De)}ee=be(ee),Rt(U,{name:ee,fromWireType:Ne,argPackAdvance:on,readValueFromPointer:Ne},{ignoreDuplicateRegistrations:!0})}function dR(U,$){U>>>=0,bf(U)}var hR=(U,$,ee,oe)=>{if(ee>>>=0,!(oe>0))return 0;for(var Se=ee,Ne=ee+oe-1,We=0;We<U.length;++We){var De=U.charCodeAt(We);if(De>=55296&&De<=57343){var Je=U.charCodeAt(++We);De=65536+((De&1023)<<10)|Je&1023}if(De<=127){if(ee>=Ne)break;$[ee++>>>0]=De}else if(De<=2047){if(ee+1>=Ne)break;$[ee++>>>0]=192|De>>6,$[ee++>>>0]=128|De&63}else if(De<=65535){if(ee+2>=Ne)break;$[ee++>>>0]=224|De>>12,$[ee++>>>0]=128|De>>6&63,$[ee++>>>0]=128|De&63}else{if(ee+3>=Ne)break;$[ee++>>>0]=240|De>>18,$[ee++>>>0]=128|De>>12&63,$[ee++>>>0]=128|De>>6&63,$[ee++>>>0]=128|De&63}}return $[ee>>>0]=0,ee-Se},pR=(U,$,ee)=>hR(U,N,$,ee),mR=U=>{for(var $=0,ee=0;ee<U.length;++ee){var oe=U.charCodeAt(ee);oe<=127?$++:oe<=2047?$+=2:oe>=55296&&oe<=57343?($+=4,++ee):$+=3}return $},Zb=typeof TextDecoder<"u"?new TextDecoder:void 0,vR=(U,$,ee)=>{$>>>=0;for(var oe=$+ee,Se=$;U[Se]&&!(Se>=oe);)++Se;if(Se-$>16&&U.buffer&&Zb)return Zb.decode(U.subarray($,Se));for(var Ne="";$<Se;){var We=U[$++];if(!(We&128)){Ne+=String.fromCharCode(We);continue}var De=U[$++]&63;if((We&224)==192){Ne+=String.fromCharCode((We&31)<<6|De);continue}var Je=U[$++]&63;if((We&240)==224?We=(We&15)<<12|De<<6|Je:We=(We&7)<<18|De<<12|Je<<6|U[$++]&63,We<65536)Ne+=String.fromCharCode(We);else{var rt=We-65536;Ne+=String.fromCharCode(55296|rt>>10,56320|rt&1023)}}return Ne},gR=(U,$)=>(U>>>=0,U?vR(N,U,$):"");function yR(U,$){U>>>=0,$>>>=0,$=be($);var ee=$==="std::string";Rt(U,{name:$,fromWireType(oe){var Se=B[oe>>>2>>>0],Ne=oe+4,We;if(ee)for(var De=Ne,Je=0;Je<=Se;++Je){var rt=Ne+Je;if(Je==Se||N[rt>>>0]==0){var pt=rt-De,Xt=gR(De,pt);We===void 0?We=Xt:(We+="\0",We+=Xt),De=rt+1}}else{for(var xn=new Array(Se),Je=0;Je<Se;++Je)xn[Je]=String.fromCharCode(N[Ne+Je>>>0]);We=xn.join("")}return Ds(oe),We},toWireType(oe,Se){Se instanceof ArrayBuffer&&(Se=new Uint8Array(Se));var Ne,We=typeof Se=="string";We||Se instanceof Uint8Array||Se instanceof Uint8ClampedArray||Se instanceof Int8Array||ze("Cannot pass non-string to std::string"),ee&&We?Ne=mR(Se):Ne=Se.length;var De=Tg(4+Ne+1),Je=De+4;if(B[De>>>2>>>0]=Ne,ee&&We)pR(Se,Je,Ne+1);else if(We)for(var rt=0;rt<Ne;++rt){var pt=Se.charCodeAt(rt);pt>255&&(Ds(Je),ze("String has UTF-16 code units that do not fit in 8 bits")),N[Je+rt>>>0]=pt}else for(var rt=0;rt<Ne;++rt)N[Je+rt>>>0]=Se[rt];return oe!==null&&oe.push(Ds,De),De},argPackAdvance:on,readValueFromPointer:xt,destructorFunction(oe){Ds(oe)}})}var Kb=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,_R=(U,$)=>{for(var ee=U,oe=ee>>1,Se=oe+$/2;!(oe>=Se)&&L[oe>>>0];)++oe;if(ee=oe<<1,ee-U>32&&Kb)return Kb.decode(N.subarray(U>>>0,ee>>>0));for(var Ne="",We=0;!(We>=$/2);++We){var De=I[U+We*2>>>1>>>0];if(De==0)break;Ne+=String.fromCharCode(De)}return Ne},xR=(U,$,ee)=>{if(ee??(ee=2147483647),ee<2)return 0;ee-=2;for(var oe=$,Se=ee<U.length*2?ee/2:U.length,Ne=0;Ne<Se;++Ne){var We=U.charCodeAt(Ne);I[$>>>1>>>0]=We,$+=2}return I[$>>>1>>>0]=0,$-oe},bR=U=>U.length*2,wR=(U,$)=>{for(var ee=0,oe="";!(ee>=$/4);){var Se=R[U+ee*4>>>2>>>0];if(Se==0)break;if(++ee,Se>=65536){var Ne=Se-65536;oe+=String.fromCharCode(55296|Ne>>10,56320|Ne&1023)}else oe+=String.fromCharCode(Se)}return oe},SR=(U,$,ee)=>{if($>>>=0,ee??(ee=2147483647),ee<4)return 0;for(var oe=$,Se=oe+ee-4,Ne=0;Ne<U.length;++Ne){var We=U.charCodeAt(Ne);if(We>=55296&&We<=57343){var De=U.charCodeAt(++Ne);We=65536+((We&1023)<<10)|De&1023}if(R[$>>>2>>>0]=We,$+=4,$+4>Se)break}return R[$>>>2>>>0]=0,$-oe},PR=U=>{for(var $=0,ee=0;ee<U.length;++ee){var oe=U.charCodeAt(ee);oe>=55296&&oe<=57343&&++ee,$+=4}return $},ER=function(U,$,ee){U>>>=0,$>>>=0,ee>>>=0,ee=be(ee);var oe,Se,Ne,We;$===2?(oe=_R,Se=xR,We=bR,Ne=De=>L[De>>>1>>>0]):$===4&&(oe=wR,Se=SR,We=PR,Ne=De=>B[De>>>2>>>0]),Rt(U,{name:ee,fromWireType:De=>{for(var Je=B[De>>>2>>>0],rt,pt=De+4,Xt=0;Xt<=Je;++Xt){var xn=De+4+Xt*$;if(Xt==Je||Ne(xn)==0){var ar=xn-pt,er=oe(pt,ar);rt===void 0?rt=er:(rt+="\0",rt+=er),pt=xn+$}}return Ds(De),rt},toWireType:(De,Je)=>{typeof Je!="string"&&ze(`Cannot pass non-string to C++ string type ${ee}`);var rt=We(Je),pt=Tg(4+rt+$);return B[pt>>>2>>>0]=rt/$,Se(Je,pt+4,rt+$),De!==null&&De.push(Ds,pt),pt},argPackAdvance:on,readValueFromPointer:xt,destructorFunction(De){Ds(De)}})};function CR(U,$,ee,oe,Se,Ne){U>>>=0,$>>>=0,ee>>>=0,oe>>>=0,Se>>>=0,Ne>>>=0,Ie[U]={name:be($),rawConstructor:c(ee,oe),rawDestructor:c(Se,Ne),fields:[]}}function TR(U,$,ee,oe,Se,Ne,We,De,Je,rt){U>>>=0,$>>>=0,ee>>>=0,oe>>>=0,Se>>>=0,Ne>>>=0,We>>>=0,De>>>=0,Je>>>=0,rt>>>=0,Ie[U].fields.push({fieldName:be($),getterReturnType:ee,getter:c(oe,Se),getterContext:Ne,setterArgumentType:We,setter:c(De,Je),setterContext:rt})}var AR=function(U,$){U>>>=0,$>>>=0,$=be($),Rt(U,{isVoid:!0,name:$,argPackAdvance:0,fromWireType:()=>{},toWireType:(ee,oe)=>{}})};function MR(U,$,ee){return U>>>=0,$>>>=0,ee>>>=0,N.copyWithin(U>>>0,$>>>0,$+ee>>>0)}var Jb=(U,$,ee)=>{var oe=[],Se=U.toWireType(oe,ee);return oe.length&&(B[$>>>2>>>0]=Vn.toHandle(oe)),Se};function RR(U,$,ee){return U>>>=0,$>>>=0,ee>>>=0,U=Vn.toValue(U),$=wf($,"emval::as"),Jb($,ee,U)}var IR={},Qb=U=>{var $=IR[U];return $===void 0?be(U):$},Pg=[];function LR(U,$,ee,oe,Se){return U>>>=0,$>>>=0,ee>>>=0,oe>>>=0,Se>>>=0,U=Pg[U],$=Vn.toValue($),ee=Qb(ee),U($,$[ee],oe,Se)}function OR(U,$){return U>>>=0,$>>>=0,U=Vn.toValue(U),$=Vn.toValue($),U==$}var NR=U=>{var $=Pg.length;return Pg.push(U),$},DR=(U,$)=>{for(var ee=new Array(U),oe=0;oe<U;++oe)ee[oe]=wf(B[$+oe*4>>>2>>>0],"parameter "+oe);return ee};function kR(U,$,ee){$>>>=0;var oe=DR(U,$),Se=oe.shift();U--;var Ne=`return function (obj, func, destructorsRef, args) {
`,We=0,De=[];ee===0&&De.push("obj");for(var Je=["retType"],rt=[Se],pt=0;pt<U;++pt)De.push("arg"+pt),Je.push("argType"+pt),rt.push(oe[pt]),Ne+=`  var arg${pt} = argType${pt}.readValueFromPointer(args${We?"+"+We:""});
`,We+=oe[pt].argPackAdvance;var Xt=ee===1?"new func":"func.call";Ne+=`  var rv = ${Xt}(${De.join(", ")});
`,Se.isVoid||(Je.push("emval_returnValue"),rt.push(Jb),Ne+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Ne+=`};
`,Je.push(Ne);var xn=ue(Function,Je)(...rt),ar=`methodCaller<(${oe.map(er=>er.name).join(", ")}) => ${Se.name}>`;return NR(Te(ar,xn))}function FR(U,$){return U>>>=0,$>>>=0,U=Vn.toValue(U),$=Vn.toValue($),Vn.toHandle(U[$])}function UR(U){U>>>=0,U>9&&(Vt[U+1]+=1)}function BR(U){return U>>>=0,Vn.toHandle(Qb(U))}function $R(){return Vn.toHandle({})}function VR(U){U>>>=0;var $=Vn.toValue(U);Ge($),Sn(U)}function qR(U,$,ee){U>>>=0,$>>>=0,ee>>>=0,U=Vn.toValue(U),$=Vn.toValue($),ee=Vn.toValue(ee),U[$]=ee}function HR(U,$){U>>>=0,$>>>=0,U=wf(U,"_emval_take_value");var ee=U.readValueFromPointer($);return Vn.toHandle(ee)}var zR=()=>4294901760,GR=U=>{var $=A.buffer,ee=(U-$.byteLength+65535)/65536;try{return A.grow(ee),G(),1}catch{}};function XR(U){U>>>=0;var $=N.length,ee=zR();if(U>ee)return!1;for(var oe=(Je,rt)=>Je+(rt-Je%rt)%rt,Se=1;Se<=4;Se*=2){var Ne=$*(1+.2/Se);Ne=Math.min(Ne,U+100663296);var We=Math.min(ee,oe(Math.max(U,Ne),65536)),De=GR(We);if(De)return!0}return!1}var e9=(U,$)=>{U<128?$.push(U):$.push(U%128|128,U>>7)},WR=U=>{for(var $={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},ee={parameters:[],results:U[0]=="v"?[]:[$[U[0]]]},oe=1;oe<U.length;++oe)ee.parameters.push($[U[oe]]);return ee},YR=(U,$)=>{var ee=U.slice(0,1),oe=U.slice(1),Se={i:127,p:127,j:126,f:125,d:124,e:111};$.push(96),e9(oe.length,$);for(var Ne=0;Ne<oe.length;++Ne)$.push(Se[oe[Ne]]);ee=="v"?$.push(0):$.push(1,Se[ee])},jR=(U,$)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(WR($),U);var ee=[1];YR($,ee);var oe=[0,97,115,109,1,0,0,0,1];e9(ee.length,oe),oe.push(...ee),oe.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var Se=new WebAssembly.Module(new Uint8Array(oe)),Ne=new WebAssembly.Instance(Se,{e:{f:U}}),We=Ne.exports.f;return We},ZR=(U,$)=>{if(ro)for(var ee=U;ee<U+$;ee++){var oe=cn(ee);oe&&ro.set(oe,ee)}},ro,KR=U=>(ro||(ro=new WeakMap,ZR(0,Bn.length)),ro.get(U)||0),Eg=[],JR=()=>{if(Eg.length)return Eg.pop();try{Bn.grow(1)}catch(U){throw U instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":U}return Bn.length-1},Cg=(U,$)=>Bn.set(U,$),Fc=(U,$)=>{var ee=KR(U);if(ee)return ee;var oe=JR();try{Cg(oe,U)}catch(Ne){if(!(Ne instanceof TypeError))throw Ne;var Se=jR(U,$);Cg(oe,Se)}return ro.set(U,oe),oe},Uc=U=>{ro.delete(cn(U)),Cg(U,null),Eg.push(U)};ve=r.InternalError=class extends Error{constructor($){super($),this.name="InternalError"}},le(),Le=r.BindingError=class extends Error{constructor($){super($),this.name="BindingError"}},_e(),Nc(),Yn(),_=r.UnboundTypeError=d(Error,"UnboundTypeError"),_i();var QR={i:he,D:Be,n:Me,C:Ze,H:Wn,h:q,g:Ve,a:Dt,G:bf,t:iR,f:sR,x:oR,c:lR,j:uR,e:fR,k:dR,w:yR,s:ER,o:CR,l:TR,I:AR,F:MR,v:RR,z:LR,b:Sn,m:OR,y:kR,B:FR,u:UR,q:BR,A:$R,p:VR,r:qR,d:HR,E:XR},ki=lt(),t9=U=>(t9=ki.L)(U),Ds=U=>(Ds=ki.N)(U),Tg=U=>(Tg=ki.O)(U),n9=U=>(n9=ki.P)(U);function e4(U){U=Object.assign({},U);var $=oe=>Se=>oe(Se)>>>0,ee=oe=>()=>oe()>>>0;return U.L=$(U.L),U.O=$(U.O),U._emscripten_stack_alloc=$(U._emscripten_stack_alloc),U.emscripten_stack_get_current=ee(U.emscripten_stack_get_current),U}r.addFunction=Fc,r.removeFunction=Uc;var Sf;ae=function U(){Sf||r9(),Sf||(ae=U)};function r9(){if(K>0||(k(),K>0))return;function U(){var $;Sf||(Sf=!0,r.calledRun=!0,!M&&(F(),i(r),($=r.onRuntimeInitialized)==null||$.call(r),H()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),U()},1)):U()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return r9(),n=a,n}})();const ul=14.1;function Gd(t,e,n,r,i=!0){const s=t.Manifold;let a=[];for(let o=0;o<(i?r.length:r.length-1);o++){const l=r[o],u=r[(o+1)%r.length],f=u.x-l.x,h=u.y-l.y,p=Fo(Math.atan2(h,f)),v=Math.sqrt(f*f+h*h),P=s.extrude(e,v).rotate(90,0,90).rotate(0,0,p).translate(l.x,l.y,0);a.push(P);const S=s.revolve(n,36).rotate(0).translate(u.x,u.y,0);a.push(S)}return a}function iW(t,e,n,r,i=!0){const s=t.Manifold,a=[];for(let o=0;o<(i?r.length-1:r.length);o++){const l=r[o],u=r[(o+1)%r.length],f=u.x-l.x,h=u.y-l.y,p=Fo(Math.atan2(h,f)),v=Math.sqrt(f*f+h*h),P=s.extrude(e,v).rotate(90,0,90).rotate(0,0,p).translate(l.x,l.y,0);a.push(P);const S=r[(o-(i?2:1)+r.length)%r.length],g=l.x-S.x,m=l.y-S.y,x=Fo(Math.atan2(m,g));let w=-p+x;for(;w>180;)w-=360;for(;w<-180;)w+=360;if(w>0){const C=s.revolve(n).rotate(0).translate(l.x,l.y,0);a.push(C)}}return a}function yx({helper:t,size:e,roundRadius:n,center:r=[0,0]}){const i=t.CrossSection,s=[i.circle(n,16).translate(-e[0]/2+n+r[0],-e[1]/2+n+r[1]),i.circle(n,16).translate(e[0]/2-n+r[0],-e[1]/2+n+r[1]),i.circle(n,16).translate(e[0]/2-n+r[0],e[1]/2-n+r[1]),i.circle(n,16).translate(-e[0]/2+n+r[0],e[1]/2-n+r[1])],a=i.hull(s);for(const o of s)o.delete();return a}function sW({helper:t,height:e,radius:n,roundRadius:r}){const i=t.CrossSection,s=[],a=10,o=(n*n+r*r)/(2*r),l=0;let u=e/2-o;for(let h=0;h<=a;h++){const p=Math.asin(n/o)*(h/a);s.push([l+o*Math.sin(p),u+o*Math.cos(p)])}u=-e/2+o;for(let h=a;h>=0;h--){const p=Math.asin(n/o)*(h/a);s.push([l+o*Math.sin(p),u-o*Math.cos(p)])}return new i(s.reverse()).revolve()}function EA(t,e,n){const r=n.usbHeight,s=yx({helper:t,size:[15,8],roundRadius:1.5}).extrude(100),a=yx({helper:t,size:[9.5,r],roundRadius:1}).extrude(1.5);return s.translate(0,0,1.5).add(a).rotate(90,0,0).translate(-e.x,e.y,-r/2-n.switchBoardHeight-n.connectorHeight-n.controllerBoardHeight)}let eb=0,CA=!1;self.onmessage=async t=>{try{t.data.type==="calculate"?await oW(t.data):t.data.type==="cancel"&&eb++}catch(e){e.message!=="canceled"&&self.postMessage({type:"error",error:e.message})}};let Ws;async function aW(){const t=await yh();t.setup(),Ws=Q2(t),CA=!0}aW();async function Fs(t){if(await new Promise(e=>setTimeout(e,0)),t!==eb)throw new Error("canceled")}async function oW(t){var dt;const e=eb;for(;!CA;)await Fs(e);const{bottomInnerLines:n,bottomOuterLines:r,controller:i,params:s,startX:a,endX:o,startY:l,endY:u,centerX:f,centerY:h,bh:p,tilt:v,tent:P}=t,S=s.connectorHeight,g=s.switchBoardHeight,m=s.controllerBoardHeight,x=s.batteryHeight,w=s.partsHeight,C=s.usbHeight,A=s.bottomMinThickness,M=g+S+m+x+A,E=Ws.Manifold,N=Ws.CrossSection,I=r.map(ke=>[-ke.x,ke.y]);let L=E.extrude(I,M*5).translate(0,0,-M*5);const R=L.asOriginal(),B=P;let V=E.cube([(o-a)*3,(u-l)*3,M*20],!0).translate(-f,h,-M*20/2).rotate(v).rotate(0,Fo(B)).translate(0,0,p);L=L.subtract(V),V.delete(),await Fs(e);{const ke={...L.asOriginal().translate(f,-h).setTolerance(.05).getMesh()};self.postMessage({type:"complete",result:ke})}const z=i.usbCenterline[0].x,G=Math.min(...r.map(ke=>ke.y)),O=8,y=sW({helper:Ws,height:2,radius:O,roundRadius:.5}),b=y.asOriginal().translate([-z-19,G+O-2.2,-2]),k=y.translate([-z+19,G+O-2.2,-2]);L=E.union([L,b,k]),await Fs(e);const F=n.map(ke=>[-ke.x,ke.y]),H=E.extrude(F,g+S).translate(0,0,-g-S);L=L.subtract(H),H.delete(),await Fs(e);const W=(dt=i.batteryAreaOutline)==null?void 0:dt.map(ke=>[-ke.x,ke.y]);if(W!==void 0){const ke=g+S+m+x,ut=E.extrude(W,ke).translate(0,0,-ke);L=L.subtract(ut),ut.delete()}await Fs(e);const ne=i.partsAreaOutline.map(ke=>[-ke.x,ke.y]),Z=m+S+g+w,K=E.extrude(ne,Z).translate(0,0,-Z);L=L.subtract(K),K.delete(),await Fs(e);const ae=i.usbAreaOutline.map(ke=>{const ut=ke.map(Pt=>[-Pt.x,Pt.y]),tt=m+S+g+C;return E.extrude(ut,tt).translate(0,0,-tt)});for(const ke of ae)await Fs(e),L=L.subtract(ke),ke.delete();if(i.powerSwitchPos!==void 0){const ke=N.square([4.1,9.8],!0).extrude(4),ut=N.square([2.5,6.5],!0).extrude(4).translate(0,0,4),tt=yx({helper:Ws,size:[20,15],roundRadius:.5,center:[i.powerSwitchPos.side==="left"?5.5:-5.5,0]}).extrude(50).translate(0,0,6),Pt=ke.add(ut).add(tt).rotate(180,0,0).translate(-i.powerSwitchPos.x,i.powerSwitchPos.y,-(g+S+m));L=L.subtract(Pt),Pt.delete()}const se=[[0,0],[-4,-4],[4,-4]],ye=[[0,0],[0,-4],[4,-4]],me=Gd(Ws,se,ye,r.map(ke=>({x:-ke.x,y:ke.y}))).map(ke=>ke.mirror([0,0,1]).translate(0,0,-1));for(const ke of me)await Fs(e),L=L.subtract(ke),ke.delete();const Ue=E.cube([1e3,1e3,.01],!0).translate(-f,h).intersect(R.translate(0,0,-p).rotate(0,-Fo(B)).rotate(-v)).project().simplify(.2).offset(2).toPolygons(),He=iW(Ws,ye,ye,Ue[0].map(ke=>({x:ke[0],y:ke[1]})),!1).map(ke=>ke.rotate(v).rotate(0,Fo(B)).translate(0,0,p+3));for(const ke of He)await Fs(e),L=L==null?void 0:L.subtract(ke),ke.delete();const Qe=i.usbCenterline.map(ke=>EA(Ws,ke,s));L=E.difference([L,...Qe]),L=L.translate(f,-h,0);const ie={...L.setTolerance(.05).getMesh()};self.postMessage({type:"complete",result:ie}),Ws.cleanup()}function lW(t){return new Worker("/auto-kdk/assets/bottomCaseManifold-DzYFXy9B.js",{name:t==null?void 0:t.name})}let tb=0,TA=!1;self.onmessage=async t=>{try{t.data.type==="calculate"?await uW(t.data):t.data.type==="cancel"&&tb++}catch(e){e.message!=="canceled"&&self.postMessage({type:"error",error:e.message})}};let js;async function cW(){const t=await yh();return t.setup(),js=Q2(t),TA=!0,js}cW();async function Bi(t){if(await new Promise(e=>setTimeout(e,0)),t!==tb)throw new Error("canceled")}async function uW(t){const e=tb;for(;!TA;)await Bi(e);const{switches:n,topInnerLines:r,controller:i,caseOutlines:s,bottomOuterLines:a,topPlateOutlines:o,params:l,centerX:u,centerY:f,switchType:h,minStabilizer:p}=t,v=l.topHeight+l.switchEmbankment,P=l.plateHeight,S=l.switchBoardHeight+l.connectorHeight+l.controllerBoardHeight,g=js.Manifold,m=js.CrossSection,x=m.ofPolygons(s.map(K=>[-K.x,K.y])),w=o.map(K=>{const ae=K.map(se=>[-se.x,se.y]);return m.ofPolygons(ae)}),C=n.map(K=>m.square([ul,ul],!0).rotate(K.position.a).translate(-K.position.x,K.position.y)),A=m.difference([x,...w,...C]).extrude(v+S).translate(0,0,-S),M=w.map(K=>m.difference([K.simplify(.01).offset(.1),...C]).extrude(P));let E=g.union([A,...M]);await Bi(e);{const K={...E.asOriginal().translate(u,-f).setTolerance(.05).getMesh()};self.postMessage({type:"complete",result:K})}if(p&&h.includes("mx")){const K=n.filter(ae=>ae.w>=19*p).flatMap(ae=>{const se=ae.w/19,ye=[2,3,6,6.25,7].filter(Qe=>Qe<=se).pop(),me={2:23.876,3:38.1,6:95,"6.25":100,7:114.3}[ye.toString()];if(!me)return[];const Ae=m.square([7.2,19],!0).extrude(v).translate(me/2,0,0),Ue=m.square([7.2,19],!0).extrude(v).translate(-me/2,0,0),He=m.square([me,2.5],!0).extrude(2.5).translate(0,-9.5+2.5/2,0);return[Ae,Ue,He].map(Qe=>Qe.rotate(0,0,ae.position.a).translate(-ae.position.x,ae.position.y,0))});E=g.difference([E,...K])}await Bi(e);const N=h.includes("mx")?g.cube([5,15.5,3.55+.002],!0).translate(0,0,1.775-.001):g.cube([15.5,5,l.switchEmbankment+.6+.002],!0).translate(0,0,(l.switchEmbankment+.6)/2-.001),I=n.map(K=>N.asOriginal().rotate(0,0,K.position.a).translate(-K.position.x,K.position.y,0));if(E=g.difference([E,...I]),await Bi(e),h.includes("choc2")&&l.switchEmbankment>0){const K=n.map(ae=>m.square([ul+1.6,ul+1.6],!0).extrude(l.switchEmbankment).subtract(m.square([ul,ul],!0).extrude(l.switchEmbankment)).rotate(0,0,ae.position.a).translate(-ae.position.x,ae.position.y,P));E=g.union([E,...K])}if(await Bi(e),i.ledPos){const K=g.cylinder(v+P,.75,.75,32).translate(-i.ledPos.x,i.ledPos.y,0);E=E.subtract(K)}await Bi(e);const L=g.extrude(r.map(K=>[-K.x,K.y]),S).translate(0,0,-S);E=E.subtract(L),await Bi(e);const R=3.3-1.6,B=i.pinPos.map(K=>g.cylinder(R,.45,.45,16).translate(-K.x,K.y));E=g.difference([E,...B]),await Bi(e);const V=[[0,0],[-2,-4],[2,-4]],z=[[0,0],[0,-4],[2,-4]],G=Gd(js,V,z,s.map(K=>({x:-K.x,y:K.y}))).map(K=>K.mirror([0,0,1]).translate(0,0,v-2)),O=Gd(js,V,z,s.map(K=>({x:-K.x,y:K.y}))).map(K=>K.translate(0,0,-S+2)),y=o.flatMap(K=>Gd(js,V,z,K.map(ae=>({x:-ae.x,y:ae.y}))).map(ae=>ae.mirror([0,0,1]).translate(0,0,v-1)));E=g.difference([E,...G,...O,...y]),await Bi(e);const b=i.usbCenterline[0].x,k=Math.min(...a.map(K=>K.y)),F=9,H=g.cylinder(2,F,F,32,!0).subtract(g.cube([F*2,F*2,2],!0).translate([0,3,0])),W=H.asOriginal().translate(-b-19,k+F-.7,-2),ne=H.translate(-b+19,k+F-.7,-2);E=g.difference([E,W,ne]),await Bi(e),E=g.difference([E,...i.usbCenterline.map(K=>EA(js,K,l))]),await Bi(e),E=E.translate(u,-f,0);const Z={...E.setTolerance(.05).getMesh()};self.postMessage({type:"complete",result:Z}),js.cleanup()}function fW(t){return new Worker("/auto-kdk/assets/topCaseManifold-C-BEBAeM.js",{name:t==null?void 0:t.name})}class dW{constructor(e,n){vt(this,"manifoldTop");vt(this,"params");vt(this,"topCaseManifoldWorker");vt(this,"bottomCaseWorker");vt(this,"tiltRad",0);vt(this,"tentRad",0);vt(this,"bottomCaseMesh");vt(this,"topCaseMesh");this.bottomCaseWorker=new lW,this.topCaseManifoldWorker=new fW,this.params=e,this.manifoldTop=Q2(n)}calcCaseSize(e){e.pcbOutlines.length===0&&e.calcOutlines();const n=Math.min(...e.pcbOutlines.map(l=>l.x)),r=Math.max(...e.pcbOutlines.map(l=>l.x)),i=Math.min(...e.pcbOutlines.map(l=>l.y)),s=Math.max(...e.pcbOutlines.map(l=>l.y)),a=(n+r)/2,o=(i+s)/2;return{startX:n,endX:r,startY:i,endY:s,centerX:a,centerY:o}}async bottomCase(e,n,r,i){const{startX:s,endX:a,startY:o,endY:l,centerX:u,centerY:f}=this.calcCaseSize(e),h=sn(this.params.tiltingAngle),p=sn(r==="left"?-this.params.tentingAngle:this.params.tentingAngle),v=this.params.switchBoardHeight,P=this.params.connectorHeight,S=this.params.bottomMinThickness,g=-(v+P+S)-l*Math.sin(h)-(r==="left"?s*Math.sin(p):a*Math.sin(p)),m={type:"calculate",bottomInnerLines:n.bottomInnerLine.map(x=>({x:x.x,y:x.y})),bottomOuterLines:n.bottomOuterLine.map(x=>({x:x.x,y:x.y})),controller:{batteryAreaOutline:e.controller.batteryAreaOutline?e.controller.batteryAreaOutline.map(x=>({x:x.x,y:x.y})):void 0,partsAreaOutline:e.controller.partsAreaOutline.map(x=>({x:x.x,y:x.y})),usbAreaOutline:e.controller.usbAreaOutline.map(x=>x.map(w=>({x:w.x,y:w.y}))),powerSwitchPos:e.controller.powerSwitchPos?{x:e.controller.powerSwitchPos.x,y:e.controller.powerSwitchPos.y,side:e.controller.side}:void 0,usbCenterline:e.controller.usbCenterline},params:{...this.params},startX:s,endX:a,startY:o,endY:l,centerX:u,centerY:f,bh:g,tilt:this.params.tiltingAngle,tent:p};this.bottomCaseWorker.onmessage=x=>{if(x.data.type==="complete"&&x.data.result){const w=x.data.result,C=new this.manifoldTop.Mesh(w);C.merge(),this.bottomCaseMesh=C,i(this.bottomCaseMesh)}else x.data.type==="error"&&console.error(new Error(x.data.error))},this.bottomCaseWorker.postMessage({type:"cancel"}),this.bottomCaseWorker.postMessage(m)}async topCase(e,n,r,i){const{centerX:s,centerY:a}=this.calcCaseSize(e);this.topCaseManifoldWorker.onmessage=l=>{if(l.data.type==="complete"&&l.data.result){const u=l.data.result,f=new this.manifoldTop.Mesh(u);f.merge(),this.topCaseMesh=f,i(this.topCaseMesh)}};const o={type:"calculate",switches:e.switches.map(l=>({position:l.position,w:l.size.w})),topInnerLines:r.topInnerLine.map(l=>({x:l.x,y:l.y})),controller:{pinPos:e.controller.pinPos.map(l=>({x:l.x,y:l.y})),usbCenterline:e.controller.usbCenterline,ledPos:e.controller.ledPos},caseOutlines:r.caseOutlines.map(l=>({x:l.x,y:l.y})),topPlateOutlines:r.topPlateOutlines.map(l=>l.map(u=>({x:u.x,y:u.y}))),bottomOuterLines:r.bottomOuterLine.map(l=>({x:l.x,y:l.y})),params:{...this.params},centerX:s,centerY:a,switchType:n,adjustPinPos:e.controller.adjustPinPos,minStabilizer:et.minStabilizer};this.topCaseManifoldWorker.postMessage({type:"cancel"}),this.topCaseManifoldWorker.postMessage(o)}}function hW(t,e,n){const r=Math.max(...e.bottomOuterLine.map(u=>u.y)),i=t.controller.batteryAreaOutline!==void 0?Math.max(...t.controller.batteryAreaOutline.map(u=>u.y)):Math.max(...t.controller.boardAreaOutline.map(u=>u.y));if(r-i<0)return(t.controller.batteryAreaOutline!==void 0?n.batteryHeight:n.partsHeight)+1.6;const s=10,a=Math.tan(sn(s))*n.batteryHeight,o=n.batteryHeight/Math.cos(sn(s)),l=Math.max(Math.ceil((1.6-((r-i+a)*Math.sin(sn(s))-o))/Math.cos(sn(s))*10)/10,2);return console.log("Min bottom thickness",l),l}function pW(t,e,n){const r=Math.max(...e.bottomOuterLine.map(l=>l.y)),i=t.controller.batteryAreaOutline!==void 0?Math.max(...t.controller.batteryAreaOutline.map(l=>l.y)):Math.max(...t.controller.boardAreaOutline.map(l=>l.y)),s=n.connectorHeight+n.bottomMinThickness-(n.connectorHeight+n.switchBoardHeight+(t.controller.batteryAreaOutline!==void 0?n.batteryHeight:n.partsHeight)),a=i-r,o=Fo(Math.asin(1.6/Math.hypot(a+s))+Math.atan(s/a));return isNaN(o)?0:Math.max(0,Math.ceil(o*10)/10)}const mW={topHeight:11.5,plateHeight:5,connectorHeight:2.5,switchBoardHeight:1.6,controllerBoardHeight:1.6,batteryHeight:6,partsHeight:2.5,usbHeight:3.5,bottomMinThickness:3,tiltingAngle:5,tentingAngle:0,topRim:3,bottomRim:2.5,switchEmbankment:0};let ey=jt(Ct(mW)),kw=jt(Ct({top:void 0,bottom:void 0})),Fw=jt(Ct({top:void 0,bottom:void 0})),Et={get parameters(){return Q(ey)},set parameters(t){st(ey,Ct(t)),Et.subscribers.forEach(e=>e(t))},get leftCase(){return Q(kw)},set leftCase(t){st(kw,Ct(t))},get rightCase(){return Q(Fw)},set rightCase(t){st(Fw,Ct(t))},serialize(){return Q(ey)},deserialize(t){const e=JSON.parse(t);"case"in e&&(Et.parameters=e.case,Et.subscribers.forEach(n=>n(e.case)))},subscribers:[],subscribe:t=>(Et.subscribers.push(t),()=>{Et.subscribers=Et.subscribers.filter(e=>e!==t)})};function vW(t,e,n,r,i,s,a){t.buttons===1&&(st(e,Q(e)-t.movementX/Q(n)),st(r,Q(r)-t.movementY/Q(n))),st(i,Ct({x:t.offsetX/t.currentTarget.clientWidth*Q(s),y:t.offsetY/t.currentTarget.clientHeight*a}))}var gW=kh("<path></path>"),yW=kh('<path stroke-linecap="round"></path>'),_W=kh('<path stroke-linecap="round"></path>'),xW=kh('<rect fill="yellow"></rect>'),bW=(t,e,n)=>{Q(e)&&n()},wW=an('<div class="not-connected-net svelte-bm5m1e"> </div>'),SW=an('<div class="connected svelte-bm5m1e">Success to route</div>'),PW=an("<div>Not routed</div>"),EW=an('<div>PCB Editor</div> <div id="viewer" role="img" class="svelte-bm5m1e"><svg class="svelte-bm5m1e"><!><!><!><!></svg></div> <label><input type="checkbox"> Live update</label> <button>Update</button> <button>Start routing</button> <!>',1);function Uw(t,e){$r(e,!0);let n=Tu(e.boardType),r=jt(Ct([])),i=jt(""),s=jt(Ct([])),a=e.boardType==="unibody-or-left"?et.leftData:et.rightData,o=jt(1),l=Yt(()=>et.isSplit?900:1800),u=600,f=jt(0),h=jt(0),p=jt(Ct({x:0,y:0})),v=jt(!0),P=jt(Ct([]));n.setLayout(JSON.stringify(a));const S=Yt(()=>YX(Object.values(a.modules).filter(se=>se.enabled&&se.moduleType=="switch"&&se.row<a.row&&se.col<a.col).map(se=>({x:se.x*et.keyPitch,y:se.y*et.keyPitch,row:se.row,col:se.col,w:se.width*et.keyPitch,h:se.height*et.keyPitch,a:-se.a,switchType:et.switchType})),et.minStabilizer)),g=Yt(()=>Object.values(a.modules).find(se=>se.moduleType==="controller"&&se.enabled)),m=Yt(()=>{var se,ye,me;return XG({x:(((se=Q(g))==null?void 0:se.x)??0)*et.keyPitch,y:(((ye=Q(g))==null?void 0:ye.y)??0)*et.keyPitch,a:(me=Q(g))==null?void 0:me.a},et.keyPitch,et.controllerType==="wired"||Q(g).variant==="side-1"?"left":"right",et.controllerType,Object.values(a.modules).some(Ae=>Ae.moduleType==="trackball"&&Ae.enabled),et.isSplit?e.boardType==="unibody-or-left"?"left":"right":"unibody")}),x=Yt(()=>Object.values(a.modules).filter(se=>se.moduleType==="padding"&&se.enabled).map(se=>({x:se.x*et.keyPitch+40,y:se.y*et.keyPitch+30,a:-se.a,w:se.width*et.keyPitch,h:se.height*et.keyPitch}))),w=Yt(()=>Object.values(a.modules).filter(se=>se.moduleType==="trackball"&&se.enabled).map(se=>({x:se.x*et.keyPitch+40,y:se.y*et.keyPitch+30,a:-se.a,w:se.width*et.keyPitch,h:se.height*et.keyPitch})));let C=Yt(()=>new WX({swModules:Q(S),matrixConnections:[],controllerConnections:[],controller:Q(m),pcbOutlinePoints:[],trackOutlinePoints:[],padding:Q(x),trackball:Q(w),netlist:[]}));Qi(()=>{Q(v)&&(Q(C).calcOutlines(),n.set(Q(C)))}),Qi(()=>{Q(S),Q(m),st(r,Ct([])),st(s,Ct([]))});const A=Yt(()=>n.board);let M=Yt(()=>{var se;return Q(A)!==void 0?[...Q(A).modules.map(ye=>io(ye.elements)).flat(),...io(Q(A).pcbOutlineSegments?[Q(A).pcbOutlineSegments]:[]),...((se=GX(Z2(n.board,Et.parameters.topRim,Et.parameters.bottomRim,et.keyPitch)))==null?void 0:se.map(ye=>io([ye])).flat())??[],...io(Q(A).matrixConnections),...io(Q(A).controllerConnections)]:[]});function E(){const se=[],ye=at(1);for(let me=0,Ae=0;me<=Q(l);me+=ye,(Ae+=1)-1)se.push({path:`M ${me} 0 L ${me} ${u}`,attributes:{stroke:"#333333",fill:"none",strokeWidth:Ae%5==0?"1":"0.3"}});for(let me=0,Ae=0;me<=u;me+=ye,(Ae+=1)-1)se.push({path:`M 0 ${me} L ${Q(l)} ${me}`,attributes:{stroke:"#333333",fill:"none",strokeWidth:Ae%5==0?"1":"0.3"}});return se}function N(){if(n.board===void 0)return;n.board.calcOutlines();let se=new Nw(at(.5)),{connected:ye,notConnected:me}=n.board.routeMatrix(se);st(i,Ct(me.map(Ae=>`${Ae.net}(${Ae.pin})`).join(", "))),st(r,Ct(io(n.board.matrixConnections))),se=new Nw(at(.5));try{let Ae=n.board.routeController(se);st(i,Q(i)+Ae.notConnected.map(Ue=>`${Ue.net}(${Ue.pin})`).join(", ")),st(s,Ct(Ae.connected)),console.log(Ae)}catch(Ae){console.log(Ae),alert(Ae.message)}st(r,Ct(Q(r).concat(io(n.board.controllerConnections))))}function I(){n.board!==void 0&&(Q(C).calcOutlines(),n.set(Q(C)),st(r,Ct([])))}function L(se){if(se.preventDefault(),se.deltaY===0)return;const ye=se.deltaY>0?.8:1.2,me=Q(o)*ye;st(f,Q(f)*(Q(o)-1)/Q(o)+se.offsetX/Q(o)),st(h,Q(h)*(Q(o)-1)/Q(o)+se.offsetY/Q(o)),me>=1?st(o,me):st(o,1)}var R=EW(),B=tr(R);An(B,"margin-top","10px");var V=je(B,2);V.__mousemove=[vW,f,o,h,p,l,u];var z=bt(V),G=bt(z);Mi(G,17,E,Vl,(se,ye)=>{let me=()=>Q(ye).path,Ae=()=>Q(ye).attributes;var Ue=gW();en(()=>{Fn(Ue,"d",me()),Fn(Ue,"stroke",Ae().stroke),Fn(Ue,"fill",Ae().fill),Fn(Ue,"stroke-width",Ae().strokeWidth)}),kt(se,Ue)});var O=je(G);Mi(O,17,()=>Q(M),Vl,(se,ye)=>{let me=()=>Q(ye).path,Ae=()=>Q(ye).attributes;var Ue=yW();en(()=>{Fn(Ue,"d",me()),Fn(Ue,"stroke",Ae().stroke),Fn(Ue,"fill",Ae().fill),Fn(Ue,"stroke-width",Ae().strokeWidth)}),kt(se,Ue)});var y=je(O);Mi(y,17,()=>Q(r),Vl,(se,ye)=>{let me=()=>Q(ye).path,Ae=()=>Q(ye).attributes;var Ue=_W();en(()=>{Fn(Ue,"d",me()),Fn(Ue,"stroke",Ae().stroke),Fn(Ue,"fill",Ae().fill),Fn(Ue,"stroke-width",Ae().strokeWidth)}),kt(se,Ue)});var b=je(y);Mi(b,17,()=>Q(P),Vl,(se,ye)=>{var me=xW();en(()=>Fn(me,"x",Q(ye).x*at(.5))),en(()=>Fn(me,"y",Q(ye).y*at(.5))),en(()=>Fn(me,"width",at(.5))),en(()=>Fn(me,"height",at(.5))),kt(se,me)});var k=je(V,2),F=bt(k);F.__change=[bW,v,I];var H=je(k,2);H.__click=I;var W=je(H,2);W.__click=N;const ne=Yt(()=>Yr(Q(p).x).toFixed(2)??""),Z=Yt(()=>Yr(Q(p).y).toFixed(2)??"");var K=je(W);en(()=>Jr(K,`  ${Q(ne)}, ${Q(Z)} `));var ae=je(K);xr(ae,()=>Q(i).length>0,se=>{var ye=wW(),me=bt(ye);en(()=>Jr(me,`Failed to route ${Q(i)??""}`)),kt(se,ye)},se=>{var ye=Ks(),me=tr(ye);xr(me,()=>Q(s).length>0,Ae=>{var Ue=SW();kt(Ae,Ue)},Ae=>{var Ue=PW();kt(Ae,Ue)},!0),kt(se,ye)}),en(()=>{Fn(z,"viewBox",`0 0 ${Q(l)} ${u}`),Fn(z,"style",`transform: scale(${Q(o)}); transform-origin: ${Q(f)}px ${Q(h)}px;`)}),eT("wheel",V,L),Iu(F,()=>Q(v),se=>st(v,se)),kt(t,R),Vr()}Li(["mousemove","change","click"]);var CW=an('<div id="sub" class="svelte-ea3md0"><!></div>'),TW=an('<div id="container"><div id="main" class="svelte-ea3md0"><!></div> <!></div>');function AW(t,e){$r(e,!1),Ju();var n=TW(),r=bt(n),i=bt(r);Uw(i,{boardType:"unibody-or-left"});var s=je(r,2);xr(s,()=>et.isSplit,a=>{var o=CW(),l=bt(o);Uw(l,{boardType:"right"}),kt(a,o)}),en(()=>Ku(n,`${(et.isSplit?"split":"")??""} svelte-ea3md0`)),kt(t,n),Vr()}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const nb="172",MW=0,Bw=1,RW=2,AA=1,IW=2,Ys=3,Ya=0,ni=1,Zs=2,za=0,Ql=1,$w=2,Vw=3,qw=4,LW=5,Eo=100,OW=101,NW=102,DW=103,kW=104,FW=200,UW=201,BW=202,$W=203,_x=204,xx=205,VW=206,qW=207,HW=208,zW=209,GW=210,XW=211,WW=212,YW=213,jW=214,bx=0,wx=1,Sx=2,lc=3,Px=4,Ex=5,Cx=6,Tx=7,MA=0,ZW=1,KW=2,Ga=0,JW=1,QW=2,eY=3,tY=4,nY=5,rY=6,iY=7,RA=300,cc=301,uc=302,Ax=303,Mx=304,Kv=306,Rx=1e3,Io=1001,Ix=1002,es=1003,sY=1004,qf=1005,xs=1006,ty=1007,Lo=1008,ua=1009,IA=1010,LA=1011,ku=1012,rb=1013,qo=1014,ea=1015,of=1016,ib=1017,sb=1018,fc=1020,OA=35902,NA=1021,DA=1022,Ki=1023,kA=1024,FA=1025,ec=1026,dc=1027,UA=1028,ab=1029,BA=1030,ob=1031,lb=1033,Xd=33776,Wd=33777,Yd=33778,jd=33779,Lx=35840,Ox=35841,Nx=35842,Dx=35843,kx=36196,Fx=37492,Ux=37496,Bx=37808,$x=37809,Vx=37810,qx=37811,Hx=37812,zx=37813,Gx=37814,Xx=37815,Wx=37816,Yx=37817,jx=37818,Zx=37819,Kx=37820,Jx=37821,Zd=36492,Qx=36494,e2=36495,$A=36283,t2=36284,n2=36285,r2=36286,aY=3200,oY=3201,VA=0,lY=1,Ba="",Pi="srgb",hc="srgb-linear",_h="linear",Ln="srgb",fl=7680,Hw=519,cY=512,uY=513,fY=514,qA=515,dY=516,hY=517,pY=518,mY=519,zw=35044,Gw="300 es",ta=2e3,xh=2001;class Ac{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,a=i.length;s<a;s++)i[s].call(this,e);e.target=null}}}const Cr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],ny=Math.PI/180,i2=180/Math.PI;function lf(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Cr[t&255]+Cr[t>>8&255]+Cr[t>>16&255]+Cr[t>>24&255]+"-"+Cr[e&255]+Cr[e>>8&255]+"-"+Cr[e>>16&15|64]+Cr[e>>24&255]+"-"+Cr[n&63|128]+Cr[n>>8&255]+"-"+Cr[n>>16&255]+Cr[n>>24&255]+Cr[r&255]+Cr[r>>8&255]+Cr[r>>16&255]+Cr[r>>24&255]).toLowerCase()}function mn(t,e,n){return Math.max(e,Math.min(n,t))}function vY(t,e){return(t%e+e)%e}function ry(t,e,n){return(1-n)*t+n*e}function zc(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Gr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class Mn{constructor(e=0,n=0){Mn.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=mn(this.x,e.x,n.x),this.y=mn(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=mn(this.x,e,n),this.y=mn(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(mn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,a=this.y-e.y;return this.x=s*r-a*i+e.x,this.y=s*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Qt{constructor(e,n,r,i,s,a,o,l,u){Qt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,u)}set(e,n,r,i,s,a,o,l,u){const f=this.elements;return f[0]=e,f[1]=i,f[2]=o,f[3]=n,f[4]=s,f[5]=l,f[6]=r,f[7]=a,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[3],l=r[6],u=r[1],f=r[4],h=r[7],p=r[2],v=r[5],P=r[8],S=i[0],g=i[3],m=i[6],x=i[1],w=i[4],C=i[7],A=i[2],M=i[5],E=i[8];return s[0]=a*S+o*x+l*A,s[3]=a*g+o*w+l*M,s[6]=a*m+o*C+l*E,s[1]=u*S+f*x+h*A,s[4]=u*g+f*w+h*M,s[7]=u*m+f*C+h*E,s[2]=p*S+v*x+P*A,s[5]=p*g+v*w+P*M,s[8]=p*m+v*C+P*E,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],f=e[8];return n*a*f-n*o*u-r*s*f+r*o*l+i*s*u-i*a*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=f*a-o*u,p=o*l-f*s,v=u*s-a*l,P=n*h+r*p+i*v;if(P===0)return this.set(0,0,0,0,0,0,0,0,0);const S=1/P;return e[0]=h*S,e[1]=(i*u-f*r)*S,e[2]=(o*r-i*a)*S,e[3]=p*S,e[4]=(f*n-i*l)*S,e[5]=(i*s-o*n)*S,e[6]=v*S,e[7]=(r*l-u*n)*S,e[8]=(a*n-r*s)*S,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*a+u*o)+a+e,-i*u,i*l,-i*(-u*a+l*o)+o+n,0,0,1),this}scale(e,n){return this.premultiply(iy.makeScale(e,n)),this}rotate(e){return this.premultiply(iy.makeRotation(-e)),this}translate(e,n){return this.premultiply(iy.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const iy=new Qt;function HA(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function bh(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function gY(){const t=bh("canvas");return t.style.display="block",t}const Xw={};function Fl(t){t in Xw||(Xw[t]=!0,console.warn(t))}function yY(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function _Y(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function xY(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Ww=new Qt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Yw=new Qt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function bY(){const t={enabled:!0,workingColorSpace:hc,spaces:{},convert:function(i,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Ln&&(i.r=ia(i.r),i.g=ia(i.g),i.b=ia(i.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Ln&&(i.r=tc(i.r),i.g=tc(i.g),i.b=tc(i.b))),i},fromWorkingColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},toWorkingColorSpace:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Ba?_h:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,a){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[hc]:{primaries:e,whitePoint:r,transfer:_h,toXYZ:Ww,fromXYZ:Yw,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Pi},outputColorSpaceConfig:{drawingBufferColorSpace:Pi}},[Pi]:{primaries:e,whitePoint:r,transfer:Ln,toXYZ:Ww,fromXYZ:Yw,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Pi}}}),t}const wn=bY();function ia(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function tc(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let dl;class wY{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{dl===void 0&&(dl=bh("canvas")),dl.width=e.width,dl.height=e.height;const r=dl.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=dl}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=bh("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=ia(s[a]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ia(n[r]/255)*255):n[r]=ia(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let SY=0;class zA{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:SY++}),this.uuid=lf(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(sy(i[a].image)):s.push(sy(i[a]))}else s=sy(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function sy(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?wY.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let PY=0;class ri extends Ac{constructor(e=ri.DEFAULT_IMAGE,n=ri.DEFAULT_MAPPING,r=Io,i=Io,s=xs,a=Lo,o=Ki,l=ua,u=ri.DEFAULT_ANISOTROPY,f=Ba){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:PY++}),this.uuid=lf(),this.name="",this.source=new zA(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Mn(0,0),this.repeat=new Mn(1,1),this.center=new Mn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==RA)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Rx:e.x=e.x-Math.floor(e.x);break;case Io:e.x=e.x<0?0:1;break;case Ix:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Rx:e.y=e.y-Math.floor(e.y);break;case Io:e.y=e.y<0?0:1;break;case Ix:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ri.DEFAULT_IMAGE=null;ri.DEFAULT_MAPPING=RA;ri.DEFAULT_ANISOTROPY=1;class nr{constructor(e=0,n=0,r=0,i=1){nr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*n+a[4]*r+a[8]*i+a[12]*s,this.y=a[1]*n+a[5]*r+a[9]*i+a[13]*s,this.z=a[2]*n+a[6]*r+a[10]*i+a[14]*s,this.w=a[3]*n+a[7]*r+a[11]*i+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,u=l[0],f=l[4],h=l[8],p=l[1],v=l[5],P=l[9],S=l[2],g=l[6],m=l[10];if(Math.abs(f-p)<.01&&Math.abs(h-S)<.01&&Math.abs(P-g)<.01){if(Math.abs(f+p)<.1&&Math.abs(h+S)<.1&&Math.abs(P+g)<.1&&Math.abs(u+v+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(u+1)/2,C=(v+1)/2,A=(m+1)/2,M=(f+p)/4,E=(h+S)/4,N=(P+g)/4;return w>C&&w>A?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=M/r,s=E/r):C>A?C<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(C),r=M/i,s=N/i):A<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(A),r=E/s,i=N/s),this.set(r,i,s,n),this}let x=Math.sqrt((g-P)*(g-P)+(h-S)*(h-S)+(p-f)*(p-f));return Math.abs(x)<.001&&(x=1),this.x=(g-P)/x,this.y=(h-S)/x,this.z=(p-f)/x,this.w=Math.acos((u+v+m-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=mn(this.x,e.x,n.x),this.y=mn(this.y,e.y,n.y),this.z=mn(this.z,e.z,n.z),this.w=mn(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=mn(this.x,e,n),this.y=mn(this.y,e,n),this.z=mn(this.z,e,n),this.w=mn(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class EY extends Ac{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new nr(0,0,e,n),this.scissorTest=!1,this.viewport=new nr(0,0,e,n);const i={width:e,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:xs,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new ri(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const a=r.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0,this.textures[r].renderTarget=this;const n=Object.assign({},e.texture.image);return this.texture.source=new zA(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ho extends EY{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class GA extends ri{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=es,this.minFilter=es,this.wrapR=Io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class CY extends ri{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=es,this.minFilter=es,this.wrapR=Io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class na{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,a,o){let l=r[i+0],u=r[i+1],f=r[i+2],h=r[i+3];const p=s[a+0],v=s[a+1],P=s[a+2],S=s[a+3];if(o===0){e[n+0]=l,e[n+1]=u,e[n+2]=f,e[n+3]=h;return}if(o===1){e[n+0]=p,e[n+1]=v,e[n+2]=P,e[n+3]=S;return}if(h!==S||l!==p||u!==v||f!==P){let g=1-o;const m=l*p+u*v+f*P+h*S,x=m>=0?1:-1,w=1-m*m;if(w>Number.EPSILON){const A=Math.sqrt(w),M=Math.atan2(A,m*x);g=Math.sin(g*M)/A,o=Math.sin(o*M)/A}const C=o*x;if(l=l*g+p*C,u=u*g+v*C,f=f*g+P*C,h=h*g+S*C,g===1-o){const A=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=A,u*=A,f*=A,h*=A}}e[n]=l,e[n+1]=u,e[n+2]=f,e[n+3]=h}static multiplyQuaternionsFlat(e,n,r,i,s,a){const o=r[i],l=r[i+1],u=r[i+2],f=r[i+3],h=s[a],p=s[a+1],v=s[a+2],P=s[a+3];return e[n]=o*P+f*h+l*v-u*p,e[n+1]=l*P+f*p+u*h-o*v,e[n+2]=u*P+f*v+o*p-l*h,e[n+3]=f*P-o*h-l*p-u*v,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(r/2),f=o(i/2),h=o(s/2),p=l(r/2),v=l(i/2),P=l(s/2);switch(a){case"XYZ":this._x=p*f*h+u*v*P,this._y=u*v*h-p*f*P,this._z=u*f*P+p*v*h,this._w=u*f*h-p*v*P;break;case"YXZ":this._x=p*f*h+u*v*P,this._y=u*v*h-p*f*P,this._z=u*f*P-p*v*h,this._w=u*f*h+p*v*P;break;case"ZXY":this._x=p*f*h-u*v*P,this._y=u*v*h+p*f*P,this._z=u*f*P+p*v*h,this._w=u*f*h-p*v*P;break;case"ZYX":this._x=p*f*h-u*v*P,this._y=u*v*h+p*f*P,this._z=u*f*P-p*v*h,this._w=u*f*h+p*v*P;break;case"YZX":this._x=p*f*h+u*v*P,this._y=u*v*h+p*f*P,this._z=u*f*P-p*v*h,this._w=u*f*h-p*v*P;break;case"XZY":this._x=p*f*h-u*v*P,this._y=u*v*h-p*f*P,this._z=u*f*P+p*v*h,this._w=u*f*h+p*v*P;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],a=n[1],o=n[5],l=n[9],u=n[2],f=n[6],h=n[10],p=r+o+h;if(p>0){const v=.5/Math.sqrt(p+1);this._w=.25/v,this._x=(f-l)*v,this._y=(s-u)*v,this._z=(a-i)*v}else if(r>o&&r>h){const v=2*Math.sqrt(1+r-o-h);this._w=(f-l)/v,this._x=.25*v,this._y=(i+a)/v,this._z=(s+u)/v}else if(o>h){const v=2*Math.sqrt(1+o-r-h);this._w=(s-u)/v,this._x=(i+a)/v,this._y=.25*v,this._z=(l+f)/v}else{const v=2*Math.sqrt(1+h-r-o);this._w=(a-i)/v,this._x=(s+u)/v,this._y=(l+f)/v,this._z=.25*v}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,a=e._w,o=n._x,l=n._y,u=n._z,f=n._w;return this._x=r*f+a*o+i*u-s*l,this._y=i*f+a*l+s*o-r*u,this._z=s*f+a*u+r*l-i*o,this._w=a*f-r*o-i*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+r*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const v=1-n;return this._w=v*a+n*this._w,this._x=v*r+n*this._x,this._y=v*i+n*this._y,this._z=v*s+n*this._z,this.normalize(),this}const u=Math.sqrt(l),f=Math.atan2(u,o),h=Math.sin((1-n)*f)/u,p=Math.sin(n*f)/u;return this._w=a*h+this._w*p,this._x=r*h+this._x*p,this._y=i*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Re{constructor(e=0,n=0,r=0){Re.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(jw.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(jw.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,a=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*a,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*a,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*a,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=2*(a*i-o*r),f=2*(o*n-s*i),h=2*(s*r-a*n);return this.x=n+l*u+a*h-o*f,this.y=r+l*f+o*u-s*h,this.z=i+l*h+s*f-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=mn(this.x,e.x,n.x),this.y=mn(this.y,e.y,n.y),this.z=mn(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=mn(this.x,e,n),this.y=mn(this.y,e,n),this.z=mn(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(mn(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,a=n.x,o=n.y,l=n.z;return this.x=i*l-s*o,this.y=s*a-r*l,this.z=r*o-i*a,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return ay.copy(this).projectOnVector(e),this.sub(ay)}reflect(e){return this.sub(ay.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(mn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ay=new Re,jw=new na;class cf{constructor(e=new Re(1/0,1/0,1/0),n=new Re(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint($i.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint($i.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=$i.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,$i):$i.fromBufferAttribute(s,a),$i.applyMatrix4(e.matrixWorld),this.expandByPoint($i);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Hf.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Hf.copy(r.boundingBox)),Hf.applyMatrix4(e.matrixWorld),this.union(Hf)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,$i),$i.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Gc),zf.subVectors(this.max,Gc),hl.subVectors(e.a,Gc),pl.subVectors(e.b,Gc),ml.subVectors(e.c,Gc),ga.subVectors(pl,hl),ya.subVectors(ml,pl),so.subVectors(hl,ml);let n=[0,-ga.z,ga.y,0,-ya.z,ya.y,0,-so.z,so.y,ga.z,0,-ga.x,ya.z,0,-ya.x,so.z,0,-so.x,-ga.y,ga.x,0,-ya.y,ya.x,0,-so.y,so.x,0];return!oy(n,hl,pl,ml,zf)||(n=[1,0,0,0,1,0,0,0,1],!oy(n,hl,pl,ml,zf))?!1:(Gf.crossVectors(ga,ya),n=[Gf.x,Gf.y,Gf.z],oy(n,hl,pl,ml,zf))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$i).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize($i).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Us[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Us[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Us[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Us[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Us[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Us[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Us[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Us[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Us),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Us=[new Re,new Re,new Re,new Re,new Re,new Re,new Re,new Re],$i=new Re,Hf=new cf,hl=new Re,pl=new Re,ml=new Re,ga=new Re,ya=new Re,so=new Re,Gc=new Re,zf=new Re,Gf=new Re,ao=new Re;function oy(t,e,n,r,i){for(let s=0,a=t.length-3;s<=a;s+=3){ao.fromArray(t,s);const o=i.x*Math.abs(ao.x)+i.y*Math.abs(ao.y)+i.z*Math.abs(ao.z),l=e.dot(ao),u=n.dot(ao),f=r.dot(ao);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>o)return!1}return!0}const TY=new cf,Xc=new Re,ly=new Re;class cb{constructor(e=new Re,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):TY.setFromPoints(e).getCenter(r);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Xc.subVectors(e,this.center);const n=Xc.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Xc,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ly.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Xc.copy(e.center).add(ly)),this.expandByPoint(Xc.copy(e.center).sub(ly))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Bs=new Re,cy=new Re,Xf=new Re,_a=new Re,uy=new Re,Wf=new Re,fy=new Re;class AY{constructor(e=new Re,n=new Re(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bs)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Bs.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Bs.copy(this.origin).addScaledVector(this.direction,n),Bs.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){cy.copy(e).add(n).multiplyScalar(.5),Xf.copy(n).sub(e).normalize(),_a.copy(this.origin).sub(cy);const s=e.distanceTo(n)*.5,a=-this.direction.dot(Xf),o=_a.dot(this.direction),l=-_a.dot(Xf),u=_a.lengthSq(),f=Math.abs(1-a*a);let h,p,v,P;if(f>0)if(h=a*l-o,p=a*o-l,P=s*f,h>=0)if(p>=-P)if(p<=P){const S=1/f;h*=S,p*=S,v=h*(h+a*p+2*o)+p*(a*h+p+2*l)+u}else p=s,h=Math.max(0,-(a*p+o)),v=-h*h+p*(p+2*l)+u;else p=-s,h=Math.max(0,-(a*p+o)),v=-h*h+p*(p+2*l)+u;else p<=-P?(h=Math.max(0,-(-a*s+o)),p=h>0?-s:Math.min(Math.max(-s,-l),s),v=-h*h+p*(p+2*l)+u):p<=P?(h=0,p=Math.min(Math.max(-s,-l),s),v=p*(p+2*l)+u):(h=Math.max(0,-(a*s+o)),p=h>0?s:Math.min(Math.max(-s,-l),s),v=-h*h+p*(p+2*l)+u);else p=a>0?-s:s,h=Math.max(0,-(a*p+o)),v=-h*h+p*(p+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(cy).addScaledVector(Xf,p),v}intersectSphere(e,n){Bs.subVectors(e.center,this.origin);const r=Bs.dot(this.direction),i=Bs.dot(Bs)-r*r,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=r-a,l=r+a;return l<0?null:o<0?this.at(l,n):this.at(o,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,a,o,l;const u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(r=(e.min.x-p.x)*u,i=(e.max.x-p.x)*u):(r=(e.max.x-p.x)*u,i=(e.min.x-p.x)*u),f>=0?(s=(e.min.y-p.y)*f,a=(e.max.y-p.y)*f):(s=(e.max.y-p.y)*f,a=(e.min.y-p.y)*f),r>a||s>i||((s>r||isNaN(r))&&(r=s),(a<i||isNaN(i))&&(i=a),h>=0?(o=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(o=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Bs)!==null}intersectTriangle(e,n,r,i,s){uy.subVectors(n,e),Wf.subVectors(r,e),fy.crossVectors(uy,Wf);let a=this.direction.dot(fy),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;_a.subVectors(this.origin,e);const l=o*this.direction.dot(Wf.crossVectors(_a,Wf));if(l<0)return null;const u=o*this.direction.dot(uy.cross(_a));if(u<0||l+u>a)return null;const f=-o*_a.dot(fy);return f<0?null:this.at(f/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Un{constructor(e,n,r,i,s,a,o,l,u,f,h,p,v,P,S,g){Un.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,a,o,l,u,f,h,p,v,P,S,g)}set(e,n,r,i,s,a,o,l,u,f,h,p,v,P,S,g){const m=this.elements;return m[0]=e,m[4]=n,m[8]=r,m[12]=i,m[1]=s,m[5]=a,m[9]=o,m[13]=l,m[2]=u,m[6]=f,m[10]=h,m[14]=p,m[3]=v,m[7]=P,m[11]=S,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Un().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/vl.setFromMatrixColumn(e,0).length(),s=1/vl.setFromMatrixColumn(e,1).length(),a=1/vl.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,a=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),f=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=a*f,v=a*h,P=o*f,S=o*h;n[0]=l*f,n[4]=-l*h,n[8]=u,n[1]=v+P*u,n[5]=p-S*u,n[9]=-o*l,n[2]=S-p*u,n[6]=P+v*u,n[10]=a*l}else if(e.order==="YXZ"){const p=l*f,v=l*h,P=u*f,S=u*h;n[0]=p+S*o,n[4]=P*o-v,n[8]=a*u,n[1]=a*h,n[5]=a*f,n[9]=-o,n[2]=v*o-P,n[6]=S+p*o,n[10]=a*l}else if(e.order==="ZXY"){const p=l*f,v=l*h,P=u*f,S=u*h;n[0]=p-S*o,n[4]=-a*h,n[8]=P+v*o,n[1]=v+P*o,n[5]=a*f,n[9]=S-p*o,n[2]=-a*u,n[6]=o,n[10]=a*l}else if(e.order==="ZYX"){const p=a*f,v=a*h,P=o*f,S=o*h;n[0]=l*f,n[4]=P*u-v,n[8]=p*u+S,n[1]=l*h,n[5]=S*u+p,n[9]=v*u-P,n[2]=-u,n[6]=o*l,n[10]=a*l}else if(e.order==="YZX"){const p=a*l,v=a*u,P=o*l,S=o*u;n[0]=l*f,n[4]=S-p*h,n[8]=P*h+v,n[1]=h,n[5]=a*f,n[9]=-o*f,n[2]=-u*f,n[6]=v*h+P,n[10]=p-S*h}else if(e.order==="XZY"){const p=a*l,v=a*u,P=o*l,S=o*u;n[0]=l*f,n[4]=-h,n[8]=u*f,n[1]=p*h+S,n[5]=a*f,n[9]=v*h-P,n[2]=P*h-v,n[6]=o*f,n[10]=S*h+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(MY,e,RY)}lookAt(e,n,r){const i=this.elements;return ci.subVectors(e,n),ci.lengthSq()===0&&(ci.z=1),ci.normalize(),xa.crossVectors(r,ci),xa.lengthSq()===0&&(Math.abs(r.z)===1?ci.x+=1e-4:ci.z+=1e-4,ci.normalize(),xa.crossVectors(r,ci)),xa.normalize(),Yf.crossVectors(ci,xa),i[0]=xa.x,i[4]=Yf.x,i[8]=ci.x,i[1]=xa.y,i[5]=Yf.y,i[9]=ci.y,i[2]=xa.z,i[6]=Yf.z,i[10]=ci.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,a=r[0],o=r[4],l=r[8],u=r[12],f=r[1],h=r[5],p=r[9],v=r[13],P=r[2],S=r[6],g=r[10],m=r[14],x=r[3],w=r[7],C=r[11],A=r[15],M=i[0],E=i[4],N=i[8],I=i[12],L=i[1],R=i[5],B=i[9],V=i[13],z=i[2],G=i[6],O=i[10],y=i[14],b=i[3],k=i[7],F=i[11],H=i[15];return s[0]=a*M+o*L+l*z+u*b,s[4]=a*E+o*R+l*G+u*k,s[8]=a*N+o*B+l*O+u*F,s[12]=a*I+o*V+l*y+u*H,s[1]=f*M+h*L+p*z+v*b,s[5]=f*E+h*R+p*G+v*k,s[9]=f*N+h*B+p*O+v*F,s[13]=f*I+h*V+p*y+v*H,s[2]=P*M+S*L+g*z+m*b,s[6]=P*E+S*R+g*G+m*k,s[10]=P*N+S*B+g*O+m*F,s[14]=P*I+S*V+g*y+m*H,s[3]=x*M+w*L+C*z+A*b,s[7]=x*E+w*R+C*G+A*k,s[11]=x*N+w*B+C*O+A*F,s[15]=x*I+w*V+C*y+A*H,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],f=e[2],h=e[6],p=e[10],v=e[14],P=e[3],S=e[7],g=e[11],m=e[15];return P*(+s*l*h-i*u*h-s*o*p+r*u*p+i*o*v-r*l*v)+S*(+n*l*v-n*u*p+s*a*p-i*a*v+i*u*f-s*l*f)+g*(+n*u*h-n*o*v-s*a*h+r*a*v+s*o*f-r*u*f)+m*(-i*o*f-n*l*h+n*o*p+i*a*h-r*a*p+r*l*f)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=e[9],p=e[10],v=e[11],P=e[12],S=e[13],g=e[14],m=e[15],x=h*g*u-S*p*u+S*l*v-o*g*v-h*l*m+o*p*m,w=P*p*u-f*g*u-P*l*v+a*g*v+f*l*m-a*p*m,C=f*S*u-P*h*u+P*o*v-a*S*v-f*o*m+a*h*m,A=P*h*l-f*S*l-P*o*p+a*S*p+f*o*g-a*h*g,M=n*x+r*w+i*C+s*A;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/M;return e[0]=x*E,e[1]=(S*p*s-h*g*s-S*i*v+r*g*v+h*i*m-r*p*m)*E,e[2]=(o*g*s-S*l*s+S*i*u-r*g*u-o*i*m+r*l*m)*E,e[3]=(h*l*s-o*p*s-h*i*u+r*p*u+o*i*v-r*l*v)*E,e[4]=w*E,e[5]=(f*g*s-P*p*s+P*i*v-n*g*v-f*i*m+n*p*m)*E,e[6]=(P*l*s-a*g*s-P*i*u+n*g*u+a*i*m-n*l*m)*E,e[7]=(a*p*s-f*l*s+f*i*u-n*p*u-a*i*v+n*l*v)*E,e[8]=C*E,e[9]=(P*h*s-f*S*s-P*r*v+n*S*v+f*r*m-n*h*m)*E,e[10]=(a*S*s-P*o*s+P*r*u-n*S*u-a*r*m+n*o*m)*E,e[11]=(f*o*s-a*h*s-f*r*u+n*h*u+a*r*v-n*o*v)*E,e[12]=A*E,e[13]=(f*S*i-P*h*i+P*r*p-n*S*p-f*r*g+n*h*g)*E,e[14]=(P*o*i-a*S*i-P*r*l+n*S*l+a*r*g-n*o*g)*E,e[15]=(a*h*i-f*o*i+f*r*l-n*h*l-a*r*p+n*o*p)*E,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,a=e.x,o=e.y,l=e.z,u=s*a,f=s*o;return this.set(u*a+r,u*o-i*l,u*l+i*o,0,u*o+i*l,f*o+r,f*l-i*a,0,u*l-i*o,f*l+i*a,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,a){return this.set(1,r,s,0,e,1,a,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,a=n._y,o=n._z,l=n._w,u=s+s,f=a+a,h=o+o,p=s*u,v=s*f,P=s*h,S=a*f,g=a*h,m=o*h,x=l*u,w=l*f,C=l*h,A=r.x,M=r.y,E=r.z;return i[0]=(1-(S+m))*A,i[1]=(v+C)*A,i[2]=(P-w)*A,i[3]=0,i[4]=(v-C)*M,i[5]=(1-(p+m))*M,i[6]=(g+x)*M,i[7]=0,i[8]=(P+w)*E,i[9]=(g-x)*E,i[10]=(1-(p+S))*E,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=vl.set(i[0],i[1],i[2]).length();const a=vl.set(i[4],i[5],i[6]).length(),o=vl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Vi.copy(this);const u=1/s,f=1/a,h=1/o;return Vi.elements[0]*=u,Vi.elements[1]*=u,Vi.elements[2]*=u,Vi.elements[4]*=f,Vi.elements[5]*=f,Vi.elements[6]*=f,Vi.elements[8]*=h,Vi.elements[9]*=h,Vi.elements[10]*=h,n.setFromRotationMatrix(Vi),r.x=s,r.y=a,r.z=o,this}makePerspective(e,n,r,i,s,a,o=ta){const l=this.elements,u=2*s/(n-e),f=2*s/(r-i),h=(n+e)/(n-e),p=(r+i)/(r-i);let v,P;if(o===ta)v=-(a+s)/(a-s),P=-2*a*s/(a-s);else if(o===xh)v=-a/(a-s),P=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=v,l[14]=P,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,a,o=ta){const l=this.elements,u=1/(n-e),f=1/(r-i),h=1/(a-s),p=(n+e)*u,v=(r+i)*f;let P,S;if(o===ta)P=(a+s)*h,S=-2*h;else if(o===xh)P=s*h,S=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-v,l[2]=0,l[6]=0,l[10]=S,l[14]=-P,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const vl=new Re,Vi=new Un,MY=new Re(0,0,0),RY=new Re(1,1,1),xa=new Re,Yf=new Re,ci=new Re,Zw=new Un,Kw=new na;class ts{constructor(e=0,n=0,r=0,i=ts.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],u=i[5],f=i[9],h=i[2],p=i[6],v=i[10];switch(n){case"XYZ":this._y=Math.asin(mn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-f,v),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-mn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(o,v),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(mn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,v),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-mn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,v),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(mn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,v));break;case"XZY":this._z=Math.asin(-mn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-f,v),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return Zw.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Zw,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Kw.setFromEuler(this),this.setFromQuaternion(Kw,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ts.DEFAULT_ORDER="XYZ";class XA{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let IY=0;const Jw=new Re,gl=new na,$s=new Un,jf=new Re,Wc=new Re,LY=new Re,OY=new na,Qw=new Re(1,0,0),eS=new Re(0,1,0),tS=new Re(0,0,1),nS={type:"added"},NY={type:"removed"},yl={type:"childadded",child:null},dy={type:"childremoved",child:null};class Rr extends Ac{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:IY++}),this.uuid=lf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Rr.DEFAULT_UP.clone();const e=new Re,n=new ts,r=new na,i=new Re(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Un},normalMatrix:{value:new Qt}}),this.matrix=new Un,this.matrixWorld=new Un,this.matrixAutoUpdate=Rr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Rr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new XA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return gl.setFromAxisAngle(e,n),this.quaternion.multiply(gl),this}rotateOnWorldAxis(e,n){return gl.setFromAxisAngle(e,n),this.quaternion.premultiply(gl),this}rotateX(e){return this.rotateOnAxis(Qw,e)}rotateY(e){return this.rotateOnAxis(eS,e)}rotateZ(e){return this.rotateOnAxis(tS,e)}translateOnAxis(e,n){return Jw.copy(e).applyQuaternion(this.quaternion),this.position.add(Jw.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Qw,e)}translateY(e){return this.translateOnAxis(eS,e)}translateZ(e){return this.translateOnAxis(tS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4($s.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?jf.copy(e):jf.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Wc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$s.lookAt(Wc,jf,this.up):$s.lookAt(jf,Wc,this.up),this.quaternion.setFromRotationMatrix($s),i&&($s.extractRotation(i.matrixWorld),gl.setFromRotationMatrix($s),this.quaternion.premultiply(gl.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(nS),yl.child=e,this.dispatchEvent(yl),yl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(NY),dy.child=e,this.dispatchEvent(dy),dy.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),$s.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),$s.multiply(e.parent.matrixWorld)),e.applyMatrix4($s),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(nS),yl.child=e,this.dispatchEvent(yl),yl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wc,e,LY),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wc,OY,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(n){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),f=a(e.images),h=a(e.shapes),p=a(e.skeletons),v=a(e.animations),P=a(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),h.length>0&&(r.shapes=h),p.length>0&&(r.skeletons=p),v.length>0&&(r.animations=v),P.length>0&&(r.nodes=P)}return r.object=i,r;function a(o){const l=[];for(const u in o){const f=o[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Rr.DEFAULT_UP=new Re(0,1,0);Rr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Rr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const qi=new Re,Vs=new Re,hy=new Re,qs=new Re,_l=new Re,xl=new Re,rS=new Re,py=new Re,my=new Re,vy=new Re,gy=new nr,yy=new nr,_y=new nr;class Zi{constructor(e=new Re,n=new Re,r=new Re){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),qi.subVectors(e,n),i.cross(qi);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){qi.subVectors(i,n),Vs.subVectors(r,n),hy.subVectors(e,n);const a=qi.dot(qi),o=qi.dot(Vs),l=qi.dot(hy),u=Vs.dot(Vs),f=Vs.dot(hy),h=a*u-o*o;if(h===0)return s.set(0,0,0),null;const p=1/h,v=(u*l-o*f)*p,P=(a*f-o*l)*p;return s.set(1-v-P,P,v)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,qs)===null?!1:qs.x>=0&&qs.y>=0&&qs.x+qs.y<=1}static getInterpolation(e,n,r,i,s,a,o,l){return this.getBarycoord(e,n,r,i,qs)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,qs.x),l.addScaledVector(a,qs.y),l.addScaledVector(o,qs.z),l)}static getInterpolatedAttribute(e,n,r,i,s,a){return gy.setScalar(0),yy.setScalar(0),_y.setScalar(0),gy.fromBufferAttribute(e,n),yy.fromBufferAttribute(e,r),_y.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(gy,s.x),a.addScaledVector(yy,s.y),a.addScaledVector(_y,s.z),a}static isFrontFacing(e,n,r,i){return qi.subVectors(r,n),Vs.subVectors(e,n),qi.cross(Vs).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qi.subVectors(this.c,this.b),Vs.subVectors(this.a,this.b),qi.cross(Vs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Zi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Zi.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return Zi.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Zi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Zi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let a,o;_l.subVectors(i,r),xl.subVectors(s,r),py.subVectors(e,r);const l=_l.dot(py),u=xl.dot(py);if(l<=0&&u<=0)return n.copy(r);my.subVectors(e,i);const f=_l.dot(my),h=xl.dot(my);if(f>=0&&h<=f)return n.copy(i);const p=l*h-f*u;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),n.copy(r).addScaledVector(_l,a);vy.subVectors(e,s);const v=_l.dot(vy),P=xl.dot(vy);if(P>=0&&v<=P)return n.copy(s);const S=v*u-l*P;if(S<=0&&u>=0&&P<=0)return o=u/(u-P),n.copy(r).addScaledVector(xl,o);const g=f*P-v*h;if(g<=0&&h-f>=0&&v-P>=0)return rS.subVectors(s,i),o=(h-f)/(h-f+(v-P)),n.copy(i).addScaledVector(rS,o);const m=1/(g+S+p);return a=S*m,o=p*m,n.copy(r).addScaledVector(_l,a).addScaledVector(xl,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const WA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ba={h:0,s:0,l:0},Zf={h:0,s:0,l:0};function xy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Cn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Pi){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,wn.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=wn.workingColorSpace){return this.r=e,this.g=n,this.b=r,wn.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=wn.workingColorSpace){if(e=vY(e,1),n=mn(n,0,1),r=mn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,a=2*r-s;this.r=xy(a,s,e+1/3),this.g=xy(a,s,e),this.b=xy(a,s,e-1/3)}return wn.toWorkingColorSpace(this,i),this}setStyle(e,n=Pi){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(a===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Pi){const r=WA[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ia(e.r),this.g=ia(e.g),this.b=ia(e.b),this}copyLinearToSRGB(e){return this.r=tc(e.r),this.g=tc(e.g),this.b=tc(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pi){return wn.fromWorkingColorSpace(Tr.copy(this),e),Math.round(mn(Tr.r*255,0,255))*65536+Math.round(mn(Tr.g*255,0,255))*256+Math.round(mn(Tr.b*255,0,255))}getHexString(e=Pi){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=wn.workingColorSpace){wn.fromWorkingColorSpace(Tr.copy(this),n);const r=Tr.r,i=Tr.g,s=Tr.b,a=Math.max(r,i,s),o=Math.min(r,i,s);let l,u;const f=(o+a)/2;if(o===a)l=0,u=0;else{const h=a-o;switch(u=f<=.5?h/(a+o):h/(2-a-o),a){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,n=wn.workingColorSpace){return wn.fromWorkingColorSpace(Tr.copy(this),n),e.r=Tr.r,e.g=Tr.g,e.b=Tr.b,e}getStyle(e=Pi){wn.fromWorkingColorSpace(Tr.copy(this),e);const n=Tr.r,r=Tr.g,i=Tr.b;return e!==Pi?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(ba),this.setHSL(ba.h+e,ba.s+n,ba.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ba),e.getHSL(Zf);const r=ry(ba.h,Zf.h,n),i=ry(ba.s,Zf.s,n),s=ry(ba.l,Zf.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Tr=new Cn;Cn.NAMES=WA;let DY=0;class uf extends Ac{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:DY++}),this.uuid=lf(),this.name="",this.type="Material",this.blending=Ql,this.side=Ya,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=_x,this.blendDst=xx,this.blendEquation=Eo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Cn(0,0,0),this.blendAlpha=0,this.depthFunc=lc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Hw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fl,this.stencilZFail=fl,this.stencilZPass=fl,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ql&&(r.blending=this.blending),this.side!==Ya&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==_x&&(r.blendSrc=this.blendSrc),this.blendDst!==xx&&(r.blendDst=this.blendDst),this.blendEquation!==Eo&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==lc&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Hw&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==fl&&(r.stencilFail=this.stencilFail),this.stencilZFail!==fl&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==fl&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(n){const s=i(e.textures),a=i(e.images);s.length>0&&(r.textures=s),a.length>0&&(r.images=a)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class YA extends uf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Cn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ts,this.combine=MA,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const cr=new Re,Kf=new Mn;class Ri{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=zw,this.updateRanges=[],this.gpuType=ea,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Kf.fromBufferAttribute(this,n),Kf.applyMatrix3(e),this.setXY(n,Kf.x,Kf.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)cr.fromBufferAttribute(this,n),cr.applyMatrix3(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)cr.fromBufferAttribute(this,n),cr.applyMatrix4(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)cr.fromBufferAttribute(this,n),cr.applyNormalMatrix(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)cr.fromBufferAttribute(this,n),cr.transformDirection(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=zc(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Gr(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=zc(n,this.array)),n}setX(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=zc(n,this.array)),n}setY(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=zc(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=zc(n,this.array)),n}setW(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),r=Gr(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),r=Gr(r,this.array),i=Gr(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),r=Gr(r,this.array),i=Gr(i,this.array),s=Gr(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==zw&&(e.usage=this.usage),e}}class jA extends Ri{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class ZA extends Ri{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Uo extends Ri{constructor(e,n,r){super(new Float32Array(e),n,r)}}let kY=0;const wi=new Un,by=new Rr,bl=new Re,ui=new cf,Yc=new cf,gr=new Re;class eo extends Ac{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:kY++}),this.uuid=lf(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(HA(e)?ZA:jA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Qt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return wi.makeRotationFromQuaternion(e),this.applyMatrix4(wi),this}rotateX(e){return wi.makeRotationX(e),this.applyMatrix4(wi),this}rotateY(e){return wi.makeRotationY(e),this.applyMatrix4(wi),this}rotateZ(e){return wi.makeRotationZ(e),this.applyMatrix4(wi),this}translate(e,n,r){return wi.makeTranslation(e,n,r),this.applyMatrix4(wi),this}scale(e,n,r){return wi.makeScale(e,n,r),this.applyMatrix4(wi),this}lookAt(e){return by.lookAt(e),by.updateMatrix(),this.applyMatrix4(by.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bl).negate(),this.translate(bl.x,bl.y,bl.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const a=e[i];r.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Uo(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new cf);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Re(-1/0,-1/0,-1/0),new Re(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];ui.setFromBufferAttribute(s),this.morphTargetsRelative?(gr.addVectors(this.boundingBox.min,ui.min),this.boundingBox.expandByPoint(gr),gr.addVectors(this.boundingBox.max,ui.max),this.boundingBox.expandByPoint(gr)):(this.boundingBox.expandByPoint(ui.min),this.boundingBox.expandByPoint(ui.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new cb);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Re,1/0);return}if(e){const r=this.boundingSphere.center;if(ui.setFromBufferAttribute(e),n)for(let s=0,a=n.length;s<a;s++){const o=n[s];Yc.setFromBufferAttribute(o),this.morphTargetsRelative?(gr.addVectors(ui.min,Yc.min),ui.expandByPoint(gr),gr.addVectors(ui.max,Yc.max),ui.expandByPoint(gr)):(ui.expandByPoint(Yc.min),ui.expandByPoint(Yc.max))}ui.getCenter(r);let i=0;for(let s=0,a=e.count;s<a;s++)gr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(gr));if(n)for(let s=0,a=n.length;s<a;s++){const o=n[s],l=this.morphTargetsRelative;for(let u=0,f=o.count;u<f;u++)gr.fromBufferAttribute(o,u),l&&(bl.fromBufferAttribute(e,u),gr.add(bl)),i=Math.max(i,r.distanceToSquared(gr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ri(new Float32Array(4*r.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let N=0;N<r.count;N++)o[N]=new Re,l[N]=new Re;const u=new Re,f=new Re,h=new Re,p=new Mn,v=new Mn,P=new Mn,S=new Re,g=new Re;function m(N,I,L){u.fromBufferAttribute(r,N),f.fromBufferAttribute(r,I),h.fromBufferAttribute(r,L),p.fromBufferAttribute(s,N),v.fromBufferAttribute(s,I),P.fromBufferAttribute(s,L),f.sub(u),h.sub(u),v.sub(p),P.sub(p);const R=1/(v.x*P.y-P.x*v.y);isFinite(R)&&(S.copy(f).multiplyScalar(P.y).addScaledVector(h,-v.y).multiplyScalar(R),g.copy(h).multiplyScalar(v.x).addScaledVector(f,-P.x).multiplyScalar(R),o[N].add(S),o[I].add(S),o[L].add(S),l[N].add(g),l[I].add(g),l[L].add(g))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let N=0,I=x.length;N<I;++N){const L=x[N],R=L.start,B=L.count;for(let V=R,z=R+B;V<z;V+=3)m(e.getX(V+0),e.getX(V+1),e.getX(V+2))}const w=new Re,C=new Re,A=new Re,M=new Re;function E(N){A.fromBufferAttribute(i,N),M.copy(A);const I=o[N];w.copy(I),w.sub(A.multiplyScalar(A.dot(I))).normalize(),C.crossVectors(M,I);const R=C.dot(l[N])<0?-1:1;a.setXYZW(N,w.x,w.y,w.z,R)}for(let N=0,I=x.length;N<I;++N){const L=x[N],R=L.start,B=L.count;for(let V=R,z=R+B;V<z;V+=3)E(e.getX(V+0)),E(e.getX(V+1)),E(e.getX(V+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ri(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,v=r.count;p<v;p++)r.setXYZ(p,0,0,0);const i=new Re,s=new Re,a=new Re,o=new Re,l=new Re,u=new Re,f=new Re,h=new Re;if(e)for(let p=0,v=e.count;p<v;p+=3){const P=e.getX(p+0),S=e.getX(p+1),g=e.getX(p+2);i.fromBufferAttribute(n,P),s.fromBufferAttribute(n,S),a.fromBufferAttribute(n,g),f.subVectors(a,s),h.subVectors(i,s),f.cross(h),o.fromBufferAttribute(r,P),l.fromBufferAttribute(r,S),u.fromBufferAttribute(r,g),o.add(f),l.add(f),u.add(f),r.setXYZ(P,o.x,o.y,o.z),r.setXYZ(S,l.x,l.y,l.z),r.setXYZ(g,u.x,u.y,u.z)}else for(let p=0,v=n.count;p<v;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),a.fromBufferAttribute(n,p+2),f.subVectors(a,s),h.subVectors(i,s),f.cross(h),r.setXYZ(p+0,f.x,f.y,f.z),r.setXYZ(p+1,f.x,f.y,f.z),r.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)gr.fromBufferAttribute(e,n),gr.normalize(),e.setXYZ(n,gr.x,gr.y,gr.z)}toNonIndexed(){function e(o,l){const u=o.array,f=o.itemSize,h=o.normalized,p=new u.constructor(l.length*f);let v=0,P=0;for(let S=0,g=l.length;S<g;S++){o.isInterleavedBufferAttribute?v=l[S]*o.data.stride+o.offset:v=l[S]*f;for(let m=0;m<f;m++)p[P++]=u[v++]}return new Ri(p,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new eo,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);n.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let f=0,h=u.length;f<h;f++){const p=u[f],v=e(p,r);l.push(v)}n.morphAttributes[o]=l}n.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let h=0,p=u.length;h<p;h++){const v=u[h];f.push(v.toJSON(e.data))}f.length>0&&(i[l]=f,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const f=i[u];this.setAttribute(u,f.clone(n))}const s=e.morphAttributes;for(const u in s){const f=[],h=s[u];for(let p=0,v=h.length;p<v;p++)f.push(h[p].clone(n));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,f=a.length;u<f;u++){const h=a[u];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const iS=new Un,oo=new AY,Jf=new cb,sS=new Re,Qf=new Re,ed=new Re,td=new Re,wy=new Re,nd=new Re,aS=new Re,rd=new Re;class Ji extends Rr{constructor(e=new eo,n=new YA){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=i.length;s<a;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,a=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){nd.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const f=o[l],h=s[l];f!==0&&(wy.fromBufferAttribute(h,e),a?nd.addScaledVector(wy,f):nd.addScaledVector(wy.sub(n),f))}n.add(nd)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Jf.copy(r.boundingSphere),Jf.applyMatrix4(s),oo.copy(e.ray).recast(e.near),!(Jf.containsPoint(oo.origin)===!1&&(oo.intersectSphere(Jf,sS)===null||oo.origin.distanceToSquared(sS)>(e.far-e.near)**2))&&(iS.copy(s).invert(),oo.copy(e.ray).applyMatrix4(iS),!(r.boundingBox!==null&&oo.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,oo)))}_computeIntersections(e,n,r){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,u=s.attributes.uv,f=s.attributes.uv1,h=s.attributes.normal,p=s.groups,v=s.drawRange;if(o!==null)if(Array.isArray(a))for(let P=0,S=p.length;P<S;P++){const g=p[P],m=a[g.materialIndex],x=Math.max(g.start,v.start),w=Math.min(o.count,Math.min(g.start+g.count,v.start+v.count));for(let C=x,A=w;C<A;C+=3){const M=o.getX(C),E=o.getX(C+1),N=o.getX(C+2);i=id(this,m,e,r,u,f,h,M,E,N),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const P=Math.max(0,v.start),S=Math.min(o.count,v.start+v.count);for(let g=P,m=S;g<m;g+=3){const x=o.getX(g),w=o.getX(g+1),C=o.getX(g+2);i=id(this,a,e,r,u,f,h,x,w,C),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let P=0,S=p.length;P<S;P++){const g=p[P],m=a[g.materialIndex],x=Math.max(g.start,v.start),w=Math.min(l.count,Math.min(g.start+g.count,v.start+v.count));for(let C=x,A=w;C<A;C+=3){const M=C,E=C+1,N=C+2;i=id(this,m,e,r,u,f,h,M,E,N),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const P=Math.max(0,v.start),S=Math.min(l.count,v.start+v.count);for(let g=P,m=S;g<m;g+=3){const x=g,w=g+1,C=g+2;i=id(this,a,e,r,u,f,h,x,w,C),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function FY(t,e,n,r,i,s,a,o){let l;if(e.side===ni?l=r.intersectTriangle(a,s,i,!0,o):l=r.intersectTriangle(i,s,a,e.side===Ya,o),l===null)return null;rd.copy(o),rd.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(rd);return u<n.near||u>n.far?null:{distance:u,point:rd.clone(),object:t}}function id(t,e,n,r,i,s,a,o,l,u){t.getVertexPosition(o,Qf),t.getVertexPosition(l,ed),t.getVertexPosition(u,td);const f=FY(t,e,n,r,Qf,ed,td,aS);if(f){const h=new Re;Zi.getBarycoord(aS,Qf,ed,td,h),i&&(f.uv=Zi.getInterpolatedAttribute(i,o,l,u,h,new Mn)),s&&(f.uv1=Zi.getInterpolatedAttribute(s,o,l,u,h,new Mn)),a&&(f.normal=Zi.getInterpolatedAttribute(a,o,l,u,h,new Re),f.normal.dot(r.direction)>0&&f.normal.multiplyScalar(-1));const p={a:o,b:l,c:u,normal:new Re,materialIndex:0};Zi.getNormal(Qf,ed,td,p.normal),f.face=p,f.barycoord=h}return f}class ff extends eo{constructor(e=1,n=1,r=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],f=[],h=[];let p=0,v=0;P("z","y","x",-1,-1,r,n,e,a,s,0),P("z","y","x",1,-1,r,n,-e,a,s,1),P("x","z","y",1,1,e,r,n,i,a,2),P("x","z","y",1,-1,e,r,-n,i,a,3),P("x","y","z",1,-1,e,n,r,i,s,4),P("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Uo(u,3)),this.setAttribute("normal",new Uo(f,3)),this.setAttribute("uv",new Uo(h,2));function P(S,g,m,x,w,C,A,M,E,N,I){const L=C/E,R=A/N,B=C/2,V=A/2,z=M/2,G=E+1,O=N+1;let y=0,b=0;const k=new Re;for(let F=0;F<O;F++){const H=F*R-V;for(let W=0;W<G;W++){const ne=W*L-B;k[S]=ne*x,k[g]=H*w,k[m]=z,u.push(k.x,k.y,k.z),k[S]=0,k[g]=0,k[m]=M>0?1:-1,f.push(k.x,k.y,k.z),h.push(W/E),h.push(1-F/N),y+=1}}for(let F=0;F<N;F++)for(let H=0;H<E;H++){const W=p+H+G*F,ne=p+H+G*(F+1),Z=p+(H+1)+G*(F+1),K=p+(H+1)+G*F;l.push(W,ne,K),l.push(ne,Z,K),b+=6}o.addGroup(v,b,I),v+=b,p+=y}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ff(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function pc(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Dr(t){const e={};for(let n=0;n<t.length;n++){const r=pc(t[n]);for(const i in r)e[i]=r[i]}return e}function UY(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function KA(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:wn.workingColorSpace}const BY={clone:pc,merge:Dr};var $Y=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,VY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ja extends uf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$Y,this.fragmentShader=VY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pc(e.uniforms),this.uniformsGroups=UY(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const a=this.uniforms[i].value;a&&a.isTexture?n.uniforms[i]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?n.uniforms[i]={type:"c",value:a.getHex()}:a&&a.isVector2?n.uniforms[i]={type:"v2",value:a.toArray()}:a&&a.isVector3?n.uniforms[i]={type:"v3",value:a.toArray()}:a&&a.isVector4?n.uniforms[i]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?n.uniforms[i]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?n.uniforms[i]={type:"m4",value:a.toArray()}:n.uniforms[i]={value:a}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class JA extends Rr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Un,this.projectionMatrix=new Un,this.projectionMatrixInverse=new Un,this.coordinateSystem=ta}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const wa=new Re,oS=new Mn,lS=new Mn;class Wi extends JA{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=i2*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ny*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return i2*2*Math.atan(Math.tan(ny*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){wa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(wa.x,wa.y).multiplyScalar(-e/wa.z),wa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(wa.x,wa.y).multiplyScalar(-e/wa.z)}getViewSize(e,n){return this.getViewBounds(e,oS,lS),n.subVectors(lS,oS)}setViewOffset(e,n,r,i,s,a){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(ny*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*i/l,n-=a.offsetY*r/u,i*=a.width/l,r*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const wl=-90,Sl=1;class qY extends Rr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Wi(wl,Sl,e,n);i.layers=this.layers,this.add(i);const s=new Wi(wl,Sl,e,n);s.layers=this.layers,this.add(s);const a=new Wi(wl,Sl,e,n);a.layers=this.layers,this.add(a);const o=new Wi(wl,Sl,e,n);o.layers=this.layers,this.add(o);const l=new Wi(wl,Sl,e,n);l.layers=this.layers,this.add(l);const u=new Wi(wl,Sl,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,a,o,l]=n;for(const u of n)this.remove(u);if(e===ta)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===xh)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,u,f]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),v=e.getActiveMipmapLevel(),P=e.xr.enabled;e.xr.enabled=!1;const S=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,a),e.setRenderTarget(r,2,i),e.render(n,o),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,u),r.texture.generateMipmaps=S,e.setRenderTarget(r,5,i),e.render(n,f),e.setRenderTarget(h,p,v),e.xr.enabled=P,r.texture.needsPMREMUpdate=!0}}class QA extends ri{constructor(e,n,r,i,s,a,o,l,u,f){e=e!==void 0?e:[],n=n!==void 0?n:cc,super(e,n,r,i,s,a,o,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class HY extends Ho{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new QA(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:xs}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ff(5,5,5),s=new ja({name:"CubemapFromEquirect",uniforms:pc(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ni,blending:za});s.uniforms.tEquirect.value=n;const a=new Ji(i,s),o=n.minFilter;return n.minFilter===Lo&&(n.minFilter=xs),new qY(1,10,this).update(e,a),n.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(n,r,i);e.setRenderTarget(s)}}class zY extends Rr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ts,this.environmentIntensity=1,this.environmentRotation=new ts,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}const Sy=new Re,GY=new Re,XY=new Qt;class _o{constructor(e=new Re(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=Sy.subVectors(r,n).cross(GY.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(Sy),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||XY.getNormalMatrix(e),i=this.coplanarPoint(Sy).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const lo=new cb,sd=new Re;class ub{constructor(e=new _o,n=new _o,r=new _o,i=new _o,s=new _o,a=new _o){this.planes=[e,n,r,i,s,a]}set(e,n,r,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(n),o[2].copy(r),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=ta){const r=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],f=i[5],h=i[6],p=i[7],v=i[8],P=i[9],S=i[10],g=i[11],m=i[12],x=i[13],w=i[14],C=i[15];if(r[0].setComponents(l-s,p-u,g-v,C-m).normalize(),r[1].setComponents(l+s,p+u,g+v,C+m).normalize(),r[2].setComponents(l+a,p+f,g+P,C+x).normalize(),r[3].setComponents(l-a,p-f,g-P,C-x).normalize(),r[4].setComponents(l-o,p-h,g-S,C-w).normalize(),n===ta)r[5].setComponents(l+o,p+h,g+S,C+w).normalize();else if(n===xh)r[5].setComponents(o,h,S,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),lo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),lo.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(lo)}intersectsSprite(e){return lo.center.set(0,0,0),lo.radius=.7071067811865476,lo.applyMatrix4(e.matrixWorld),this.intersectsSphere(lo)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(sd.x=i.normal.x>0?e.max.x:e.min.x,sd.y=i.normal.y>0?e.max.y:e.min.y,sd.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(sd)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class hu extends Rr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class eM extends ri{constructor(e,n,r,i,s,a,o,l,u,f=ec){if(f!==ec&&f!==dc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&f===ec&&(r=qo),r===void 0&&f===dc&&(r=fc),super(null,i,s,a,o,l,f,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=o!==void 0?o:es,this.minFilter=l!==void 0?l:es,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class Jv extends eo{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,a=n/2,o=Math.floor(r),l=Math.floor(i),u=o+1,f=l+1,h=e/o,p=n/l,v=[],P=[],S=[],g=[];for(let m=0;m<f;m++){const x=m*p-a;for(let w=0;w<u;w++){const C=w*h-s;P.push(C,-x,0),S.push(0,0,1),g.push(w/o),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let x=0;x<o;x++){const w=x+u*m,C=x+u*(m+1),A=x+1+u*(m+1),M=x+1+u*m;v.push(w,C,M),v.push(C,A,M)}this.setIndex(v),this.setAttribute("position",new Uo(P,3)),this.setAttribute("normal",new Uo(S,3)),this.setAttribute("uv",new Uo(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jv(e.width,e.height,e.widthSegments,e.heightSegments)}}class cS extends uf{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Cn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Cn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=VA,this.normalScale=new Mn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ts,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class WY extends uf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aY,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class YY extends uf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class tM extends Rr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Cn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const Py=new Un,uS=new Re,fS=new Re;class jY{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Mn(512,512),this.map=null,this.mapPass=null,this.matrix=new Un,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ub,this._frameExtents=new Mn(1,1),this._viewportCount=1,this._viewports=[new nr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;uS.setFromMatrixPosition(e.matrixWorld),n.position.copy(uS),fS.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(fS),n.updateMatrixWorld(),Py.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Py),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Py)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fb extends JA{constructor(e=-1,n=1,r=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,a=r+e,o=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=f*this.view.offsetY,l=o-f*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class ZY extends jY{constructor(){super(new fb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class dS extends tM{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Rr.DEFAULT_UP),this.updateMatrix(),this.target=new Rr,this.shadow=new ZY}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class KY extends tM{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class JY extends Wi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}function hS(t,e,n,r){const i=QY(r);switch(n){case NA:return t*e;case kA:return t*e;case FA:return t*e*2;case UA:return t*e/i.components*i.byteLength;case ab:return t*e/i.components*i.byteLength;case BA:return t*e*2/i.components*i.byteLength;case ob:return t*e*2/i.components*i.byteLength;case DA:return t*e*3/i.components*i.byteLength;case Ki:return t*e*4/i.components*i.byteLength;case lb:return t*e*4/i.components*i.byteLength;case Xd:case Wd:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Yd:case jd:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Ox:case Dx:return Math.max(t,16)*Math.max(e,8)/4;case Lx:case Nx:return Math.max(t,8)*Math.max(e,8)/2;case kx:case Fx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Ux:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Bx:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case $x:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case Vx:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case qx:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case Hx:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case zx:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case Gx:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case Xx:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case Wx:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case Yx:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case jx:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case Zx:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case Kx:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case Jx:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Zd:case Qx:case e2:return Math.ceil(t/4)*Math.ceil(e/4)*16;case $A:case t2:return Math.ceil(t/4)*Math.ceil(e/4)*8;case n2:case r2:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function QY(t){switch(t){case ua:case IA:return{byteLength:1,components:1};case ku:case LA:case of:return{byteLength:2,components:1};case ib:case sb:return{byteLength:2,components:4};case qo:case rb:case ea:return{byteLength:4,components:1};case OA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:nb}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=nb);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function nM(){let t=null,e=!1,n=null,r=null;function i(s,a){n(s,a),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function ej(t){const e=new WeakMap;function n(o,l){const u=o.array,f=o.usage,h=u.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,u,f),o.onUploadCallback();let v;if(u instanceof Float32Array)v=t.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?v=t.HALF_FLOAT:v=t.UNSIGNED_SHORT;else if(u instanceof Int16Array)v=t.SHORT;else if(u instanceof Uint32Array)v=t.UNSIGNED_INT;else if(u instanceof Int32Array)v=t.INT;else if(u instanceof Int8Array)v=t.BYTE;else if(u instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:v,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:h}}function r(o,l,u){const f=l.array,h=l.updateRanges;if(t.bindBuffer(u,o),h.length===0)t.bufferSubData(u,0,f);else{h.sort((v,P)=>v.start-P.start);let p=0;for(let v=1;v<h.length;v++){const P=h[p],S=h[v];S.start<=P.start+P.count+1?P.count=Math.max(P.count,S.start+S.count-P.start):(++p,h[p]=S)}h.length=p+1;for(let v=0,P=h.length;v<P;v++){const S=h[v];t.bufferSubData(u,S.start*f.BYTES_PER_ELEMENT,f,S.start,S.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const f=e.get(o);(!f||f.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,n(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,l),u.version=o.version}}return{get:i,remove:s,update:a}}var tj=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,nj=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,rj=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ij=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sj=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,aj=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,oj=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,lj=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,cj=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,uj=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,fj=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,dj=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hj=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,pj=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,mj=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,vj=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,gj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,yj=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_j=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,xj=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,bj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wj=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Sj=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Pj=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ej=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Cj=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Tj=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Aj=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Mj=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Rj=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ij="gl_FragColor = linearToOutputTexel( gl_FragColor );",Lj=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Oj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Nj=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Dj=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,kj=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Fj=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Uj=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Bj=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,$j=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Vj=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,qj=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Hj=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zj=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Gj=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Xj=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Wj=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Yj=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jj=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Zj=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Kj=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Jj=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Qj=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,eZ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,tZ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,nZ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,rZ=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,iZ=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sZ=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,aZ=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,oZ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,lZ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,cZ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,uZ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,fZ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,dZ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,hZ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,pZ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,mZ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,vZ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,gZ=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,yZ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,_Z=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,xZ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,bZ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wZ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,SZ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,PZ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,EZ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,CZ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,TZ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,AZ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,MZ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,RZ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,IZ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,LZ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,OZ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,NZ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,DZ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,kZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,FZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,UZ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,BZ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$Z=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,VZ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,qZ=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,HZ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,zZ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,GZ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,XZ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,WZ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,YZ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,jZ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,ZZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,KZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JZ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,QZ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const eK=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,tK=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rK=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,sK=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aK=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,oK=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,lK=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,cK=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,uK=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fK=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dK=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hK=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pK=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,mK=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vK=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gK=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yK=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_K=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xK=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,bK=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wK=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SK=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PK=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,EK=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CK=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TK=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AK=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,MK=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,RK=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,IK=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,LK=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OK=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nn={alphahash_fragment:tj,alphahash_pars_fragment:nj,alphamap_fragment:rj,alphamap_pars_fragment:ij,alphatest_fragment:sj,alphatest_pars_fragment:aj,aomap_fragment:oj,aomap_pars_fragment:lj,batching_pars_vertex:cj,batching_vertex:uj,begin_vertex:fj,beginnormal_vertex:dj,bsdfs:hj,iridescence_fragment:pj,bumpmap_pars_fragment:mj,clipping_planes_fragment:vj,clipping_planes_pars_fragment:gj,clipping_planes_pars_vertex:yj,clipping_planes_vertex:_j,color_fragment:xj,color_pars_fragment:bj,color_pars_vertex:wj,color_vertex:Sj,common:Pj,cube_uv_reflection_fragment:Ej,defaultnormal_vertex:Cj,displacementmap_pars_vertex:Tj,displacementmap_vertex:Aj,emissivemap_fragment:Mj,emissivemap_pars_fragment:Rj,colorspace_fragment:Ij,colorspace_pars_fragment:Lj,envmap_fragment:Oj,envmap_common_pars_fragment:Nj,envmap_pars_fragment:Dj,envmap_pars_vertex:kj,envmap_physical_pars_fragment:Wj,envmap_vertex:Fj,fog_vertex:Uj,fog_pars_vertex:Bj,fog_fragment:$j,fog_pars_fragment:Vj,gradientmap_pars_fragment:qj,lightmap_pars_fragment:Hj,lights_lambert_fragment:zj,lights_lambert_pars_fragment:Gj,lights_pars_begin:Xj,lights_toon_fragment:Yj,lights_toon_pars_fragment:jj,lights_phong_fragment:Zj,lights_phong_pars_fragment:Kj,lights_physical_fragment:Jj,lights_physical_pars_fragment:Qj,lights_fragment_begin:eZ,lights_fragment_maps:tZ,lights_fragment_end:nZ,logdepthbuf_fragment:rZ,logdepthbuf_pars_fragment:iZ,logdepthbuf_pars_vertex:sZ,logdepthbuf_vertex:aZ,map_fragment:oZ,map_pars_fragment:lZ,map_particle_fragment:cZ,map_particle_pars_fragment:uZ,metalnessmap_fragment:fZ,metalnessmap_pars_fragment:dZ,morphinstance_vertex:hZ,morphcolor_vertex:pZ,morphnormal_vertex:mZ,morphtarget_pars_vertex:vZ,morphtarget_vertex:gZ,normal_fragment_begin:yZ,normal_fragment_maps:_Z,normal_pars_fragment:xZ,normal_pars_vertex:bZ,normal_vertex:wZ,normalmap_pars_fragment:SZ,clearcoat_normal_fragment_begin:PZ,clearcoat_normal_fragment_maps:EZ,clearcoat_pars_fragment:CZ,iridescence_pars_fragment:TZ,opaque_fragment:AZ,packing:MZ,premultiplied_alpha_fragment:RZ,project_vertex:IZ,dithering_fragment:LZ,dithering_pars_fragment:OZ,roughnessmap_fragment:NZ,roughnessmap_pars_fragment:DZ,shadowmap_pars_fragment:kZ,shadowmap_pars_vertex:FZ,shadowmap_vertex:UZ,shadowmask_pars_fragment:BZ,skinbase_vertex:$Z,skinning_pars_vertex:VZ,skinning_vertex:qZ,skinnormal_vertex:HZ,specularmap_fragment:zZ,specularmap_pars_fragment:GZ,tonemapping_fragment:XZ,tonemapping_pars_fragment:WZ,transmission_fragment:YZ,transmission_pars_fragment:jZ,uv_pars_fragment:ZZ,uv_pars_vertex:KZ,uv_vertex:JZ,worldpos_vertex:QZ,background_vert:eK,background_frag:tK,backgroundCube_vert:nK,backgroundCube_frag:rK,cube_vert:iK,cube_frag:sK,depth_vert:aK,depth_frag:oK,distanceRGBA_vert:lK,distanceRGBA_frag:cK,equirect_vert:uK,equirect_frag:fK,linedashed_vert:dK,linedashed_frag:hK,meshbasic_vert:pK,meshbasic_frag:mK,meshlambert_vert:vK,meshlambert_frag:gK,meshmatcap_vert:yK,meshmatcap_frag:_K,meshnormal_vert:xK,meshnormal_frag:bK,meshphong_vert:wK,meshphong_frag:SK,meshphysical_vert:PK,meshphysical_frag:EK,meshtoon_vert:CK,meshtoon_frag:TK,points_vert:AK,points_frag:MK,shadow_vert:RK,shadow_frag:IK,sprite_vert:LK,sprite_frag:OK},gt={common:{diffuse:{value:new Cn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qt}},envmap:{envMap:{value:null},envMapRotation:{value:new Qt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qt},normalScale:{value:new Mn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Cn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Cn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0},uvTransform:{value:new Qt}},sprite:{diffuse:{value:new Cn(16777215)},opacity:{value:1},center:{value:new Mn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}}},gs={basic:{uniforms:Dr([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:Dr([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new Cn(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:Dr([gt.common,gt.specularmap,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,gt.lights,{emissive:{value:new Cn(0)},specular:{value:new Cn(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:Dr([gt.common,gt.envmap,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.roughnessmap,gt.metalnessmap,gt.fog,gt.lights,{emissive:{value:new Cn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:Dr([gt.common,gt.aomap,gt.lightmap,gt.emissivemap,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.gradientmap,gt.fog,gt.lights,{emissive:{value:new Cn(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:Dr([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,gt.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:Dr([gt.points,gt.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:Dr([gt.common,gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:Dr([gt.common,gt.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:Dr([gt.common,gt.bumpmap,gt.normalmap,gt.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:Dr([gt.sprite,gt.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new Qt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qt}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:Dr([gt.common,gt.displacementmap,{referencePosition:{value:new Re},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:Dr([gt.lights,gt.fog,{color:{value:new Cn(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};gs.physical={uniforms:Dr([gs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qt},clearcoatNormalScale:{value:new Mn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qt},sheen:{value:0},sheenColor:{value:new Cn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qt},transmissionSamplerSize:{value:new Mn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qt},attenuationDistance:{value:0},attenuationColor:{value:new Cn(0)},specularColor:{value:new Cn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qt},anisotropyVector:{value:new Mn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qt}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const ad={r:0,b:0,g:0},co=new ts,NK=new Un;function DK(t,e,n,r,i,s,a){const o=new Cn(0);let l=s===!0?0:1,u,f,h=null,p=0,v=null;function P(w){let C=w.isScene===!0?w.background:null;return C&&C.isTexture&&(C=(w.backgroundBlurriness>0?n:e).get(C)),C}function S(w){let C=!1;const A=P(w);A===null?m(o,l):A&&A.isColor&&(m(A,1),C=!0);const M=t.xr.getEnvironmentBlendMode();M==="additive"?r.buffers.color.setClear(0,0,0,1,a):M==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,a),(t.autoClear||C)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function g(w,C){const A=P(C);A&&(A.isCubeTexture||A.mapping===Kv)?(f===void 0&&(f=new Ji(new ff(1,1,1),new ja({name:"BackgroundCubeMaterial",uniforms:pc(gs.backgroundCube.uniforms),vertexShader:gs.backgroundCube.vertexShader,fragmentShader:gs.backgroundCube.fragmentShader,side:ni,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(M,E,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),co.copy(C.backgroundRotation),co.x*=-1,co.y*=-1,co.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(co.y*=-1,co.z*=-1),f.material.uniforms.envMap.value=A,f.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(NK.makeRotationFromEuler(co)),f.material.toneMapped=wn.getTransfer(A.colorSpace)!==Ln,(h!==A||p!==A.version||v!==t.toneMapping)&&(f.material.needsUpdate=!0,h=A,p=A.version,v=t.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null)):A&&A.isTexture&&(u===void 0&&(u=new Ji(new Jv(2,2),new ja({name:"BackgroundMaterial",uniforms:pc(gs.background.uniforms),vertexShader:gs.background.vertexShader,fragmentShader:gs.background.fragmentShader,side:Ya,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=A,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.toneMapped=wn.getTransfer(A.colorSpace)!==Ln,A.matrixAutoUpdate===!0&&A.updateMatrix(),u.material.uniforms.uvTransform.value.copy(A.matrix),(h!==A||p!==A.version||v!==t.toneMapping)&&(u.material.needsUpdate=!0,h=A,p=A.version,v=t.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null))}function m(w,C){w.getRGB(ad,KA(t)),r.buffers.color.setClear(ad.r,ad.g,ad.b,C,a)}function x(){f!==void 0&&(f.geometry.dispose(),f.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(w,C=1){o.set(w),l=C,m(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,m(o,l)},render:S,addToRenderList:g,dispose:x}}function kK(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,a=!1;function o(L,R,B,V,z){let G=!1;const O=h(V,B,R);s!==O&&(s=O,u(s.object)),G=v(L,V,B,z),G&&P(L,V,B,z),z!==null&&e.update(z,t.ELEMENT_ARRAY_BUFFER),(G||a)&&(a=!1,C(L,R,B,V),z!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(z).buffer))}function l(){return t.createVertexArray()}function u(L){return t.bindVertexArray(L)}function f(L){return t.deleteVertexArray(L)}function h(L,R,B){const V=B.wireframe===!0;let z=r[L.id];z===void 0&&(z={},r[L.id]=z);let G=z[R.id];G===void 0&&(G={},z[R.id]=G);let O=G[V];return O===void 0&&(O=p(l()),G[V]=O),O}function p(L){const R=[],B=[],V=[];for(let z=0;z<n;z++)R[z]=0,B[z]=0,V[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:B,attributeDivisors:V,object:L,attributes:{},index:null}}function v(L,R,B,V){const z=s.attributes,G=R.attributes;let O=0;const y=B.getAttributes();for(const b in y)if(y[b].location>=0){const F=z[b];let H=G[b];if(H===void 0&&(b==="instanceMatrix"&&L.instanceMatrix&&(H=L.instanceMatrix),b==="instanceColor"&&L.instanceColor&&(H=L.instanceColor)),F===void 0||F.attribute!==H||H&&F.data!==H.data)return!0;O++}return s.attributesNum!==O||s.index!==V}function P(L,R,B,V){const z={},G=R.attributes;let O=0;const y=B.getAttributes();for(const b in y)if(y[b].location>=0){let F=G[b];F===void 0&&(b==="instanceMatrix"&&L.instanceMatrix&&(F=L.instanceMatrix),b==="instanceColor"&&L.instanceColor&&(F=L.instanceColor));const H={};H.attribute=F,F&&F.data&&(H.data=F.data),z[b]=H,O++}s.attributes=z,s.attributesNum=O,s.index=V}function S(){const L=s.newAttributes;for(let R=0,B=L.length;R<B;R++)L[R]=0}function g(L){m(L,0)}function m(L,R){const B=s.newAttributes,V=s.enabledAttributes,z=s.attributeDivisors;B[L]=1,V[L]===0&&(t.enableVertexAttribArray(L),V[L]=1),z[L]!==R&&(t.vertexAttribDivisor(L,R),z[L]=R)}function x(){const L=s.newAttributes,R=s.enabledAttributes;for(let B=0,V=R.length;B<V;B++)R[B]!==L[B]&&(t.disableVertexAttribArray(B),R[B]=0)}function w(L,R,B,V,z,G,O){O===!0?t.vertexAttribIPointer(L,R,B,z,G):t.vertexAttribPointer(L,R,B,V,z,G)}function C(L,R,B,V){S();const z=V.attributes,G=B.getAttributes(),O=R.defaultAttributeValues;for(const y in G){const b=G[y];if(b.location>=0){let k=z[y];if(k===void 0&&(y==="instanceMatrix"&&L.instanceMatrix&&(k=L.instanceMatrix),y==="instanceColor"&&L.instanceColor&&(k=L.instanceColor)),k!==void 0){const F=k.normalized,H=k.itemSize,W=e.get(k);if(W===void 0)continue;const ne=W.buffer,Z=W.type,K=W.bytesPerElement,ae=Z===t.INT||Z===t.UNSIGNED_INT||k.gpuType===rb;if(k.isInterleavedBufferAttribute){const se=k.data,ye=se.stride,me=k.offset;if(se.isInstancedInterleavedBuffer){for(let Ae=0;Ae<b.locationSize;Ae++)m(b.location+Ae,se.meshPerAttribute);L.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Ae=0;Ae<b.locationSize;Ae++)g(b.location+Ae);t.bindBuffer(t.ARRAY_BUFFER,ne);for(let Ae=0;Ae<b.locationSize;Ae++)w(b.location+Ae,H/b.locationSize,Z,F,ye*K,(me+H/b.locationSize*Ae)*K,ae)}else{if(k.isInstancedBufferAttribute){for(let se=0;se<b.locationSize;se++)m(b.location+se,k.meshPerAttribute);L.isInstancedMesh!==!0&&V._maxInstanceCount===void 0&&(V._maxInstanceCount=k.meshPerAttribute*k.count)}else for(let se=0;se<b.locationSize;se++)g(b.location+se);t.bindBuffer(t.ARRAY_BUFFER,ne);for(let se=0;se<b.locationSize;se++)w(b.location+se,H/b.locationSize,Z,F,H*K,H/b.locationSize*se*K,ae)}}else if(O!==void 0){const F=O[y];if(F!==void 0)switch(F.length){case 2:t.vertexAttrib2fv(b.location,F);break;case 3:t.vertexAttrib3fv(b.location,F);break;case 4:t.vertexAttrib4fv(b.location,F);break;default:t.vertexAttrib1fv(b.location,F)}}}}x()}function A(){N();for(const L in r){const R=r[L];for(const B in R){const V=R[B];for(const z in V)f(V[z].object),delete V[z];delete R[B]}delete r[L]}}function M(L){if(r[L.id]===void 0)return;const R=r[L.id];for(const B in R){const V=R[B];for(const z in V)f(V[z].object),delete V[z];delete R[B]}delete r[L.id]}function E(L){for(const R in r){const B=r[R];if(B[L.id]===void 0)continue;const V=B[L.id];for(const z in V)f(V[z].object),delete V[z];delete B[L.id]}}function N(){I(),a=!0,s!==i&&(s=i,u(s.object))}function I(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:N,resetDefaultState:I,dispose:A,releaseStatesOfGeometry:M,releaseStatesOfProgram:E,initAttributes:S,enableAttribute:g,disableUnusedAttributes:x}}function FK(t,e,n){let r;function i(u){r=u}function s(u,f){t.drawArrays(r,u,f),n.update(f,r,1)}function a(u,f,h){h!==0&&(t.drawArraysInstanced(r,u,f,h),n.update(f,r,h))}function o(u,f,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,f,0,h);let v=0;for(let P=0;P<h;P++)v+=f[P];n.update(v,r,1)}function l(u,f,h,p){if(h===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let P=0;P<u.length;P++)a(u[P],f[P],p[P]);else{v.multiDrawArraysInstancedWEBGL(r,u,0,f,0,p,0,h);let P=0;for(let S=0;S<h;S++)P+=f[S]*p[S];n.update(P,r,1)}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function UK(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(E){return!(E!==Ki&&r.convert(E)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(E){const N=E===of&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==ua&&r.convert(E)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==ea&&!N)}function l(E){if(E==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=n.precision!==void 0?n.precision:"highp";const f=l(u);f!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",f,"instead."),u=f);const h=n.logarithmicDepthBuffer===!0,p=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),v=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),P=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),S=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),w=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),A=P>0,M=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:h,reverseDepthBuffer:p,maxTextures:v,maxVertexTextures:P,maxTextureSize:S,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:x,maxVaryings:w,maxFragmentUniforms:C,vertexTextures:A,maxSamples:M}}function BK(t){const e=this;let n=null,r=0,i=!1,s=!1;const a=new _o,o=new Qt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const v=h.length!==0||p||r!==0||i;return i=p,r=h.length,v},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){n=f(h,p,0)},this.setState=function(h,p,v){const P=h.clippingPlanes,S=h.clipIntersection,g=h.clipShadows,m=t.get(h);if(!i||P===null||P.length===0||s&&!g)s?f(null):u();else{const x=s?0:r,w=x*4;let C=m.clippingState||null;l.value=C,C=f(P,p,w,v);for(let A=0;A!==w;++A)C[A]=n[A];m.clippingState=C,this.numIntersection=S?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function f(h,p,v,P){const S=h!==null?h.length:0;let g=null;if(S!==0){if(g=l.value,P!==!0||g===null){const m=v+S*4,x=p.matrixWorldInverse;o.getNormalMatrix(x),(g===null||g.length<m)&&(g=new Float32Array(m));for(let w=0,C=v;w!==S;++w,C+=4)a.copy(h[w]).applyMatrix4(x,o),a.normal.toArray(g,C),g[C+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=S,e.numIntersection=0,g}}function $K(t){let e=new WeakMap;function n(a,o){return o===Ax?a.mapping=cc:o===Mx&&(a.mapping=uc),a}function r(a){if(a&&a.isTexture){const o=a.mapping;if(o===Ax||o===Mx)if(e.has(a)){const l=e.get(a).texture;return n(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new HY(l.height);return u.fromEquirectangularTexture(t,a),e.set(a,u),a.addEventListener("dispose",i),n(u.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Hl=4,pS=[.125,.215,.35,.446,.526,.582],Co=20,Ey=new fb,mS=new Cn;let Cy=null,Ty=0,Ay=0,My=!1;const xo=(1+Math.sqrt(5))/2,Pl=1/xo,vS=[new Re(-xo,Pl,0),new Re(xo,Pl,0),new Re(-Pl,0,xo),new Re(Pl,0,xo),new Re(0,xo,-Pl),new Re(0,xo,Pl),new Re(-1,1,-1),new Re(1,1,-1),new Re(-1,1,1),new Re(1,1,1)];class gS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Cy=this._renderer.getRenderTarget(),Ty=this._renderer.getActiveCubeFace(),Ay=this._renderer.getActiveMipmapLevel(),My=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=xS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_S(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Cy,Ty,Ay),this._renderer.xr.enabled=My,e.scissorTest=!1,od(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===cc||e.mapping===uc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Cy=this._renderer.getRenderTarget(),Ty=this._renderer.getActiveCubeFace(),Ay=this._renderer.getActiveMipmapLevel(),My=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:xs,minFilter:xs,generateMipmaps:!1,type:of,format:Ki,colorSpace:hc,depthBuffer:!1},i=yS(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=yS(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=VK(s)),this._blurMaterial=qK(s,e,n)}return i}_compileMaterial(e){const n=new Ji(this._lodPlanes[0],e);this._renderer.compile(n,Ey)}_sceneToCubeUV(e,n,r,i){const o=new Wi(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,p=f.toneMapping;f.getClearColor(mS),f.toneMapping=Ga,f.autoClear=!1;const v=new YA({name:"PMREM.Background",side:ni,depthWrite:!1,depthTest:!1}),P=new Ji(new ff,v);let S=!1;const g=e.background;g?g.isColor&&(v.color.copy(g),e.background=null,S=!0):(v.color.copy(mS),S=!0);for(let m=0;m<6;m++){const x=m%3;x===0?(o.up.set(0,l[m],0),o.lookAt(u[m],0,0)):x===1?(o.up.set(0,0,l[m]),o.lookAt(0,u[m],0)):(o.up.set(0,l[m],0),o.lookAt(0,0,u[m]));const w=this._cubeSize;od(i,x*w,m>2?w:0,w,w),f.setRenderTarget(i),S&&f.render(P,o),f.render(e,o)}P.geometry.dispose(),P.material.dispose(),f.toneMapping=p,f.autoClear=h,e.background=g}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===cc||e.mapping===uc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=xS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_S());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new Ji(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;od(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(a,Ey)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=vS[(i-s-1)%vS.length];this._blur(e,s-1,s,a,o)}n.autoClear=r}_blur(e,n,r,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,n,r,i,"latitudinal",s),this._halfBlur(a,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,h=new Ji(this._lodPlanes[i],u),p=u.uniforms,v=this._sizeLods[r]-1,P=isFinite(s)?Math.PI/(2*v):2*Math.PI/(2*Co-1),S=s/P,g=isFinite(s)?1+Math.floor(f*S):Co;g>Co&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Co}`);const m=[];let x=0;for(let E=0;E<Co;++E){const N=E/S,I=Math.exp(-N*N/2);m.push(I),E===0?x+=I:E<g&&(x+=2*I)}for(let E=0;E<m.length;E++)m[E]=m[E]/x;p.envMap.value=e.texture,p.samples.value=g,p.weights.value=m,p.latitudinal.value=a==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:w}=this;p.dTheta.value=P,p.mipInt.value=w-r;const C=this._sizeLods[i],A=3*C*(i>w-Hl?i-w+Hl:0),M=4*(this._cubeSize-C);od(n,A,M,3*C,2*C),l.setRenderTarget(n),l.render(h,Ey)}}function VK(t){const e=[],n=[],r=[];let i=t;const s=t-Hl+1+pS.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);n.push(o);let l=1/o;a>t-Hl?l=pS[a-t+Hl-1]:a===0&&(l=0),r.push(l);const u=1/(o-2),f=-u,h=1+u,p=[f,f,h,f,h,h,f,f,h,h,f,h],v=6,P=6,S=3,g=2,m=1,x=new Float32Array(S*P*v),w=new Float32Array(g*P*v),C=new Float32Array(m*P*v);for(let M=0;M<v;M++){const E=M%3*2/3-1,N=M>2?0:-1,I=[E,N,0,E+2/3,N,0,E+2/3,N+1,0,E,N,0,E+2/3,N+1,0,E,N+1,0];x.set(I,S*P*M),w.set(p,g*P*M);const L=[M,M,M,M,M,M];C.set(L,m*P*M)}const A=new eo;A.setAttribute("position",new Ri(x,S)),A.setAttribute("uv",new Ri(w,g)),A.setAttribute("faceIndex",new Ri(C,m)),e.push(A),i>Hl&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function yS(t,e,n){const r=new Ho(t,e,n);return r.texture.mapping=Kv,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function od(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function qK(t,e,n){const r=new Float32Array(Co),i=new Re(0,1,0);return new ja({name:"SphericalGaussianBlur",defines:{n:Co,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:db(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:za,depthTest:!1,depthWrite:!1})}function _S(){return new ja({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:db(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:za,depthTest:!1,depthWrite:!1})}function xS(){return new ja({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:db(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:za,depthTest:!1,depthWrite:!1})}function db(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function HK(t){let e=new WeakMap,n=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===Ax||l===Mx,f=l===cc||l===uc;if(u||f){let h=e.get(o);const p=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==p)return n===null&&(n=new gS(t)),h=u?n.fromEquirectangular(o,h):n.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const v=o.image;return u&&v&&v.height>0||f&&v&&i(v)?(n===null&&(n=new gS(t)),h=u?n.fromEquirectangular(o):n.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",s),h.texture):null}}}return o}function i(o){let l=0;const u=6;for(let f=0;f<u;f++)o[f]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:a}}function zK(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&Fl("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function GK(t,e,n,r){const i={},s=new WeakMap;function a(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const P in p.attributes)e.remove(p.attributes[P]);p.removeEventListener("dispose",a),delete i[p.id];const v=s.get(p);v&&(e.remove(v),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function o(h,p){return i[p.id]===!0||(p.addEventListener("dispose",a),i[p.id]=!0,n.memory.geometries++),p}function l(h){const p=h.attributes;for(const v in p)e.update(p[v],t.ARRAY_BUFFER)}function u(h){const p=[],v=h.index,P=h.attributes.position;let S=0;if(v!==null){const x=v.array;S=v.version;for(let w=0,C=x.length;w<C;w+=3){const A=x[w+0],M=x[w+1],E=x[w+2];p.push(A,M,M,E,E,A)}}else if(P!==void 0){const x=P.array;S=P.version;for(let w=0,C=x.length/3-1;w<C;w+=3){const A=w+0,M=w+1,E=w+2;p.push(A,M,M,E,E,A)}}else return;const g=new(HA(p)?ZA:jA)(p,1);g.version=S;const m=s.get(h);m&&e.remove(m),s.set(h,g)}function f(h){const p=s.get(h);if(p){const v=h.index;v!==null&&p.version<v.version&&u(h)}else u(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:f}}function XK(t,e,n){let r;function i(p){r=p}let s,a;function o(p){s=p.type,a=p.bytesPerElement}function l(p,v){t.drawElements(r,v,s,p*a),n.update(v,r,1)}function u(p,v,P){P!==0&&(t.drawElementsInstanced(r,v,s,p*a,P),n.update(v,r,P))}function f(p,v,P){if(P===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,v,0,s,p,0,P);let g=0;for(let m=0;m<P;m++)g+=v[m];n.update(g,r,1)}function h(p,v,P,S){if(P===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<p.length;m++)u(p[m]/a,v[m],S[m]);else{g.multiDrawElementsInstancedWEBGL(r,v,0,s,p,0,S,0,P);let m=0;for(let x=0;x<P;x++)m+=v[x]*S[x];n.update(m,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=h}function WK(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,a,o){switch(n.calls++,a){case t.TRIANGLES:n.triangles+=o*(s/3);break;case t.LINES:n.lines+=o*(s/2);break;case t.LINE_STRIP:n.lines+=o*(s-1);break;case t.LINE_LOOP:n.lines+=o*s;break;case t.POINTS:n.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function YK(t,e,n){const r=new WeakMap,i=new nr;function s(a,o,l){const u=a.morphTargetInfluences,f=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=f!==void 0?f.length:0;let p=r.get(o);if(p===void 0||p.count!==h){let I=function(){E.dispose(),r.delete(o),o.removeEventListener("dispose",I)};p!==void 0&&p.texture.dispose();const v=o.morphAttributes.position!==void 0,P=o.morphAttributes.normal!==void 0,S=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],m=o.morphAttributes.normal||[],x=o.morphAttributes.color||[];let w=0;v===!0&&(w=1),P===!0&&(w=2),S===!0&&(w=3);let C=o.attributes.position.count*w,A=1;C>e.maxTextureSize&&(A=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const M=new Float32Array(C*A*4*h),E=new GA(M,C,A,h);E.type=ea,E.needsUpdate=!0;const N=w*4;for(let L=0;L<h;L++){const R=g[L],B=m[L],V=x[L],z=C*A*4*L;for(let G=0;G<R.count;G++){const O=G*N;v===!0&&(i.fromBufferAttribute(R,G),M[z+O+0]=i.x,M[z+O+1]=i.y,M[z+O+2]=i.z,M[z+O+3]=0),P===!0&&(i.fromBufferAttribute(B,G),M[z+O+4]=i.x,M[z+O+5]=i.y,M[z+O+6]=i.z,M[z+O+7]=0),S===!0&&(i.fromBufferAttribute(V,G),M[z+O+8]=i.x,M[z+O+9]=i.y,M[z+O+10]=i.z,M[z+O+11]=V.itemSize===4?i.w:1)}}p={count:h,texture:E,size:new Mn(C,A)},r.set(o,p),o.addEventListener("dispose",I)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",a.morphTexture,n);else{let v=0;for(let S=0;S<u.length;S++)v+=u[S];const P=o.morphTargetsRelative?1:1-v;l.getUniforms().setValue(t,"morphTargetBaseInfluence",P),l.getUniforms().setValue(t,"morphTargetInfluences",u)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:s}}function jK(t,e,n,r){let i=new WeakMap;function s(l){const u=r.render.frame,f=l.geometry,h=e.get(l,f);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==u&&(p.update(),i.set(p,u))}return h}function a(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:a}}const rM=new ri,bS=new eM(1,1),iM=new GA,sM=new CY,aM=new QA,wS=[],SS=[],PS=new Float32Array(16),ES=new Float32Array(9),CS=new Float32Array(4);function Mc(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=wS[i];if(s===void 0&&(s=new Float32Array(i),wS[i]=s),e!==0){r.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=n,t[a].toArray(s,o)}return s}function hr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function pr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Qv(t,e){let n=SS[e];n===void 0&&(n=new Int32Array(e),SS[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function ZK(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function KK(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(hr(n,e))return;t.uniform2fv(this.addr,e),pr(n,e)}}function JK(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(hr(n,e))return;t.uniform3fv(this.addr,e),pr(n,e)}}function QK(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(hr(n,e))return;t.uniform4fv(this.addr,e),pr(n,e)}}function eJ(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(hr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),pr(n,e)}else{if(hr(n,r))return;CS.set(r),t.uniformMatrix2fv(this.addr,!1,CS),pr(n,r)}}function tJ(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(hr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),pr(n,e)}else{if(hr(n,r))return;ES.set(r),t.uniformMatrix3fv(this.addr,!1,ES),pr(n,r)}}function nJ(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(hr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),pr(n,e)}else{if(hr(n,r))return;PS.set(r),t.uniformMatrix4fv(this.addr,!1,PS),pr(n,r)}}function rJ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function iJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(hr(n,e))return;t.uniform2iv(this.addr,e),pr(n,e)}}function sJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(hr(n,e))return;t.uniform3iv(this.addr,e),pr(n,e)}}function aJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(hr(n,e))return;t.uniform4iv(this.addr,e),pr(n,e)}}function oJ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function lJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(hr(n,e))return;t.uniform2uiv(this.addr,e),pr(n,e)}}function cJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(hr(n,e))return;t.uniform3uiv(this.addr,e),pr(n,e)}}function uJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(hr(n,e))return;t.uniform4uiv(this.addr,e),pr(n,e)}}function fJ(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(bS.compareFunction=qA,s=bS):s=rM,n.setTexture2D(e||s,i)}function dJ(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||sM,i)}function hJ(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||aM,i)}function pJ(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||iM,i)}function mJ(t){switch(t){case 5126:return ZK;case 35664:return KK;case 35665:return JK;case 35666:return QK;case 35674:return eJ;case 35675:return tJ;case 35676:return nJ;case 5124:case 35670:return rJ;case 35667:case 35671:return iJ;case 35668:case 35672:return sJ;case 35669:case 35673:return aJ;case 5125:return oJ;case 36294:return lJ;case 36295:return cJ;case 36296:return uJ;case 35678:case 36198:case 36298:case 36306:case 35682:return fJ;case 35679:case 36299:case 36307:return dJ;case 35680:case 36300:case 36308:case 36293:return hJ;case 36289:case 36303:case 36311:case 36292:return pJ}}function vJ(t,e){t.uniform1fv(this.addr,e)}function gJ(t,e){const n=Mc(e,this.size,2);t.uniform2fv(this.addr,n)}function yJ(t,e){const n=Mc(e,this.size,3);t.uniform3fv(this.addr,n)}function _J(t,e){const n=Mc(e,this.size,4);t.uniform4fv(this.addr,n)}function xJ(t,e){const n=Mc(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function bJ(t,e){const n=Mc(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function wJ(t,e){const n=Mc(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function SJ(t,e){t.uniform1iv(this.addr,e)}function PJ(t,e){t.uniform2iv(this.addr,e)}function EJ(t,e){t.uniform3iv(this.addr,e)}function CJ(t,e){t.uniform4iv(this.addr,e)}function TJ(t,e){t.uniform1uiv(this.addr,e)}function AJ(t,e){t.uniform2uiv(this.addr,e)}function MJ(t,e){t.uniform3uiv(this.addr,e)}function RJ(t,e){t.uniform4uiv(this.addr,e)}function IJ(t,e,n){const r=this.cache,i=e.length,s=Qv(n,i);hr(r,s)||(t.uniform1iv(this.addr,s),pr(r,s));for(let a=0;a!==i;++a)n.setTexture2D(e[a]||rM,s[a])}function LJ(t,e,n){const r=this.cache,i=e.length,s=Qv(n,i);hr(r,s)||(t.uniform1iv(this.addr,s),pr(r,s));for(let a=0;a!==i;++a)n.setTexture3D(e[a]||sM,s[a])}function OJ(t,e,n){const r=this.cache,i=e.length,s=Qv(n,i);hr(r,s)||(t.uniform1iv(this.addr,s),pr(r,s));for(let a=0;a!==i;++a)n.setTextureCube(e[a]||aM,s[a])}function NJ(t,e,n){const r=this.cache,i=e.length,s=Qv(n,i);hr(r,s)||(t.uniform1iv(this.addr,s),pr(r,s));for(let a=0;a!==i;++a)n.setTexture2DArray(e[a]||iM,s[a])}function DJ(t){switch(t){case 5126:return vJ;case 35664:return gJ;case 35665:return yJ;case 35666:return _J;case 35674:return xJ;case 35675:return bJ;case 35676:return wJ;case 5124:case 35670:return SJ;case 35667:case 35671:return PJ;case 35668:case 35672:return EJ;case 35669:case 35673:return CJ;case 5125:return TJ;case 36294:return AJ;case 36295:return MJ;case 36296:return RJ;case 35678:case 36198:case 36298:case 36306:case 35682:return IJ;case 35679:case 36299:case 36307:return LJ;case 35680:case 36300:case 36308:case 36293:return OJ;case 36289:case 36303:case 36311:case 36292:return NJ}}class kJ{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=mJ(n.type)}}class FJ{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=DJ(n.type)}}class UJ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,n[o.id],r)}}}const Ry=/(\w+)(\])?(\[|\.)?/g;function TS(t,e){t.seq.push(e),t.map[e.id]=e}function BJ(t,e,n){const r=t.name,i=r.length;for(Ry.lastIndex=0;;){const s=Ry.exec(r),a=Ry.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===i){TS(n,u===void 0?new kJ(o,t,e):new FJ(o,t,e));break}else{let h=n.map[o];h===void 0&&(h=new UJ(o),TS(n,h)),n=h}}}class Kd{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),a=e.getUniformLocation(n,s.name);BJ(s,a,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,a=n.length;s!==a;++s){const o=n[s],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in n&&r.push(a)}return r}}function AS(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const $J=37297;let VJ=0;function qJ(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let a=i;a<s;a++){const o=a+1;r.push(`${o===e?">":" "} ${o}: ${n[a]}`)}return r.join(`
`)}const MS=new Qt;function HJ(t){wn._getMatrix(MS,wn.workingColorSpace,t);const e=`mat3( ${MS.elements.map(n=>n.toFixed(4))} )`;switch(wn.getTransfer(t)){case _h:return[e,"LinearTransferOETF"];case Ln:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function RS(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+qJ(t.getShaderSource(e),a)}else return i}function zJ(t,e){const n=HJ(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function GJ(t,e){let n;switch(e){case JW:n="Linear";break;case QW:n="Reinhard";break;case eY:n="Cineon";break;case tY:n="ACESFilmic";break;case rY:n="AgX";break;case iY:n="Neutral";break;case nY:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const ld=new Re;function XJ(){wn.getLuminanceCoefficients(ld);const t=ld.x.toFixed(4),e=ld.y.toFixed(4),n=ld.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function WJ(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(pu).join(`
`)}function YJ(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function jJ(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),a=s.name;let o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),n[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return n}function pu(t){return t!==""}function IS(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function LS(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ZJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function s2(t){return t.replace(ZJ,JJ)}const KJ=new Map;function JJ(t,e){let n=nn[e];if(n===void 0){const r=KJ.get(e);if(r!==void 0)n=nn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return s2(n)}const QJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function OS(t){return t.replace(QJ,eQ)}function eQ(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function NS(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function tQ(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===AA?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===IW?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ys&&(e="SHADOWMAP_TYPE_VSM"),e}function nQ(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case cc:case uc:e="ENVMAP_TYPE_CUBE";break;case Kv:e="ENVMAP_TYPE_CUBE_UV";break}return e}function rQ(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case uc:e="ENVMAP_MODE_REFRACTION";break}return e}function iQ(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case MA:e="ENVMAP_BLENDING_MULTIPLY";break;case ZW:e="ENVMAP_BLENDING_MIX";break;case KW:e="ENVMAP_BLENDING_ADD";break}return e}function sQ(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function aQ(t,e,n,r){const i=t.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=tQ(n),u=nQ(n),f=rQ(n),h=iQ(n),p=sQ(n),v=WJ(n),P=YJ(s),S=i.createProgram();let g,m,x=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,P].filter(pu).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,P].filter(pu).join(`
`),m.length>0&&(m+=`
`)):(g=[NS(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,P,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(pu).join(`
`),m=[NS(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,P,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ga?"#define TONE_MAPPING":"",n.toneMapping!==Ga?nn.tonemapping_pars_fragment:"",n.toneMapping!==Ga?GJ("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",nn.colorspace_pars_fragment,zJ("linearToOutputTexel",n.outputColorSpace),XJ(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(pu).join(`
`)),a=s2(a),a=IS(a,n),a=LS(a,n),o=s2(o),o=IS(o,n),o=LS(o,n),a=OS(a),o=OS(o),n.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=[v,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",n.glslVersion===Gw?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Gw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const w=x+g+a,C=x+m+o,A=AS(i,i.VERTEX_SHADER,w),M=AS(i,i.FRAGMENT_SHADER,C);i.attachShader(S,A),i.attachShader(S,M),n.index0AttributeName!==void 0?i.bindAttribLocation(S,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(S,0,"position"),i.linkProgram(S);function E(R){if(t.debug.checkShaderErrors){const B=i.getProgramInfoLog(S).trim(),V=i.getShaderInfoLog(A).trim(),z=i.getShaderInfoLog(M).trim();let G=!0,O=!0;if(i.getProgramParameter(S,i.LINK_STATUS)===!1)if(G=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,S,A,M);else{const y=RS(i,A,"vertex"),b=RS(i,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(S,i.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+B+`
`+y+`
`+b)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(V===""||z==="")&&(O=!1);O&&(R.diagnostics={runnable:G,programLog:B,vertexShader:{log:V,prefix:g},fragmentShader:{log:z,prefix:m}})}i.deleteShader(A),i.deleteShader(M),N=new Kd(i,S),I=jJ(i,S)}let N;this.getUniforms=function(){return N===void 0&&E(this),N};let I;this.getAttributes=function(){return I===void 0&&E(this),I};let L=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=i.getProgramParameter(S,$J)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(S),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=VJ++,this.cacheKey=e,this.usedTimes=1,this.program=S,this.vertexShader=A,this.fragmentShader=M,this}let oQ=0;class lQ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new cQ(e),n.set(e,r)),r}}class cQ{constructor(e){this.id=oQ++,this.code=e,this.usedTimes=0}}function uQ(t,e,n,r,i,s,a){const o=new XA,l=new lQ,u=new Set,f=[],h=i.logarithmicDepthBuffer,p=i.vertexTextures;let v=i.precision;const P={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function S(I){return u.add(I),I===0?"uv":`uv${I}`}function g(I,L,R,B,V){const z=B.fog,G=V.geometry,O=I.isMeshStandardMaterial?B.environment:null,y=(I.isMeshStandardMaterial?n:e).get(I.envMap||O),b=y&&y.mapping===Kv?y.image.height:null,k=P[I.type];I.precision!==null&&(v=i.getMaxPrecision(I.precision),v!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",v,"instead."));const F=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,H=F!==void 0?F.length:0;let W=0;G.morphAttributes.position!==void 0&&(W=1),G.morphAttributes.normal!==void 0&&(W=2),G.morphAttributes.color!==void 0&&(W=3);let ne,Z,K,ae;if(k){const Jt=gs[k];ne=Jt.vertexShader,Z=Jt.fragmentShader}else ne=I.vertexShader,Z=I.fragmentShader,l.update(I),K=l.getVertexShaderID(I),ae=l.getFragmentShaderID(I);const se=t.getRenderTarget(),ye=t.state.buffers.depth.getReversed(),me=V.isInstancedMesh===!0,Ae=V.isBatchedMesh===!0,Ue=!!I.map,He=!!I.matcap,Qe=!!y,ie=!!I.aoMap,dt=!!I.lightMap,ke=!!I.bumpMap,ut=!!I.normalMap,tt=!!I.displacementMap,Pt=!!I.emissiveMap,lt=!!I.metalnessMap,re=!!I.roughnessMap,X=I.anisotropy>0,te=I.clearcoat>0,fe=I.dispersion>0,de=I.iridescence>0,he=I.sheen>0,Be=I.transmission>0,Ie=X&&!!I.anisotropyMap,Ge=te&&!!I.clearcoatMap,xt=te&&!!I.clearcoatNormalMap,Oe=te&&!!I.clearcoatRoughnessMap,Ke=de&&!!I.iridescenceMap,_t=de&&!!I.iridescenceThicknessMap,ve=he&&!!I.sheenColorMap,ge=he&&!!I.sheenRoughnessMap,we=!!I.specularMap,Me=!!I.specularColorMap,Ze=!!I.specularIntensityMap,le=Be&&!!I.transmissionMap,$e=Be&&!!I.thicknessMap,be=!!I.gradientMap,Le=!!I.alphaMap,ze=I.alphaTest>0,ft=!!I.alphaHash,Rt=!!I.extensions;let on=Ga;I.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(on=t.toneMapping);const Wn={shaderID:k,shaderType:I.type,shaderName:I.name,vertexShader:ne,fragmentShader:Z,defines:I.defines,customVertexShaderID:K,customFragmentShaderID:ae,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:v,batching:Ae,batchingColor:Ae&&V._colorsTexture!==null,instancing:me,instancingColor:me&&V.instanceColor!==null,instancingMorph:me&&V.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:se===null?t.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:hc,alphaToCoverage:!!I.alphaToCoverage,map:Ue,matcap:He,envMap:Qe,envMapMode:Qe&&y.mapping,envMapCubeUVHeight:b,aoMap:ie,lightMap:dt,bumpMap:ke,normalMap:ut,displacementMap:p&&tt,emissiveMap:Pt,normalMapObjectSpace:ut&&I.normalMapType===lY,normalMapTangentSpace:ut&&I.normalMapType===VA,metalnessMap:lt,roughnessMap:re,anisotropy:X,anisotropyMap:Ie,clearcoat:te,clearcoatMap:Ge,clearcoatNormalMap:xt,clearcoatRoughnessMap:Oe,dispersion:fe,iridescence:de,iridescenceMap:Ke,iridescenceThicknessMap:_t,sheen:he,sheenColorMap:ve,sheenRoughnessMap:ge,specularMap:we,specularColorMap:Me,specularIntensityMap:Ze,transmission:Be,transmissionMap:le,thicknessMap:$e,gradientMap:be,opaque:I.transparent===!1&&I.blending===Ql&&I.alphaToCoverage===!1,alphaMap:Le,alphaTest:ze,alphaHash:ft,combine:I.combine,mapUv:Ue&&S(I.map.channel),aoMapUv:ie&&S(I.aoMap.channel),lightMapUv:dt&&S(I.lightMap.channel),bumpMapUv:ke&&S(I.bumpMap.channel),normalMapUv:ut&&S(I.normalMap.channel),displacementMapUv:tt&&S(I.displacementMap.channel),emissiveMapUv:Pt&&S(I.emissiveMap.channel),metalnessMapUv:lt&&S(I.metalnessMap.channel),roughnessMapUv:re&&S(I.roughnessMap.channel),anisotropyMapUv:Ie&&S(I.anisotropyMap.channel),clearcoatMapUv:Ge&&S(I.clearcoatMap.channel),clearcoatNormalMapUv:xt&&S(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&S(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Ke&&S(I.iridescenceMap.channel),iridescenceThicknessMapUv:_t&&S(I.iridescenceThicknessMap.channel),sheenColorMapUv:ve&&S(I.sheenColorMap.channel),sheenRoughnessMapUv:ge&&S(I.sheenRoughnessMap.channel),specularMapUv:we&&S(I.specularMap.channel),specularColorMapUv:Me&&S(I.specularColorMap.channel),specularIntensityMapUv:Ze&&S(I.specularIntensityMap.channel),transmissionMapUv:le&&S(I.transmissionMap.channel),thicknessMapUv:$e&&S(I.thicknessMap.channel),alphaMapUv:Le&&S(I.alphaMap.channel),vertexTangents:!!G.attributes.tangent&&(ut||X),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,pointsUvs:V.isPoints===!0&&!!G.attributes.uv&&(Ue||Le),fog:!!z,useFog:I.fog===!0,fogExp2:!!z&&z.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:ye,skinning:V.isSkinnedMesh===!0,morphTargets:G.morphAttributes.position!==void 0,morphNormals:G.morphAttributes.normal!==void 0,morphColors:G.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:W,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:t.shadowMap.enabled&&R.length>0,shadowMapType:t.shadowMap.type,toneMapping:on,decodeVideoTexture:Ue&&I.map.isVideoTexture===!0&&wn.getTransfer(I.map.colorSpace)===Ln,decodeVideoTextureEmissive:Pt&&I.emissiveMap.isVideoTexture===!0&&wn.getTransfer(I.emissiveMap.colorSpace)===Ln,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Zs,flipSided:I.side===ni,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Rt&&I.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Rt&&I.extensions.multiDraw===!0||Ae)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Wn.vertexUv1s=u.has(1),Wn.vertexUv2s=u.has(2),Wn.vertexUv3s=u.has(3),u.clear(),Wn}function m(I){const L=[];if(I.shaderID?L.push(I.shaderID):(L.push(I.customVertexShaderID),L.push(I.customFragmentShaderID)),I.defines!==void 0)for(const R in I.defines)L.push(R),L.push(I.defines[R]);return I.isRawShaderMaterial===!1&&(x(L,I),w(L,I),L.push(t.outputColorSpace)),L.push(I.customProgramCacheKey),L.join()}function x(I,L){I.push(L.precision),I.push(L.outputColorSpace),I.push(L.envMapMode),I.push(L.envMapCubeUVHeight),I.push(L.mapUv),I.push(L.alphaMapUv),I.push(L.lightMapUv),I.push(L.aoMapUv),I.push(L.bumpMapUv),I.push(L.normalMapUv),I.push(L.displacementMapUv),I.push(L.emissiveMapUv),I.push(L.metalnessMapUv),I.push(L.roughnessMapUv),I.push(L.anisotropyMapUv),I.push(L.clearcoatMapUv),I.push(L.clearcoatNormalMapUv),I.push(L.clearcoatRoughnessMapUv),I.push(L.iridescenceMapUv),I.push(L.iridescenceThicknessMapUv),I.push(L.sheenColorMapUv),I.push(L.sheenRoughnessMapUv),I.push(L.specularMapUv),I.push(L.specularColorMapUv),I.push(L.specularIntensityMapUv),I.push(L.transmissionMapUv),I.push(L.thicknessMapUv),I.push(L.combine),I.push(L.fogExp2),I.push(L.sizeAttenuation),I.push(L.morphTargetsCount),I.push(L.morphAttributeCount),I.push(L.numDirLights),I.push(L.numPointLights),I.push(L.numSpotLights),I.push(L.numSpotLightMaps),I.push(L.numHemiLights),I.push(L.numRectAreaLights),I.push(L.numDirLightShadows),I.push(L.numPointLightShadows),I.push(L.numSpotLightShadows),I.push(L.numSpotLightShadowsWithMaps),I.push(L.numLightProbes),I.push(L.shadowMapType),I.push(L.toneMapping),I.push(L.numClippingPlanes),I.push(L.numClipIntersection),I.push(L.depthPacking)}function w(I,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),I.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reverseDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.decodeVideoTextureEmissive&&o.enable(20),L.alphaToCoverage&&o.enable(21),I.push(o.mask)}function C(I){const L=P[I.type];let R;if(L){const B=gs[L];R=BY.clone(B.uniforms)}else R=I.uniforms;return R}function A(I,L){let R;for(let B=0,V=f.length;B<V;B++){const z=f[B];if(z.cacheKey===L){R=z,++R.usedTimes;break}}return R===void 0&&(R=new aQ(t,L,I,s),f.push(R)),R}function M(I){if(--I.usedTimes===0){const L=f.indexOf(I);f[L]=f[f.length-1],f.pop(),I.destroy()}}function E(I){l.remove(I)}function N(){l.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:C,acquireProgram:A,releaseProgram:M,releaseShaderCache:E,programs:f,dispose:N}}function fQ(){let t=new WeakMap;function e(a){return t.has(a)}function n(a){let o=t.get(a);return o===void 0&&(o={},t.set(a,o)),o}function r(a){t.delete(a)}function i(a,o,l){t.get(a)[o]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function dQ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function DS(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function kS(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function a(h,p,v,P,S,g){let m=t[e];return m===void 0?(m={id:h.id,object:h,geometry:p,material:v,groupOrder:P,renderOrder:h.renderOrder,z:S,group:g},t[e]=m):(m.id=h.id,m.object=h,m.geometry=p,m.material=v,m.groupOrder=P,m.renderOrder=h.renderOrder,m.z=S,m.group=g),e++,m}function o(h,p,v,P,S,g){const m=a(h,p,v,P,S,g);v.transmission>0?r.push(m):v.transparent===!0?i.push(m):n.push(m)}function l(h,p,v,P,S,g){const m=a(h,p,v,P,S,g);v.transmission>0?r.unshift(m):v.transparent===!0?i.unshift(m):n.unshift(m)}function u(h,p){n.length>1&&n.sort(h||dQ),r.length>1&&r.sort(p||DS),i.length>1&&i.sort(p||DS)}function f(){for(let h=e,p=t.length;h<p;h++){const v=t[h];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:o,unshift:l,finish:f,sort:u}}function hQ(){let t=new WeakMap;function e(r,i){const s=t.get(r);let a;return s===void 0?(a=new kS,t.set(r,[a])):i>=s.length?(a=new kS,s.push(a)):a=s[i],a}function n(){t=new WeakMap}return{get:e,dispose:n}}function pQ(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Re,color:new Cn};break;case"SpotLight":n={position:new Re,direction:new Re,color:new Cn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Re,color:new Cn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Re,skyColor:new Cn,groundColor:new Cn};break;case"RectAreaLight":n={color:new Cn,position:new Re,halfWidth:new Re,halfHeight:new Re};break}return t[e.id]=n,n}}}function mQ(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mn};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mn};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let vQ=0;function gQ(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function yQ(t){const e=new pQ,n=mQ(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new Re);const i=new Re,s=new Un,a=new Un;function o(u){let f=0,h=0,p=0;for(let I=0;I<9;I++)r.probe[I].set(0,0,0);let v=0,P=0,S=0,g=0,m=0,x=0,w=0,C=0,A=0,M=0,E=0;u.sort(gQ);for(let I=0,L=u.length;I<L;I++){const R=u[I],B=R.color,V=R.intensity,z=R.distance,G=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)f+=B.r*V,h+=B.g*V,p+=B.b*V;else if(R.isLightProbe){for(let O=0;O<9;O++)r.probe[O].addScaledVector(R.sh.coefficients[O],V);E++}else if(R.isDirectionalLight){const O=e.get(R);if(O.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const y=R.shadow,b=n.get(R);b.shadowIntensity=y.intensity,b.shadowBias=y.bias,b.shadowNormalBias=y.normalBias,b.shadowRadius=y.radius,b.shadowMapSize=y.mapSize,r.directionalShadow[v]=b,r.directionalShadowMap[v]=G,r.directionalShadowMatrix[v]=R.shadow.matrix,x++}r.directional[v]=O,v++}else if(R.isSpotLight){const O=e.get(R);O.position.setFromMatrixPosition(R.matrixWorld),O.color.copy(B).multiplyScalar(V),O.distance=z,O.coneCos=Math.cos(R.angle),O.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),O.decay=R.decay,r.spot[S]=O;const y=R.shadow;if(R.map&&(r.spotLightMap[A]=R.map,A++,y.updateMatrices(R),R.castShadow&&M++),r.spotLightMatrix[S]=y.matrix,R.castShadow){const b=n.get(R);b.shadowIntensity=y.intensity,b.shadowBias=y.bias,b.shadowNormalBias=y.normalBias,b.shadowRadius=y.radius,b.shadowMapSize=y.mapSize,r.spotShadow[S]=b,r.spotShadowMap[S]=G,C++}S++}else if(R.isRectAreaLight){const O=e.get(R);O.color.copy(B).multiplyScalar(V),O.halfWidth.set(R.width*.5,0,0),O.halfHeight.set(0,R.height*.5,0),r.rectArea[g]=O,g++}else if(R.isPointLight){const O=e.get(R);if(O.color.copy(R.color).multiplyScalar(R.intensity),O.distance=R.distance,O.decay=R.decay,R.castShadow){const y=R.shadow,b=n.get(R);b.shadowIntensity=y.intensity,b.shadowBias=y.bias,b.shadowNormalBias=y.normalBias,b.shadowRadius=y.radius,b.shadowMapSize=y.mapSize,b.shadowCameraNear=y.camera.near,b.shadowCameraFar=y.camera.far,r.pointShadow[P]=b,r.pointShadowMap[P]=G,r.pointShadowMatrix[P]=R.shadow.matrix,w++}r.point[P]=O,P++}else if(R.isHemisphereLight){const O=e.get(R);O.skyColor.copy(R.color).multiplyScalar(V),O.groundColor.copy(R.groundColor).multiplyScalar(V),r.hemi[m]=O,m++}}g>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=gt.LTC_FLOAT_1,r.rectAreaLTC2=gt.LTC_FLOAT_2):(r.rectAreaLTC1=gt.LTC_HALF_1,r.rectAreaLTC2=gt.LTC_HALF_2)),r.ambient[0]=f,r.ambient[1]=h,r.ambient[2]=p;const N=r.hash;(N.directionalLength!==v||N.pointLength!==P||N.spotLength!==S||N.rectAreaLength!==g||N.hemiLength!==m||N.numDirectionalShadows!==x||N.numPointShadows!==w||N.numSpotShadows!==C||N.numSpotMaps!==A||N.numLightProbes!==E)&&(r.directional.length=v,r.spot.length=S,r.rectArea.length=g,r.point.length=P,r.hemi.length=m,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=w,r.spotLightMatrix.length=C+A-M,r.spotLightMap.length=A,r.numSpotLightShadowsWithMaps=M,r.numLightProbes=E,N.directionalLength=v,N.pointLength=P,N.spotLength=S,N.rectAreaLength=g,N.hemiLength=m,N.numDirectionalShadows=x,N.numPointShadows=w,N.numSpotShadows=C,N.numSpotMaps=A,N.numLightProbes=E,r.version=vQ++)}function l(u,f){let h=0,p=0,v=0,P=0,S=0;const g=f.matrixWorldInverse;for(let m=0,x=u.length;m<x;m++){const w=u[m];if(w.isDirectionalLight){const C=r.directional[h];C.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(g),h++}else if(w.isSpotLight){const C=r.spot[v];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(w.matrixWorld),i.setFromMatrixPosition(w.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(g),v++}else if(w.isRectAreaLight){const C=r.rectArea[P];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),a.identity(),s.copy(w.matrixWorld),s.premultiply(g),a.extractRotation(s),C.halfWidth.set(w.width*.5,0,0),C.halfHeight.set(0,w.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),P++}else if(w.isPointLight){const C=r.point[p];C.position.setFromMatrixPosition(w.matrixWorld),C.position.applyMatrix4(g),p++}else if(w.isHemisphereLight){const C=r.hemi[S];C.direction.setFromMatrixPosition(w.matrixWorld),C.direction.transformDirection(g),S++}}}return{setup:o,setupView:l,state:r}}function FS(t){const e=new yQ(t),n=[],r=[];function i(f){u.camera=f,n.length=0,r.length=0}function s(f){n.push(f)}function a(f){r.push(f)}function o(){e.setup(n)}function l(f){e.setupView(n,f)}const u={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function _Q(t){let e=new WeakMap;function n(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new FS(t),e.set(i,[o])):s>=a.length?(o=new FS(t),a.push(o)):o=a[s],o}function r(){e=new WeakMap}return{get:n,dispose:r}}const xQ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,bQ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function wQ(t,e,n){let r=new ub;const i=new Mn,s=new Mn,a=new nr,o=new WY({depthPacking:oY}),l=new YY,u={},f=n.maxTextureSize,h={[Ya]:ni,[ni]:Ya,[Zs]:Zs},p=new ja({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Mn},radius:{value:4}},vertexShader:xQ,fragmentShader:bQ}),v=p.clone();v.defines.HORIZONTAL_PASS=1;const P=new eo;P.setAttribute("position",new Ri(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new Ji(P,p),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=AA;let m=this.type;this.render=function(M,E,N){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||M.length===0)return;const I=t.getRenderTarget(),L=t.getActiveCubeFace(),R=t.getActiveMipmapLevel(),B=t.state;B.setBlending(za),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const V=m!==Ys&&this.type===Ys,z=m===Ys&&this.type!==Ys;for(let G=0,O=M.length;G<O;G++){const y=M[G],b=y.shadow;if(b===void 0){console.warn("THREE.WebGLShadowMap:",y,"has no shadow.");continue}if(b.autoUpdate===!1&&b.needsUpdate===!1)continue;i.copy(b.mapSize);const k=b.getFrameExtents();if(i.multiply(k),s.copy(b.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(s.x=Math.floor(f/k.x),i.x=s.x*k.x,b.mapSize.x=s.x),i.y>f&&(s.y=Math.floor(f/k.y),i.y=s.y*k.y,b.mapSize.y=s.y)),b.map===null||V===!0||z===!0){const H=this.type!==Ys?{minFilter:es,magFilter:es}:{};b.map!==null&&b.map.dispose(),b.map=new Ho(i.x,i.y,H),b.map.texture.name=y.name+".shadowMap",b.camera.updateProjectionMatrix()}t.setRenderTarget(b.map),t.clear();const F=b.getViewportCount();for(let H=0;H<F;H++){const W=b.getViewport(H);a.set(s.x*W.x,s.y*W.y,s.x*W.z,s.y*W.w),B.viewport(a),b.updateMatrices(y,H),r=b.getFrustum(),C(E,N,b.camera,y,this.type)}b.isPointLightShadow!==!0&&this.type===Ys&&x(b,N),b.needsUpdate=!1}m=this.type,g.needsUpdate=!1,t.setRenderTarget(I,L,R)};function x(M,E){const N=e.update(S);p.defines.VSM_SAMPLES!==M.blurSamples&&(p.defines.VSM_SAMPLES=M.blurSamples,v.defines.VSM_SAMPLES=M.blurSamples,p.needsUpdate=!0,v.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Ho(i.x,i.y)),p.uniforms.shadow_pass.value=M.map.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,t.setRenderTarget(M.mapPass),t.clear(),t.renderBufferDirect(E,null,N,p,S,null),v.uniforms.shadow_pass.value=M.mapPass.texture,v.uniforms.resolution.value=M.mapSize,v.uniforms.radius.value=M.radius,t.setRenderTarget(M.map),t.clear(),t.renderBufferDirect(E,null,N,v,S,null)}function w(M,E,N,I){let L=null;const R=N.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(R!==void 0)L=R;else if(L=N.isPointLight===!0?l:o,t.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const B=L.uuid,V=E.uuid;let z=u[B];z===void 0&&(z={},u[B]=z);let G=z[V];G===void 0&&(G=L.clone(),z[V]=G,E.addEventListener("dispose",A)),L=G}if(L.visible=E.visible,L.wireframe=E.wireframe,I===Ys?L.side=E.shadowSide!==null?E.shadowSide:E.side:L.side=E.shadowSide!==null?E.shadowSide:h[E.side],L.alphaMap=E.alphaMap,L.alphaTest=E.alphaTest,L.map=E.map,L.clipShadows=E.clipShadows,L.clippingPlanes=E.clippingPlanes,L.clipIntersection=E.clipIntersection,L.displacementMap=E.displacementMap,L.displacementScale=E.displacementScale,L.displacementBias=E.displacementBias,L.wireframeLinewidth=E.wireframeLinewidth,L.linewidth=E.linewidth,N.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const B=t.properties.get(L);B.light=N}return L}function C(M,E,N,I,L){if(M.visible===!1)return;if(M.layers.test(E.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&L===Ys)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,M.matrixWorld);const V=e.update(M),z=M.material;if(Array.isArray(z)){const G=V.groups;for(let O=0,y=G.length;O<y;O++){const b=G[O],k=z[b.materialIndex];if(k&&k.visible){const F=w(M,k,I,L);M.onBeforeShadow(t,M,E,N,V,F,b),t.renderBufferDirect(N,null,V,F,M,b),M.onAfterShadow(t,M,E,N,V,F,b)}}}else if(z.visible){const G=w(M,z,I,L);M.onBeforeShadow(t,M,E,N,V,G,null),t.renderBufferDirect(N,null,V,G,M,null),M.onAfterShadow(t,M,E,N,V,G,null)}}const B=M.children;for(let V=0,z=B.length;V<z;V++)C(B[V],E,N,I,L)}function A(M){M.target.removeEventListener("dispose",A);for(const N in u){const I=u[N],L=M.target.uuid;L in I&&(I[L].dispose(),delete I[L])}}}const SQ={[bx]:wx,[Sx]:Cx,[Px]:Tx,[lc]:Ex,[wx]:bx,[Cx]:Sx,[Tx]:Px,[Ex]:lc};function PQ(t,e){function n(){let le=!1;const $e=new nr;let be=null;const Le=new nr(0,0,0,0);return{setMask:function(ze){be!==ze&&!le&&(t.colorMask(ze,ze,ze,ze),be=ze)},setLocked:function(ze){le=ze},setClear:function(ze,ft,Rt,on,Wn){Wn===!0&&(ze*=on,ft*=on,Rt*=on),$e.set(ze,ft,Rt,on),Le.equals($e)===!1&&(t.clearColor(ze,ft,Rt,on),Le.copy($e))},reset:function(){le=!1,be=null,Le.set(-1,0,0,0)}}}function r(){let le=!1,$e=!1,be=null,Le=null,ze=null;return{setReversed:function(ft){if($e!==ft){const Rt=e.get("EXT_clip_control");$e?Rt.clipControlEXT(Rt.LOWER_LEFT_EXT,Rt.ZERO_TO_ONE_EXT):Rt.clipControlEXT(Rt.LOWER_LEFT_EXT,Rt.NEGATIVE_ONE_TO_ONE_EXT);const on=ze;ze=null,this.setClear(on)}$e=ft},getReversed:function(){return $e},setTest:function(ft){ft?se(t.DEPTH_TEST):ye(t.DEPTH_TEST)},setMask:function(ft){be!==ft&&!le&&(t.depthMask(ft),be=ft)},setFunc:function(ft){if($e&&(ft=SQ[ft]),Le!==ft){switch(ft){case bx:t.depthFunc(t.NEVER);break;case wx:t.depthFunc(t.ALWAYS);break;case Sx:t.depthFunc(t.LESS);break;case lc:t.depthFunc(t.LEQUAL);break;case Px:t.depthFunc(t.EQUAL);break;case Ex:t.depthFunc(t.GEQUAL);break;case Cx:t.depthFunc(t.GREATER);break;case Tx:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Le=ft}},setLocked:function(ft){le=ft},setClear:function(ft){ze!==ft&&($e&&(ft=1-ft),t.clearDepth(ft),ze=ft)},reset:function(){le=!1,be=null,Le=null,ze=null,$e=!1}}}function i(){let le=!1,$e=null,be=null,Le=null,ze=null,ft=null,Rt=null,on=null,Wn=null;return{setTest:function(Jt){le||(Jt?se(t.STENCIL_TEST):ye(t.STENCIL_TEST))},setMask:function(Jt){$e!==Jt&&!le&&(t.stencilMask(Jt),$e=Jt)},setFunc:function(Jt,Qn,vr){(be!==Jt||Le!==Qn||ze!==vr)&&(t.stencilFunc(Jt,Qn,vr),be=Jt,Le=Qn,ze=vr)},setOp:function(Jt,Qn,vr){(ft!==Jt||Rt!==Qn||on!==vr)&&(t.stencilOp(Jt,Qn,vr),ft=Jt,Rt=Qn,on=vr)},setLocked:function(Jt){le=Jt},setClear:function(Jt){Wn!==Jt&&(t.clearStencil(Jt),Wn=Jt)},reset:function(){le=!1,$e=null,be=null,Le=null,ze=null,ft=null,Rt=null,on=null,Wn=null}}}const s=new n,a=new r,o=new i,l=new WeakMap,u=new WeakMap;let f={},h={},p=new WeakMap,v=[],P=null,S=!1,g=null,m=null,x=null,w=null,C=null,A=null,M=null,E=new Cn(0,0,0),N=0,I=!1,L=null,R=null,B=null,V=null,z=null;const G=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let O=!1,y=0;const b=t.getParameter(t.VERSION);b.indexOf("WebGL")!==-1?(y=parseFloat(/^WebGL (\d)/.exec(b)[1]),O=y>=1):b.indexOf("OpenGL ES")!==-1&&(y=parseFloat(/^OpenGL ES (\d)/.exec(b)[1]),O=y>=2);let k=null,F={};const H=t.getParameter(t.SCISSOR_BOX),W=t.getParameter(t.VIEWPORT),ne=new nr().fromArray(H),Z=new nr().fromArray(W);function K(le,$e,be,Le){const ze=new Uint8Array(4),ft=t.createTexture();t.bindTexture(le,ft),t.texParameteri(le,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(le,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Rt=0;Rt<be;Rt++)le===t.TEXTURE_3D||le===t.TEXTURE_2D_ARRAY?t.texImage3D($e,0,t.RGBA,1,1,Le,0,t.RGBA,t.UNSIGNED_BYTE,ze):t.texImage2D($e+Rt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,ze);return ft}const ae={};ae[t.TEXTURE_2D]=K(t.TEXTURE_2D,t.TEXTURE_2D,1),ae[t.TEXTURE_CUBE_MAP]=K(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ae[t.TEXTURE_2D_ARRAY]=K(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ae[t.TEXTURE_3D]=K(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),se(t.DEPTH_TEST),a.setFunc(lc),ke(!1),ut(Bw),se(t.CULL_FACE),ie(za);function se(le){f[le]!==!0&&(t.enable(le),f[le]=!0)}function ye(le){f[le]!==!1&&(t.disable(le),f[le]=!1)}function me(le,$e){return h[le]!==$e?(t.bindFramebuffer(le,$e),h[le]=$e,le===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=$e),le===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=$e),!0):!1}function Ae(le,$e){let be=v,Le=!1;if(le){be=p.get($e),be===void 0&&(be=[],p.set($e,be));const ze=le.textures;if(be.length!==ze.length||be[0]!==t.COLOR_ATTACHMENT0){for(let ft=0,Rt=ze.length;ft<Rt;ft++)be[ft]=t.COLOR_ATTACHMENT0+ft;be.length=ze.length,Le=!0}}else be[0]!==t.BACK&&(be[0]=t.BACK,Le=!0);Le&&t.drawBuffers(be)}function Ue(le){return P!==le?(t.useProgram(le),P=le,!0):!1}const He={[Eo]:t.FUNC_ADD,[OW]:t.FUNC_SUBTRACT,[NW]:t.FUNC_REVERSE_SUBTRACT};He[DW]=t.MIN,He[kW]=t.MAX;const Qe={[FW]:t.ZERO,[UW]:t.ONE,[BW]:t.SRC_COLOR,[_x]:t.SRC_ALPHA,[GW]:t.SRC_ALPHA_SATURATE,[HW]:t.DST_COLOR,[VW]:t.DST_ALPHA,[$W]:t.ONE_MINUS_SRC_COLOR,[xx]:t.ONE_MINUS_SRC_ALPHA,[zW]:t.ONE_MINUS_DST_COLOR,[qW]:t.ONE_MINUS_DST_ALPHA,[XW]:t.CONSTANT_COLOR,[WW]:t.ONE_MINUS_CONSTANT_COLOR,[YW]:t.CONSTANT_ALPHA,[jW]:t.ONE_MINUS_CONSTANT_ALPHA};function ie(le,$e,be,Le,ze,ft,Rt,on,Wn,Jt){if(le===za){S===!0&&(ye(t.BLEND),S=!1);return}if(S===!1&&(se(t.BLEND),S=!0),le!==LW){if(le!==g||Jt!==I){if((m!==Eo||C!==Eo)&&(t.blendEquation(t.FUNC_ADD),m=Eo,C=Eo),Jt)switch(le){case Ql:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case $w:t.blendFunc(t.ONE,t.ONE);break;case Vw:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case qw:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case Ql:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case $w:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Vw:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case qw:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}x=null,w=null,A=null,M=null,E.set(0,0,0),N=0,g=le,I=Jt}return}ze=ze||$e,ft=ft||be,Rt=Rt||Le,($e!==m||ze!==C)&&(t.blendEquationSeparate(He[$e],He[ze]),m=$e,C=ze),(be!==x||Le!==w||ft!==A||Rt!==M)&&(t.blendFuncSeparate(Qe[be],Qe[Le],Qe[ft],Qe[Rt]),x=be,w=Le,A=ft,M=Rt),(on.equals(E)===!1||Wn!==N)&&(t.blendColor(on.r,on.g,on.b,Wn),E.copy(on),N=Wn),g=le,I=!1}function dt(le,$e){le.side===Zs?ye(t.CULL_FACE):se(t.CULL_FACE);let be=le.side===ni;$e&&(be=!be),ke(be),le.blending===Ql&&le.transparent===!1?ie(za):ie(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),a.setFunc(le.depthFunc),a.setTest(le.depthTest),a.setMask(le.depthWrite),s.setMask(le.colorWrite);const Le=le.stencilWrite;o.setTest(Le),Le&&(o.setMask(le.stencilWriteMask),o.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),o.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),Pt(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?se(t.SAMPLE_ALPHA_TO_COVERAGE):ye(t.SAMPLE_ALPHA_TO_COVERAGE)}function ke(le){L!==le&&(le?t.frontFace(t.CW):t.frontFace(t.CCW),L=le)}function ut(le){le!==MW?(se(t.CULL_FACE),le!==R&&(le===Bw?t.cullFace(t.BACK):le===RW?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ye(t.CULL_FACE),R=le}function tt(le){le!==B&&(O&&t.lineWidth(le),B=le)}function Pt(le,$e,be){le?(se(t.POLYGON_OFFSET_FILL),(V!==$e||z!==be)&&(t.polygonOffset($e,be),V=$e,z=be)):ye(t.POLYGON_OFFSET_FILL)}function lt(le){le?se(t.SCISSOR_TEST):ye(t.SCISSOR_TEST)}function re(le){le===void 0&&(le=t.TEXTURE0+G-1),k!==le&&(t.activeTexture(le),k=le)}function X(le,$e,be){be===void 0&&(k===null?be=t.TEXTURE0+G-1:be=k);let Le=F[be];Le===void 0&&(Le={type:void 0,texture:void 0},F[be]=Le),(Le.type!==le||Le.texture!==$e)&&(k!==be&&(t.activeTexture(be),k=be),t.bindTexture(le,$e||ae[le]),Le.type=le,Le.texture=$e)}function te(){const le=F[k];le!==void 0&&le.type!==void 0&&(t.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function fe(){try{t.compressedTexImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function de(){try{t.compressedTexImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function he(){try{t.texSubImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Be(){try{t.texSubImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ie(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ge(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function xt(){try{t.texStorage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Oe(){try{t.texStorage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ke(){try{t.texImage2D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function _t(){try{t.texImage3D.apply(t,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ve(le){ne.equals(le)===!1&&(t.scissor(le.x,le.y,le.z,le.w),ne.copy(le))}function ge(le){Z.equals(le)===!1&&(t.viewport(le.x,le.y,le.z,le.w),Z.copy(le))}function we(le,$e){let be=u.get($e);be===void 0&&(be=new WeakMap,u.set($e,be));let Le=be.get(le);Le===void 0&&(Le=t.getUniformBlockIndex($e,le.name),be.set(le,Le))}function Me(le,$e){const Le=u.get($e).get(le);l.get($e)!==Le&&(t.uniformBlockBinding($e,Le,le.__bindingPointIndex),l.set($e,Le))}function Ze(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),a.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},k=null,F={},h={},p=new WeakMap,v=[],P=null,S=!1,g=null,m=null,x=null,w=null,C=null,A=null,M=null,E=new Cn(0,0,0),N=0,I=!1,L=null,R=null,B=null,V=null,z=null,ne.set(0,0,t.canvas.width,t.canvas.height),Z.set(0,0,t.canvas.width,t.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:se,disable:ye,bindFramebuffer:me,drawBuffers:Ae,useProgram:Ue,setBlending:ie,setMaterial:dt,setFlipSided:ke,setCullFace:ut,setLineWidth:tt,setPolygonOffset:Pt,setScissorTest:lt,activeTexture:re,bindTexture:X,unbindTexture:te,compressedTexImage2D:fe,compressedTexImage3D:de,texImage2D:Ke,texImage3D:_t,updateUBOMapping:we,uniformBlockBinding:Me,texStorage2D:xt,texStorage3D:Oe,texSubImage2D:he,texSubImage3D:Be,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Ge,scissor:ve,viewport:ge,reset:Ze}}function EQ(t,e,n,r,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Mn,f=new WeakMap;let h;const p=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function P(re,X){return v?new OffscreenCanvas(re,X):bh("canvas")}function S(re,X,te){let fe=1;const de=lt(re);if((de.width>te||de.height>te)&&(fe=te/Math.max(de.width,de.height)),fe<1)if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&re instanceof ImageBitmap||typeof VideoFrame<"u"&&re instanceof VideoFrame){const he=Math.floor(fe*de.width),Be=Math.floor(fe*de.height);h===void 0&&(h=P(he,Be));const Ie=X?P(he,Be):h;return Ie.width=he,Ie.height=Be,Ie.getContext("2d").drawImage(re,0,0,he,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+he+"x"+Be+")."),Ie}else return"data"in re&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),re;return re}function g(re){return re.generateMipmaps}function m(re){t.generateMipmap(re)}function x(re){return re.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:re.isWebGL3DRenderTarget?t.TEXTURE_3D:re.isWebGLArrayRenderTarget||re.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function w(re,X,te,fe,de=!1){if(re!==null){if(t[re]!==void 0)return t[re];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+re+"'")}let he=X;if(X===t.RED&&(te===t.FLOAT&&(he=t.R32F),te===t.HALF_FLOAT&&(he=t.R16F),te===t.UNSIGNED_BYTE&&(he=t.R8)),X===t.RED_INTEGER&&(te===t.UNSIGNED_BYTE&&(he=t.R8UI),te===t.UNSIGNED_SHORT&&(he=t.R16UI),te===t.UNSIGNED_INT&&(he=t.R32UI),te===t.BYTE&&(he=t.R8I),te===t.SHORT&&(he=t.R16I),te===t.INT&&(he=t.R32I)),X===t.RG&&(te===t.FLOAT&&(he=t.RG32F),te===t.HALF_FLOAT&&(he=t.RG16F),te===t.UNSIGNED_BYTE&&(he=t.RG8)),X===t.RG_INTEGER&&(te===t.UNSIGNED_BYTE&&(he=t.RG8UI),te===t.UNSIGNED_SHORT&&(he=t.RG16UI),te===t.UNSIGNED_INT&&(he=t.RG32UI),te===t.BYTE&&(he=t.RG8I),te===t.SHORT&&(he=t.RG16I),te===t.INT&&(he=t.RG32I)),X===t.RGB_INTEGER&&(te===t.UNSIGNED_BYTE&&(he=t.RGB8UI),te===t.UNSIGNED_SHORT&&(he=t.RGB16UI),te===t.UNSIGNED_INT&&(he=t.RGB32UI),te===t.BYTE&&(he=t.RGB8I),te===t.SHORT&&(he=t.RGB16I),te===t.INT&&(he=t.RGB32I)),X===t.RGBA_INTEGER&&(te===t.UNSIGNED_BYTE&&(he=t.RGBA8UI),te===t.UNSIGNED_SHORT&&(he=t.RGBA16UI),te===t.UNSIGNED_INT&&(he=t.RGBA32UI),te===t.BYTE&&(he=t.RGBA8I),te===t.SHORT&&(he=t.RGBA16I),te===t.INT&&(he=t.RGBA32I)),X===t.RGB&&te===t.UNSIGNED_INT_5_9_9_9_REV&&(he=t.RGB9_E5),X===t.RGBA){const Be=de?_h:wn.getTransfer(fe);te===t.FLOAT&&(he=t.RGBA32F),te===t.HALF_FLOAT&&(he=t.RGBA16F),te===t.UNSIGNED_BYTE&&(he=Be===Ln?t.SRGB8_ALPHA8:t.RGBA8),te===t.UNSIGNED_SHORT_4_4_4_4&&(he=t.RGBA4),te===t.UNSIGNED_SHORT_5_5_5_1&&(he=t.RGB5_A1)}return(he===t.R16F||he===t.R32F||he===t.RG16F||he===t.RG32F||he===t.RGBA16F||he===t.RGBA32F)&&e.get("EXT_color_buffer_float"),he}function C(re,X){let te;return re?X===null||X===qo||X===fc?te=t.DEPTH24_STENCIL8:X===ea?te=t.DEPTH32F_STENCIL8:X===ku&&(te=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):X===null||X===qo||X===fc?te=t.DEPTH_COMPONENT24:X===ea?te=t.DEPTH_COMPONENT32F:X===ku&&(te=t.DEPTH_COMPONENT16),te}function A(re,X){return g(re)===!0||re.isFramebufferTexture&&re.minFilter!==es&&re.minFilter!==xs?Math.log2(Math.max(X.width,X.height))+1:re.mipmaps!==void 0&&re.mipmaps.length>0?re.mipmaps.length:re.isCompressedTexture&&Array.isArray(re.image)?X.mipmaps.length:1}function M(re){const X=re.target;X.removeEventListener("dispose",M),N(X),X.isVideoTexture&&f.delete(X)}function E(re){const X=re.target;X.removeEventListener("dispose",E),L(X)}function N(re){const X=r.get(re);if(X.__webglInit===void 0)return;const te=re.source,fe=p.get(te);if(fe){const de=fe[X.__cacheKey];de.usedTimes--,de.usedTimes===0&&I(re),Object.keys(fe).length===0&&p.delete(te)}r.remove(re)}function I(re){const X=r.get(re);t.deleteTexture(X.__webglTexture);const te=re.source,fe=p.get(te);delete fe[X.__cacheKey],a.memory.textures--}function L(re){const X=r.get(re);if(re.depthTexture&&(re.depthTexture.dispose(),r.remove(re.depthTexture)),re.isWebGLCubeRenderTarget)for(let fe=0;fe<6;fe++){if(Array.isArray(X.__webglFramebuffer[fe]))for(let de=0;de<X.__webglFramebuffer[fe].length;de++)t.deleteFramebuffer(X.__webglFramebuffer[fe][de]);else t.deleteFramebuffer(X.__webglFramebuffer[fe]);X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer[fe])}else{if(Array.isArray(X.__webglFramebuffer))for(let fe=0;fe<X.__webglFramebuffer.length;fe++)t.deleteFramebuffer(X.__webglFramebuffer[fe]);else t.deleteFramebuffer(X.__webglFramebuffer);if(X.__webglDepthbuffer&&t.deleteRenderbuffer(X.__webglDepthbuffer),X.__webglMultisampledFramebuffer&&t.deleteFramebuffer(X.__webglMultisampledFramebuffer),X.__webglColorRenderbuffer)for(let fe=0;fe<X.__webglColorRenderbuffer.length;fe++)X.__webglColorRenderbuffer[fe]&&t.deleteRenderbuffer(X.__webglColorRenderbuffer[fe]);X.__webglDepthRenderbuffer&&t.deleteRenderbuffer(X.__webglDepthRenderbuffer)}const te=re.textures;for(let fe=0,de=te.length;fe<de;fe++){const he=r.get(te[fe]);he.__webglTexture&&(t.deleteTexture(he.__webglTexture),a.memory.textures--),r.remove(te[fe])}r.remove(re)}let R=0;function B(){R=0}function V(){const re=R;return re>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+re+" texture units while this GPU supports only "+i.maxTextures),R+=1,re}function z(re){const X=[];return X.push(re.wrapS),X.push(re.wrapT),X.push(re.wrapR||0),X.push(re.magFilter),X.push(re.minFilter),X.push(re.anisotropy),X.push(re.internalFormat),X.push(re.format),X.push(re.type),X.push(re.generateMipmaps),X.push(re.premultiplyAlpha),X.push(re.flipY),X.push(re.unpackAlignment),X.push(re.colorSpace),X.join()}function G(re,X){const te=r.get(re);if(re.isVideoTexture&&tt(re),re.isRenderTargetTexture===!1&&re.version>0&&te.__version!==re.version){const fe=re.image;if(fe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Z(te,re,X);return}}n.bindTexture(t.TEXTURE_2D,te.__webglTexture,t.TEXTURE0+X)}function O(re,X){const te=r.get(re);if(re.version>0&&te.__version!==re.version){Z(te,re,X);return}n.bindTexture(t.TEXTURE_2D_ARRAY,te.__webglTexture,t.TEXTURE0+X)}function y(re,X){const te=r.get(re);if(re.version>0&&te.__version!==re.version){Z(te,re,X);return}n.bindTexture(t.TEXTURE_3D,te.__webglTexture,t.TEXTURE0+X)}function b(re,X){const te=r.get(re);if(re.version>0&&te.__version!==re.version){K(te,re,X);return}n.bindTexture(t.TEXTURE_CUBE_MAP,te.__webglTexture,t.TEXTURE0+X)}const k={[Rx]:t.REPEAT,[Io]:t.CLAMP_TO_EDGE,[Ix]:t.MIRRORED_REPEAT},F={[es]:t.NEAREST,[sY]:t.NEAREST_MIPMAP_NEAREST,[qf]:t.NEAREST_MIPMAP_LINEAR,[xs]:t.LINEAR,[ty]:t.LINEAR_MIPMAP_NEAREST,[Lo]:t.LINEAR_MIPMAP_LINEAR},H={[cY]:t.NEVER,[mY]:t.ALWAYS,[uY]:t.LESS,[qA]:t.LEQUAL,[fY]:t.EQUAL,[pY]:t.GEQUAL,[dY]:t.GREATER,[hY]:t.NOTEQUAL};function W(re,X){if(X.type===ea&&e.has("OES_texture_float_linear")===!1&&(X.magFilter===xs||X.magFilter===ty||X.magFilter===qf||X.magFilter===Lo||X.minFilter===xs||X.minFilter===ty||X.minFilter===qf||X.minFilter===Lo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(re,t.TEXTURE_WRAP_S,k[X.wrapS]),t.texParameteri(re,t.TEXTURE_WRAP_T,k[X.wrapT]),(re===t.TEXTURE_3D||re===t.TEXTURE_2D_ARRAY)&&t.texParameteri(re,t.TEXTURE_WRAP_R,k[X.wrapR]),t.texParameteri(re,t.TEXTURE_MAG_FILTER,F[X.magFilter]),t.texParameteri(re,t.TEXTURE_MIN_FILTER,F[X.minFilter]),X.compareFunction&&(t.texParameteri(re,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(re,t.TEXTURE_COMPARE_FUNC,H[X.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(X.magFilter===es||X.minFilter!==qf&&X.minFilter!==Lo||X.type===ea&&e.has("OES_texture_float_linear")===!1)return;if(X.anisotropy>1||r.get(X).__currentAnisotropy){const te=e.get("EXT_texture_filter_anisotropic");t.texParameterf(re,te.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(X.anisotropy,i.getMaxAnisotropy())),r.get(X).__currentAnisotropy=X.anisotropy}}}function ne(re,X){let te=!1;re.__webglInit===void 0&&(re.__webglInit=!0,X.addEventListener("dispose",M));const fe=X.source;let de=p.get(fe);de===void 0&&(de={},p.set(fe,de));const he=z(X);if(he!==re.__cacheKey){de[he]===void 0&&(de[he]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,te=!0),de[he].usedTimes++;const Be=de[re.__cacheKey];Be!==void 0&&(de[re.__cacheKey].usedTimes--,Be.usedTimes===0&&I(X)),re.__cacheKey=he,re.__webglTexture=de[he].texture}return te}function Z(re,X,te){let fe=t.TEXTURE_2D;(X.isDataArrayTexture||X.isCompressedArrayTexture)&&(fe=t.TEXTURE_2D_ARRAY),X.isData3DTexture&&(fe=t.TEXTURE_3D);const de=ne(re,X),he=X.source;n.bindTexture(fe,re.__webglTexture,t.TEXTURE0+te);const Be=r.get(he);if(he.version!==Be.__version||de===!0){n.activeTexture(t.TEXTURE0+te);const Ie=wn.getPrimaries(wn.workingColorSpace),Ge=X.colorSpace===Ba?null:wn.getPrimaries(X.colorSpace),xt=X.colorSpace===Ba||Ie===Ge?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,X.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,X.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let Oe=S(X.image,!1,i.maxTextureSize);Oe=Pt(X,Oe);const Ke=s.convert(X.format,X.colorSpace),_t=s.convert(X.type);let ve=w(X.internalFormat,Ke,_t,X.colorSpace,X.isVideoTexture);W(fe,X);let ge;const we=X.mipmaps,Me=X.isVideoTexture!==!0,Ze=Be.__version===void 0||de===!0,le=he.dataReady,$e=A(X,Oe);if(X.isDepthTexture)ve=C(X.format===dc,X.type),Ze&&(Me?n.texStorage2D(t.TEXTURE_2D,1,ve,Oe.width,Oe.height):n.texImage2D(t.TEXTURE_2D,0,ve,Oe.width,Oe.height,0,Ke,_t,null));else if(X.isDataTexture)if(we.length>0){Me&&Ze&&n.texStorage2D(t.TEXTURE_2D,$e,ve,we[0].width,we[0].height);for(let be=0,Le=we.length;be<Le;be++)ge=we[be],Me?le&&n.texSubImage2D(t.TEXTURE_2D,be,0,0,ge.width,ge.height,Ke,_t,ge.data):n.texImage2D(t.TEXTURE_2D,be,ve,ge.width,ge.height,0,Ke,_t,ge.data);X.generateMipmaps=!1}else Me?(Ze&&n.texStorage2D(t.TEXTURE_2D,$e,ve,Oe.width,Oe.height),le&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Oe.width,Oe.height,Ke,_t,Oe.data)):n.texImage2D(t.TEXTURE_2D,0,ve,Oe.width,Oe.height,0,Ke,_t,Oe.data);else if(X.isCompressedTexture)if(X.isCompressedArrayTexture){Me&&Ze&&n.texStorage3D(t.TEXTURE_2D_ARRAY,$e,ve,we[0].width,we[0].height,Oe.depth);for(let be=0,Le=we.length;be<Le;be++)if(ge=we[be],X.format!==Ki)if(Ke!==null)if(Me){if(le)if(X.layerUpdates.size>0){const ze=hS(ge.width,ge.height,X.format,X.type);for(const ft of X.layerUpdates){const Rt=ge.data.subarray(ft*ze/ge.data.BYTES_PER_ELEMENT,(ft+1)*ze/ge.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,be,0,0,ft,ge.width,ge.height,1,Ke,Rt)}X.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,be,0,0,0,ge.width,ge.height,Oe.depth,Ke,ge.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,be,ve,ge.width,ge.height,Oe.depth,0,ge.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Me?le&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,be,0,0,0,ge.width,ge.height,Oe.depth,Ke,_t,ge.data):n.texImage3D(t.TEXTURE_2D_ARRAY,be,ve,ge.width,ge.height,Oe.depth,0,Ke,_t,ge.data)}else{Me&&Ze&&n.texStorage2D(t.TEXTURE_2D,$e,ve,we[0].width,we[0].height);for(let be=0,Le=we.length;be<Le;be++)ge=we[be],X.format!==Ki?Ke!==null?Me?le&&n.compressedTexSubImage2D(t.TEXTURE_2D,be,0,0,ge.width,ge.height,Ke,ge.data):n.compressedTexImage2D(t.TEXTURE_2D,be,ve,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Me?le&&n.texSubImage2D(t.TEXTURE_2D,be,0,0,ge.width,ge.height,Ke,_t,ge.data):n.texImage2D(t.TEXTURE_2D,be,ve,ge.width,ge.height,0,Ke,_t,ge.data)}else if(X.isDataArrayTexture)if(Me){if(Ze&&n.texStorage3D(t.TEXTURE_2D_ARRAY,$e,ve,Oe.width,Oe.height,Oe.depth),le)if(X.layerUpdates.size>0){const be=hS(Oe.width,Oe.height,X.format,X.type);for(const Le of X.layerUpdates){const ze=Oe.data.subarray(Le*be/Oe.data.BYTES_PER_ELEMENT,(Le+1)*be/Oe.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Le,Oe.width,Oe.height,1,Ke,_t,ze)}X.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,Ke,_t,Oe.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,ve,Oe.width,Oe.height,Oe.depth,0,Ke,_t,Oe.data);else if(X.isData3DTexture)Me?(Ze&&n.texStorage3D(t.TEXTURE_3D,$e,ve,Oe.width,Oe.height,Oe.depth),le&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,Ke,_t,Oe.data)):n.texImage3D(t.TEXTURE_3D,0,ve,Oe.width,Oe.height,Oe.depth,0,Ke,_t,Oe.data);else if(X.isFramebufferTexture){if(Ze)if(Me)n.texStorage2D(t.TEXTURE_2D,$e,ve,Oe.width,Oe.height);else{let be=Oe.width,Le=Oe.height;for(let ze=0;ze<$e;ze++)n.texImage2D(t.TEXTURE_2D,ze,ve,be,Le,0,Ke,_t,null),be>>=1,Le>>=1}}else if(we.length>0){if(Me&&Ze){const be=lt(we[0]);n.texStorage2D(t.TEXTURE_2D,$e,ve,be.width,be.height)}for(let be=0,Le=we.length;be<Le;be++)ge=we[be],Me?le&&n.texSubImage2D(t.TEXTURE_2D,be,0,0,Ke,_t,ge):n.texImage2D(t.TEXTURE_2D,be,ve,Ke,_t,ge);X.generateMipmaps=!1}else if(Me){if(Ze){const be=lt(Oe);n.texStorage2D(t.TEXTURE_2D,$e,ve,be.width,be.height)}le&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Ke,_t,Oe)}else n.texImage2D(t.TEXTURE_2D,0,ve,Ke,_t,Oe);g(X)&&m(fe),Be.__version=he.version,X.onUpdate&&X.onUpdate(X)}re.__version=X.version}function K(re,X,te){if(X.image.length!==6)return;const fe=ne(re,X),de=X.source;n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture,t.TEXTURE0+te);const he=r.get(de);if(de.version!==he.__version||fe===!0){n.activeTexture(t.TEXTURE0+te);const Be=wn.getPrimaries(wn.workingColorSpace),Ie=X.colorSpace===Ba?null:wn.getPrimaries(X.colorSpace),Ge=X.colorSpace===Ba||Be===Ie?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,X.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,X.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ge);const xt=X.isCompressedTexture||X.image[0].isCompressedTexture,Oe=X.image[0]&&X.image[0].isDataTexture,Ke=[];for(let Le=0;Le<6;Le++)!xt&&!Oe?Ke[Le]=S(X.image[Le],!0,i.maxCubemapSize):Ke[Le]=Oe?X.image[Le].image:X.image[Le],Ke[Le]=Pt(X,Ke[Le]);const _t=Ke[0],ve=s.convert(X.format,X.colorSpace),ge=s.convert(X.type),we=w(X.internalFormat,ve,ge,X.colorSpace),Me=X.isVideoTexture!==!0,Ze=he.__version===void 0||fe===!0,le=de.dataReady;let $e=A(X,_t);W(t.TEXTURE_CUBE_MAP,X);let be;if(xt){Me&&Ze&&n.texStorage2D(t.TEXTURE_CUBE_MAP,$e,we,_t.width,_t.height);for(let Le=0;Le<6;Le++){be=Ke[Le].mipmaps;for(let ze=0;ze<be.length;ze++){const ft=be[ze];X.format!==Ki?ve!==null?Me?le&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze,0,0,ft.width,ft.height,ve,ft.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze,we,ft.width,ft.height,0,ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Me?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze,0,0,ft.width,ft.height,ve,ge,ft.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze,we,ft.width,ft.height,0,ve,ge,ft.data)}}}else{if(be=X.mipmaps,Me&&Ze){be.length>0&&$e++;const Le=lt(Ke[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,$e,we,Le.width,Le.height)}for(let Le=0;Le<6;Le++)if(Oe){Me?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,Ke[Le].width,Ke[Le].height,ve,ge,Ke[Le].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,we,Ke[Le].width,Ke[Le].height,0,ve,ge,Ke[Le].data);for(let ze=0;ze<be.length;ze++){const Rt=be[ze].image[Le].image;Me?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze+1,0,0,Rt.width,Rt.height,ve,ge,Rt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze+1,we,Rt.width,Rt.height,0,ve,ge,Rt.data)}}else{Me?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,ve,ge,Ke[Le]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,we,ve,ge,Ke[Le]);for(let ze=0;ze<be.length;ze++){const ft=be[ze];Me?le&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze+1,0,0,ve,ge,ft.image[Le]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Le,ze+1,we,ve,ge,ft.image[Le])}}}g(X)&&m(t.TEXTURE_CUBE_MAP),he.__version=de.version,X.onUpdate&&X.onUpdate(X)}re.__version=X.version}function ae(re,X,te,fe,de,he){const Be=s.convert(te.format,te.colorSpace),Ie=s.convert(te.type),Ge=w(te.internalFormat,Be,Ie,te.colorSpace),xt=r.get(X),Oe=r.get(te);if(Oe.__renderTarget=X,!xt.__hasExternalTextures){const Ke=Math.max(1,X.width>>he),_t=Math.max(1,X.height>>he);de===t.TEXTURE_3D||de===t.TEXTURE_2D_ARRAY?n.texImage3D(de,he,Ge,Ke,_t,X.depth,0,Be,Ie,null):n.texImage2D(de,he,Ge,Ke,_t,0,Be,Ie,null)}n.bindFramebuffer(t.FRAMEBUFFER,re),ut(X)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,fe,de,Oe.__webglTexture,0,ke(X)):(de===t.TEXTURE_2D||de>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&de<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,fe,de,Oe.__webglTexture,he),n.bindFramebuffer(t.FRAMEBUFFER,null)}function se(re,X,te){if(t.bindRenderbuffer(t.RENDERBUFFER,re),X.depthBuffer){const fe=X.depthTexture,de=fe&&fe.isDepthTexture?fe.type:null,he=C(X.stencilBuffer,de),Be=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ie=ke(X);ut(X)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ie,he,X.width,X.height):te?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ie,he,X.width,X.height):t.renderbufferStorage(t.RENDERBUFFER,he,X.width,X.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Be,t.RENDERBUFFER,re)}else{const fe=X.textures;for(let de=0;de<fe.length;de++){const he=fe[de],Be=s.convert(he.format,he.colorSpace),Ie=s.convert(he.type),Ge=w(he.internalFormat,Be,Ie,he.colorSpace),xt=ke(X);te&&ut(X)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,xt,Ge,X.width,X.height):ut(X)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,xt,Ge,X.width,X.height):t.renderbufferStorage(t.RENDERBUFFER,Ge,X.width,X.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ye(re,X){if(X&&X.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,re),!(X.depthTexture&&X.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const fe=r.get(X.depthTexture);fe.__renderTarget=X,(!fe.__webglTexture||X.depthTexture.image.width!==X.width||X.depthTexture.image.height!==X.height)&&(X.depthTexture.image.width=X.width,X.depthTexture.image.height=X.height,X.depthTexture.needsUpdate=!0),G(X.depthTexture,0);const de=fe.__webglTexture,he=ke(X);if(X.depthTexture.format===ec)ut(X)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,de,0,he):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,de,0);else if(X.depthTexture.format===dc)ut(X)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,de,0,he):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,de,0);else throw new Error("Unknown depthTexture format")}function me(re){const X=r.get(re),te=re.isWebGLCubeRenderTarget===!0;if(X.__boundDepthTexture!==re.depthTexture){const fe=re.depthTexture;if(X.__depthDisposeCallback&&X.__depthDisposeCallback(),fe){const de=()=>{delete X.__boundDepthTexture,delete X.__depthDisposeCallback,fe.removeEventListener("dispose",de)};fe.addEventListener("dispose",de),X.__depthDisposeCallback=de}X.__boundDepthTexture=fe}if(re.depthTexture&&!X.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");ye(X.__webglFramebuffer,re)}else if(te){X.__webglDepthbuffer=[];for(let fe=0;fe<6;fe++)if(n.bindFramebuffer(t.FRAMEBUFFER,X.__webglFramebuffer[fe]),X.__webglDepthbuffer[fe]===void 0)X.__webglDepthbuffer[fe]=t.createRenderbuffer(),se(X.__webglDepthbuffer[fe],re,!1);else{const de=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,he=X.__webglDepthbuffer[fe];t.bindRenderbuffer(t.RENDERBUFFER,he),t.framebufferRenderbuffer(t.FRAMEBUFFER,de,t.RENDERBUFFER,he)}}else if(n.bindFramebuffer(t.FRAMEBUFFER,X.__webglFramebuffer),X.__webglDepthbuffer===void 0)X.__webglDepthbuffer=t.createRenderbuffer(),se(X.__webglDepthbuffer,re,!1);else{const fe=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,de=X.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,de),t.framebufferRenderbuffer(t.FRAMEBUFFER,fe,t.RENDERBUFFER,de)}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Ae(re,X,te){const fe=r.get(re);X!==void 0&&ae(fe.__webglFramebuffer,re,re.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),te!==void 0&&me(re)}function Ue(re){const X=re.texture,te=r.get(re),fe=r.get(X);re.addEventListener("dispose",E);const de=re.textures,he=re.isWebGLCubeRenderTarget===!0,Be=de.length>1;if(Be||(fe.__webglTexture===void 0&&(fe.__webglTexture=t.createTexture()),fe.__version=X.version,a.memory.textures++),he){te.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)if(X.mipmaps&&X.mipmaps.length>0){te.__webglFramebuffer[Ie]=[];for(let Ge=0;Ge<X.mipmaps.length;Ge++)te.__webglFramebuffer[Ie][Ge]=t.createFramebuffer()}else te.__webglFramebuffer[Ie]=t.createFramebuffer()}else{if(X.mipmaps&&X.mipmaps.length>0){te.__webglFramebuffer=[];for(let Ie=0;Ie<X.mipmaps.length;Ie++)te.__webglFramebuffer[Ie]=t.createFramebuffer()}else te.__webglFramebuffer=t.createFramebuffer();if(Be)for(let Ie=0,Ge=de.length;Ie<Ge;Ie++){const xt=r.get(de[Ie]);xt.__webglTexture===void 0&&(xt.__webglTexture=t.createTexture(),a.memory.textures++)}if(re.samples>0&&ut(re)===!1){te.__webglMultisampledFramebuffer=t.createFramebuffer(),te.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let Ie=0;Ie<de.length;Ie++){const Ge=de[Ie];te.__webglColorRenderbuffer[Ie]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,te.__webglColorRenderbuffer[Ie]);const xt=s.convert(Ge.format,Ge.colorSpace),Oe=s.convert(Ge.type),Ke=w(Ge.internalFormat,xt,Oe,Ge.colorSpace,re.isXRRenderTarget===!0),_t=ke(re);t.renderbufferStorageMultisample(t.RENDERBUFFER,_t,Ke,re.width,re.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ie,t.RENDERBUFFER,te.__webglColorRenderbuffer[Ie])}t.bindRenderbuffer(t.RENDERBUFFER,null),re.depthBuffer&&(te.__webglDepthRenderbuffer=t.createRenderbuffer(),se(te.__webglDepthRenderbuffer,re,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(he){n.bindTexture(t.TEXTURE_CUBE_MAP,fe.__webglTexture),W(t.TEXTURE_CUBE_MAP,X);for(let Ie=0;Ie<6;Ie++)if(X.mipmaps&&X.mipmaps.length>0)for(let Ge=0;Ge<X.mipmaps.length;Ge++)ae(te.__webglFramebuffer[Ie][Ge],re,X,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Ge);else ae(te.__webglFramebuffer[Ie],re,X,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0);g(X)&&m(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Be){for(let Ie=0,Ge=de.length;Ie<Ge;Ie++){const xt=de[Ie],Oe=r.get(xt);n.bindTexture(t.TEXTURE_2D,Oe.__webglTexture),W(t.TEXTURE_2D,xt),ae(te.__webglFramebuffer,re,xt,t.COLOR_ATTACHMENT0+Ie,t.TEXTURE_2D,0),g(xt)&&m(t.TEXTURE_2D)}n.unbindTexture()}else{let Ie=t.TEXTURE_2D;if((re.isWebGL3DRenderTarget||re.isWebGLArrayRenderTarget)&&(Ie=re.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Ie,fe.__webglTexture),W(Ie,X),X.mipmaps&&X.mipmaps.length>0)for(let Ge=0;Ge<X.mipmaps.length;Ge++)ae(te.__webglFramebuffer[Ge],re,X,t.COLOR_ATTACHMENT0,Ie,Ge);else ae(te.__webglFramebuffer,re,X,t.COLOR_ATTACHMENT0,Ie,0);g(X)&&m(Ie),n.unbindTexture()}re.depthBuffer&&me(re)}function He(re){const X=re.textures;for(let te=0,fe=X.length;te<fe;te++){const de=X[te];if(g(de)){const he=x(re),Be=r.get(de).__webglTexture;n.bindTexture(he,Be),m(he),n.unbindTexture()}}}const Qe=[],ie=[];function dt(re){if(re.samples>0){if(ut(re)===!1){const X=re.textures,te=re.width,fe=re.height;let de=t.COLOR_BUFFER_BIT;const he=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Be=r.get(re),Ie=X.length>1;if(Ie)for(let Ge=0;Ge<X.length;Ge++)n.bindFramebuffer(t.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ge,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Be.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ge,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Be.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Be.__webglFramebuffer);for(let Ge=0;Ge<X.length;Ge++){if(re.resolveDepthBuffer&&(re.depthBuffer&&(de|=t.DEPTH_BUFFER_BIT),re.stencilBuffer&&re.resolveStencilBuffer&&(de|=t.STENCIL_BUFFER_BIT)),Ie){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Be.__webglColorRenderbuffer[Ge]);const xt=r.get(X[Ge]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,xt,0)}t.blitFramebuffer(0,0,te,fe,0,0,te,fe,de,t.NEAREST),l===!0&&(Qe.length=0,ie.length=0,Qe.push(t.COLOR_ATTACHMENT0+Ge),re.depthBuffer&&re.resolveDepthBuffer===!1&&(Qe.push(he),ie.push(he),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,ie)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Qe))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Ie)for(let Ge=0;Ge<X.length;Ge++){n.bindFramebuffer(t.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ge,t.RENDERBUFFER,Be.__webglColorRenderbuffer[Ge]);const xt=r.get(X[Ge]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Be.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ge,t.TEXTURE_2D,xt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Be.__webglMultisampledFramebuffer)}else if(re.depthBuffer&&re.resolveDepthBuffer===!1&&l){const X=re.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[X])}}}function ke(re){return Math.min(i.maxSamples,re.samples)}function ut(re){const X=r.get(re);return re.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&X.__useRenderToTexture!==!1}function tt(re){const X=a.render.frame;f.get(re)!==X&&(f.set(re,X),re.update())}function Pt(re,X){const te=re.colorSpace,fe=re.format,de=re.type;return re.isCompressedTexture===!0||re.isVideoTexture===!0||te!==hc&&te!==Ba&&(wn.getTransfer(te)===Ln?(fe!==Ki||de!==ua)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),X}function lt(re){return typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement?(u.width=re.naturalWidth||re.width,u.height=re.naturalHeight||re.height):typeof VideoFrame<"u"&&re instanceof VideoFrame?(u.width=re.displayWidth,u.height=re.displayHeight):(u.width=re.width,u.height=re.height),u}this.allocateTextureUnit=V,this.resetTextureUnits=B,this.setTexture2D=G,this.setTexture2DArray=O,this.setTexture3D=y,this.setTextureCube=b,this.rebindTextures=Ae,this.setupRenderTarget=Ue,this.updateRenderTargetMipmap=He,this.updateMultisampleRenderTarget=dt,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=ae,this.useMultisampledRTT=ut}function CQ(t,e){function n(r,i=Ba){let s;const a=wn.getTransfer(i);if(r===ua)return t.UNSIGNED_BYTE;if(r===ib)return t.UNSIGNED_SHORT_4_4_4_4;if(r===sb)return t.UNSIGNED_SHORT_5_5_5_1;if(r===OA)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===IA)return t.BYTE;if(r===LA)return t.SHORT;if(r===ku)return t.UNSIGNED_SHORT;if(r===rb)return t.INT;if(r===qo)return t.UNSIGNED_INT;if(r===ea)return t.FLOAT;if(r===of)return t.HALF_FLOAT;if(r===NA)return t.ALPHA;if(r===DA)return t.RGB;if(r===Ki)return t.RGBA;if(r===kA)return t.LUMINANCE;if(r===FA)return t.LUMINANCE_ALPHA;if(r===ec)return t.DEPTH_COMPONENT;if(r===dc)return t.DEPTH_STENCIL;if(r===UA)return t.RED;if(r===ab)return t.RED_INTEGER;if(r===BA)return t.RG;if(r===ob)return t.RG_INTEGER;if(r===lb)return t.RGBA_INTEGER;if(r===Xd||r===Wd||r===Yd||r===jd)if(a===Ln)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Xd)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Wd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Yd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===jd)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Xd)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Wd)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Yd)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===jd)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Lx||r===Ox||r===Nx||r===Dx)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===Lx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Ox)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Nx)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Dx)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===kx||r===Fx||r===Ux)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===kx||r===Fx)return a===Ln?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===Ux)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Bx||r===$x||r===Vx||r===qx||r===Hx||r===zx||r===Gx||r===Xx||r===Wx||r===Yx||r===jx||r===Zx||r===Kx||r===Jx)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===Bx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===$x)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Vx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===qx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Hx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===zx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Gx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Xx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===Wx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===Yx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===jx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===Zx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Kx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Jx)return a===Ln?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===Zd||r===Qx||r===e2)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===Zd)return a===Ln?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Qx)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===e2)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===$A||r===t2||r===n2||r===r2)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===Zd)return s.COMPRESSED_RED_RGTC1_EXT;if(r===t2)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===n2)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===r2)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===fc?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const TQ={type:"move"};class Iy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new hu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new hu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Re,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Re),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new hu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Re,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Re),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const S of e.hand.values()){const g=n.getJointPose(S,r),m=this._getHandJoint(u,S);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}const f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=f.position.distanceTo(h.position),v=.02,P=.005;u.inputState.pinching&&p>v+P?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=v-P&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(TQ)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new hu;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const AQ=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,MQ=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class RQ{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new ri,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new ja({vertexShader:AQ,fragmentShader:MQ,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Ji(new Jv(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class IQ extends Ac{constructor(e,n){super();const r=this;let i=null,s=1,a=null,o="local-floor",l=1,u=null,f=null,h=null,p=null,v=null,P=null;const S=new RQ,g=n.getContextAttributes();let m=null,x=null;const w=[],C=[],A=new Mn;let M=null;const E=new Wi;E.viewport=new nr;const N=new Wi;N.viewport=new nr;const I=[E,N],L=new JY;let R=null,B=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let K=w[Z];return K===void 0&&(K=new Iy,w[Z]=K),K.getTargetRaySpace()},this.getControllerGrip=function(Z){let K=w[Z];return K===void 0&&(K=new Iy,w[Z]=K),K.getGripSpace()},this.getHand=function(Z){let K=w[Z];return K===void 0&&(K=new Iy,w[Z]=K),K.getHandSpace()};function V(Z){const K=C.indexOf(Z.inputSource);if(K===-1)return;const ae=w[K];ae!==void 0&&(ae.update(Z.inputSource,Z.frame,u||a),ae.dispatchEvent({type:Z.type,data:Z.inputSource}))}function z(){i.removeEventListener("select",V),i.removeEventListener("selectstart",V),i.removeEventListener("selectend",V),i.removeEventListener("squeeze",V),i.removeEventListener("squeezestart",V),i.removeEventListener("squeezeend",V),i.removeEventListener("end",z),i.removeEventListener("inputsourceschange",G);for(let Z=0;Z<w.length;Z++){const K=C[Z];K!==null&&(C[Z]=null,w[Z].disconnect(K))}R=null,B=null,S.reset(),e.setRenderTarget(m),v=null,p=null,h=null,i=null,x=null,ne.stop(),r.isPresenting=!1,e.setPixelRatio(M),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){s=Z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){o=Z,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(Z){u=Z},this.getBaseLayer=function(){return p!==null?p:v},this.getBinding=function(){return h},this.getFrame=function(){return P},this.getSession=function(){return i},this.setSession=async function(Z){if(i=Z,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",V),i.addEventListener("selectstart",V),i.addEventListener("selectend",V),i.addEventListener("squeeze",V),i.addEventListener("squeezestart",V),i.addEventListener("squeezeend",V),i.addEventListener("end",z),i.addEventListener("inputsourceschange",G),g.xrCompatible!==!0&&await n.makeXRCompatible(),M=e.getPixelRatio(),e.getSize(A),i.enabledFeatures!==void 0&&i.enabledFeatures.includes("layers")){let ae=null,se=null,ye=null;g.depth&&(ye=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ae=g.stencil?dc:ec,se=g.stencil?fc:qo);const me={colorFormat:n.RGBA8,depthFormat:ye,scaleFactor:s};h=new XRWebGLBinding(i,n),p=h.createProjectionLayer(me),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),x=new Ho(p.textureWidth,p.textureHeight,{format:Ki,type:ua,depthTexture:new eM(p.textureWidth,p.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}else{const ae={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};v=new XRWebGLLayer(i,n,ae),i.updateRenderState({baseLayer:v}),e.setPixelRatio(1),e.setSize(v.framebufferWidth,v.framebufferHeight,!1),x=new Ho(v.framebufferWidth,v.framebufferHeight,{format:Ki,type:ua,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}x.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await i.requestReferenceSpace(o),ne.setContext(i),ne.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return S.getDepthTexture()};function G(Z){for(let K=0;K<Z.removed.length;K++){const ae=Z.removed[K],se=C.indexOf(ae);se>=0&&(C[se]=null,w[se].disconnect(ae))}for(let K=0;K<Z.added.length;K++){const ae=Z.added[K];let se=C.indexOf(ae);if(se===-1){for(let me=0;me<w.length;me++)if(me>=C.length){C.push(ae),se=me;break}else if(C[me]===null){C[me]=ae,se=me;break}if(se===-1)break}const ye=w[se];ye&&ye.connect(ae)}}const O=new Re,y=new Re;function b(Z,K,ae){O.setFromMatrixPosition(K.matrixWorld),y.setFromMatrixPosition(ae.matrixWorld);const se=O.distanceTo(y),ye=K.projectionMatrix.elements,me=ae.projectionMatrix.elements,Ae=ye[14]/(ye[10]-1),Ue=ye[14]/(ye[10]+1),He=(ye[9]+1)/ye[5],Qe=(ye[9]-1)/ye[5],ie=(ye[8]-1)/ye[0],dt=(me[8]+1)/me[0],ke=Ae*ie,ut=Ae*dt,tt=se/(-ie+dt),Pt=tt*-ie;if(K.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Pt),Z.translateZ(tt),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert(),ye[10]===-1)Z.projectionMatrix.copy(K.projectionMatrix),Z.projectionMatrixInverse.copy(K.projectionMatrixInverse);else{const lt=Ae+tt,re=Ue+tt,X=ke-Pt,te=ut+(se-Pt),fe=He*Ue/re*lt,de=Qe*Ue/re*lt;Z.projectionMatrix.makePerspective(X,te,fe,de,lt,re),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}}function k(Z,K){K===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(K.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(i===null)return;let K=Z.near,ae=Z.far;S.texture!==null&&(S.depthNear>0&&(K=S.depthNear),S.depthFar>0&&(ae=S.depthFar)),L.near=N.near=E.near=K,L.far=N.far=E.far=ae,(R!==L.near||B!==L.far)&&(i.updateRenderState({depthNear:L.near,depthFar:L.far}),R=L.near,B=L.far),E.layers.mask=Z.layers.mask|2,N.layers.mask=Z.layers.mask|4,L.layers.mask=E.layers.mask|N.layers.mask;const se=Z.parent,ye=L.cameras;k(L,se);for(let me=0;me<ye.length;me++)k(ye[me],se);ye.length===2?b(L,E,N):L.projectionMatrix.copy(E.projectionMatrix),F(Z,L,se)};function F(Z,K,ae){ae===null?Z.matrix.copy(K.matrixWorld):(Z.matrix.copy(ae.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(K.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(K.projectionMatrix),Z.projectionMatrixInverse.copy(K.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=i2*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(p===null&&v===null))return l},this.setFoveation=function(Z){l=Z,p!==null&&(p.fixedFoveation=Z),v!==null&&v.fixedFoveation!==void 0&&(v.fixedFoveation=Z)},this.hasDepthSensing=function(){return S.texture!==null},this.getDepthSensingMesh=function(){return S.getMesh(L)};let H=null;function W(Z,K){if(f=K.getViewerPose(u||a),P=K,f!==null){const ae=f.views;v!==null&&(e.setRenderTargetFramebuffer(x,v.framebuffer),e.setRenderTarget(x));let se=!1;ae.length!==L.cameras.length&&(L.cameras.length=0,se=!0);for(let me=0;me<ae.length;me++){const Ae=ae[me];let Ue=null;if(v!==null)Ue=v.getViewport(Ae);else{const Qe=h.getViewSubImage(p,Ae);Ue=Qe.viewport,me===0&&(e.setRenderTargetTextures(x,Qe.colorTexture,p.ignoreDepthValues?void 0:Qe.depthStencilTexture),e.setRenderTarget(x))}let He=I[me];He===void 0&&(He=new Wi,He.layers.enable(me),He.viewport=new nr,I[me]=He),He.matrix.fromArray(Ae.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(Ae.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(Ue.x,Ue.y,Ue.width,Ue.height),me===0&&(L.matrix.copy(He.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),se===!0&&L.cameras.push(He)}const ye=i.enabledFeatures;if(ye&&ye.includes("depth-sensing")){const me=h.getDepthInformation(ae[0]);me&&me.isValid&&me.texture&&S.init(e,me,i.renderState)}}for(let ae=0;ae<w.length;ae++){const se=C[ae],ye=w[ae];se!==null&&ye!==void 0&&ye.update(se,K,u||a)}H&&H(Z,K),K.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:K}),P=null}const ne=new nM;ne.setAnimationLoop(W),this.setAnimationLoop=function(Z){H=Z},this.dispose=function(){}}}const uo=new ts,LQ=new Un;function OQ(t,e){function n(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function r(g,m){m.color.getRGB(g.fogColor.value,KA(t)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function i(g,m,x,w,C){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(g,m):m.isMeshToonMaterial?(s(g,m),h(g,m)):m.isMeshPhongMaterial?(s(g,m),f(g,m)):m.isMeshStandardMaterial?(s(g,m),p(g,m),m.isMeshPhysicalMaterial&&v(g,m,C)):m.isMeshMatcapMaterial?(s(g,m),P(g,m)):m.isMeshDepthMaterial?s(g,m):m.isMeshDistanceMaterial?(s(g,m),S(g,m)):m.isMeshNormalMaterial?s(g,m):m.isLineBasicMaterial?(a(g,m),m.isLineDashedMaterial&&o(g,m)):m.isPointsMaterial?l(g,m,x,w):m.isSpriteMaterial?u(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,n(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,n(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===ni&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,n(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===ni&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,n(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,n(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,n(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const x=e.get(m),w=x.envMap,C=x.envMapRotation;w&&(g.envMap.value=w,uo.copy(C),uo.x*=-1,uo.y*=-1,uo.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(uo.y*=-1,uo.z*=-1),g.envMapRotation.value.setFromMatrix4(LQ.makeRotationFromEuler(uo)),g.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,n(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,n(m.aoMap,g.aoMapTransform))}function a(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,n(m.map,g.mapTransform))}function o(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function l(g,m,x,w){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*x,g.scale.value=w*.5,m.map&&(g.map.value=m.map,n(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,n(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function f(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function h(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function p(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,n(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,n(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function v(g,m,x){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,n(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,n(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,n(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,n(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,n(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===ni&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,n(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,n(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,n(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,n(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,n(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,n(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,n(m.specularIntensityMap,g.specularIntensityMapTransform))}function P(g,m){m.matcap&&(g.matcap.value=m.matcap)}function S(g,m){const x=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function NQ(t,e,n,r){let i={},s={},a=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,w){const C=w.program;r.uniformBlockBinding(x,C)}function u(x,w){let C=i[x.id];C===void 0&&(P(x),C=f(x),i[x.id]=C,x.addEventListener("dispose",g));const A=w.program;r.updateUBOMapping(x,A);const M=e.render.frame;s[x.id]!==M&&(p(x),s[x.id]=M)}function f(x){const w=h();x.__bindingPointIndex=w;const C=t.createBuffer(),A=x.__size,M=x.usage;return t.bindBuffer(t.UNIFORM_BUFFER,C),t.bufferData(t.UNIFORM_BUFFER,A,M),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,C),C}function h(){for(let x=0;x<o;x++)if(a.indexOf(x)===-1)return a.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const w=i[x.id],C=x.uniforms,A=x.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let M=0,E=C.length;M<E;M++){const N=Array.isArray(C[M])?C[M]:[C[M]];for(let I=0,L=N.length;I<L;I++){const R=N[I];if(v(R,M,I,A)===!0){const B=R.__offset,V=Array.isArray(R.value)?R.value:[R.value];let z=0;for(let G=0;G<V.length;G++){const O=V[G],y=S(O);typeof O=="number"||typeof O=="boolean"?(R.__data[0]=O,t.bufferSubData(t.UNIFORM_BUFFER,B+z,R.__data)):O.isMatrix3?(R.__data[0]=O.elements[0],R.__data[1]=O.elements[1],R.__data[2]=O.elements[2],R.__data[3]=0,R.__data[4]=O.elements[3],R.__data[5]=O.elements[4],R.__data[6]=O.elements[5],R.__data[7]=0,R.__data[8]=O.elements[6],R.__data[9]=O.elements[7],R.__data[10]=O.elements[8],R.__data[11]=0):(O.toArray(R.__data,z),z+=y.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,B,R.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function v(x,w,C,A){const M=x.value,E=w+"_"+C;if(A[E]===void 0)return typeof M=="number"||typeof M=="boolean"?A[E]=M:A[E]=M.clone(),!0;{const N=A[E];if(typeof M=="number"||typeof M=="boolean"){if(N!==M)return A[E]=M,!0}else if(N.equals(M)===!1)return N.copy(M),!0}return!1}function P(x){const w=x.uniforms;let C=0;const A=16;for(let E=0,N=w.length;E<N;E++){const I=Array.isArray(w[E])?w[E]:[w[E]];for(let L=0,R=I.length;L<R;L++){const B=I[L],V=Array.isArray(B.value)?B.value:[B.value];for(let z=0,G=V.length;z<G;z++){const O=V[z],y=S(O),b=C%A,k=b%y.boundary,F=b+k;C+=k,F!==0&&A-F<y.storage&&(C+=A-F),B.__data=new Float32Array(y.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=C,C+=y.storage}}}const M=C%A;return M>0&&(C+=A-M),x.__size=C,x.__cache={},this}function S(x){const w={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(w.boundary=4,w.storage=4):x.isVector2?(w.boundary=8,w.storage=8):x.isVector3||x.isColor?(w.boundary=16,w.storage=12):x.isVector4?(w.boundary=16,w.storage=16):x.isMatrix3?(w.boundary=48,w.storage=48):x.isMatrix4?(w.boundary=64,w.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),w}function g(x){const w=x.target;w.removeEventListener("dispose",g);const C=a.indexOf(w.__bindingPointIndex);a.splice(C,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function m(){for(const x in i)t.deleteBuffer(i[x]);a=[],i={},s={}}return{bind:l,update:u,dispose:m}}class DQ{constructor(e={}){const{canvas:n=gY(),context:r=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let v;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");v=r.getContextAttributes().alpha}else v=a;const P=new Uint32Array(4),S=new Int32Array(4);let g=null,m=null;const x=[],w=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pi,this.toneMapping=Ga,this.toneMappingExposure=1;const C=this;let A=!1,M=0,E=0,N=null,I=-1,L=null;const R=new nr,B=new nr;let V=null;const z=new Cn(0);let G=0,O=n.width,y=n.height,b=1,k=null,F=null;const H=new nr(0,0,O,y),W=new nr(0,0,O,y);let ne=!1;const Z=new ub;let K=!1,ae=!1;this.transmissionResolutionScale=1;const se=new Un,ye=new Un,me=new Re,Ae=new nr,Ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let He=!1;function Qe(){return N===null?b:1}let ie=r;function dt(J,_e){return n.getContext(J,_e)}try{const J={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${nb}`),n.addEventListener("webglcontextlost",Le,!1),n.addEventListener("webglcontextrestored",ze,!1),n.addEventListener("webglcontextcreationerror",ft,!1),ie===null){const _e="webgl2";if(ie=dt(_e,J),ie===null)throw dt(_e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(J){throw console.error("THREE.WebGLRenderer: "+J.message),J}let ke,ut,tt,Pt,lt,re,X,te,fe,de,he,Be,Ie,Ge,xt,Oe,Ke,_t,ve,ge,we,Me,Ze,le;function $e(){ke=new zK(ie),ke.init(),Me=new CQ(ie,ke),ut=new UK(ie,ke,e,Me),tt=new PQ(ie,ke),ut.reverseDepthBuffer&&p&&tt.buffers.depth.setReversed(!0),Pt=new WK(ie),lt=new fQ,re=new EQ(ie,ke,tt,lt,ut,Me,Pt),X=new $K(C),te=new HK(C),fe=new ej(ie),Ze=new kK(ie,fe),de=new GK(ie,fe,Pt,Ze),he=new jK(ie,de,fe,Pt),ve=new YK(ie,ut,re),Oe=new BK(lt),Be=new uQ(C,X,te,ke,ut,Ze,Oe),Ie=new OQ(C,lt),Ge=new hQ,xt=new _Q(ke),_t=new DK(C,X,te,tt,he,v,l),Ke=new wQ(C,he,ut),le=new NQ(ie,Pt,ut,tt),ge=new FK(ie,ke,Pt),we=new XK(ie,ke,Pt),Pt.programs=Be.programs,C.capabilities=ut,C.extensions=ke,C.properties=lt,C.renderLists=Ge,C.shadowMap=Ke,C.state=tt,C.info=Pt}$e();const be=new IQ(C,ie);this.xr=be,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const J=ke.get("WEBGL_lose_context");J&&J.loseContext()},this.forceContextRestore=function(){const J=ke.get("WEBGL_lose_context");J&&J.restoreContext()},this.getPixelRatio=function(){return b},this.setPixelRatio=function(J){J!==void 0&&(b=J,this.setSize(O,y,!1))},this.getSize=function(J){return J.set(O,y)},this.setSize=function(J,_e,Pe=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=J,y=_e,n.width=Math.floor(J*b),n.height=Math.floor(_e*b),Pe===!0&&(n.style.width=J+"px",n.style.height=_e+"px"),this.setViewport(0,0,J,_e)},this.getDrawingBufferSize=function(J){return J.set(O*b,y*b).floor()},this.setDrawingBufferSize=function(J,_e,Pe){O=J,y=_e,b=Pe,n.width=Math.floor(J*Pe),n.height=Math.floor(_e*Pe),this.setViewport(0,0,J,_e)},this.getCurrentViewport=function(J){return J.copy(R)},this.getViewport=function(J){return J.copy(H)},this.setViewport=function(J,_e,Pe,Te){J.isVector4?H.set(J.x,J.y,J.z,J.w):H.set(J,_e,Pe,Te),tt.viewport(R.copy(H).multiplyScalar(b).round())},this.getScissor=function(J){return J.copy(W)},this.setScissor=function(J,_e,Pe,Te){J.isVector4?W.set(J.x,J.y,J.z,J.w):W.set(J,_e,Pe,Te),tt.scissor(B.copy(W).multiplyScalar(b).round())},this.getScissorTest=function(){return ne},this.setScissorTest=function(J){tt.setScissorTest(ne=J)},this.setOpaqueSort=function(J){k=J},this.setTransparentSort=function(J){F=J},this.getClearColor=function(J){return J.copy(_t.getClearColor())},this.setClearColor=function(){_t.setClearColor.apply(_t,arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha.apply(_t,arguments)},this.clear=function(J=!0,_e=!0,Pe=!0){let Te=0;if(J){let xe=!1;if(N!==null){const nt=N.texture.format;xe=nt===lb||nt===ob||nt===ab}if(xe){const nt=N.texture.type,mt=nt===ua||nt===qo||nt===ku||nt===fc||nt===ib||nt===sb,wt=_t.getClearColor(),St=_t.getClearAlpha(),Bt=wt.r,Ut=wt.g,Ot=wt.b;mt?(P[0]=Bt,P[1]=Ut,P[2]=Ot,P[3]=St,ie.clearBufferuiv(ie.COLOR,0,P)):(S[0]=Bt,S[1]=Ut,S[2]=Ot,S[3]=St,ie.clearBufferiv(ie.COLOR,0,S))}else Te|=ie.COLOR_BUFFER_BIT}_e&&(Te|=ie.DEPTH_BUFFER_BIT),Pe&&(Te|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(Te)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Le,!1),n.removeEventListener("webglcontextrestored",ze,!1),n.removeEventListener("webglcontextcreationerror",ft,!1),_t.dispose(),Ge.dispose(),xt.dispose(),lt.dispose(),X.dispose(),te.dispose(),he.dispose(),Ze.dispose(),le.dispose(),Be.dispose(),be.dispose(),be.removeEventListener("sessionstart",ss),be.removeEventListener("sessionend",Ns),yi.stop()};function Le(J){J.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function ze(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const J=Pt.autoReset,_e=Ke.enabled,Pe=Ke.autoUpdate,Te=Ke.needsUpdate,xe=Ke.type;$e(),Pt.autoReset=J,Ke.enabled=_e,Ke.autoUpdate=Pe,Ke.needsUpdate=Te,Ke.type=xe}function ft(J){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",J.statusMessage)}function Rt(J){const _e=J.target;_e.removeEventListener("dispose",Rt),on(_e)}function on(J){Wn(J),lt.remove(J)}function Wn(J){const _e=lt.get(J).programs;_e!==void 0&&(_e.forEach(function(Pe){Be.releaseProgram(Pe)}),J.isShaderMaterial&&Be.releaseShaderCache(J))}this.renderBufferDirect=function(J,_e,Pe,Te,xe,nt){_e===null&&(_e=Ue);const mt=xe.isMesh&&xe.matrixWorld.determinant()<0,wt=Nc(J,_e,Pe,Te,xe);tt.setMaterial(Te,mt);let St=Pe.index,Bt=1;if(Te.wireframe===!0){if(St=de.getWireframeAttribute(Pe),St===void 0)return;Bt=2}const Ut=Pe.drawRange,Ot=Pe.attributes.position;let Ft=Ut.start*Bt,vn=(Ut.start+Ut.count)*Bt;nt!==null&&(Ft=Math.max(Ft,nt.start*Bt),vn=Math.min(vn,(nt.start+nt.count)*Bt)),St!==null?(Ft=Math.max(Ft,0),vn=Math.min(vn,St.count)):Ot!=null&&(Ft=Math.max(Ft,0),vn=Math.min(vn,Ot.count));const Yn=vn-Ft;if(Yn<0||Yn===1/0)return;Ze.setup(xe,Te,wt,Pe,St);let Rn,yt=ge;if(St!==null&&(Rn=fe.get(St),yt=we,yt.setIndex(Rn)),xe.isMesh)Te.wireframe===!0?(tt.setLineWidth(Te.wireframeLinewidth*Qe()),yt.setMode(ie.LINES)):yt.setMode(ie.TRIANGLES);else if(xe.isLine){let Nt=Te.linewidth;Nt===void 0&&(Nt=1),tt.setLineWidth(Nt*Qe()),xe.isLineSegments?yt.setMode(ie.LINES):xe.isLineLoop?yt.setMode(ie.LINE_LOOP):yt.setMode(ie.LINE_STRIP)}else xe.isPoints?yt.setMode(ie.POINTS):xe.isSprite&&yt.setMode(ie.TRIANGLES);if(xe.isBatchedMesh)if(xe._multiDrawInstances!==null)yt.renderMultiDrawInstances(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount,xe._multiDrawInstances);else if(ke.get("WEBGL_multi_draw"))yt.renderMultiDraw(xe._multiDrawStarts,xe._multiDrawCounts,xe._multiDrawCount);else{const Nt=xe._multiDrawStarts,Bn=xe._multiDrawCounts,cn=xe._multiDrawCount,Ir=St?fe.get(St).bytesPerElement:1,Di=lt.get(Te).currentProgram.getUniforms();for(let c=0;c<cn;c++)Di.setValue(ie,"_gl_DrawID",c),yt.render(Nt[c]/Ir,Bn[c])}else if(xe.isInstancedMesh)yt.renderInstances(Ft,Yn,xe.count);else if(Pe.isInstancedBufferGeometry){const Nt=Pe._maxInstanceCount!==void 0?Pe._maxInstanceCount:1/0,Bn=Math.min(Pe.instanceCount,Nt);yt.renderInstances(Ft,Yn,Bn)}else yt.render(Ft,Yn)};function Jt(J,_e,Pe){J.transparent===!0&&J.side===Zs&&J.forceSinglePass===!1?(J.side=ni,J.needsUpdate=!0,os(J,_e,Pe),J.side=Ya,J.needsUpdate=!0,os(J,_e,Pe),J.side=Zs):os(J,_e,Pe)}this.compile=function(J,_e,Pe=null){Pe===null&&(Pe=J),m=xt.get(Pe),m.init(_e),w.push(m),Pe.traverseVisible(function(xe){xe.isLight&&xe.layers.test(_e.layers)&&(m.pushLight(xe),xe.castShadow&&m.pushShadow(xe))}),J!==Pe&&J.traverseVisible(function(xe){xe.isLight&&xe.layers.test(_e.layers)&&(m.pushLight(xe),xe.castShadow&&m.pushShadow(xe))}),m.setupLights();const Te=new Set;return J.traverse(function(xe){if(!(xe.isMesh||xe.isPoints||xe.isLine||xe.isSprite))return;const nt=xe.material;if(nt)if(Array.isArray(nt))for(let mt=0;mt<nt.length;mt++){const wt=nt[mt];Jt(wt,Pe,xe),Te.add(wt)}else Jt(nt,Pe,xe),Te.add(nt)}),w.pop(),m=null,Te},this.compileAsync=function(J,_e,Pe=null){const Te=this.compile(J,_e,Pe);return new Promise(xe=>{function nt(){if(Te.forEach(function(mt){lt.get(mt).currentProgram.isReady()&&Te.delete(mt)}),Te.size===0){xe(J);return}setTimeout(nt,10)}ke.get("KHR_parallel_shader_compile")!==null?nt():setTimeout(nt,10)})};let Qn=null;function vr(J){Qn&&Qn(J)}function ss(){yi.stop()}function Ns(){yi.start()}const yi=new nM;yi.setAnimationLoop(vr),typeof self<"u"&&yi.setContext(self),this.setAnimationLoop=function(J){Qn=J,be.setAnimationLoop(J),J===null?yi.stop():yi.start()},be.addEventListener("sessionstart",ss),be.addEventListener("sessionend",Ns),this.render=function(J,_e){if(_e!==void 0&&_e.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;if(J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),_e.parent===null&&_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(_e),_e=be.getCamera()),J.isScene===!0&&J.onBeforeRender(C,J,_e,N),m=xt.get(J,w.length),m.init(_e),w.push(m),ye.multiplyMatrices(_e.projectionMatrix,_e.matrixWorldInverse),Z.setFromProjectionMatrix(ye),ae=this.localClippingEnabled,K=Oe.init(this.clippingPlanes,ae),g=Ge.get(J,x.length),g.init(),x.push(g),be.enabled===!0&&be.isPresenting===!0){const nt=C.xr.getDepthSensingMesh();nt!==null&&da(nt,_e,-1/0,C.sortObjects)}da(J,_e,0,C.sortObjects),g.finish(),C.sortObjects===!0&&g.sort(k,F),He=be.enabled===!1||be.isPresenting===!1||be.hasDepthSensing()===!1,He&&_t.addToRenderList(g,J),this.info.render.frame++,K===!0&&Oe.beginShadows();const Pe=m.state.shadowsArray;Ke.render(Pe,J,_e),K===!0&&Oe.endShadows(),this.info.autoReset===!0&&this.info.reset();const Te=g.opaque,xe=g.transmissive;if(m.setupLights(),_e.isArrayCamera){const nt=_e.cameras;if(xe.length>0)for(let mt=0,wt=nt.length;mt<wt;mt++){const St=nt[mt];Jo(Te,xe,J,St)}He&&_t.render(J);for(let mt=0,wt=nt.length;mt<wt;mt++){const St=nt[mt];no(g,J,St,St.viewport)}}else xe.length>0&&Jo(Te,xe,J,_e),He&&_t.render(J),no(g,J,_e);N!==null&&E===0&&(re.updateMultisampleRenderTarget(N),re.updateRenderTargetMipmap(N)),J.isScene===!0&&J.onAfterRender(C,J,_e),Ze.resetDefaultState(),I=-1,L=null,w.pop(),w.length>0?(m=w[w.length-1],K===!0&&Oe.setGlobalState(C.clippingPlanes,m.state.camera)):m=null,x.pop(),x.length>0?g=x[x.length-1]:g=null};function da(J,_e,Pe,Te){if(J.visible===!1)return;if(J.layers.test(_e.layers)){if(J.isGroup)Pe=J.renderOrder;else if(J.isLOD)J.autoUpdate===!0&&J.update(_e);else if(J.isLight)m.pushLight(J),J.castShadow&&m.pushShadow(J);else if(J.isSprite){if(!J.frustumCulled||Z.intersectsSprite(J)){Te&&Ae.setFromMatrixPosition(J.matrixWorld).applyMatrix4(ye);const mt=he.update(J),wt=J.material;wt.visible&&g.push(J,mt,wt,Pe,Ae.z,null)}}else if((J.isMesh||J.isLine||J.isPoints)&&(!J.frustumCulled||Z.intersectsObject(J))){const mt=he.update(J),wt=J.material;if(Te&&(J.boundingSphere!==void 0?(J.boundingSphere===null&&J.computeBoundingSphere(),Ae.copy(J.boundingSphere.center)):(mt.boundingSphere===null&&mt.computeBoundingSphere(),Ae.copy(mt.boundingSphere.center)),Ae.applyMatrix4(J.matrixWorld).applyMatrix4(ye)),Array.isArray(wt)){const St=mt.groups;for(let Bt=0,Ut=St.length;Bt<Ut;Bt++){const Ot=St[Bt],Ft=wt[Ot.materialIndex];Ft&&Ft.visible&&g.push(J,mt,Ft,Pe,Ae.z,Ot)}}else wt.visible&&g.push(J,mt,wt,Pe,Ae.z,null)}}const nt=J.children;for(let mt=0,wt=nt.length;mt<wt;mt++)da(nt[mt],_e,Pe,Te)}function no(J,_e,Pe,Te){const xe=J.opaque,nt=J.transmissive,mt=J.transparent;m.setupLightsView(Pe),K===!0&&Oe.setGlobalState(C.clippingPlanes,Pe),Te&&tt.viewport(R.copy(Te)),xe.length>0&&ha(xe,_e,Pe),nt.length>0&&ha(nt,_e,Pe),mt.length>0&&ha(mt,_e,Pe),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1)}function Jo(J,_e,Pe,Te){if((Pe.isScene===!0?Pe.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[Te.id]===void 0&&(m.state.transmissionRenderTarget[Te.id]=new Ho(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")||ke.has("EXT_color_buffer_float")?of:ua,minFilter:Lo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:wn.workingColorSpace}));const nt=m.state.transmissionRenderTarget[Te.id],mt=Te.viewport||R;nt.setSize(mt.z*C.transmissionResolutionScale,mt.w*C.transmissionResolutionScale);const wt=C.getRenderTarget();C.setRenderTarget(nt),C.getClearColor(z),G=C.getClearAlpha(),G<1&&C.setClearColor(16777215,.5),C.clear(),He&&_t.render(Pe);const St=C.toneMapping;C.toneMapping=Ga;const Bt=Te.viewport;if(Te.viewport!==void 0&&(Te.viewport=void 0),m.setupLightsView(Te),K===!0&&Oe.setGlobalState(C.clippingPlanes,Te),ha(J,Pe,Te),re.updateMultisampleRenderTarget(nt),re.updateRenderTargetMipmap(nt),ke.has("WEBGL_multisampled_render_to_texture")===!1){let Ut=!1;for(let Ot=0,Ft=_e.length;Ot<Ft;Ot++){const vn=_e[Ot],Yn=vn.object,Rn=vn.geometry,yt=vn.material,Nt=vn.group;if(yt.side===Zs&&Yn.layers.test(Te.layers)){const Bn=yt.side;yt.side=ni,yt.needsUpdate=!0,as(Yn,Pe,Te,Rn,yt,Nt),yt.side=Bn,yt.needsUpdate=!0,Ut=!0}}Ut===!0&&(re.updateMultisampleRenderTarget(nt),re.updateRenderTargetMipmap(nt))}C.setRenderTarget(wt),C.setClearColor(z,G),Bt!==void 0&&(Te.viewport=Bt),C.toneMapping=St}function ha(J,_e,Pe){const Te=_e.isScene===!0?_e.overrideMaterial:null;for(let xe=0,nt=J.length;xe<nt;xe++){const mt=J[xe],wt=mt.object,St=mt.geometry,Bt=Te===null?mt.material:Te,Ut=mt.group;wt.layers.test(Pe.layers)&&as(wt,_e,Pe,St,Bt,Ut)}}function as(J,_e,Pe,Te,xe,nt){J.onBeforeRender(C,_e,Pe,Te,xe,nt),J.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,J.matrixWorld),J.normalMatrix.getNormalMatrix(J.modelViewMatrix),xe.onBeforeRender(C,_e,Pe,Te,J,nt),xe.transparent===!0&&xe.side===Zs&&xe.forceSinglePass===!1?(xe.side=ni,xe.needsUpdate=!0,C.renderBufferDirect(Pe,_e,Te,xe,J,nt),xe.side=Ya,xe.needsUpdate=!0,C.renderBufferDirect(Pe,_e,Te,xe,J,nt),xe.side=Zs):C.renderBufferDirect(Pe,_e,Te,xe,J,nt),J.onAfterRender(C,_e,Pe,Te,xe,nt)}function os(J,_e,Pe){_e.isScene!==!0&&(_e=Ue);const Te=lt.get(J),xe=m.state.lights,nt=m.state.shadowsArray,mt=xe.state.version,wt=Be.getParameters(J,xe.state,nt,_e,Pe),St=Be.getProgramCacheKey(wt);let Bt=Te.programs;Te.environment=J.isMeshStandardMaterial?_e.environment:null,Te.fog=_e.fog,Te.envMap=(J.isMeshStandardMaterial?te:X).get(J.envMap||Te.environment),Te.envMapRotation=Te.environment!==null&&J.envMap===null?_e.environmentRotation:J.envMapRotation,Bt===void 0&&(J.addEventListener("dispose",Rt),Bt=new Map,Te.programs=Bt);let Ut=Bt.get(St);if(Ut!==void 0){if(Te.currentProgram===Ut&&Te.lightsStateVersion===mt)return Qo(J,wt),Ut}else wt.uniforms=Be.getUniforms(J),J.onBeforeCompile(wt,C),Ut=Be.acquireProgram(wt,St),Bt.set(St,Ut),Te.uniforms=wt.uniforms;const Ot=Te.uniforms;return(!J.isShaderMaterial&&!J.isRawShaderMaterial||J.clipping===!0)&&(Ot.clippingPlanes=Oe.uniform),Qo(J,wt),Te.needsLights=el(J),Te.lightsStateVersion=mt,Te.needsLights&&(Ot.ambientLightColor.value=xe.state.ambient,Ot.lightProbe.value=xe.state.probe,Ot.directionalLights.value=xe.state.directional,Ot.directionalLightShadows.value=xe.state.directionalShadow,Ot.spotLights.value=xe.state.spot,Ot.spotLightShadows.value=xe.state.spotShadow,Ot.rectAreaLights.value=xe.state.rectArea,Ot.ltc_1.value=xe.state.rectAreaLTC1,Ot.ltc_2.value=xe.state.rectAreaLTC2,Ot.pointLights.value=xe.state.point,Ot.pointLightShadows.value=xe.state.pointShadow,Ot.hemisphereLights.value=xe.state.hemi,Ot.directionalShadowMap.value=xe.state.directionalShadowMap,Ot.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,Ot.spotShadowMap.value=xe.state.spotShadowMap,Ot.spotLightMatrix.value=xe.state.spotLightMatrix,Ot.spotLightMap.value=xe.state.spotLightMap,Ot.pointShadowMap.value=xe.state.pointShadowMap,Ot.pointShadowMatrix.value=xe.state.pointShadowMatrix),Te.currentProgram=Ut,Te.uniformsList=null,Ut}function ls(J){if(J.uniformsList===null){const _e=J.currentProgram.getUniforms();J.uniformsList=Kd.seqWithValue(_e.seq,J.uniforms)}return J.uniformsList}function Qo(J,_e){const Pe=lt.get(J);Pe.outputColorSpace=_e.outputColorSpace,Pe.batching=_e.batching,Pe.batchingColor=_e.batchingColor,Pe.instancing=_e.instancing,Pe.instancingColor=_e.instancingColor,Pe.instancingMorph=_e.instancingMorph,Pe.skinning=_e.skinning,Pe.morphTargets=_e.morphTargets,Pe.morphNormals=_e.morphNormals,Pe.morphColors=_e.morphColors,Pe.morphTargetsCount=_e.morphTargetsCount,Pe.numClippingPlanes=_e.numClippingPlanes,Pe.numIntersection=_e.numClipIntersection,Pe.vertexAlphas=_e.vertexAlphas,Pe.vertexTangents=_e.vertexTangents,Pe.toneMapping=_e.toneMapping}function Nc(J,_e,Pe,Te,xe){_e.isScene!==!0&&(_e=Ue),re.resetTextureUnits();const nt=_e.fog,mt=Te.isMeshStandardMaterial?_e.environment:null,wt=N===null?C.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:hc,St=(Te.isMeshStandardMaterial?te:X).get(Te.envMap||mt),Bt=Te.vertexColors===!0&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,Ut=!!Pe.attributes.tangent&&(!!Te.normalMap||Te.anisotropy>0),Ot=!!Pe.morphAttributes.position,Ft=!!Pe.morphAttributes.normal,vn=!!Pe.morphAttributes.color;let Yn=Ga;Te.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Yn=C.toneMapping);const Rn=Pe.morphAttributes.position||Pe.morphAttributes.normal||Pe.morphAttributes.color,yt=Rn!==void 0?Rn.length:0,Nt=lt.get(Te),Bn=m.state.lights;if(K===!0&&(ae===!0||J!==L)){const q=J===L&&Te.id===I;Oe.setState(Te,J,q)}let cn=!1;Te.version===Nt.__version?(Nt.needsLights&&Nt.lightsStateVersion!==Bn.state.version||Nt.outputColorSpace!==wt||xe.isBatchedMesh&&Nt.batching===!1||!xe.isBatchedMesh&&Nt.batching===!0||xe.isBatchedMesh&&Nt.batchingColor===!0&&xe.colorTexture===null||xe.isBatchedMesh&&Nt.batchingColor===!1&&xe.colorTexture!==null||xe.isInstancedMesh&&Nt.instancing===!1||!xe.isInstancedMesh&&Nt.instancing===!0||xe.isSkinnedMesh&&Nt.skinning===!1||!xe.isSkinnedMesh&&Nt.skinning===!0||xe.isInstancedMesh&&Nt.instancingColor===!0&&xe.instanceColor===null||xe.isInstancedMesh&&Nt.instancingColor===!1&&xe.instanceColor!==null||xe.isInstancedMesh&&Nt.instancingMorph===!0&&xe.morphTexture===null||xe.isInstancedMesh&&Nt.instancingMorph===!1&&xe.morphTexture!==null||Nt.envMap!==St||Te.fog===!0&&Nt.fog!==nt||Nt.numClippingPlanes!==void 0&&(Nt.numClippingPlanes!==Oe.numPlanes||Nt.numIntersection!==Oe.numIntersection)||Nt.vertexAlphas!==Bt||Nt.vertexTangents!==Ut||Nt.morphTargets!==Ot||Nt.morphNormals!==Ft||Nt.morphColors!==vn||Nt.toneMapping!==Yn||Nt.morphTargetsCount!==yt)&&(cn=!0):(cn=!0,Nt.__version=Te.version);let Ir=Nt.currentProgram;cn===!0&&(Ir=os(Te,_e,xe));let Di=!1,c=!1,d=!1;const _=Ir.getUniforms(),T=Nt.uniforms;if(tt.useProgram(Ir.program)&&(Di=!0,c=!0,d=!0),Te.id!==I&&(I=Te.id,c=!0),Di||L!==J){tt.buffers.depth.getReversed()?(se.copy(J.projectionMatrix),_Y(se),xY(se),_.setValue(ie,"projectionMatrix",se)):_.setValue(ie,"projectionMatrix",J.projectionMatrix),_.setValue(ie,"viewMatrix",J.matrixWorldInverse);const Y=_.map.cameraPosition;Y!==void 0&&Y.setValue(ie,me.setFromMatrixPosition(J.matrixWorld)),ut.logarithmicDepthBuffer&&_.setValue(ie,"logDepthBufFC",2/(Math.log(J.far+1)/Math.LN2)),(Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshLambertMaterial||Te.isMeshBasicMaterial||Te.isMeshStandardMaterial||Te.isShaderMaterial)&&_.setValue(ie,"isOrthographic",J.isOrthographicCamera===!0),L!==J&&(L=J,c=!0,d=!0)}if(xe.isSkinnedMesh){_.setOptional(ie,xe,"bindMatrix"),_.setOptional(ie,xe,"bindMatrixInverse");const q=xe.skeleton;q&&(q.boneTexture===null&&q.computeBoneTexture(),_.setValue(ie,"boneTexture",q.boneTexture,re))}xe.isBatchedMesh&&(_.setOptional(ie,xe,"batchingTexture"),_.setValue(ie,"batchingTexture",xe._matricesTexture,re),_.setOptional(ie,xe,"batchingIdTexture"),_.setValue(ie,"batchingIdTexture",xe._indirectTexture,re),_.setOptional(ie,xe,"batchingColorTexture"),xe._colorsTexture!==null&&_.setValue(ie,"batchingColorTexture",xe._colorsTexture,re));const D=Pe.morphAttributes;if((D.position!==void 0||D.normal!==void 0||D.color!==void 0)&&ve.update(xe,Pe,Ir),(c||Nt.receiveShadow!==xe.receiveShadow)&&(Nt.receiveShadow=xe.receiveShadow,_.setValue(ie,"receiveShadow",xe.receiveShadow)),Te.isMeshGouraudMaterial&&Te.envMap!==null&&(T.envMap.value=St,T.flipEnvMap.value=St.isCubeTexture&&St.isRenderTargetTexture===!1?-1:1),Te.isMeshStandardMaterial&&Te.envMap===null&&_e.environment!==null&&(T.envMapIntensity.value=_e.environmentIntensity),c&&(_.setValue(ie,"toneMappingExposure",C.toneMappingExposure),Nt.needsLights&&si(T,d),nt&&Te.fog===!0&&Ie.refreshFogUniforms(T,nt),Ie.refreshMaterialUniforms(T,Te,b,y,m.state.transmissionRenderTarget[J.id]),Kd.upload(ie,ls(Nt),T,re)),Te.isShaderMaterial&&Te.uniformsNeedUpdate===!0&&(Kd.upload(ie,ls(Nt),T,re),Te.uniformsNeedUpdate=!1),Te.isSpriteMaterial&&_.setValue(ie,"center",xe.center),_.setValue(ie,"modelViewMatrix",xe.modelViewMatrix),_.setValue(ie,"normalMatrix",xe.normalMatrix),_.setValue(ie,"modelMatrix",xe.matrixWorld),Te.isShaderMaterial||Te.isRawShaderMaterial){const q=Te.uniformsGroups;for(let Y=0,ce=q.length;Y<ce;Y++){const ue=q[Y];le.update(ue,Ir),le.bind(ue,Ir)}}return Ir}function si(J,_e){J.ambientLightColor.needsUpdate=_e,J.lightProbe.needsUpdate=_e,J.directionalLights.needsUpdate=_e,J.directionalLightShadows.needsUpdate=_e,J.pointLights.needsUpdate=_e,J.pointLightShadows.needsUpdate=_e,J.spotLights.needsUpdate=_e,J.spotLightShadows.needsUpdate=_e,J.rectAreaLights.needsUpdate=_e,J.hemisphereLights.needsUpdate=_e}function el(J){return J.isMeshLambertMaterial||J.isMeshToonMaterial||J.isMeshPhongMaterial||J.isMeshStandardMaterial||J.isShadowMaterial||J.isShaderMaterial&&J.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(J,_e,Pe){lt.get(J.texture).__webglTexture=_e,lt.get(J.depthTexture).__webglTexture=Pe;const Te=lt.get(J);Te.__hasExternalTextures=!0,Te.__autoAllocateDepthBuffer=Pe===void 0,Te.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Te.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(J,_e){const Pe=lt.get(J);Pe.__webglFramebuffer=_e,Pe.__useDefaultFramebuffer=_e===void 0};const Dc=ie.createFramebuffer();this.setRenderTarget=function(J,_e=0,Pe=0){N=J,M=_e,E=Pe;let Te=!0,xe=null,nt=!1,mt=!1;if(J){const St=lt.get(J);if(St.__useDefaultFramebuffer!==void 0)tt.bindFramebuffer(ie.FRAMEBUFFER,null),Te=!1;else if(St.__webglFramebuffer===void 0)re.setupRenderTarget(J);else if(St.__hasExternalTextures)re.rebindTextures(J,lt.get(J.texture).__webglTexture,lt.get(J.depthTexture).__webglTexture);else if(J.depthBuffer){const Ot=J.depthTexture;if(St.__boundDepthTexture!==Ot){if(Ot!==null&&lt.has(Ot)&&(J.width!==Ot.image.width||J.height!==Ot.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");re.setupDepthRenderbuffer(J)}}const Bt=J.texture;(Bt.isData3DTexture||Bt.isDataArrayTexture||Bt.isCompressedArrayTexture)&&(mt=!0);const Ut=lt.get(J).__webglFramebuffer;J.isWebGLCubeRenderTarget?(Array.isArray(Ut[_e])?xe=Ut[_e][Pe]:xe=Ut[_e],nt=!0):J.samples>0&&re.useMultisampledRTT(J)===!1?xe=lt.get(J).__webglMultisampledFramebuffer:Array.isArray(Ut)?xe=Ut[Pe]:xe=Ut,R.copy(J.viewport),B.copy(J.scissor),V=J.scissorTest}else R.copy(H).multiplyScalar(b).floor(),B.copy(W).multiplyScalar(b).floor(),V=ne;if(Pe!==0&&(xe=Dc),tt.bindFramebuffer(ie.FRAMEBUFFER,xe)&&Te&&tt.drawBuffers(J,xe),tt.viewport(R),tt.scissor(B),tt.setScissorTest(V),nt){const St=lt.get(J.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+_e,St.__webglTexture,Pe)}else if(mt){const St=lt.get(J.texture),Bt=_e;ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,St.__webglTexture,Pe,Bt)}else if(J!==null&&Pe!==0){const St=lt.get(J.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,St.__webglTexture,Pe)}I=-1},this.readRenderTargetPixels=function(J,_e,Pe,Te,xe,nt,mt){if(!(J&&J.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let wt=lt.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&mt!==void 0&&(wt=wt[mt]),wt){tt.bindFramebuffer(ie.FRAMEBUFFER,wt);try{const St=J.texture,Bt=St.format,Ut=St.type;if(!ut.textureFormatReadable(Bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ut.textureTypeReadable(Ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_e>=0&&_e<=J.width-Te&&Pe>=0&&Pe<=J.height-xe&&ie.readPixels(_e,Pe,Te,xe,Me.convert(Bt),Me.convert(Ut),nt)}finally{const St=N!==null?lt.get(N).__webglFramebuffer:null;tt.bindFramebuffer(ie.FRAMEBUFFER,St)}}},this.readRenderTargetPixelsAsync=async function(J,_e,Pe,Te,xe,nt,mt){if(!(J&&J.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let wt=lt.get(J).__webglFramebuffer;if(J.isWebGLCubeRenderTarget&&mt!==void 0&&(wt=wt[mt]),wt){const St=J.texture,Bt=St.format,Ut=St.type;if(!ut.textureFormatReadable(Bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(_e>=0&&_e<=J.width-Te&&Pe>=0&&Pe<=J.height-xe){tt.bindFramebuffer(ie.FRAMEBUFFER,wt);const Ot=ie.createBuffer();ie.bindBuffer(ie.PIXEL_PACK_BUFFER,Ot),ie.bufferData(ie.PIXEL_PACK_BUFFER,nt.byteLength,ie.STREAM_READ),ie.readPixels(_e,Pe,Te,xe,Me.convert(Bt),Me.convert(Ut),0);const Ft=N!==null?lt.get(N).__webglFramebuffer:null;tt.bindFramebuffer(ie.FRAMEBUFFER,Ft);const vn=ie.fenceSync(ie.SYNC_GPU_COMMANDS_COMPLETE,0);return ie.flush(),await yY(ie,vn,4),ie.bindBuffer(ie.PIXEL_PACK_BUFFER,Ot),ie.getBufferSubData(ie.PIXEL_PACK_BUFFER,0,nt),ie.deleteBuffer(Ot),ie.deleteSync(vn),nt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(J,_e=null,Pe=0){J.isTexture!==!0&&(Fl("WebGLRenderer: copyFramebufferToTexture function signature has changed."),_e=arguments[0]||null,J=arguments[1]);const Te=Math.pow(2,-Pe),xe=Math.floor(J.image.width*Te),nt=Math.floor(J.image.height*Te),mt=_e!==null?_e.x:0,wt=_e!==null?_e.y:0;re.setTexture2D(J,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,Pe,0,0,mt,wt,xe,nt),tt.unbindTexture()};const pa=ie.createFramebuffer(),kc=ie.createFramebuffer();this.copyTextureToTexture=function(J,_e,Pe=null,Te=null,xe=0,nt=null){J.isTexture!==!0&&(Fl("WebGLRenderer: copyTextureToTexture function signature has changed."),Te=arguments[0]||null,J=arguments[1],_e=arguments[2],nt=arguments[3]||0,Pe=null),nt===null&&(xe!==0?(Fl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),nt=xe,xe=0):nt=0);let mt,wt,St,Bt,Ut,Ot,Ft,vn,Yn;const Rn=J.isCompressedTexture?J.mipmaps[nt]:J.image;if(Pe!==null)mt=Pe.max.x-Pe.min.x,wt=Pe.max.y-Pe.min.y,St=Pe.isBox3?Pe.max.z-Pe.min.z:1,Bt=Pe.min.x,Ut=Pe.min.y,Ot=Pe.isBox3?Pe.min.z:0;else{const D=Math.pow(2,-xe);mt=Math.floor(Rn.width*D),wt=Math.floor(Rn.height*D),J.isDataArrayTexture?St=Rn.depth:J.isData3DTexture?St=Math.floor(Rn.depth*D):St=1,Bt=0,Ut=0,Ot=0}Te!==null?(Ft=Te.x,vn=Te.y,Yn=Te.z):(Ft=0,vn=0,Yn=0);const yt=Me.convert(_e.format),Nt=Me.convert(_e.type);let Bn;_e.isData3DTexture?(re.setTexture3D(_e,0),Bn=ie.TEXTURE_3D):_e.isDataArrayTexture||_e.isCompressedArrayTexture?(re.setTexture2DArray(_e,0),Bn=ie.TEXTURE_2D_ARRAY):(re.setTexture2D(_e,0),Bn=ie.TEXTURE_2D),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,_e.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_e.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,_e.unpackAlignment);const cn=ie.getParameter(ie.UNPACK_ROW_LENGTH),Ir=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),Di=ie.getParameter(ie.UNPACK_SKIP_PIXELS),c=ie.getParameter(ie.UNPACK_SKIP_ROWS),d=ie.getParameter(ie.UNPACK_SKIP_IMAGES);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,Rn.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Rn.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,Bt),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,Ut),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,Ot);const _=J.isDataArrayTexture||J.isData3DTexture,T=_e.isDataArrayTexture||_e.isData3DTexture;if(J.isDepthTexture){const D=lt.get(J),q=lt.get(_e),Y=lt.get(D.__renderTarget),ce=lt.get(q.__renderTarget);tt.bindFramebuffer(ie.READ_FRAMEBUFFER,Y.__webglFramebuffer),tt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,ce.__webglFramebuffer);for(let ue=0;ue<St;ue++)_&&(ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,lt.get(J).__webglTexture,xe,Ot+ue),ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,lt.get(_e).__webglTexture,nt,Yn+ue)),ie.blitFramebuffer(Bt,Ut,mt,wt,Ft,vn,mt,wt,ie.DEPTH_BUFFER_BIT,ie.NEAREST);tt.bindFramebuffer(ie.READ_FRAMEBUFFER,null),tt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else if(xe!==0||J.isRenderTargetTexture||lt.has(J)){const D=lt.get(J),q=lt.get(_e);tt.bindFramebuffer(ie.READ_FRAMEBUFFER,pa),tt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,kc);for(let Y=0;Y<St;Y++)_?ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,D.__webglTexture,xe,Ot+Y):ie.framebufferTexture2D(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,D.__webglTexture,xe),T?ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,q.__webglTexture,nt,Yn+Y):ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,q.__webglTexture,nt),xe!==0?ie.blitFramebuffer(Bt,Ut,mt,wt,Ft,vn,mt,wt,ie.COLOR_BUFFER_BIT,ie.NEAREST):T?ie.copyTexSubImage3D(Bn,nt,Ft,vn,Yn+Y,Bt,Ut,mt,wt):ie.copyTexSubImage2D(Bn,nt,Ft,vn,Bt,Ut,mt,wt);tt.bindFramebuffer(ie.READ_FRAMEBUFFER,null),tt.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else T?J.isDataTexture||J.isData3DTexture?ie.texSubImage3D(Bn,nt,Ft,vn,Yn,mt,wt,St,yt,Nt,Rn.data):_e.isCompressedArrayTexture?ie.compressedTexSubImage3D(Bn,nt,Ft,vn,Yn,mt,wt,St,yt,Rn.data):ie.texSubImage3D(Bn,nt,Ft,vn,Yn,mt,wt,St,yt,Nt,Rn):J.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,nt,Ft,vn,mt,wt,yt,Nt,Rn.data):J.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,nt,Ft,vn,Rn.width,Rn.height,yt,Rn.data):ie.texSubImage2D(ie.TEXTURE_2D,nt,Ft,vn,mt,wt,yt,Nt,Rn);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,cn),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,Ir),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,Di),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,c),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,d),nt===0&&_e.generateMipmaps&&ie.generateMipmap(Bn),tt.unbindTexture()},this.copyTextureToTexture3D=function(J,_e,Pe=null,Te=null,xe=0){return J.isTexture!==!0&&(Fl("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Pe=arguments[0]||null,Te=arguments[1]||null,J=arguments[2],_e=arguments[3],xe=arguments[4]||0),Fl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(J,_e,Pe,Te,xe)},this.initRenderTarget=function(J){lt.get(J).__webglFramebuffer===void 0&&re.setupRenderTarget(J)},this.initTexture=function(J){J.isCubeTexture?re.setTextureCube(J,0):J.isData3DTexture?re.setTexture3D(J,0):J.isDataArrayTexture||J.isCompressedArrayTexture?re.setTexture2DArray(J,0):re.setTexture2D(J,0),tt.unbindTexture()},this.resetState=function(){M=0,E=0,N=null,tt.reset(),Ze.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ta}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorspace=wn._getDrawingBufferColorSpace(e),n.unpackColorSpace=wn._getUnpackColorSpace()}}const Fu=15,a2=30,o2=19,kQ=29,wh=256,hb=wh+1+kQ,US=2*hb+1,jc=256,FQ=7,BS=16,$S=17,VS=18,Ly=8*2,Sh=-1,UQ=1,cd=2,BQ=0,Ul=0,qS=1,$Q=3,Wr=4,Gi=0,oM=1,ud=2,Xi=-2,VQ=-3,El=-5;function eg(t){return tg(t.map(([e,n])=>new Array(e).fill(n,0,e)))}function tg(t){return t.reduce((e,n)=>e.concat(Array.isArray(n)?tg(n):n),[])}const HS=[0,1,2,3].concat(...eg([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Hn(){const t=this;function e(i){const s=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,u=t.stat_desc.max_length;let f,h,p,v,P,S,g=0;for(v=0;v<=Fu;v++)i.bl_count[v]=0;for(s[i.heap[i.heap_max]*2+1]=0,f=i.heap_max+1;f<US;f++)h=i.heap[f],v=s[s[h*2+1]*2+1]+1,v>u&&(v=u,g++),s[h*2+1]=v,!(h>t.max_code)&&(i.bl_count[v]++,P=0,h>=l&&(P=o[h-l]),S=s[h*2],i.opt_len+=S*(v+P),a&&(i.static_len+=S*(a[h*2+1]+P)));if(g!==0){do{for(v=u-1;i.bl_count[v]===0;)v--;i.bl_count[v]--,i.bl_count[v+1]+=2,i.bl_count[u]--,g-=2}while(g>0);for(v=u;v!==0;v--)for(h=i.bl_count[v];h!==0;)p=i.heap[--f],!(p>t.max_code)&&(s[p*2+1]!=v&&(i.opt_len+=(v-s[p*2+1])*s[p*2],s[p*2+1]=v),h--)}}function n(i,s){let a=0;do a|=i&1,i>>>=1,a<<=1;while(--s>0);return a>>>1}function r(i,s,a){const o=[];let l=0,u,f,h;for(u=1;u<=Fu;u++)o[u]=l=l+a[u-1]<<1;for(f=0;f<=s;f++)h=i[f*2+1],h!==0&&(i[f*2]=n(o[h]++,h))}t.build_tree=function(i){const s=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.elems;let l,u,f=-1,h;for(i.heap_len=0,i.heap_max=US,l=0;l<o;l++)s[l*2]!==0?(i.heap[++i.heap_len]=f=l,i.depth[l]=0):s[l*2+1]=0;for(;i.heap_len<2;)h=i.heap[++i.heap_len]=f<2?++f:0,s[h*2]=1,i.depth[h]=0,i.opt_len--,a&&(i.static_len-=a[h*2+1]);for(t.max_code=f,l=Math.floor(i.heap_len/2);l>=1;l--)i.pqdownheap(s,l);h=o;do l=i.heap[1],i.heap[1]=i.heap[i.heap_len--],i.pqdownheap(s,1),u=i.heap[1],i.heap[--i.heap_max]=l,i.heap[--i.heap_max]=u,s[h*2]=s[l*2]+s[u*2],i.depth[h]=Math.max(i.depth[l],i.depth[u])+1,s[l*2+1]=s[u*2+1]=h,i.heap[1]=h++,i.pqdownheap(s,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],e(i),r(s,t.max_code,i.bl_count)}}Hn._length_code=[0,1,2,3,4,5,6,7].concat(...eg([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]]));Hn.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0];Hn.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];Hn.d_code=function(t){return t<256?HS[t]:HS[256+(t>>>7)]};Hn.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];Hn.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];Hn.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];Hn.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function wr(t,e,n,r,i){const s=this;s.static_tree=t,s.extra_bits=e,s.extra_base=n,s.elems=r,s.max_length=i}const qQ=[12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227],HQ=eg([[144,8],[112,9],[24,7],[8,8]]);wr.static_ltree=tg(qQ.map((t,e)=>[t,HQ[e]]));const zQ=[0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23],GQ=eg([[30,5]]);wr.static_dtree=tg(zQ.map((t,e)=>[t,GQ[e]]));wr.static_l_desc=new wr(wr.static_ltree,Hn.extra_lbits,wh+1,hb,Fu);wr.static_d_desc=new wr(wr.static_dtree,Hn.extra_dbits,0,a2,Fu);wr.static_bl_desc=new wr(null,Hn.extra_blbits,0,o2,FQ);const XQ=9,WQ=8;function cs(t,e,n,r,i){const s=this;s.good_length=t,s.max_lazy=e,s.nice_length=n,s.max_chain=r,s.func=i}const lM=0,Jd=1,bo=2,Hi=[new cs(0,0,0,0,lM),new cs(4,4,8,4,Jd),new cs(4,5,16,8,Jd),new cs(4,6,32,32,Jd),new cs(4,4,16,16,bo),new cs(8,16,32,32,bo),new cs(8,16,128,128,bo),new cs(8,32,128,256,bo),new cs(32,128,258,1024,bo),new cs(32,258,258,4096,bo)],fd=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Si=0,dd=1,Zc=2,hd=3,YQ=32,Oy=42,pd=113,Kc=666,Ny=8,jQ=0,Dy=1,ZQ=2,jn=3,Qd=258,fi=Qd+jn+1;function zS(t,e,n,r){const i=t[e*2],s=t[n*2];return i<s||i==s&&r[e]<=r[n]}function KQ(){const t=this;let e,n,r,i,s,a,o,l,u,f,h,p,v,P,S,g,m,x,w,C,A,M,E,N,I,L,R,B,V,z,G,O,y;const b=new Hn,k=new Hn,F=new Hn;t.depth=[];let H,W,ne,Z,K,ae;t.bl_count=[],t.heap=[],G=[],O=[],y=[];function se(){u=2*s,h[v-1]=0;for(let ve=0;ve<v-1;ve++)h[ve]=0;L=Hi[R].max_lazy,V=Hi[R].good_length,z=Hi[R].nice_length,I=Hi[R].max_chain,A=0,m=0,E=0,x=N=jn-1,C=0,p=0}function ye(){let ve;for(ve=0;ve<hb;ve++)G[ve*2]=0;for(ve=0;ve<a2;ve++)O[ve*2]=0;for(ve=0;ve<o2;ve++)y[ve*2]=0;G[jc*2]=1,t.opt_len=t.static_len=0,W=ne=0}function me(){b.dyn_tree=G,b.stat_desc=wr.static_l_desc,k.dyn_tree=O,k.stat_desc=wr.static_d_desc,F.dyn_tree=y,F.stat_desc=wr.static_bl_desc,K=0,ae=0,Z=8,ye()}t.pqdownheap=function(ve,ge){const we=t.heap,Me=we[ge];let Ze=ge<<1;for(;Ze<=t.heap_len&&(Ze<t.heap_len&&zS(ve,we[Ze+1],we[Ze],t.depth)&&Ze++,!zS(ve,Me,we[Ze],t.depth));)we[ge]=we[Ze],ge=Ze,Ze<<=1;we[ge]=Me};function Ae(ve,ge){let we=-1,Me,Ze=ve[0*2+1],le=0,$e=7,be=4;Ze===0&&($e=138,be=3),ve[(ge+1)*2+1]=65535;for(let Le=0;Le<=ge;Le++)Me=Ze,Ze=ve[(Le+1)*2+1],!(++le<$e&&Me==Ze)&&(le<be?y[Me*2]+=le:Me!==0?(Me!=we&&y[Me*2]++,y[BS*2]++):le<=10?y[$S*2]++:y[VS*2]++,le=0,we=Me,Ze===0?($e=138,be=3):Me==Ze?($e=6,be=3):($e=7,be=4))}function Ue(){let ve;for(Ae(G,b.max_code),Ae(O,k.max_code),F.build_tree(t),ve=o2-1;ve>=3&&y[Hn.bl_order[ve]*2+1]===0;ve--);return t.opt_len+=3*(ve+1)+5+5+4,ve}function He(ve){t.pending_buf[t.pending++]=ve}function Qe(ve){He(ve&255),He(ve>>>8&255)}function ie(ve){He(ve>>8&255),He(ve&255&255)}function dt(ve,ge){let we;const Me=ge;ae>Ly-Me?(we=ve,K|=we<<ae&65535,Qe(K),K=we>>>Ly-ae,ae+=Me-Ly):(K|=ve<<ae&65535,ae+=Me)}function ke(ve,ge){const we=ve*2;dt(ge[we]&65535,ge[we+1]&65535)}function ut(ve,ge){let we,Me=-1,Ze,le=ve[0*2+1],$e=0,be=7,Le=4;for(le===0&&(be=138,Le=3),we=0;we<=ge;we++)if(Ze=le,le=ve[(we+1)*2+1],!(++$e<be&&Ze==le)){if($e<Le)do ke(Ze,y);while(--$e!==0);else Ze!==0?(Ze!=Me&&(ke(Ze,y),$e--),ke(BS,y),dt($e-3,2)):$e<=10?(ke($S,y),dt($e-3,3)):(ke(VS,y),dt($e-11,7));$e=0,Me=Ze,le===0?(be=138,Le=3):Ze==le?(be=6,Le=3):(be=7,Le=4)}}function tt(ve,ge,we){let Me;for(dt(ve-257,5),dt(ge-1,5),dt(we-4,4),Me=0;Me<we;Me++)dt(y[Hn.bl_order[Me]*2+1],3);ut(G,ve-1),ut(O,ge-1)}function Pt(){ae==16?(Qe(K),K=0,ae=0):ae>=8&&(He(K&255),K>>>=8,ae-=8)}function lt(){dt(Dy<<1,3),ke(jc,wr.static_ltree),Pt(),1+Z+10-ae<9&&(dt(Dy<<1,3),ke(jc,wr.static_ltree),Pt()),Z=7}function re(ve,ge){let we,Me,Ze;if(t.dist_buf[W]=ve,t.lc_buf[W]=ge&255,W++,ve===0?G[ge*2]++:(ne++,ve--,G[(Hn._length_code[ge]+wh+1)*2]++,O[Hn.d_code(ve)*2]++),!(W&8191)&&R>2){for(we=W*8,Me=A-m,Ze=0;Ze<a2;Ze++)we+=O[Ze*2]*(5+Hn.extra_dbits[Ze]);if(we>>>=3,ne<Math.floor(W/2)&&we<Math.floor(Me/2))return!0}return W==H-1}function X(ve,ge){let we,Me,Ze=0,le,$e;if(W!==0)do we=t.dist_buf[Ze],Me=t.lc_buf[Ze],Ze++,we===0?ke(Me,ve):(le=Hn._length_code[Me],ke(le+wh+1,ve),$e=Hn.extra_lbits[le],$e!==0&&(Me-=Hn.base_length[le],dt(Me,$e)),we--,le=Hn.d_code(we),ke(le,ge),$e=Hn.extra_dbits[le],$e!==0&&(we-=Hn.base_dist[le],dt(we,$e)));while(Ze<W);ke(jc,ve),Z=ve[jc*2+1]}function te(){ae>8?Qe(K):ae>0&&He(K&255),K=0,ae=0}function fe(ve,ge,we){te(),Z=8,Qe(ge),Qe(~ge),t.pending_buf.set(l.subarray(ve,ve+ge),t.pending),t.pending+=ge}function de(ve,ge,we){dt((jQ<<1)+(we?1:0),3),fe(ve,ge)}function he(ve,ge,we){let Me,Ze,le=0;R>0?(b.build_tree(t),k.build_tree(t),le=Ue(),Me=t.opt_len+3+7>>>3,Ze=t.static_len+3+7>>>3,Ze<=Me&&(Me=Ze)):Me=Ze=ge+5,ge+4<=Me&&ve!=-1?de(ve,ge,we):Ze==Me?(dt((Dy<<1)+(we?1:0),3),X(wr.static_ltree,wr.static_dtree)):(dt((ZQ<<1)+(we?1:0),3),tt(b.max_code+1,k.max_code+1,le+1),X(G,O)),ye(),we&&te()}function Be(ve){he(m>=0?m:-1,A-m,ve),m=A,e.flush_pending()}function Ie(){let ve,ge,we,Me;do{if(Me=u-E-A,Me===0&&A===0&&E===0)Me=s;else if(Me==-1)Me--;else if(A>=s+s-fi){l.set(l.subarray(s,s+s),0),M-=s,A-=s,m-=s,ve=v,we=ve;do ge=h[--we]&65535,h[we]=ge>=s?ge-s:0;while(--ve!==0);ve=s,we=ve;do ge=f[--we]&65535,f[we]=ge>=s?ge-s:0;while(--ve!==0);Me+=s}if(e.avail_in===0)return;ve=e.read_buf(l,A+E,Me),E+=ve,E>=jn&&(p=l[A]&255,p=(p<<g^l[A+1]&255)&S)}while(E<fi&&e.avail_in!==0)}function Ge(ve){let ge=65535,we;for(ge>r-5&&(ge=r-5);;){if(E<=1){if(Ie(),E===0&&ve==Ul)return Si;if(E===0)break}if(A+=E,E=0,we=m+ge,(A===0||A>=we)&&(E=A-we,A=we,Be(!1),e.avail_out===0)||A-m>=s-fi&&(Be(!1),e.avail_out===0))return Si}return Be(ve==Wr),e.avail_out===0?ve==Wr?Zc:Si:ve==Wr?hd:dd}function xt(ve){let ge=I,we=A,Me,Ze,le=N;const $e=A>s-fi?A-(s-fi):0;let be=z;const Le=o,ze=A+Qd;let ft=l[we+le-1],Rt=l[we+le];N>=V&&(ge>>=2),be>E&&(be=E);do if(Me=ve,!(l[Me+le]!=Rt||l[Me+le-1]!=ft||l[Me]!=l[we]||l[++Me]!=l[we+1])){we+=2,Me++;do;while(l[++we]==l[++Me]&&l[++we]==l[++Me]&&l[++we]==l[++Me]&&l[++we]==l[++Me]&&l[++we]==l[++Me]&&l[++we]==l[++Me]&&l[++we]==l[++Me]&&l[++we]==l[++Me]&&we<ze);if(Ze=Qd-(ze-we),we=ze-Qd,Ze>le){if(M=ve,le=Ze,Ze>=be)break;ft=l[we+le-1],Rt=l[we+le]}}while((ve=f[ve&Le]&65535)>$e&&--ge!==0);return le<=E?le:E}function Oe(ve){let ge=0,we;for(;;){if(E<fi){if(Ie(),E<fi&&ve==Ul)return Si;if(E===0)break}if(E>=jn&&(p=(p<<g^l[A+(jn-1)]&255)&S,ge=h[p]&65535,f[A&o]=h[p],h[p]=A),ge!==0&&(A-ge&65535)<=s-fi&&B!=cd&&(x=xt(ge)),x>=jn)if(we=re(A-M,x-jn),E-=x,x<=L&&E>=jn){x--;do A++,p=(p<<g^l[A+(jn-1)]&255)&S,ge=h[p]&65535,f[A&o]=h[p],h[p]=A;while(--x!==0);A++}else A+=x,x=0,p=l[A]&255,p=(p<<g^l[A+1]&255)&S;else we=re(0,l[A]&255),E--,A++;if(we&&(Be(!1),e.avail_out===0))return Si}return Be(ve==Wr),e.avail_out===0?ve==Wr?Zc:Si:ve==Wr?hd:dd}function Ke(ve){let ge=0,we,Me;for(;;){if(E<fi){if(Ie(),E<fi&&ve==Ul)return Si;if(E===0)break}if(E>=jn&&(p=(p<<g^l[A+(jn-1)]&255)&S,ge=h[p]&65535,f[A&o]=h[p],h[p]=A),N=x,w=M,x=jn-1,ge!==0&&N<L&&(A-ge&65535)<=s-fi&&(B!=cd&&(x=xt(ge)),x<=5&&(B==UQ||x==jn&&A-M>4096)&&(x=jn-1)),N>=jn&&x<=N){Me=A+E-jn,we=re(A-1-w,N-jn),E-=N-1,N-=2;do++A<=Me&&(p=(p<<g^l[A+(jn-1)]&255)&S,ge=h[p]&65535,f[A&o]=h[p],h[p]=A);while(--N!==0);if(C=0,x=jn-1,A++,we&&(Be(!1),e.avail_out===0))return Si}else if(C!==0){if(we=re(0,l[A-1]&255),we&&Be(!1),A++,E--,e.avail_out===0)return Si}else C=1,A++,E--}return C!==0&&(we=re(0,l[A-1]&255),C=0),Be(ve==Wr),e.avail_out===0?ve==Wr?Zc:Si:ve==Wr?hd:dd}function _t(ve){return ve.total_in=ve.total_out=0,ve.msg=null,t.pending=0,t.pending_out=0,n=pd,i=Ul,me(),se(),Gi}t.deflateInit=function(ve,ge,we,Me,Ze,le){return Me||(Me=Ny),Ze||(Ze=WQ),le||(le=BQ),ve.msg=null,ge==Sh&&(ge=6),Ze<1||Ze>XQ||Me!=Ny||we<9||we>15||ge<0||ge>9||le<0||le>cd?Xi:(ve.dstate=t,a=we,s=1<<a,o=s-1,P=Ze+7,v=1<<P,S=v-1,g=Math.floor((P+jn-1)/jn),l=new Uint8Array(s*2),f=[],h=[],H=1<<Ze+6,t.pending_buf=new Uint8Array(H*4),r=H*4,t.dist_buf=new Uint16Array(H),t.lc_buf=new Uint8Array(H),R=ge,B=le,_t(ve))},t.deflateEnd=function(){return n!=Oy&&n!=pd&&n!=Kc?Xi:(t.lc_buf=null,t.dist_buf=null,t.pending_buf=null,h=null,f=null,l=null,t.dstate=null,n==pd?VQ:Gi)},t.deflateParams=function(ve,ge,we){let Me=Gi;return ge==Sh&&(ge=6),ge<0||ge>9||we<0||we>cd?Xi:(Hi[R].func!=Hi[ge].func&&ve.total_in!==0&&(Me=ve.deflate(qS)),R!=ge&&(R=ge,L=Hi[R].max_lazy,V=Hi[R].good_length,z=Hi[R].nice_length,I=Hi[R].max_chain),B=we,Me)},t.deflateSetDictionary=function(ve,ge,we){let Me=we,Ze,le=0;if(!ge||n!=Oy)return Xi;if(Me<jn)return Gi;for(Me>s-fi&&(Me=s-fi,le=we-Me),l.set(ge.subarray(le,le+Me),0),A=Me,m=Me,p=l[0]&255,p=(p<<g^l[1]&255)&S,Ze=0;Ze<=Me-jn;Ze++)p=(p<<g^l[Ze+(jn-1)]&255)&S,f[Ze&o]=h[p],h[p]=Ze;return Gi},t.deflate=function(ve,ge){let we,Me,Ze,le,$e;if(ge>Wr||ge<0)return Xi;if(!ve.next_out||!ve.next_in&&ve.avail_in!==0||n==Kc&&ge!=Wr)return ve.msg=fd[ud-Xi],Xi;if(ve.avail_out===0)return ve.msg=fd[ud-El],El;if(e=ve,le=i,i=ge,n==Oy&&(Me=Ny+(a-8<<4)<<8,Ze=(R-1&255)>>1,Ze>3&&(Ze=3),Me|=Ze<<6,A!==0&&(Me|=YQ),Me+=31-Me%31,n=pd,ie(Me)),t.pending!==0){if(e.flush_pending(),e.avail_out===0)return i=-1,Gi}else if(e.avail_in===0&&ge<=le&&ge!=Wr)return e.msg=fd[ud-El],El;if(n==Kc&&e.avail_in!==0)return ve.msg=fd[ud-El],El;if(e.avail_in!==0||E!==0||ge!=Ul&&n!=Kc){switch($e=-1,Hi[R].func){case lM:$e=Ge(ge);break;case Jd:$e=Oe(ge);break;case bo:$e=Ke(ge);break}if(($e==Zc||$e==hd)&&(n=Kc),$e==Si||$e==Zc)return e.avail_out===0&&(i=-1),Gi;if($e==dd){if(ge==qS)lt();else if(de(0,0,!1),ge==$Q)for(we=0;we<v;we++)h[we]=0;if(e.flush_pending(),e.avail_out===0)return i=-1,Gi}}return ge!=Wr?Gi:oM}}function cM(){const t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}cM.prototype={deflateInit(t,e){const n=this;return n.dstate=new KQ,e||(e=Fu),n.dstate.deflateInit(n,t,e)},deflate(t){const e=this;return e.dstate?e.dstate.deflate(e,t):Xi},deflateEnd(){const t=this;if(!t.dstate)return Xi;const e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams(t,e){const n=this;return n.dstate?n.dstate.deflateParams(n,t,e):Xi},deflateSetDictionary(t,e){const n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):Xi},read_buf(t,e,n){const r=this;let i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,t.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),e),r.next_in_index+=i,r.total_in+=i,i)},flush_pending(){const t=this;let e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),e!==0&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,t.dstate.pending===0&&(t.dstate.pending_out=0))}};function JQ(t){const e=this,n=new cM,r=QQ(t&&t.chunkSize?t.chunkSize:64*1024),i=Ul,s=new Uint8Array(r);let a=t?t.level:Sh;typeof a>"u"&&(a=Sh),n.deflateInit(a),n.next_out=s,e.append=function(o,l){let u,f,h=0,p=0,v=0;const P=[];if(o.length){n.next_in_index=0,n.next_in=o,n.avail_in=o.length;do{if(n.next_out_index=0,n.avail_out=r,u=n.deflate(i),u!=Gi)throw new Error("deflating: "+n.msg);n.next_out_index&&(n.next_out_index==r?P.push(new Uint8Array(s)):P.push(s.subarray(0,n.next_out_index))),v+=n.next_out_index,l&&n.next_in_index>0&&n.next_in_index!=h&&(l(n.next_in_index),h=n.next_in_index)}while(n.avail_in>0||n.avail_out===0);return P.length>1?(f=new Uint8Array(v),P.forEach(function(S){f.set(S,p),p+=S.length})):f=P[0]?new Uint8Array(P[0]):new Uint8Array,f}},e.flush=function(){let o,l,u=0,f=0;const h=[];do{if(n.next_out_index=0,n.avail_out=r,o=n.deflate(Wr),o!=oM&&o!=Gi)throw new Error("deflating: "+n.msg);r-n.avail_out>0&&h.push(s.slice(0,n.next_out_index)),f+=n.next_out_index}while(n.avail_in>0||n.avail_out===0);return n.deflateEnd(),l=new Uint8Array(f),h.forEach(function(p){l.set(p,u),u+=p.length}),l}}function QQ(t){return t+5*(Math.floor(t/16383)+1)}const eee=15,_n=0,sa=1,tee=2,jr=-2,zn=-3,GS=-4,aa=-5,vi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],uM=1440,nee=0,ree=4,iee=9,see=5,aee=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],oee=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],lee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cee=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],uee=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],fee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Sa=15;function l2(){const t=this;let e,n,r,i,s,a;function o(u,f,h,p,v,P,S,g,m,x,w){let C,A,M,E,N,I,L,R,B,V,z,G,O,y,b;V=0,N=h;do r[u[f+V]]++,V++,N--;while(N!==0);if(r[0]==h)return S[0]=-1,g[0]=0,_n;for(R=g[0],I=1;I<=Sa&&r[I]===0;I++);for(L=I,R<I&&(R=I),N=Sa;N!==0&&r[N]===0;N--);for(M=N,R>N&&(R=N),g[0]=R,y=1<<I;I<N;I++,y<<=1)if((y-=r[I])<0)return zn;if((y-=r[N])<0)return zn;for(r[N]+=y,a[1]=I=0,V=1,O=2;--N!==0;)a[O]=I+=r[V],O++,V++;N=0,V=0;do(I=u[f+V])!==0&&(w[a[I]++]=N),V++;while(++N<h);for(h=a[M],a[0]=N=0,V=0,E=-1,G=-R,s[0]=0,z=0,b=0;L<=M;L++)for(C=r[L];C--!==0;){for(;L>G+R;){if(E++,G+=R,b=M-G,b=b>R?R:b,(A=1<<(I=L-G))>C+1&&(A-=C+1,O=L,I<b))for(;++I<b&&!((A<<=1)<=r[++O]);)A-=r[O];if(b=1<<I,x[0]+b>uM)return zn;s[E]=z=x[0],x[0]+=b,E!==0?(a[E]=N,i[0]=I,i[1]=R,I=N>>>G-R,i[2]=z-s[E-1]-I,m.set(i,(s[E-1]+I)*3)):S[0]=z}for(i[1]=L-G,V>=h?i[0]=192:w[V]<p?(i[0]=w[V]<256?0:96,i[2]=w[V++]):(i[0]=P[w[V]-p]+16+64,i[2]=v[w[V++]-p]),A=1<<L-G,I=N>>>G;I<b;I+=A)m.set(i,(z+I)*3);for(I=1<<L-1;N&I;I>>>=1)N^=I;for(N^=I,B=(1<<G)-1;(N&B)!=a[E];)E--,G-=R,B=(1<<G)-1}return y!==0&&M!=1?aa:_n}function l(u){let f;for(e||(e=[],n=[],r=new Int32Array(Sa+1),i=[],s=new Int32Array(Sa),a=new Int32Array(Sa+1)),n.length<u&&(n=[]),f=0;f<u;f++)n[f]=0;for(f=0;f<Sa+1;f++)r[f]=0;for(f=0;f<3;f++)i[f]=0;s.set(r.subarray(0,Sa),0),a.set(r.subarray(0,Sa+1),0)}t.inflate_trees_bits=function(u,f,h,p,v){let P;return l(19),e[0]=0,P=o(u,0,19,19,null,null,h,f,p,e,n),P==zn?v.msg="oversubscribed dynamic bit lengths tree":(P==aa||f[0]===0)&&(v.msg="incomplete dynamic bit lengths tree",P=zn),P},t.inflate_trees_dynamic=function(u,f,h,p,v,P,S,g,m){let x;return l(288),e[0]=0,x=o(h,0,u,257,lee,cee,P,p,g,e,n),x!=_n||p[0]===0?(x==zn?m.msg="oversubscribed literal/length tree":x!=GS&&(m.msg="incomplete literal/length tree",x=zn),x):(l(288),x=o(h,u,f,0,uee,fee,S,v,g,e,n),x!=_n||v[0]===0&&u>257?(x==zn?m.msg="oversubscribed distance tree":x==aa?(m.msg="incomplete distance tree",x=zn):x!=GS&&(m.msg="empty distance tree with lengths",x=zn),x):_n)}}l2.inflate_trees_fixed=function(t,e,n,r){return t[0]=iee,e[0]=see,n[0]=aee,r[0]=oee,_n};const md=0,XS=1,WS=2,YS=3,jS=4,ZS=5,KS=6,ky=7,JS=8,vd=9;function dee(){const t=this;let e,n=0,r,i=0,s=0,a=0,o=0,l=0,u=0,f=0,h,p=0,v,P=0;function S(g,m,x,w,C,A,M,E){let N,I,L,R,B,V,z,G,O,y,b,k,F,H,W,ne;z=E.next_in_index,G=E.avail_in,B=M.bitb,V=M.bitk,O=M.write,y=O<M.read?M.read-O-1:M.end-O,b=vi[g],k=vi[m];do{for(;V<20;)G--,B|=(E.read_byte(z++)&255)<<V,V+=8;if(N=B&b,I=x,L=w,ne=(L+N)*3,(R=I[ne])===0){B>>=I[ne+1],V-=I[ne+1],M.win[O++]=I[ne+2],y--;continue}do{if(B>>=I[ne+1],V-=I[ne+1],R&16){for(R&=15,F=I[ne+2]+(B&vi[R]),B>>=R,V-=R;V<15;)G--,B|=(E.read_byte(z++)&255)<<V,V+=8;N=B&k,I=C,L=A,ne=(L+N)*3,R=I[ne];do if(B>>=I[ne+1],V-=I[ne+1],R&16){for(R&=15;V<R;)G--,B|=(E.read_byte(z++)&255)<<V,V+=8;if(H=I[ne+2]+(B&vi[R]),B>>=R,V-=R,y-=F,O>=H)W=O-H,O-W>0&&2>O-W?(M.win[O++]=M.win[W++],M.win[O++]=M.win[W++],F-=2):(M.win.set(M.win.subarray(W,W+2),O),O+=2,W+=2,F-=2);else{W=O-H;do W+=M.end;while(W<0);if(R=M.end-W,F>R){if(F-=R,O-W>0&&R>O-W)do M.win[O++]=M.win[W++];while(--R!==0);else M.win.set(M.win.subarray(W,W+R),O),O+=R,W+=R,R=0;W=0}}if(O-W>0&&F>O-W)do M.win[O++]=M.win[W++];while(--F!==0);else M.win.set(M.win.subarray(W,W+F),O),O+=F,W+=F,F=0;break}else if(!(R&64))N+=I[ne+2],N+=B&vi[R],ne=(L+N)*3,R=I[ne];else return E.msg="invalid distance code",F=E.avail_in-G,F=V>>3<F?V>>3:F,G+=F,z-=F,V-=F<<3,M.bitb=B,M.bitk=V,E.avail_in=G,E.total_in+=z-E.next_in_index,E.next_in_index=z,M.write=O,zn;while(!0);break}if(R&64)return R&32?(F=E.avail_in-G,F=V>>3<F?V>>3:F,G+=F,z-=F,V-=F<<3,M.bitb=B,M.bitk=V,E.avail_in=G,E.total_in+=z-E.next_in_index,E.next_in_index=z,M.write=O,sa):(E.msg="invalid literal/length code",F=E.avail_in-G,F=V>>3<F?V>>3:F,G+=F,z-=F,V-=F<<3,M.bitb=B,M.bitk=V,E.avail_in=G,E.total_in+=z-E.next_in_index,E.next_in_index=z,M.write=O,zn);if(N+=I[ne+2],N+=B&vi[R],ne=(L+N)*3,(R=I[ne])===0){B>>=I[ne+1],V-=I[ne+1],M.win[O++]=I[ne+2],y--;break}}while(!0)}while(y>=258&&G>=10);return F=E.avail_in-G,F=V>>3<F?V>>3:F,G+=F,z-=F,V-=F<<3,M.bitb=B,M.bitk=V,E.avail_in=G,E.total_in+=z-E.next_in_index,E.next_in_index=z,M.write=O,_n}t.init=function(g,m,x,w,C,A){e=md,u=g,f=m,h=x,p=w,v=C,P=A,r=null},t.proc=function(g,m,x){let w,C,A,M=0,E=0,N=0,I,L,R,B;for(N=m.next_in_index,I=m.avail_in,M=g.bitb,E=g.bitk,L=g.write,R=L<g.read?g.read-L-1:g.end-L;;)switch(e){case md:if(R>=258&&I>=10&&(g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,x=S(u,f,h,p,v,P,g,m),N=m.next_in_index,I=m.avail_in,M=g.bitb,E=g.bitk,L=g.write,R=L<g.read?g.read-L-1:g.end-L,x!=_n)){e=x==sa?ky:vd;break}s=u,r=h,i=p,e=XS;case XS:for(w=s;E<w;){if(I!==0)x=_n;else return g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);I--,M|=(m.read_byte(N++)&255)<<E,E+=8}if(C=(i+(M&vi[w]))*3,M>>>=r[C+1],E-=r[C+1],A=r[C],A===0){a=r[C+2],e=KS;break}if(A&16){o=A&15,n=r[C+2],e=WS;break}if(!(A&64)){s=A,i=C/3+r[C+2];break}if(A&32){e=ky;break}return e=vd,m.msg="invalid literal/length code",x=zn,g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);case WS:for(w=o;E<w;){if(I!==0)x=_n;else return g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);I--,M|=(m.read_byte(N++)&255)<<E,E+=8}n+=M&vi[w],M>>=w,E-=w,s=f,r=v,i=P,e=YS;case YS:for(w=s;E<w;){if(I!==0)x=_n;else return g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);I--,M|=(m.read_byte(N++)&255)<<E,E+=8}if(C=(i+(M&vi[w]))*3,M>>=r[C+1],E-=r[C+1],A=r[C],A&16){o=A&15,l=r[C+2],e=jS;break}if(!(A&64)){s=A,i=C/3+r[C+2];break}return e=vd,m.msg="invalid distance code",x=zn,g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);case jS:for(w=o;E<w;){if(I!==0)x=_n;else return g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);I--,M|=(m.read_byte(N++)&255)<<E,E+=8}l+=M&vi[w],M>>=w,E-=w,e=ZS;case ZS:for(B=L-l;B<0;)B+=g.end;for(;n!==0;){if(R===0&&(L==g.end&&g.read!==0&&(L=0,R=L<g.read?g.read-L-1:g.end-L),R===0&&(g.write=L,x=g.inflate_flush(m,x),L=g.write,R=L<g.read?g.read-L-1:g.end-L,L==g.end&&g.read!==0&&(L=0,R=L<g.read?g.read-L-1:g.end-L),R===0)))return g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);g.win[L++]=g.win[B++],R--,B==g.end&&(B=0),n--}e=md;break;case KS:if(R===0&&(L==g.end&&g.read!==0&&(L=0,R=L<g.read?g.read-L-1:g.end-L),R===0&&(g.write=L,x=g.inflate_flush(m,x),L=g.write,R=L<g.read?g.read-L-1:g.end-L,L==g.end&&g.read!==0&&(L=0,R=L<g.read?g.read-L-1:g.end-L),R===0)))return g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);x=_n,g.win[L++]=a,R--,e=md;break;case ky:if(E>7&&(E-=8,I++,N--),g.write=L,x=g.inflate_flush(m,x),L=g.write,R=L<g.read?g.read-L-1:g.end-L,g.read!=g.write)return g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);e=JS;case JS:return x=sa,g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);case vd:return x=zn,g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x);default:return x=jr,g.bitb=M,g.bitk=E,m.avail_in=I,m.total_in+=N-m.next_in_index,m.next_in_index=N,g.write=L,g.inflate_flush(m,x)}},t.free=function(){}}const QS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Cl=0,Fy=1,eP=2,tP=3,nP=4,rP=5,gd=6,yd=7,iP=8,fo=9;function hee(t,e){const n=this;let r=Cl,i=0,s=0,a=0,o;const l=[0],u=[0],f=new dee;let h=0,p=new Int32Array(uM*3);const v=0,P=new l2;n.bitk=0,n.bitb=0,n.win=new Uint8Array(e),n.end=e,n.read=0,n.write=0,n.reset=function(S,g){g&&(g[0]=v),r==gd&&f.free(S),r=Cl,n.bitk=0,n.bitb=0,n.read=n.write=0},n.reset(t,null),n.inflate_flush=function(S,g){let m,x,w;return x=S.next_out_index,w=n.read,m=(w<=n.write?n.write:n.end)-w,m>S.avail_out&&(m=S.avail_out),m!==0&&g==aa&&(g=_n),S.avail_out-=m,S.total_out+=m,S.next_out.set(n.win.subarray(w,w+m),x),x+=m,w+=m,w==n.end&&(w=0,n.write==n.end&&(n.write=0),m=n.write-w,m>S.avail_out&&(m=S.avail_out),m!==0&&g==aa&&(g=_n),S.avail_out-=m,S.total_out+=m,S.next_out.set(n.win.subarray(w,w+m),x),x+=m,w+=m),S.next_out_index=x,n.read=w,g},n.proc=function(S,g){let m,x,w,C,A,M,E,N;for(C=S.next_in_index,A=S.avail_in,x=n.bitb,w=n.bitk,M=n.write,E=M<n.read?n.read-M-1:n.end-M;;){let I,L,R,B,V,z,G,O;switch(r){case Cl:for(;w<3;){if(A!==0)g=_n;else return n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);A--,x|=(S.read_byte(C++)&255)<<w,w+=8}switch(m=x&7,h=m&1,m>>>1){case 0:x>>>=3,w-=3,m=w&7,x>>>=m,w-=m,r=Fy;break;case 1:I=[],L=[],R=[[]],B=[[]],l2.inflate_trees_fixed(I,L,R,B),f.init(I[0],L[0],R[0],0,B[0],0),x>>>=3,w-=3,r=gd;break;case 2:x>>>=3,w-=3,r=tP;break;case 3:return x>>>=3,w-=3,r=fo,S.msg="invalid block type",g=zn,n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g)}break;case Fy:for(;w<32;){if(A!==0)g=_n;else return n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);A--,x|=(S.read_byte(C++)&255)<<w,w+=8}if((~x>>>16&65535)!=(x&65535))return r=fo,S.msg="invalid stored block lengths",g=zn,n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);i=x&65535,x=w=0,r=i!==0?eP:h!==0?yd:Cl;break;case eP:if(A===0||E===0&&(M==n.end&&n.read!==0&&(M=0,E=M<n.read?n.read-M-1:n.end-M),E===0&&(n.write=M,g=n.inflate_flush(S,g),M=n.write,E=M<n.read?n.read-M-1:n.end-M,M==n.end&&n.read!==0&&(M=0,E=M<n.read?n.read-M-1:n.end-M),E===0)))return n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);if(g=_n,m=i,m>A&&(m=A),m>E&&(m=E),n.win.set(S.read_buf(C,m),M),C+=m,A-=m,M+=m,E-=m,(i-=m)!==0)break;r=h!==0?yd:Cl;break;case tP:for(;w<14;){if(A!==0)g=_n;else return n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);A--,x|=(S.read_byte(C++)&255)<<w,w+=8}if(s=m=x&16383,(m&31)>29||(m>>5&31)>29)return r=fo,S.msg="too many length or distance symbols",g=zn,n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);if(m=258+(m&31)+(m>>5&31),!o||o.length<m)o=[];else for(N=0;N<m;N++)o[N]=0;x>>>=14,w-=14,a=0,r=nP;case nP:for(;a<4+(s>>>10);){for(;w<3;){if(A!==0)g=_n;else return n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);A--,x|=(S.read_byte(C++)&255)<<w,w+=8}o[QS[a++]]=x&7,x>>>=3,w-=3}for(;a<19;)o[QS[a++]]=0;if(l[0]=7,m=P.inflate_trees_bits(o,l,u,p,S),m!=_n)return g=m,g==zn&&(o=null,r=fo),n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);a=0,r=rP;case rP:for(;m=s,!(a>=258+(m&31)+(m>>5&31));){let y,b;for(m=l[0];w<m;){if(A!==0)g=_n;else return n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);A--,x|=(S.read_byte(C++)&255)<<w,w+=8}if(m=p[(u[0]+(x&vi[m]))*3+1],b=p[(u[0]+(x&vi[m]))*3+2],b<16)x>>>=m,w-=m,o[a++]=b;else{for(N=b==18?7:b-14,y=b==18?11:3;w<m+N;){if(A!==0)g=_n;else return n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);A--,x|=(S.read_byte(C++)&255)<<w,w+=8}if(x>>>=m,w-=m,y+=x&vi[N],x>>>=N,w-=N,N=a,m=s,N+y>258+(m&31)+(m>>5&31)||b==16&&N<1)return o=null,r=fo,S.msg="invalid bit length repeat",g=zn,n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);b=b==16?o[N-1]:0;do o[N++]=b;while(--y!==0);a=N}}if(u[0]=-1,V=[],z=[],G=[],O=[],V[0]=9,z[0]=6,m=s,m=P.inflate_trees_dynamic(257+(m&31),1+(m>>5&31),o,V,z,G,O,p,S),m!=_n)return m==zn&&(o=null,r=fo),g=m,n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);f.init(V[0],z[0],p,G[0],p,O[0]),r=gd;case gd:if(n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,(g=f.proc(n,S,g))!=sa)return n.inflate_flush(S,g);if(g=_n,f.free(S),C=S.next_in_index,A=S.avail_in,x=n.bitb,w=n.bitk,M=n.write,E=M<n.read?n.read-M-1:n.end-M,h===0){r=Cl;break}r=yd;case yd:if(n.write=M,g=n.inflate_flush(S,g),M=n.write,E=M<n.read?n.read-M-1:n.end-M,n.read!=n.write)return n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);r=iP;case iP:return g=sa,n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);case fo:return g=zn,n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g);default:return g=jr,n.bitb=x,n.bitk=w,S.avail_in=A,S.total_in+=C-S.next_in_index,S.next_in_index=C,n.write=M,n.inflate_flush(S,g)}}},n.free=function(S){n.reset(S,null),n.win=null,p=null},n.set_dictionary=function(S,g,m){n.win.set(S.subarray(g,g+m),0),n.read=n.write=m},n.sync_point=function(){return r==Fy?1:0}}const pee=32,mee=8,vee=0,sP=1,aP=2,oP=3,lP=4,cP=5,Uy=6,Jc=7,uP=12,Pa=13,gee=[0,0,255,255];function yee(){const t=this;t.mode=0,t.method=0,t.was=[0],t.need=0,t.marker=0,t.wbits=0;function e(n){return!n||!n.istate?jr:(n.total_in=n.total_out=0,n.msg=null,n.istate.mode=Jc,n.istate.blocks.reset(n,null),_n)}t.inflateEnd=function(n){return t.blocks&&t.blocks.free(n),t.blocks=null,_n},t.inflateInit=function(n,r){return n.msg=null,t.blocks=null,r<8||r>15?(t.inflateEnd(n),jr):(t.wbits=r,n.istate.blocks=new hee(n,1<<r),e(n),_n)},t.inflate=function(n,r){let i,s;if(!n||!n.istate||!n.next_in)return jr;const a=n.istate;for(r=r==ree?aa:_n,i=aa;;)switch(a.mode){case vee:if(n.avail_in===0)return i;if(i=r,n.avail_in--,n.total_in++,((a.method=n.read_byte(n.next_in_index++))&15)!=mee){a.mode=Pa,n.msg="unknown compression method",a.marker=5;break}if((a.method>>4)+8>a.wbits){a.mode=Pa,n.msg="invalid win size",a.marker=5;break}a.mode=sP;case sP:if(n.avail_in===0)return i;if(i=r,n.avail_in--,n.total_in++,s=n.read_byte(n.next_in_index++)&255,((a.method<<8)+s)%31!==0){a.mode=Pa,n.msg="incorrect header check",a.marker=5;break}if(!(s&pee)){a.mode=Jc;break}a.mode=aP;case aP:if(n.avail_in===0)return i;i=r,n.avail_in--,n.total_in++,a.need=(n.read_byte(n.next_in_index++)&255)<<24&4278190080,a.mode=oP;case oP:if(n.avail_in===0)return i;i=r,n.avail_in--,n.total_in++,a.need+=(n.read_byte(n.next_in_index++)&255)<<16&16711680,a.mode=lP;case lP:if(n.avail_in===0)return i;i=r,n.avail_in--,n.total_in++,a.need+=(n.read_byte(n.next_in_index++)&255)<<8&65280,a.mode=cP;case cP:return n.avail_in===0?i:(i=r,n.avail_in--,n.total_in++,a.need+=n.read_byte(n.next_in_index++)&255,a.mode=Uy,tee);case Uy:return a.mode=Pa,n.msg="need dictionary",a.marker=0,jr;case Jc:if(i=a.blocks.proc(n,i),i==zn){a.mode=Pa,a.marker=0;break}if(i==_n&&(i=r),i!=sa)return i;i=r,a.blocks.reset(n,a.was),a.mode=uP;case uP:return n.avail_in=0,sa;case Pa:return zn;default:return jr}},t.inflateSetDictionary=function(n,r,i){let s=0,a=i;if(!n||!n.istate||n.istate.mode!=Uy)return jr;const o=n.istate;return a>=1<<o.wbits&&(a=(1<<o.wbits)-1,s=i-a),o.blocks.set_dictionary(r,s,a),o.mode=Jc,_n},t.inflateSync=function(n){let r,i,s,a,o;if(!n||!n.istate)return jr;const l=n.istate;if(l.mode!=Pa&&(l.mode=Pa,l.marker=0),(r=n.avail_in)===0)return aa;for(i=n.next_in_index,s=l.marker;r!==0&&s<4;)n.read_byte(i)==gee[s]?s++:n.read_byte(i)!==0?s=0:s=4-s,i++,r--;return n.total_in+=i-n.next_in_index,n.next_in_index=i,n.avail_in=r,l.marker=s,s!=4?zn:(a=n.total_in,o=n.total_out,e(n),n.total_in=a,n.total_out=o,l.mode=Jc,_n)},t.inflateSyncPoint=function(n){return!n||!n.istate||!n.istate.blocks?jr:n.istate.blocks.sync_point()}}function fM(){}fM.prototype={inflateInit(t){const e=this;return e.istate=new yee,t||(t=eee),e.istate.inflateInit(e,t)},inflate(t){const e=this;return e.istate?e.istate.inflate(e,t):jr},inflateEnd(){const t=this;if(!t.istate)return jr;const e=t.istate.inflateEnd(t);return t.istate=null,e},inflateSync(){const t=this;return t.istate?t.istate.inflateSync(t):jr},inflateSetDictionary(t,e){const n=this;return n.istate?n.istate.inflateSetDictionary(n,t,e):jr},read_byte(t){return this.next_in[t]},read_buf(t,e){return this.next_in.subarray(t,t+e)}};function _ee(t){const e=this,n=new fM,r=t&&t.chunkSize?Math.floor(t.chunkSize*2):128*1024,i=nee,s=new Uint8Array(r);let a=!1;n.inflateInit(),n.next_out=s,e.append=function(o,l){const u=[];let f,h,p=0,v=0,P=0;if(o.length!==0){n.next_in_index=0,n.next_in=o,n.avail_in=o.length;do{if(n.next_out_index=0,n.avail_out=r,n.avail_in===0&&!a&&(n.next_in_index=0,a=!0),f=n.inflate(i),a&&f===aa){if(n.avail_in!==0)throw new Error("inflating: bad input")}else if(f!==_n&&f!==sa)throw new Error("inflating: "+n.msg);if((a||f===sa)&&n.avail_in===o.length)throw new Error("inflating: bad input");n.next_out_index&&(n.next_out_index===r?u.push(new Uint8Array(s)):u.push(s.subarray(0,n.next_out_index))),P+=n.next_out_index,l&&n.next_in_index>0&&n.next_in_index!=p&&(l(n.next_in_index),p=n.next_in_index)}while(n.avail_in>0||n.avail_out===0);return u.length>1?(h=new Uint8Array(P),u.forEach(function(S){h.set(S,v),v+=S.length})):h=u[0]?new Uint8Array(u[0]):new Uint8Array,h}},e.flush=function(){n.inflateEnd()}}const Qr=4294967295,Zr=65535,fP=8,xee=0,bee=99,wee=67324752,dM=134695760,See=dM,Pee=33639248,Eee=101010256,Cee=101075792,Tee=117853008,c2=22,hM=20,pM=56,Aee=c2+hM+pM,Mee=1,Ree=39169,Iee=10,Lee=1,mM=21589,Oee=6534,Nee=1,Dee=8,kee=2048,Fee=16,Uee=20,dP=45,hP=51,By="/",pP=new Date(2107,11,31),mP=new Date(1980,0,1),$n=void 0,Za="undefined",df="function";class vP{constructor(e){return class extends TransformStream{constructor(n,r){const i=new e(r);super({transform(s,a){a.enqueue(i.append(s))},flush(s){const a=i.flush();a&&s.enqueue(a)}})}}}}const Bee=64;let vM=2;try{typeof navigator!=Za&&navigator.hardwareConcurrency&&(vM=navigator.hardwareConcurrency)}catch{}const $ee={chunkSize:512*1024,maxWorkers:vM,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:$n,CompressionStreamNative:typeof CompressionStream!=Za&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=Za&&DecompressionStream},Fa=Object.assign({},$ee);function Vee(){return Fa}function qee(t){return Math.max(t.chunkSize,Bee)}function pb(t){const{baseURL:e,chunkSize:n,maxWorkers:r,terminateWorkerTimeout:i,useCompressionStream:s,useWebWorkers:a,Deflate:o,Inflate:l,CompressionStream:u,DecompressionStream:f,workerScripts:h}=t;if(Ea("baseURL",e),Ea("chunkSize",n),Ea("maxWorkers",r),Ea("terminateWorkerTimeout",i),Ea("useCompressionStream",s),Ea("useWebWorkers",a),o&&(Fa.CompressionStream=new vP(o)),l&&(Fa.DecompressionStream=new vP(l)),Ea("CompressionStream",u),Ea("DecompressionStream",f),h!==$n){const{deflate:p,inflate:v}=h;if((p||v)&&(Fa.workerScripts||(Fa.workerScripts={})),p){if(!Array.isArray(p))throw new Error("workerScripts.deflate must be an array");Fa.workerScripts.deflate=p}if(v){if(!Array.isArray(v))throw new Error("workerScripts.inflate must be an array");Fa.workerScripts.inflate=v}}}function Ea(t,e){e!==$n&&(Fa[t]=e)}const $y={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin","cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot","wiz"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf","xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","xpdl"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot","ppa","pwz"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":["odm","otm"],"vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw","vsdx","vssx","vstx","vssm","vstm"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-director":["dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-latex":"latex","x-lyx":"lyx","x-lzx":"lzx","x-maker":["frm","fb","fbdoc"],"x-ms-wmd":"wmd","x-msdos-program":["com","exe","bat","dll"],"x-netcdf":["nc"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":["rpm","rpa"],"x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":["mathml","mml"],mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","application/x-ms-installer":"msi","x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-perfmon":["pma","pmc","pmr","pmw"],"ynd.ms-pkipko":"pko",gzip:["gz","tgz"],"smil+xml":["smi","smil"],"vnd.debian.binary-package":["deb","udeb"],"vnd.hzn-3d-crossword":"x3d","vnd.sqlite3":["db","sqlite","sqlite3","db-wal","sqlite-wal","db-shm","sqlite-shm"],"vnd.wap.sic":"sic","vnd.wap.slc":"slc","x-krita":["kra","krz"],"x-perl":["pm","pl"],yaml:["yaml","yml"]},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":"aifc","x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",aac:"aac",aiff:["aiff","aif","aff"],opus:"opus",wav:"wav"},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":"mmod","x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":"sd","x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":"val","x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},font:{otf:"otf",woff:"woff",woff2:"woff2"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe","jfif","jfif-tbnl","jif"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",avif:"avifs",heic:["heif","heic"],pjpeg:["pjpg"],"vnd.adobe.photoshop":"psd","x-adobe-dng":"dng","x-fuji-raf":"raf","x-icns":"icns","x-kodak-dcr":"dcr","x-kodak-k25":"k25","x-kodak-kdc":"kdc","x-minolta-mrw":"mrw","x-panasonic-raw":["raw","rw2","rwl"],"x-pentax-pef":["pef","ptx"],"x-sigma-x3f":"x3f","x-sony-arw":"arw","x-sony-sr2":"sr2","x-sony-srf":"srf"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":"x3dz","x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.usdz+zip":"usdz","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",plain:["txt","text","brf","conf","def","list","log","in","bas","diff","ksh"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:"tm","tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":"patch","x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas","pp","inc"],"x-pcs-gcd":"gcd","x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","h","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt",javascript:"js",json:"json",markdown:["md","markdown","mdown","markdn"],"vnd.wap.si":"si","vnd.wap.sl":"sl"},video:{avif:"avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv",mp2t:"ts"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","flr","wrz","xaf","xof"]}};(()=>{const t={};for(const e of Object.keys($y))for(const n of Object.keys($y[e])){const r=$y[e][n];if(typeof r=="string")t[r]=e+"/"+n;else for(let i=0;i<r.length;i++)t[r[i]]=e+"/"+n}return t})();const gM=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=e>>>1^3988292384:e=e>>>1;gM[t]=e}class u2{constructor(e){this.crc=e||-1}append(e){let n=this.crc|0;for(let r=0,i=e.length|0;r<i;r++)n=n>>>8^gM[(n^e[r])&255];this.crc=n}get(){return~this.crc}}class yM extends TransformStream{constructor(){let e;const n=new u2;super({transform(r,i){n.append(r),i.enqueue(r)},flush(){const r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,n.get()),e.value=r}}),e=this}}function eh(t){if(typeof TextEncoder==Za){t=unescape(encodeURIComponent(t));const e=new Uint8Array(t.length);for(let n=0;n<e.length;n++)e[n]=t.charCodeAt(n);return e}else return new TextEncoder().encode(t)}const Ur={concat(t,e){if(t.length===0||e.length===0)return t.concat(e);const n=t[t.length-1],r=Ur.getPartial(n);return r===32?t.concat(e):Ur._shiftRight(e,r,n|0,t.slice(0,t.length-1))},bitLength(t){const e=t.length;if(e===0)return 0;const n=t[e-1];return(e-1)*32+Ur.getPartial(n)},clamp(t,e){if(t.length*32<e)return t;t=t.slice(0,Math.ceil(e/32));const n=t.length;return e=e&31,n>0&&e&&(t[n-1]=Ur.partial(e,t[n-1]&2147483648>>e-1,1)),t},partial(t,e,n){return t===32?e:(n?e|0:e<<32-t)+t*1099511627776},getPartial(t){return Math.round(t/1099511627776)||32},_shiftRight(t,e,n,r){for(r===void 0&&(r=[]);e>=32;e-=32)r.push(n),n=0;if(e===0)return r.concat(t);for(let a=0;a<t.length;a++)r.push(n|t[a]>>>e),n=t[a]<<32-e;const i=t.length?t[t.length-1]:0,s=Ur.getPartial(i);return r.push(Ur.partial(e+s&31,e+s>32?n:r.pop(),1)),r}},Ph={bytes:{fromBits(t){const n=Ur.bitLength(t)/8,r=new Uint8Array(n);let i;for(let s=0;s<n;s++)s&3||(i=t[s/4]),r[s]=i>>>24,i<<=8;return r},toBits(t){const e=[];let n,r=0;for(n=0;n<t.length;n++)r=r<<8|t[n],(n&3)===3&&(e.push(r),r=0);return n&3&&e.push(Ur.partial(8*(n&3),r)),e}}},_M={};_M.sha1=class{constructor(t){const e=this;e.blockSize=512,e._init=[1732584193,4023233417,2562383102,271733878,3285377520],e._key=[1518500249,1859775393,2400959708,3395469782],t?(e._h=t._h.slice(0),e._buffer=t._buffer.slice(0),e._length=t._length):e.reset()}reset(){const t=this;return t._h=t._init.slice(0),t._buffer=[],t._length=0,t}update(t){const e=this;typeof t=="string"&&(t=Ph.utf8String.toBits(t));const n=e._buffer=Ur.concat(e._buffer,t),r=e._length,i=e._length=r+Ur.bitLength(t);if(i>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const s=new Uint32Array(n);let a=0;for(let o=e.blockSize+r-(e.blockSize+r&e.blockSize-1);o<=i;o+=e.blockSize)e._block(s.subarray(16*a,16*(a+1))),a+=1;return n.splice(0,16*a),e}finalize(){const t=this;let e=t._buffer;const n=t._h;e=Ur.concat(e,[Ur.partial(1,1)]);for(let r=e.length+2;r&15;r++)e.push(0);for(e.push(Math.floor(t._length/4294967296)),e.push(t._length|0);e.length;)t._block(e.splice(0,16));return t.reset(),n}_f(t,e,n,r){if(t<=19)return e&n|~e&r;if(t<=39)return e^n^r;if(t<=59)return e&n|e&r|n&r;if(t<=79)return e^n^r}_S(t,e){return e<<t|e>>>32-t}_block(t){const e=this,n=e._h,r=Array(80);for(let u=0;u<16;u++)r[u]=t[u];let i=n[0],s=n[1],a=n[2],o=n[3],l=n[4];for(let u=0;u<=79;u++){u>=16&&(r[u]=e._S(1,r[u-3]^r[u-8]^r[u-14]^r[u-16]));const f=e._S(5,i)+e._f(u,s,a,o)+l+r[u]+e._key[Math.floor(u/20)]|0;l=o,o=a,a=e._S(30,s),s=i,i=f}n[0]=n[0]+i|0,n[1]=n[1]+s|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+l|0}};const xM={};xM.aes=class{constructor(t){const e=this;e._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],e._tables[0][0][0]||e._precompute();const n=e._tables[0][4],r=e._tables[1],i=t.length;let s,a,o,l=1;if(i!==4&&i!==6&&i!==8)throw new Error("invalid aes key size");for(e._key=[a=t.slice(0),o=[]],s=i;s<4*i+28;s++){let u=a[s-1];(s%i===0||i===8&&s%i===4)&&(u=n[u>>>24]<<24^n[u>>16&255]<<16^n[u>>8&255]<<8^n[u&255],s%i===0&&(u=u<<8^u>>>24^l<<24,l=l<<1^(l>>7)*283)),a[s]=a[s-i]^u}for(let u=0;s;u++,s--){const f=a[u&3?s:s-4];s<=4||u<4?o[u]=f:o[u]=r[0][n[f>>>24]]^r[1][n[f>>16&255]]^r[2][n[f>>8&255]]^r[3][n[f&255]]}}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],r=e[4],i=[],s=[];let a,o,l,u;for(let f=0;f<256;f++)s[(i[f]=f<<1^(f>>7)*283)^f]=f;for(let f=a=0;!n[f];f^=o||1,a=s[a]||1){let h=a^a<<1^a<<2^a<<3^a<<4;h=h>>8^h&255^99,n[f]=h,r[h]=f,u=i[l=i[o=i[f]]];let p=u*16843009^l*65537^o*257^f*16843008,v=i[h]*257^h*16843008;for(let P=0;P<4;P++)t[P][f]=v=v<<24^v>>>8,e[P][h]=p=p<<24^p>>>8}for(let f=0;f<5;f++)t[f]=t[f].slice(0),e[f]=e[f].slice(0)}_crypt(t,e){if(t.length!==4)throw new Error("invalid aes block size");const n=this._key[e],r=n.length/4-2,i=[0,0,0,0],s=this._tables[e],a=s[0],o=s[1],l=s[2],u=s[3],f=s[4];let h=t[0]^n[0],p=t[e?3:1]^n[1],v=t[2]^n[2],P=t[e?1:3]^n[3],S=4,g,m,x;for(let w=0;w<r;w++)g=a[h>>>24]^o[p>>16&255]^l[v>>8&255]^u[P&255]^n[S],m=a[p>>>24]^o[v>>16&255]^l[P>>8&255]^u[h&255]^n[S+1],x=a[v>>>24]^o[P>>16&255]^l[h>>8&255]^u[p&255]^n[S+2],P=a[P>>>24]^o[h>>16&255]^l[p>>8&255]^u[v&255]^n[S+3],S+=4,h=g,p=m,v=x;for(let w=0;w<4;w++)i[e?3&-w:w]=f[h>>>24]<<24^f[p>>16&255]<<16^f[v>>8&255]<<8^f[P&255]^n[S++],g=h,h=p,p=v,v=P,P=g;return i}};const Hee={getRandomValues(t){const e=new Uint32Array(t.buffer),n=r=>{let i=987654321;const s=4294967295;return function(){return i=36969*(i&65535)+(i>>16)&s,r=18e3*(r&65535)+(r>>16)&s,(((i<<16)+r&s)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let r=0,i;r<t.length;r+=4){const s=n((i||Math.random())*4294967296);i=s()*987654071,e[r/4]=s()*4294967296|0}return t}},bM={};bM.ctrGladman=class{constructor(t,e){this._prf=t,this._initIv=e,this._iv=e}reset(){this._iv=this._initIv}update(t){return this.calculate(this._prf,t,this._iv)}incWord(t){if((t>>24&255)===255){let e=t>>16&255,n=t>>8&255,r=t&255;e===255?(e=0,n===255?(n=0,r===255?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}incCounter(t){(t[0]=this.incWord(t[0]))===0&&(t[1]=this.incWord(t[1]))}calculate(t,e,n){let r;if(!(r=e.length))return[];const i=Ur.bitLength(e);for(let s=0;s<r;s+=4){this.incCounter(n);const a=t.encrypt(n);e[s]^=a[0],e[s+1]^=a[1],e[s+2]^=a[2],e[s+3]^=a[3]}return Ur.clamp(e,i)}};const zo={importKey(t){return new zo.hmacSha1(Ph.bytes.toBits(t))},pbkdf2(t,e,n,r){if(n=n||1e4,r<0||n<0)throw new Error("invalid params to pbkdf2");const i=(r>>5)+1<<2;let s,a,o,l,u;const f=new ArrayBuffer(i),h=new DataView(f);let p=0;const v=Ur;for(e=Ph.bytes.toBits(e),u=1;p<(i||1);u++){for(s=a=t.encrypt(v.concat(e,[u])),o=1;o<n;o++)for(a=t.encrypt(a),l=0;l<a.length;l++)s[l]^=a[l];for(o=0;p<(i||1)&&o<s.length;o++)h.setInt32(p,s[o]),p+=4}return f.slice(0,r/8)}};zo.hmacSha1=class{constructor(t){const e=this,n=e._hash=_M.sha1,r=[[],[]];e._baseHash=[new n,new n];const i=e._baseHash[0].blockSize/32;t.length>i&&(t=new n().update(t).finalize());for(let s=0;s<i;s++)r[0][s]=t[s]^909522486,r[1][s]=t[s]^1549556828;e._baseHash[0].update(r[0]),e._baseHash[1].update(r[1]),e._resultHash=new n(e._baseHash[0])}reset(){const t=this;t._resultHash=new t._hash(t._baseHash[0]),t._updated=!1}update(t){const e=this;e._updated=!0,e._resultHash.update(t)}digest(){const t=this,e=t._resultHash.finalize(),n=new t._hash(t._baseHash[1]).update(e).finalize();return t.reset(),n}encrypt(t){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(t),this.digest(t)}};const zee=typeof crypto!=Za&&typeof crypto.getRandomValues==df,wM="Invalid password",SM="Invalid signature",PM="zipjs-abort-check-password";function EM(t){return zee?crypto.getRandomValues(t):Hee.getRandomValues(t)}const zl=16,Gee="raw",CM={name:"PBKDF2"},Xee={name:"HMAC"},Wee="SHA-1",Yee=Object.assign({hash:Xee},CM),f2=Object.assign({iterations:1e3,hash:{name:Wee}},CM),jee=["deriveBits"],Uu=[8,12,16],Qc=[16,24,32],La=10,Zee=[0,0,0,0],ng=typeof crypto!=Za,hf=ng&&crypto.subtle,TM=ng&&typeof hf!=Za,Es=Ph.bytes,Kee=xM.aes,Jee=bM.ctrGladman,Qee=zo.hmacSha1;let gP=ng&&TM&&typeof hf.importKey==df,yP=ng&&TM&&typeof hf.deriveBits==df;class ete extends TransformStream{constructor({password:e,rawPassword:n,signed:r,encryptionStrength:i,checkPasswordOnly:s}){super({start(){Object.assign(this,{ready:new Promise(a=>this.resolveReady=a),password:RM(e,n),signed:r,strength:i-1,pending:new Uint8Array})},async transform(a,o){const l=this,{password:u,strength:f,resolveReady:h,ready:p}=l;u?(await nte(l,f,u,Ai(a,0,Uu[f]+2)),a=Ai(a,Uu[f]+2),s?o.error(new Error(PM)):h()):await p;const v=new Uint8Array(a.length-La-(a.length-La)%zl);o.enqueue(AM(l,a,v,0,La,!0))},async flush(a){const{signed:o,ctr:l,hmac:u,pending:f,ready:h}=this;if(u&&l){await h;const p=Ai(f,0,f.length-La),v=Ai(f,f.length-La);let P=new Uint8Array;if(p.length){const S=$u(Es,p);u.update(S);const g=l.update(S);P=Bu(Es,g)}if(o){const S=Ai(Bu(Es,u.digest()),0,La);for(let g=0;g<La;g++)if(S[g]!=v[g])throw new Error(SM)}a.enqueue(P)}}})}}class tte extends TransformStream{constructor({password:e,rawPassword:n,encryptionStrength:r}){let i;super({start(){Object.assign(this,{ready:new Promise(s=>this.resolveReady=s),password:RM(e,n),strength:r-1,pending:new Uint8Array})},async transform(s,a){const o=this,{password:l,strength:u,resolveReady:f,ready:h}=o;let p=new Uint8Array;l?(p=await rte(o,u,l),f()):await h;const v=new Uint8Array(p.length+s.length-s.length%zl);v.set(p,0),a.enqueue(AM(o,s,v,p.length,0))},async flush(s){const{ctr:a,hmac:o,pending:l,ready:u}=this;if(o&&a){await u;let f=new Uint8Array;if(l.length){const h=a.update($u(Es,l));o.update(h),f=Bu(Es,h)}i.signature=Bu(Es,o.digest()).slice(0,La),s.enqueue(mb(f,i.signature))}}}),i=this}}function AM(t,e,n,r,i,s){const{ctr:a,hmac:o,pending:l}=t,u=e.length-i;l.length&&(e=mb(l,e),n=ate(n,u-u%zl));let f;for(f=0;f<=u-zl;f+=zl){const h=$u(Es,Ai(e,f,f+zl));s&&o.update(h);const p=a.update(h);s||o.update(p),n.set(Bu(Es,p),f+r)}return t.pending=Ai(e,f),n}async function nte(t,e,n,r){const i=await MM(t,e,n,Ai(r,0,Uu[e])),s=Ai(r,Uu[e]);if(i[0]!=s[0]||i[1]!=s[1])throw new Error(wM)}async function rte(t,e,n){const r=EM(new Uint8Array(Uu[e])),i=await MM(t,e,n,r);return mb(r,i)}async function MM(t,e,n,r){t.password=null;const i=await ite(Gee,n,Yee,!1,jee),s=await ste(Object.assign({salt:r},f2),i,8*(Qc[e]*2+2)),a=new Uint8Array(s),o=$u(Es,Ai(a,0,Qc[e])),l=$u(Es,Ai(a,Qc[e],Qc[e]*2)),u=Ai(a,Qc[e]*2);return Object.assign(t,{keys:{key:o,authentication:l,passwordVerification:u},ctr:new Jee(new Kee(o),Array.from(Zee)),hmac:new Qee(l)}),u}async function ite(t,e,n,r,i){if(gP)try{return await hf.importKey(t,e,n,r,i)}catch{return gP=!1,zo.importKey(e)}else return zo.importKey(e)}async function ste(t,e,n){if(yP)try{return await hf.deriveBits(t,e,n)}catch{return yP=!1,zo.pbkdf2(e,t.salt,f2.iterations,n)}else return zo.pbkdf2(e,t.salt,f2.iterations,n)}function RM(t,e){return e===$n?eh(t):e}function mb(t,e){let n=t;return t.length+e.length&&(n=new Uint8Array(t.length+e.length),n.set(t,0),n.set(e,t.length)),n}function ate(t,e){if(e&&e>t.length){const n=t;t=new Uint8Array(e),t.set(n,0)}return t}function Ai(t,e,n){return t.subarray(e,n)}function Bu(t,e){return t.fromBits(e)}function $u(t,e){return t.toBits(e)}const nc=12;class ote extends TransformStream{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){Object.assign(this,{password:e,passwordVerification:n}),IM(this,e)},transform(i,s){const a=this;if(a.password){const o=_P(a,i.subarray(0,nc));if(a.password=null,o[nc-1]!=a.passwordVerification)throw new Error(wM);i=i.subarray(nc)}r?s.error(new Error(PM)):s.enqueue(_P(a,i))}})}}class lte extends TransformStream{constructor({password:e,passwordVerification:n}){super({start(){Object.assign(this,{password:e,passwordVerification:n}),IM(this,e)},transform(r,i){const s=this;let a,o;if(s.password){s.password=null;const l=EM(new Uint8Array(nc));l[nc-1]=s.passwordVerification,a=new Uint8Array(r.length+l.length),a.set(xP(s,l),0),o=nc}else a=new Uint8Array(r.length),o=0;a.set(xP(s,r),o),i.enqueue(a)}})}}function _P(t,e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=LM(t)^e[r],vb(t,n[r]);return n}function xP(t,e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=LM(t)^e[r],vb(t,e[r]);return n}function IM(t,e){const n=[305419896,591751049,878082192];Object.assign(t,{keys:n,crcKey0:new u2(n[0]),crcKey2:new u2(n[2])});for(let r=0;r<e.length;r++)vb(t,e.charCodeAt(r))}function vb(t,e){let[n,r,i]=t.keys;t.crcKey0.append([e]),n=~t.crcKey0.get(),r=bP(Math.imul(bP(r+OM(n)),134775813)+1),t.crcKey2.append([r>>>24]),i=~t.crcKey2.get(),t.keys=[n,r,i]}function LM(t){const e=t.keys[2]|2;return OM(Math.imul(e,e^1)>>>8)}function OM(t){return t&255}function bP(t){return t&4294967295}const wP="deflate-raw";class cte extends TransformStream{constructor(e,{chunkSize:n,CompressionStream:r,CompressionStreamNative:i}){super({});const{compressed:s,encrypted:a,useCompressionStream:o,zipCrypto:l,signed:u,level:f}=e,h=this;let p,v,P=NM(super.readable);(!a||l)&&u&&(p=new yM,P=Cs(P,p)),s&&(P=kM(P,o,{level:f,chunkSize:n},i,r)),a&&(l?P=Cs(P,new lte(e)):(v=new tte(e),P=Cs(P,v))),DM(h,P,()=>{let S;a&&!l&&(S=v.signature),(!a||l)&&u&&(S=new DataView(p.value.buffer).getUint32(0)),h.signature=S})}}class ute extends TransformStream{constructor(e,{chunkSize:n,DecompressionStream:r,DecompressionStreamNative:i}){super({});const{zipCrypto:s,encrypted:a,signed:o,signature:l,compressed:u,useCompressionStream:f}=e;let h,p,v=NM(super.readable);a&&(s?v=Cs(v,new ote(e)):(p=new ete(e),v=Cs(v,p))),u&&(v=kM(v,f,{chunkSize:n},i,r)),(!a||s)&&o&&(h=new yM,v=Cs(v,h)),DM(this,v,()=>{if((!a||s)&&o){const P=new DataView(h.value.buffer);if(l!=P.getUint32(0,!1))throw new Error(SM)}})}}function NM(t){return Cs(t,new TransformStream({transform(e,n){e&&e.length&&n.enqueue(e)}}))}function DM(t,e,n){e=Cs(e,new TransformStream({flush:n})),Object.defineProperty(t,"readable",{get(){return e}})}function kM(t,e,n,r,i){try{const s=e&&r?r:i;t=Cs(t,new s(wP,n))}catch{if(e)try{t=Cs(t,new i(wP,n))}catch{return t}else return t}return t}function Cs(t,e){return t.pipeThrough(e)}const fte="message",dte="start",hte="pull",SP="data",pte="ack",PP="close",FM="deflate",mte="inflate";class vte extends TransformStream{constructor(e,n){super({});const r=this,{codecType:i}=e;let s;i.startsWith(FM)?s=cte:i.startsWith(mte)&&(s=ute);let a=0,o=0;const l=new s(e,n),u=super.readable,f=new TransformStream({transform(p,v){p&&p.length&&(o+=p.length,v.enqueue(p))},flush(){Object.assign(r,{inputSize:o})}}),h=new TransformStream({transform(p,v){p&&p.length&&(a+=p.length,v.enqueue(p))},flush(){const{signature:p}=l;Object.assign(r,{signature:p,outputSize:a,inputSize:o})}});Object.defineProperty(r,"readable",{get(){return u.pipeThrough(f).pipeThrough(l).pipeThrough(h)}})}}class gte extends TransformStream{constructor(e){let n;super({transform:r,flush(i){n&&n.length&&i.enqueue(n)}});function r(i,s){if(n){const a=new Uint8Array(n.length+i.length);a.set(n),a.set(i,n.length),i=a,n=null}i.length>e?(s.enqueue(i.slice(0,e)),r(i.slice(e),s)):n=i}}}let UM=typeof Worker!=Za;class Vy{constructor(e,{readable:n,writable:r},{options:i,config:s,streamOptions:a,useWebWorkers:o,transferStreams:l,scripts:u},f){const{signal:h}=a;return Object.assign(e,{busy:!0,readable:n.pipeThrough(new gte(s.chunkSize)).pipeThrough(new yte(n,a),{signal:h}),writable:r,options:Object.assign({},i),scripts:u,transferStreams:l,terminate(){return new Promise(p=>{const{worker:v,busy:P}=e;v?(P?e.resolveTerminated=p:(v.terminate(),p()),e.interface=null):p()})},onTaskFinished(){const{resolveTerminated:p}=e;p&&(e.resolveTerminated=null,e.terminated=!0,e.worker.terminate(),p()),e.busy=!1,f(e)}}),(o&&UM?_te:BM)(e,s)}}class yte extends TransformStream{constructor(e,{onstart:n,onprogress:r,size:i,onend:s}){let a=0;super({async start(){n&&await qy(n,i)},async transform(o,l){a+=o.length,r&&await qy(r,a,i),l.enqueue(o)},async flush(){e.size=a,s&&await qy(s,a)}})}}async function qy(t,...e){try{await t(...e)}catch{}}function BM(t,e){return{run:()=>xte(t,e)}}function _te(t,e){const{baseURL:n,chunkSize:r}=e;if(!t.interface){let i;try{i=Ste(t.scripts[0],n,t)}catch{return UM=!1,BM(t,e)}Object.assign(t,{worker:i,interface:{run:()=>bte(t,{chunkSize:r})}})}return t.interface}async function xte({options:t,readable:e,writable:n,onTaskFinished:r},i){try{const s=new vte(t,i);await e.pipeThrough(s).pipeTo(n,{preventClose:!0,preventAbort:!0});const{signature:a,inputSize:o,outputSize:l}=s;return{signature:a,inputSize:o,outputSize:l}}finally{r()}}async function bte(t,e){let n,r;const i=new Promise((p,v)=>{n=p,r=v});Object.assign(t,{reader:null,writer:null,resolveResult:n,rejectResult:r,result:i});const{readable:s,options:a,scripts:o}=t,{writable:l,closed:u}=wte(t.writable),f=th({type:dte,scripts:o.slice(1),options:a,config:e,readable:s,writable:l},t);f||Object.assign(t,{reader:s.getReader(),writer:l.getWriter()});const h=await i;return f||await l.getWriter().close(),await u,h}function wte(t){let e;const n=new Promise(i=>e=i);return{writable:new WritableStream({async write(i){const s=t.getWriter();await s.ready,await s.write(i),s.releaseLock()},close(){e()},abort(i){return t.getWriter().abort(i)}}),closed:n}}let EP=!0,CP=!0;function Ste(t,e,n){const r={type:"module"};let i,s;typeof t==df&&(t=t());try{i=new URL(t,e)}catch{i=t}if(EP)try{s=new Worker(i)}catch{EP=!1,s=new Worker(i,r)}else s=new Worker(i,r);return s.addEventListener(fte,a=>Pte(a,n)),s}function th(t,{worker:e,writer:n,onTaskFinished:r,transferStreams:i}){try{const{value:s,readable:a,writable:o}=t,l=[];if(s&&(s.byteLength<s.buffer.byteLength?t.value=s.buffer.slice(0,s.byteLength):t.value=s.buffer,l.push(t.value)),i&&CP?(a&&l.push(a),o&&l.push(o)):t.readable=t.writable=null,l.length)try{return e.postMessage(t,l),!0}catch{CP=!1,t.readable=t.writable=null,e.postMessage(t)}else e.postMessage(t)}catch(s){throw n&&n.releaseLock(),r(),s}}async function Pte({data:t},e){const{type:n,value:r,messageId:i,result:s,error:a}=t,{reader:o,writer:l,resolveResult:u,rejectResult:f,onTaskFinished:h}=e;try{if(a){const{message:v,stack:P,code:S,name:g}=a,m=new Error(v);Object.assign(m,{stack:P,code:S,name:g}),p(m)}else{if(n==hte){const{value:v,done:P}=await o.read();th({type:SP,value:v,done:P,messageId:i},e)}n==SP&&(await l.ready,await l.write(new Uint8Array(r)),th({type:pte,messageId:i},e)),n==PP&&p(null,s)}}catch(v){th({type:PP,messageId:i},e),p(v)}function p(v,P){v?f(v):u(P),l&&l.releaseLock(),h()}}let To=[];const Hy=[];let TP=0;async function Ete(t,e){const{options:n,config:r}=e,{transferStreams:i,useWebWorkers:s,useCompressionStream:a,codecType:o,compressed:l,signed:u,encrypted:f}=n,{workerScripts:h,maxWorkers:p}=r;e.transferStreams=i||i===$n;const v=!l&&!u&&!f&&!e.transferStreams;return e.useWebWorkers=!v&&(s||s===$n&&r.useWebWorkers),e.scripts=e.useWebWorkers&&h?h[o]:[],n.useCompressionStream=a||a===$n&&r.useCompressionStream,(await P()).run();async function P(){const g=To.find(m=>!m.busy);if(g)return AP(g),new Vy(g,t,e,S);if(To.length<p){const m={indexWorker:TP};return TP++,To.push(m),new Vy(m,t,e,S)}else return new Promise(m=>Hy.push({resolve:m,stream:t,workerOptions:e}))}function S(g){if(Hy.length){const[{resolve:m,stream:x,workerOptions:w}]=Hy.splice(0,1);m(new Vy(g,x,w,S))}else g.worker?(AP(g),Cte(g,e)):To=To.filter(m=>m!=g)}}function Cte(t,e){const{config:n}=e,{terminateWorkerTimeout:r}=n;Number.isFinite(r)&&r>=0&&(t.terminated?t.terminated=!1:t.terminateTimeout=setTimeout(async()=>{To=To.filter(i=>i!=t);try{await t.terminate()}catch{}},r))}function AP(t){const{terminateTimeout:e}=t;e&&(clearTimeout(e),t.terminateTimeout=null)}function Tte(t,e={}){const n=`const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:i,Uint16Array:o,Uint32Array:c,Int32Array:f,Map:a,DataView:l,Promise:u,TextEncoder:w,crypto:h,postMessage:d,TransformStream:p,ReadableStream:y,WritableStream:m,CompressionStream:b,DecompressionStream:g}=self,k=void 0,v="undefined",S="function";class z{constructor(e){return class extends p{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const C=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;C[e]=t}class x{constructor(e){this.t=e||-1}append(e){let t=0|this.t;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^C[255&(t^e[n])];this.t=t}get(){return~this.t}}class A extends p{constructor(){let e;const t=new x;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new i(4);new l(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const _={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=_.i(n);return 32===r?e.concat(t):_.o(t,r,0|n,e.slice(0,e.length-1))},l(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+_.i(n)},u(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=_.h(t,e[n-1]&2147483648>>t-1,1)),e},h:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,i:e=>r.round(e/1099511627776)||32,o(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,i=_.i(s);return r.push(_.h(t+i&31,t+i>32?n:r.pop(),1)),r}},I={bytes:{p(e){const t=_.l(e)/8,n=new i(t);let r;for(let s=0;t>s;s++)3&s||(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},m(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3&~n||(t.push(r),r=0);return 3&n&&t.push(_.h(8*(3&n),r)),t}}},P=class{constructor(e){const t=this;t.blockSize=512,t.k=[1732584193,4023233417,2562383102,271733878,3285377520],t.v=[1518500249,1859775393,2400959708,3395469782],e?(t.S=e.S.slice(0),t.C=e.C.slice(0),t.A=e.A):t.reset()}reset(){const e=this;return e.S=e.k.slice(0),e.C=[],e.A=0,e}update(e){const t=this;"string"==typeof e&&(e=I._.m(e));const n=t.C=_.concat(t.C,e),r=t.A,i=t.A=r+_.l(e);if(i>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const o=new c(n);let f=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);i>=e;e+=t.blockSize)t.I(o.subarray(16*f,16*(f+1))),f+=1;return n.splice(0,16*f),t}P(){const e=this;let t=e.C;const n=e.S;t=_.concat(t,[_.h(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e.A/4294967296)),t.push(0|e.A);t.length;)e.I(t.splice(0,16));return e.reset(),n}D(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}V(e,t){return t<<e|t>>>32-e}I(t){const n=this,s=n.S,i=e(80);for(let e=0;16>e;e++)i[e]=t[e];let o=s[0],c=s[1],f=s[2],a=s[3],l=s[4];for(let e=0;79>=e;e++){16>e||(i[e]=n.V(1,i[e-3]^i[e-8]^i[e-14]^i[e-16]));const t=n.V(5,o)+n.D(e,c,f,a)+l+i[e]+n.v[r.floor(e/20)]|0;l=a,a=f,f=n.V(30,c),c=o,o=t}s[0]=s[0]+o|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0}},D={getRandomValues(e){const t=new c(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,i=0;i<e.length;i+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[i/4]=4294967296*e()|0}return e}},V={importKey:e=>new V.R(I.bytes.m(e)),B(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,c,f,a,u;const w=new ArrayBuffer(i),h=new l(w);let d=0;const p=_;for(t=I.bytes.m(t),u=1;(i||1)>d;u++){for(o=c=e.encrypt(p.concat(t,[u])),f=1;n>f;f++)for(c=e.encrypt(c),a=0;a<c.length;a++)o[a]^=c[a];for(f=0;(i||1)>d&&f<o.length;f++)h.setInt32(d,o[f]),d+=4}return w.slice(0,r/8)},R:class{constructor(e){const t=this,n=t.M=P,r=[[],[]];t.U=[new n,new n];const s=t.U[0].blockSize/32;e.length>s&&(e=(new n).update(e).P());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t.U[0].update(r[0]),t.U[1].update(r[1]),t.K=new n(t.U[0])}reset(){const e=this;e.K=new e.M(e.U[0]),e.N=!1}update(e){this.N=!0,this.K.update(e)}digest(){const e=this,t=e.K.P(),n=new e.M(e.U[1]).update(t).P();return e.reset(),n}encrypt(e){if(this.N)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},R=typeof h!=v&&typeof h.getRandomValues==S,B="Invalid password",E="Invalid signature",M="zipjs-abort-check-password";function U(e){return R?h.getRandomValues(e):D.getRandomValues(e)}const K=16,N={name:"PBKDF2"},O=t.assign({hash:{name:"HMAC"}},N),T=t.assign({iterations:1e3,hash:{name:"SHA-1"}},N),W=["deriveBits"],j=[8,12,16],H=[16,24,32],L=10,F=[0,0,0,0],q=typeof h!=v,G=q&&h.subtle,J=q&&typeof G!=v,Q=I.bytes,X=class{constructor(e){const t=this;t.O=[[[],[],[],[],[]],[[],[],[],[],[]]],t.O[0][0][0]||t.T();const n=t.O[0][4],r=t.O[1],i=e.length;let o,c,f,a=1;if(4!==i&&6!==i&&8!==i)throw new s("invalid aes key size");for(t.v=[c=e.slice(0),f=[]],o=i;4*i+28>o;o++){let e=c[o-1];(o%i==0||8===i&&o%i==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],o%i==0&&(e=e<<8^e>>>24^a<<24,a=a<<1^283*(a>>7))),c[o]=c[o-i]^e}for(let e=0;o;e++,o--){const t=c[3&e?o:o-4];f[e]=4>=o||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this.W(e,0)}decrypt(e){return this.W(e,1)}T(){const e=this.O[0],t=this.O[1],n=e[4],r=t[4],s=[],i=[];let o,c,f,a;for(let e=0;256>e;e++)i[(s[e]=e<<1^283*(e>>7))^e]=e;for(let l=o=0;!n[l];l^=c||1,o=i[o]||1){let i=o^o<<1^o<<2^o<<3^o<<4;i=i>>8^255&i^99,n[l]=i,r[i]=l,a=s[f=s[c=s[l]]];let u=16843009*a^65537*f^257*c^16843008*l,w=257*s[i]^16843008*i;for(let n=0;4>n;n++)e[n][l]=w=w<<24^w>>>8,t[n][i]=u=u<<24^u>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}W(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this.v[t],r=n.length/4-2,i=[0,0,0,0],o=this.O[t],c=o[0],f=o[1],a=o[2],l=o[3],u=o[4];let w,h,d,p=e[0]^n[0],y=e[t?3:1]^n[1],m=e[2]^n[2],b=e[t?1:3]^n[3],g=4;for(let e=0;r>e;e++)w=c[p>>>24]^f[y>>16&255]^a[m>>8&255]^l[255&b]^n[g],h=c[y>>>24]^f[m>>16&255]^a[b>>8&255]^l[255&p]^n[g+1],d=c[m>>>24]^f[b>>16&255]^a[p>>8&255]^l[255&y]^n[g+2],b=c[b>>>24]^f[p>>16&255]^a[y>>8&255]^l[255&m]^n[g+3],g+=4,p=w,y=h,m=d;for(let e=0;4>e;e++)i[t?3&-e:e]=u[p>>>24]<<24^u[y>>16&255]<<16^u[m>>8&255]<<8^u[255&b]^n[g++],w=p,p=y,y=m,m=b,b=w;return i}},Y=class{constructor(e,t){this.j=e,this.H=t,this.L=t}reset(){this.L=this.H}update(e){return this.F(this.j,e,this.L)}q(e){if(255&~(e>>24))e+=1<<24;else{let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}G(e){0===(e[0]=this.q(e[0]))&&(e[1]=this.q(e[1]))}F(e,t,n){let r;if(!(r=t.length))return[];const s=_.l(t);for(let s=0;r>s;s+=4){this.G(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return _.u(t,s)}},Z=V.R;let $=q&&J&&typeof G.importKey==S,ee=q&&J&&typeof G.deriveBits==S;class te extends p{constructor({password:e,rawPassword:n,signed:r,encryptionStrength:o,checkPasswordOnly:c}){super({start(){t.assign(this,{ready:new u((e=>this.J=e)),password:ie(e,n),signed:r,X:o-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:o,J:f,ready:a}=n;r?(await(async(e,t,n,r)=>{const i=await se(e,t,n,ce(r,0,j[t])),o=ce(r,j[t]);if(i[0]!=o[0]||i[1]!=o[1])throw new s(B)})(n,o,r,ce(e,0,j[o]+2)),e=ce(e,j[o]+2),c?t.error(new s(M)):f()):await a;const l=new i(e.length-L-(e.length-L)%K);t.enqueue(re(n,e,l,0,L,!0))},async flush(e){const{signed:t,Y:n,Z:r,pending:o,ready:c}=this;if(r&&n){await c;const f=ce(o,0,o.length-L),a=ce(o,o.length-L);let l=new i;if(f.length){const e=ae(Q,f);r.update(e);const t=n.update(e);l=fe(Q,t)}if(t){const e=ce(fe(Q,r.digest()),0,L);for(let t=0;L>t;t++)if(e[t]!=a[t])throw new s(E)}e.enqueue(l)}}})}}class ne extends p{constructor({password:e,rawPassword:n,encryptionStrength:r}){let s;super({start(){t.assign(this,{ready:new u((e=>this.J=e)),password:ie(e,n),X:r-1,pending:new i})},async transform(e,t){const n=this,{password:r,X:s,J:o,ready:c}=n;let f=new i;r?(f=await(async(e,t,n)=>{const r=U(new i(j[t]));return oe(r,await se(e,t,n,r))})(n,s,r),o()):await c;const a=new i(f.length+e.length-e.length%K);a.set(f,0),t.enqueue(re(n,e,a,f.length,0))},async flush(e){const{Y:t,Z:n,pending:r,ready:o}=this;if(n&&t){await o;let c=new i;if(r.length){const e=t.update(ae(Q,r));n.update(e),c=fe(Q,e)}s.signature=fe(Q,n.digest()).slice(0,L),e.enqueue(oe(c,s.signature))}}}),s=this}}function re(e,t,n,r,s,o){const{Y:c,Z:f,pending:a}=e,l=t.length-s;let u;for(a.length&&(t=oe(a,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new i(t)).set(n,0)}return e})(n,l-l%K)),u=0;l-K>=u;u+=K){const e=ae(Q,ce(t,u,u+K));o&&f.update(e);const s=c.update(e);o||f.update(s),n.set(fe(Q,s),u+r)}return e.pending=ce(t,u),n}async function se(n,r,s,o){n.password=null;const c=await(async(e,t,n,r,s)=>{if(!$)return V.importKey(t);try{return await G.importKey("raw",t,n,!1,s)}catch(e){return $=!1,V.importKey(t)}})(0,s,O,0,W),f=await(async(e,t,n)=>{if(!ee)return V.B(t,e.salt,T.iterations,n);try{return await G.deriveBits(e,t,n)}catch(r){return ee=!1,V.B(t,e.salt,T.iterations,n)}})(t.assign({salt:o},T),c,8*(2*H[r]+2)),a=new i(f),l=ae(Q,ce(a,0,H[r])),u=ae(Q,ce(a,H[r],2*H[r])),w=ce(a,2*H[r]);return t.assign(n,{keys:{key:l,$:u,passwordVerification:w},Y:new Y(new X(l),e.from(F)),Z:new Z(u)}),w}function ie(e,t){return t===k?(e=>{if(typeof w==v){const t=new i((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new w).encode(e)})(e):t}function oe(e,t){let n=e;return e.length+t.length&&(n=new i(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ce(e,t,n){return e.subarray(t,n)}function fe(e,t){return e.p(t)}function ae(e,t){return e.m(t)}class le extends p{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;if(n.password){const t=we(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new s(B);e=e.subarray(12)}r?t.error(new s(M)):t.enqueue(we(n,e))}})}}class ue extends p{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=U(new i(12));t[11]=n.passwordVerification,r=new i(e.length+t.length),r.set(he(n,t),0),s=12}else r=new i(e.length),s=0;r.set(he(n,e),s),t.enqueue(r)}})}}function we(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,n[r]);return n}function he(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,t[r]);return n}function de(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,ee:new x(r[0]),te:new x(r[2])});for(let t=0;t<n.length;t++)pe(e,n.charCodeAt(t))}function pe(e,t){let[n,s,i]=e.keys;e.ee.append([t]),n=~e.ee.get(),s=be(r.imul(be(s+me(n)),134775813)+1),e.te.append([s>>>24]),i=~e.te.get(),e.keys=[n,s,i]}function ye(e){const t=2|e.keys[2];return me(r.imul(t,1^t)>>>8)}function me(e){return 255&e}function be(e){return 4294967295&e}const ge="deflate-raw";class ke extends p{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:i,useCompressionStream:o,zipCrypto:c,signed:f,level:a}=e,u=this;let w,h,d=Se(super.readable);i&&!c||!f||(w=new A,d=xe(d,w)),s&&(d=Ce(d,o,{level:a,chunkSize:t},r,n)),i&&(c?d=xe(d,new ue(e)):(h=new ne(e),d=xe(d,h))),ze(u,d,(()=>{let e;i&&!c&&(e=h.signature),i&&!c||!f||(e=new l(w.value.buffer).getUint32(0)),u.signature=e}))}}class ve extends p{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:c,signature:f,compressed:a,useCompressionStream:u}=e;let w,h,d=Se(super.readable);o&&(i?d=xe(d,new le(e)):(h=new te(e),d=xe(d,h))),a&&(d=Ce(d,u,{chunkSize:t},r,n)),o&&!i||!c||(w=new A,d=xe(d,w)),ze(this,d,(()=>{if((!o||i)&&c){const e=new l(w.value.buffer);if(f!=e.getUint32(0,!1))throw new s(E)}}))}}function Se(e){return xe(e,new p({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function ze(e,n,r){n=xe(n,new p({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function Ce(e,t,n,r,s){try{e=xe(e,new(t&&r?r:s)(ge,n))}catch(r){if(!t)return e;try{e=xe(e,new s(ge,n))}catch(t){return e}}return e}function xe(e,t){return e.pipeThrough(t)}const Ae="data",_e="close";class Ie extends p{constructor(e,n){super({});const r=this,{codecType:s}=e;let i;s.startsWith("deflate")?i=ke:s.startsWith("inflate")&&(i=ve);let o=0,c=0;const f=new i(e,n),a=super.readable,l=new p({transform(e,t){e&&e.length&&(c+=e.length,t.enqueue(e))},flush(){t.assign(r,{inputSize:c})}}),u=new p({transform(e,t){e&&e.length&&(o+=e.length,t.enqueue(e))},flush(){const{signature:e}=f;t.assign(r,{signature:e,outputSize:o,inputSize:c})}});t.defineProperty(r,"readable",{get:()=>a.pipeThrough(l).pipeThrough(f).pipeThrough(u)})}}class Pe extends p{constructor(e){let t;super({transform:function n(r,s){if(t){const e=new i(t.length+r.length);e.set(t),e.set(r,t.length),r=e,t=null}r.length>e?(s.enqueue(r.slice(0,e)),n(r.slice(e),s)):t=r},flush(e){t&&t.length&&e.enqueue(t)}})}}const De=new a,Ve=new a;let Re,Be=0,Ee=!0;async function Me(e){try{const{options:t,scripts:r,config:s}=e;if(r&&r.length)try{Ee?importScripts.apply(k,r):await Ue(r)}catch(e){Ee=!1,await Ue(r)}self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new z(self.Deflate)),self.Inflate&&(s.DecompressionStream=new z(self.Inflate));const i={highWaterMark:1},o=e.readable||new y({async pull(e){const t=new u((e=>De.set(Be,e)));Ke({type:"pull",messageId:Be}),Be=(Be+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},i),c=e.writable||new m({async write(e){let t;const r=new u((e=>t=e));Ve.set(Be,t),Ke({type:Ae,value:e,messageId:Be}),Be=(Be+1)%n.MAX_SAFE_INTEGER,await r}},i),f=new Ie(t,s);Re=new AbortController;const{signal:a}=Re;await o.pipeThrough(f).pipeThrough(new Pe(s.chunkSize)).pipeTo(c,{signal:a,preventClose:!0,preventAbort:!0}),await c.getWriter().close();const{signature:l,inputSize:w,outputSize:h}=f;Ke({type:_e,result:{signature:l,inputSize:w,outputSize:h}})}catch(e){Ne(e)}}async function Ue(e){for(const t of e)await import(t)}function Ke(e){let{value:t}=e;if(t)if(t.length)try{t=new i(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Ne(e=new s("Unknown error")){const{message:t,stack:n,code:r,name:i}=e;d({error:{message:t,stack:n,code:r,name:i}})}addEventListener("message",(({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&Me(e),t==Ae){const e=De.get(n);De.delete(n),e({value:new i(r),done:s})}if("ack"==t){const e=Ve.get(n);Ve.delete(n),e()}t==_e&&Re.abort()}catch(e){Ne(e)}}));const Oe=-2;function Te(t){return We(t.map((([t,n])=>new e(t).fill(n,0,t))))}function We(t){return t.reduce(((t,n)=>t.concat(e.isArray(n)?We(n):n)),[])}const je=[0,1,2,3].concat(...Te([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function He(){const e=this;function t(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.ne=n=>{const s=e.re,i=e.ie.se,o=e.ie.oe;let c,f,a,l=-1;for(n.ce=0,n.fe=573,c=0;o>c;c++)0!==s[2*c]?(n.ae[++n.ce]=l=c,n.le[c]=0):s[2*c+1]=0;for(;2>n.ce;)a=n.ae[++n.ce]=2>l?++l:0,s[2*a]=1,n.le[a]=0,n.ue--,i&&(n.we-=i[2*a+1]);for(e.he=l,c=r.floor(n.ce/2);c>=1;c--)n.de(s,c);a=o;do{c=n.ae[1],n.ae[1]=n.ae[n.ce--],n.de(s,1),f=n.ae[1],n.ae[--n.fe]=c,n.ae[--n.fe]=f,s[2*a]=s[2*c]+s[2*f],n.le[a]=r.max(n.le[c],n.le[f])+1,s[2*c+1]=s[2*f+1]=a,n.ae[1]=a++,n.de(s,1)}while(n.ce>=2);n.ae[--n.fe]=n.ae[1],(t=>{const n=e.re,r=e.ie.se,s=e.ie.pe,i=e.ie.ye,o=e.ie.me;let c,f,a,l,u,w,h=0;for(l=0;15>=l;l++)t.be[l]=0;for(n[2*t.ae[t.fe]+1]=0,c=t.fe+1;573>c;c++)f=t.ae[c],l=n[2*n[2*f+1]+1]+1,l>o&&(l=o,h++),n[2*f+1]=l,f>e.he||(t.be[l]++,u=0,i>f||(u=s[f-i]),w=n[2*f],t.ue+=w*(l+u),r&&(t.we+=w*(r[2*f+1]+u)));if(0!==h){do{for(l=o-1;0===t.be[l];)l--;t.be[l]--,t.be[l+1]+=2,t.be[o]--,h-=2}while(h>0);for(l=o;0!==l;l--)for(f=t.be[l];0!==f;)a=t.ae[--c],a>e.he||(n[2*a+1]!=l&&(t.ue+=(l-n[2*a+1])*n[2*a],n[2*a+1]=l),f--)}})(n),((e,n,r)=>{const s=[];let i,o,c,f=0;for(i=1;15>=i;i++)s[i]=f=f+r[i-1]<<1;for(o=0;n>=o;o++)c=e[2*o+1],0!==c&&(e[2*o]=t(s[c]++,c))})(s,e.he,n.be)}}function Le(e,t,n,r,s){const i=this;i.se=e,i.pe=t,i.ye=n,i.oe=r,i.me=s}He.ge=[0,1,2,3,4,5,6,7].concat(...Te([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),He.ke=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],He.ve=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],He.Se=e=>256>e?je[e]:je[256+(e>>>7)],He.ze=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],He.Ce=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],He.xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],He.Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Fe=Te([[144,8],[112,9],[24,7],[8,8]]);Le._e=We([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((e,t)=>[e,Fe[t]])));const qe=Te([[30,5]]);function Ge(e,t,n,r,s){const i=this;i.Ie=e,i.Pe=t,i.De=n,i.Ve=r,i.Re=s}Le.Be=We([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((e,t)=>[e,qe[t]]))),Le.Ee=new Le(Le._e,He.ze,257,286,15),Le.Me=new Le(Le.Be,He.Ce,0,30,15),Le.Ue=new Le(null,He.xe,0,19,7);const Je=[new Ge(0,0,0,0,0),new Ge(4,4,8,4,1),new Ge(4,5,16,8,1),new Ge(4,6,32,32,1),new Ge(4,4,16,16,2),new Ge(8,16,32,32,2),new Ge(8,16,128,128,2),new Ge(8,32,128,256,2),new Ge(32,128,258,1024,2),new Ge(32,258,258,4096,2)],Qe=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Xe=113,Ye=666,Ze=262;function $e(e,t,n,r){const s=e[2*t],i=e[2*n];return i>s||s==i&&r[t]<=r[n]}function et(){const e=this;let t,n,s,c,f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z,C,x,A,_,I,P,D,V,R,B,E,M,U;const K=new He,N=new He,O=new He;let T,W,j,H,L,F;function q(){let t;for(t=0;286>t;t++)E[2*t]=0;for(t=0;30>t;t++)M[2*t]=0;for(t=0;19>t;t++)U[2*t]=0;E[512]=1,e.ue=e.we=0,W=j=0}function G(e,t){let n,r=-1,s=e[1],i=0,o=7,c=4;0===s&&(o=138,c=3),e[2*(t+1)+1]=65535;for(let f=0;t>=f;f++)n=s,s=e[2*(f+1)+1],++i<o&&n==s||(c>i?U[2*n]+=i:0!==n?(n!=r&&U[2*n]++,U[32]++):i>10?U[36]++:U[34]++,i=0,r=n,0===s?(o=138,c=3):n==s?(o=6,c=3):(o=7,c=4))}function J(t){e.Ke[e.pending++]=t}function Q(e){J(255&e),J(e>>>8&255)}function X(e,t){let n;const r=t;F>16-r?(n=e,L|=n<<F&65535,Q(L),L=n>>>16-F,F+=r-16):(L|=e<<F&65535,F+=r)}function Y(e,t){const n=2*e;X(65535&t[n],65535&t[n+1])}function Z(e,t){let n,r,s=-1,i=e[1],o=0,c=7,f=4;for(0===i&&(c=138,f=3),n=0;t>=n;n++)if(r=i,i=e[2*(n+1)+1],++o>=c||r!=i){if(f>o)do{Y(r,U)}while(0!=--o);else 0!==r?(r!=s&&(Y(r,U),o--),Y(16,U),X(o-3,2)):o>10?(Y(18,U),X(o-11,7)):(Y(17,U),X(o-3,3));o=0,s=r,0===i?(c=138,f=3):r==i?(c=6,f=3):(c=7,f=4)}}function $(){16==F?(Q(L),L=0,F=0):8>F||(J(255&L),L>>>=8,F-=8)}function ee(t,n){let s,i,o;if(e.Ne[W]=t,e.Oe[W]=255&n,W++,0===t?E[2*n]++:(j++,t--,E[2*(He.ge[n]+256+1)]++,M[2*He.Se(t)]++),!(8191&W)&&D>2){for(s=8*W,i=C-k,o=0;30>o;o++)s+=M[2*o]*(5+He.Ce[o]);if(s>>>=3,j<r.floor(W/2)&&s<r.floor(i/2))return!0}return W==T-1}function te(t,n){let r,s,i,o,c=0;if(0!==W)do{r=e.Ne[c],s=e.Oe[c],c++,0===r?Y(s,t):(i=He.ge[s],Y(i+256+1,t),o=He.ze[i],0!==o&&(s-=He.ke[i],X(s,o)),r--,i=He.Se(r),Y(i,n),o=He.Ce[i],0!==o&&(r-=He.ve[i],X(r,o)))}while(W>c);Y(256,t),H=t[513]}function ne(){F>8?Q(L):F>0&&J(255&L),L=0,F=0}function re(t,n,r){X(0+(r?1:0),3),((t,n)=>{ne(),H=8,Q(n),Q(~n),e.Ke.set(u.subarray(t,t+n),e.pending),e.pending+=n})(t,n)}function se(n){((t,n,r)=>{let s,i,o=0;D>0?(K.ne(e),N.ne(e),o=(()=>{let t;for(G(E,K.he),G(M,N.he),O.ne(e),t=18;t>=3&&0===U[2*He.Ae[t]+1];t--);return e.ue+=14+3*(t+1),t})(),s=e.ue+3+7>>>3,i=e.we+3+7>>>3,i>s||(s=i)):s=i=n+5,n+4>s||-1==t?i==s?(X(2+(r?1:0),3),te(Le._e,Le.Be)):(X(4+(r?1:0),3),((e,t,n)=>{let r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;n>r;r++)X(U[2*He.Ae[r]+1],3);Z(E,e-1),Z(M,t-1)})(K.he+1,N.he+1,o+1),te(E,M)):re(t,n,r),q(),r&&ne()})(0>k?-1:k,C-k,n),k=C,t.Te()}function ie(){let e,n,r,s;do{if(s=w-A-C,0===s&&0===C&&0===A)s=f;else if(-1==s)s--;else if(C>=f+f-Ze){u.set(u.subarray(f,f+f),0),x-=f,C-=f,k-=f,e=y,r=e;do{n=65535&d[--r],d[r]=f>n?0:n-f}while(0!=--e);e=f,r=e;do{n=65535&h[--r],h[r]=f>n?0:n-f}while(0!=--e);s+=f}if(0===t.We)return;e=t.je(u,C+A,s),A+=e,3>A||(p=255&u[C],p=(p<<g^255&u[C+1])&b)}while(Ze>A&&0!==t.We)}function oe(e){let t,n,r=I,s=C,i=_;const o=C>f-Ze?C-(f-Ze):0;let c=B;const a=l,w=C+258;let d=u[s+i-1],p=u[s+i];R>_||(r>>=2),c>A&&(c=A);do{if(t=e,u[t+i]==p&&u[t+i-1]==d&&u[t]==u[s]&&u[++t]==u[s+1]){s+=2,t++;do{}while(u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&w>s);if(n=258-(w-s),s=w-258,n>i){if(x=e,i=n,n>=c)break;d=u[s+i-1],p=u[s+i]}}}while((e=65535&h[e&a])>o&&0!=--r);return i>A?A:i}e.le=[],e.be=[],e.ae=[],E=[],M=[],U=[],e.de=(t,n)=>{const r=e.ae,s=r[n];let i=n<<1;for(;i<=e.ce&&(i<e.ce&&$e(t,r[i+1],r[i],e.le)&&i++,!$e(t,s,r[i],e.le));)r[n]=r[i],n=i,i<<=1;r[n]=s},e.He=(t,S,x,W,j,G)=>(W||(W=8),j||(j=8),G||(G=0),t.Le=null,-1==S&&(S=6),1>j||j>9||8!=W||9>x||x>15||0>S||S>9||0>G||G>2?Oe:(t.Fe=e,a=x,f=1<<a,l=f-1,m=j+7,y=1<<m,b=y-1,g=r.floor((m+3-1)/3),u=new i(2*f),h=[],d=[],T=1<<j+6,e.Ke=new i(4*T),s=4*T,e.Ne=new o(T),e.Oe=new i(T),D=S,V=G,(t=>(t.qe=t.Ge=0,t.Le=null,e.pending=0,e.Je=0,n=Xe,c=0,K.re=E,K.ie=Le.Ee,N.re=M,N.ie=Le.Me,O.re=U,O.ie=Le.Ue,L=0,F=0,H=8,q(),(()=>{w=2*f,d[y-1]=0;for(let e=0;y-1>e;e++)d[e]=0;P=Je[D].Pe,R=Je[D].Ie,B=Je[D].De,I=Je[D].Ve,C=0,k=0,A=0,v=_=2,z=0,p=0})(),0))(t))),e.Qe=()=>42!=n&&n!=Xe&&n!=Ye?Oe:(e.Oe=null,e.Ne=null,e.Ke=null,d=null,h=null,u=null,e.Fe=null,n==Xe?-3:0),e.Xe=(e,t,n)=>{let r=0;return-1==t&&(t=6),0>t||t>9||0>n||n>2?Oe:(Je[D].Re!=Je[t].Re&&0!==e.qe&&(r=e.Ye(1)),D!=t&&(D=t,P=Je[D].Pe,R=Je[D].Ie,B=Je[D].De,I=Je[D].Ve),V=n,r)},e.Ze=(e,t,r)=>{let s,i=r,o=0;if(!t||42!=n)return Oe;if(3>i)return 0;for(i>f-Ze&&(i=f-Ze,o=r-i),u.set(t.subarray(o,o+i),0),C=i,k=i,p=255&u[0],p=(p<<g^255&u[1])&b,s=0;i-3>=s;s++)p=(p<<g^255&u[s+2])&b,h[s&l]=d[p],d[p]=s;return 0},e.Ye=(r,i)=>{let o,w,m,I,R;if(i>4||0>i)return Oe;if(!r.$e||!r.et&&0!==r.We||n==Ye&&4!=i)return r.Le=Qe[4],Oe;if(0===r.tt)return r.Le=Qe[7],-5;var B;if(t=r,I=c,c=i,42==n&&(w=8+(a-8<<4)<<8,m=(D-1&255)>>1,m>3&&(m=3),w|=m<<6,0!==C&&(w|=32),w+=31-w%31,n=Xe,J((B=w)>>8&255),J(255&B)),0!==e.pending){if(t.Te(),0===t.tt)return c=-1,0}else if(0===t.We&&I>=i&&4!=i)return t.Le=Qe[7],-5;if(n==Ye&&0!==t.We)return r.Le=Qe[7],-5;if(0!==t.We||0!==A||0!=i&&n!=Ye){switch(R=-1,Je[D].Re){case 0:R=(e=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=A){if(ie(),0===A&&0==e)return 0;if(0===A)break}if(C+=A,A=0,n=k+r,(0===C||C>=n)&&(A=C-n,C=n,se(!1),0===t.tt))return 0;if(C-k>=f-Ze&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 1:R=(e=>{let n,r=0;for(;;){if(Ze>A){if(ie(),Ze>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C),0===r||(C-r&65535)>f-Ze||2!=V&&(v=oe(r)),3>v)n=ee(0,255&u[C]),A--,C++;else if(n=ee(C-x,v-3),A-=v,v>P||3>A)C+=v,v=0,p=255&u[C],p=(p<<g^255&u[C+1])&b;else{v--;do{C++,p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C}while(0!=--v);C++}if(n&&(se(!1),0===t.tt))return 0}return se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i);break;case 2:R=(e=>{let n,r,s=0;for(;;){if(Ze>A){if(ie(),Ze>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C),_=v,S=x,v=2,0!==s&&P>_&&f-Ze>=(C-s&65535)&&(2!=V&&(v=oe(s)),5>=v&&(1==V||3==v&&C-x>4096)&&(v=2)),3>_||v>_)if(0!==z){if(n=ee(0,255&u[C-1]),n&&se(!1),C++,A--,0===t.tt)return 0}else z=1,C++,A--;else{r=C+A-3,n=ee(C-1-S,_-3),A-=_-1,_-=2;do{++C>r||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C)}while(0!=--_);if(z=0,v=2,C++,n&&(se(!1),0===t.tt))return 0}}return 0!==z&&(n=ee(0,255&u[C-1]),z=0),se(4==e),0===t.tt?4==e?2:0:4==e?3:1})(i)}if(2!=R&&3!=R||(n=Ye),0==R||2==R)return 0===t.tt&&(c=-1),0;if(1==R){if(1==i)X(2,3),Y(256,Le._e),$(),9>1+H+10-F&&(X(2,3),Y(256,Le._e),$()),H=7;else if(re(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(t.Te(),0===t.tt)return c=-1,0}}return 4!=i?0:1}}function tt(){const e=this;e.nt=0,e.rt=0,e.We=0,e.qe=0,e.tt=0,e.Ge=0}function nt(e){const t=new tt,n=(o=e&&e.chunkSize?e.chunkSize:65536)+5*(r.floor(o/16383)+1);var o;const c=new i(n);let f=e?e.level:-1;void 0===f&&(f=-1),t.He(f),t.$e=c,this.append=(e,r)=>{let o,f,a=0,l=0,u=0;const w=[];if(e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,o=t.Ye(0),0!=o)throw new s("deflating: "+t.Le);t.rt&&(t.rt==n?w.push(new i(c)):w.push(c.subarray(0,t.rt))),u+=t.rt,r&&t.nt>0&&t.nt!=a&&(r(t.nt),a=t.nt)}while(t.We>0||0===t.tt);return w.length>1?(f=new i(u),w.forEach((e=>{f.set(e,l),l+=e.length}))):f=w[0]?new i(w[0]):new i,f}},this.flush=()=>{let e,r,o=0,f=0;const a=[];do{if(t.rt=0,t.tt=n,e=t.Ye(4),1!=e&&0!=e)throw new s("deflating: "+t.Le);n-t.tt>0&&a.push(c.slice(0,t.rt)),f+=t.rt}while(t.We>0||0===t.tt);return t.Qe(),r=new i(f),a.forEach((e=>{r.set(e,o),o+=e.length})),r}}tt.prototype={He(e,t){const n=this;return n.Fe=new et,t||(t=15),n.Fe.He(n,e,t)},Ye(e){const t=this;return t.Fe?t.Fe.Ye(t,e):Oe},Qe(){const e=this;if(!e.Fe)return Oe;const t=e.Fe.Qe();return e.Fe=null,t},Xe(e,t){const n=this;return n.Fe?n.Fe.Xe(n,e,t):Oe},Ze(e,t){const n=this;return n.Fe?n.Fe.Ze(n,e,t):Oe},je(e,t,n){const r=this;let s=r.We;return s>n&&(s=n),0===s?0:(r.We-=s,e.set(r.et.subarray(r.nt,r.nt+s),t),r.nt+=s,r.qe+=s,s)},Te(){const e=this;let t=e.Fe.pending;t>e.tt&&(t=e.tt),0!==t&&(e.$e.set(e.Fe.Ke.subarray(e.Fe.Je,e.Fe.Je+t),e.rt),e.rt+=t,e.Fe.Je+=t,e.Ge+=t,e.tt-=t,e.Fe.pending-=t,0===e.Fe.pending&&(e.Fe.Je=0))}};const rt=-2,st=-3,it=-5,ot=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],ct=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],ft=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],at=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],ut=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],wt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function ht(){let e,t,n,r,s,i;function o(e,t,o,c,f,a,l,u,w,h,d){let p,y,m,b,g,k,v,S,z,C,x,A,_,I,P;C=0,g=o;do{n[e[t+C]]++,C++,g--}while(0!==g);if(n[0]==o)return l[0]=-1,u[0]=0,0;for(S=u[0],k=1;15>=k&&0===n[k];k++);for(v=k,k>S&&(S=k),g=15;0!==g&&0===n[g];g--);for(m=g,S>g&&(S=g),u[0]=S,I=1<<k;g>k;k++,I<<=1)if(0>(I-=n[k]))return st;if(0>(I-=n[g]))return st;for(n[g]+=I,i[1]=k=0,C=1,_=2;0!=--g;)i[_]=k+=n[C],_++,C++;g=0,C=0;do{0!==(k=e[t+C])&&(d[i[k]++]=g),C++}while(++g<o);for(o=i[m],i[0]=g=0,C=0,b=-1,A=-S,s[0]=0,x=0,P=0;m>=v;v++)for(p=n[v];0!=p--;){for(;v>A+S;){if(b++,A+=S,P=m-A,P=P>S?S:P,(y=1<<(k=v-A))>p+1&&(y-=p+1,_=v,P>k))for(;++k<P&&(y<<=1)>n[++_];)y-=n[_];if(P=1<<k,h[0]+P>1440)return st;s[b]=x=h[0],h[0]+=P,0!==b?(i[b]=g,r[0]=k,r[1]=S,k=g>>>A-S,r[2]=x-s[b-1]-k,w.set(r,3*(s[b-1]+k))):l[0]=x}for(r[1]=v-A,o>C?d[C]<c?(r[0]=256>d[C]?0:96,r[2]=d[C++]):(r[0]=a[d[C]-c]+16+64,r[2]=f[d[C++]-c]):r[0]=192,y=1<<v-A,k=g>>>A;P>k;k+=y)w.set(r,3*(x+k));for(k=1<<v-1;g&k;k>>>=1)g^=k;for(g^=k,z=(1<<A)-1;(g&z)!=i[b];)b--,A-=S,z=(1<<A)-1}return 0!==I&&1!=m?it:0}function c(o){let c;for(e||(e=[],t=[],n=new f(16),r=[],s=new f(15),i=new f(16)),t.length<o&&(t=[]),c=0;o>c;c++)t[c]=0;for(c=0;16>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;s.set(n.subarray(0,15),0),i.set(n.subarray(0,16),0)}this.st=(n,r,s,i,f)=>{let a;return c(19),e[0]=0,a=o(n,0,19,19,null,null,s,r,i,e,t),a==st?f.Le="oversubscribed dynamic bit lengths tree":a!=it&&0!==r[0]||(f.Le="incomplete dynamic bit lengths tree",a=st),a},this.it=(n,r,s,i,f,a,l,u,w)=>{let h;return c(288),e[0]=0,h=o(s,0,n,257,at,lt,a,i,u,e,t),0!=h||0===i[0]?(h==st?w.Le="oversubscribed literal/length tree":-4!=h&&(w.Le="incomplete literal/length tree",h=st),h):(c(288),h=o(s,n,r,0,ut,wt,l,f,u,e,t),0!=h||0===f[0]&&n>257?(h==st?w.Le="oversubscribed distance tree":h==it?(w.Le="incomplete distance tree",h=st):-4!=h&&(w.Le="empty distance tree with lengths",h=st),h):0)}}function dt(){const e=this;let t,n,r,s,i=0,o=0,c=0,f=0,a=0,l=0,u=0,w=0,h=0,d=0;function p(e,t,n,r,s,i,o,c){let f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z;d=c.nt,p=c.We,w=o.ot,h=o.ct,y=o.write,m=y<o.read?o.read-y-1:o.end-y,b=ot[e],g=ot[t];do{for(;20>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(f=w&b,a=n,l=r,z=3*(l+f),0!==(u=a[z]))for(;;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15,k=a[z+2]+(w&ot[u]),w>>=u,h-=u;15>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;for(f=w&g,a=s,l=i,z=3*(l+f),u=a[z];;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15;u>h;)p--,w|=(255&c.ft(d++))<<h,h+=8;if(v=a[z+2]+(w&ot[u]),w>>=u,h-=u,m-=k,v>y){S=y-v;do{S+=o.end}while(0>S);if(u=o.end-S,k>u){if(k-=u,y-S>0&&u>y-S)do{o.lt[y++]=o.lt[S++]}while(0!=--u);else o.lt.set(o.lt.subarray(S,S+u),y),y+=u,S+=u,u=0;S=0}}else S=y-v,y-S>0&&2>y-S?(o.lt[y++]=o.lt[S++],o.lt[y++]=o.lt[S++],k-=2):(o.lt.set(o.lt.subarray(S,S+2),y),y+=2,S+=2,k-=2);if(y-S>0&&k>y-S)do{o.lt[y++]=o.lt[S++]}while(0!=--k);else o.lt.set(o.lt.subarray(S,S+k),y),y+=k,S+=k,k=0;break}if(64&u)return c.Le="invalid distance code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,st;f+=a[z+2],f+=w&ot[u],z=3*(l+f),u=a[z]}break}if(64&u)return 32&u?(k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,1):(c.Le="invalid literal/length code",k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,st);if(f+=a[z+2],f+=w&ot[u],z=3*(l+f),0===(u=a[z])){w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--;break}}else w>>=a[z+1],h-=a[z+1],o.lt[y++]=a[z+2],m--}while(m>=258&&p>=10);return k=c.We-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ot=w,o.ct=h,c.We=p,c.qe+=d-c.nt,c.nt=d,o.write=y,0}e.init=(e,i,o,c,f,a)=>{t=0,u=e,w=i,r=o,h=c,s=f,d=a,n=null},e.ut=(e,y,m)=>{let b,g,k,v,S,z,C,x=0,A=0,_=0;for(_=y.nt,v=y.We,x=e.ot,A=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S;;)switch(t){case 0:if(z>=258&&v>=10&&(e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,m=p(u,w,r,h,s,d,e,y),_=y.nt,v=y.We,x=e.ot,A=e.ct,S=e.write,z=S<e.read?e.read-S-1:e.end-S,0!=m)){t=1==m?7:9;break}c=u,n=r,o=h,t=1;case 1:for(b=c;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(_++))<<A,A+=8}if(g=3*(o+(x&ot[b])),x>>>=n[g+1],A-=n[g+1],k=n[g],0===k){f=n[g+2],t=6;break}if(16&k){a=15&k,i=n[g+2],t=2;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}if(32&k){t=7;break}return t=9,y.Le="invalid literal/length code",m=st,e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);case 2:for(b=a;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(_++))<<A,A+=8}i+=x&ot[b],x>>=b,A-=b,c=w,n=s,o=d,t=3;case 3:for(b=c;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(_++))<<A,A+=8}if(g=3*(o+(x&ot[b])),x>>=n[g+1],A-=n[g+1],k=n[g],16&k){a=15&k,l=n[g+2],t=4;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}return t=9,y.Le="invalid distance code",m=st,e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);case 4:for(b=a;b>A;){if(0===v)return e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);m=0,v--,x|=(255&y.ft(_++))<<A,A+=8}l+=x&ot[b],x>>=b,A-=b,t=5;case 5:for(C=S-l;0>C;)C+=e.end;for(;0!==i;){if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);e.lt[S++]=e.lt[C++],z--,C==e.end&&(C=0),i--}t=0;break;case 6:if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);m=0,e.lt[S++]=f,z--,t=0;break;case 7:if(A>7&&(A-=8,v++,_--),e.write=S,m=e.wt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,e.read!=e.write)return e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);t=8;case 8:return m=1,e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);case 9:return m=st,e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m);default:return m=rt,e.ot=x,e.ct=A,y.We=v,y.qe+=_-y.nt,y.nt=_,e.write=S,e.wt(y,m)}},e.ht=()=>{}}ht.dt=(e,t,n,r)=>(e[0]=9,t[0]=5,n[0]=ct,r[0]=ft,0);const pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function yt(e,t){const n=this;let r,s=0,o=0,c=0,a=0;const l=[0],u=[0],w=new dt;let h=0,d=new f(4320);const p=new ht;n.ct=0,n.ot=0,n.lt=new i(t),n.end=t,n.read=0,n.write=0,n.reset=(e,t)=>{t&&(t[0]=0),6==s&&w.ht(e),s=0,n.ct=0,n.ot=0,n.read=n.write=0},n.reset(e,null),n.wt=(e,t)=>{let r,s,i;return s=e.rt,i=n.read,r=(i>n.write?n.end:n.write)-i,r>e.tt&&(r=e.tt),0!==r&&t==it&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r,i==n.end&&(i=0,n.write==n.end&&(n.write=0),r=n.write-i,r>e.tt&&(r=e.tt),0!==r&&t==it&&(t=0),e.tt-=r,e.Ge+=r,e.$e.set(n.lt.subarray(i,i+r),s),s+=r,i+=r),e.rt=s,n.read=i,t},n.ut=(e,t)=>{let i,f,y,m,b,g,k,v;for(m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g;;){let S,z,C,x,A,_,I,P;switch(s){case 0:for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,s=1;break;case 1:S=[],z=[],C=[[]],x=[[]],ht.dt(S,z,C,x),w.init(S[0],z[0],C[0],0,x[0],0),f>>>=3,y-=3,s=6;break;case 2:f>>>=3,y-=3,s=3;break;case 3:return f>>>=3,y-=3,s=9,e.Le="invalid block type",t=st,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}break;case 1:for(;32>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return s=9,e.Le="invalid stored block lengths",t=st,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);o=65535&f,f=y=0,s=0!==o?2:0!==h?7:0;break;case 2:if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(0===k&&(g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k&&(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k)))return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(t=0,i=o,i>b&&(i=b),i>k&&(i=k),n.lt.set(e.je(m,i),g),m+=i,b-=i,g+=i,k-=i,0!=(o-=i))break;s=0!==h?7:0;break;case 3:for(;14>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=9,e.Le="too many length or distance symbols",t=st,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(v=0;i>v;v++)r[v]=0;f>>>=14,y-=14,a=0,s=4;case 4:for(;4+(c>>>10)>a;){for(;3>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}r[pt[a++]]=7&f,f>>>=3,y-=3}for(;19>a;)r[pt[a++]]=0;if(l[0]=7,i=p.st(r,l,u,d,e),0!=i)return(t=i)==st&&(r=null,s=9),n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);a=0,s=5;case 5:for(;i=c,258+(31&i)+(i>>5&31)>a;){let o,w;for(i=l[0];i>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(i=d[3*(u[0]+(f&ot[i]))+1],w=d[3*(u[0]+(f&ot[i]))+2],16>w)f>>>=i,y-=i,r[a++]=w;else{for(v=18==w?7:w-14,o=18==w?11:3;i+v>y;){if(0===b)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);t=0,b--,f|=(255&e.ft(m++))<<y,y+=8}if(f>>>=i,y-=i,o+=f&ot[v],f>>>=v,y-=v,v=a,i=c,v+o>258+(31&i)+(i>>5&31)||16==w&&1>v)return r=null,s=9,e.Le="invalid bit length repeat",t=st,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w=16==w?r[v-1]:0;do{r[v++]=w}while(0!=--o);a=v}}if(u[0]=-1,A=[],_=[],I=[],P=[],A[0]=9,_[0]=6,i=c,i=p.it(257+(31&i),1+(i>>5&31),r,A,_,I,P,d,e),0!=i)return i==st&&(r=null,s=9),t=i,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);w.init(A[0],_[0],d,I[0],d,P[0]),s=6;case 6:if(n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,1!=(t=w.ut(n,e,t)))return n.wt(e,t);if(t=0,w.ht(e),m=e.nt,b=e.We,f=n.ot,y=n.ct,g=n.write,k=g<n.read?n.read-g-1:n.end-g,0===h){s=0;break}s=7;case 7:if(n.write=g,t=n.wt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);s=8;case 8:return t=1,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);case 9:return t=st,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t);default:return t=rt,n.ot=f,n.ct=y,e.We=b,e.qe+=m-e.nt,e.nt=m,n.write=g,n.wt(e,t)}}},n.ht=e=>{n.reset(e,null),n.lt=null,d=null},n.yt=(e,t,r)=>{n.lt.set(e.subarray(t,t+r),0),n.read=n.write=r},n.bt=()=>1==s?1:0}const mt=13,bt=[0,0,255,255];function gt(){const e=this;function t(e){return e&&e.gt?(e.qe=e.Ge=0,e.Le=null,e.gt.mode=7,e.gt.kt.reset(e,null),0):rt}e.mode=0,e.method=0,e.vt=[0],e.St=0,e.marker=0,e.zt=0,e.Ct=t=>(e.kt&&e.kt.ht(t),e.kt=null,0),e.xt=(n,r)=>(n.Le=null,e.kt=null,8>r||r>15?(e.Ct(n),rt):(e.zt=r,n.gt.kt=new yt(n,1<<r),t(n),0)),e.At=(e,t)=>{let n,r;if(!e||!e.gt||!e.et)return rt;const s=e.gt;for(t=4==t?it:0,n=it;;)switch(s.mode){case 0:if(0===e.We)return n;if(n=t,e.We--,e.qe++,8!=(15&(s.method=e.ft(e.nt++)))){s.mode=mt,e.Le="unknown compression method",s.marker=5;break}if(8+(s.method>>4)>s.zt){s.mode=mt,e.Le="invalid win size",s.marker=5;break}s.mode=1;case 1:if(0===e.We)return n;if(n=t,e.We--,e.qe++,r=255&e.ft(e.nt++),((s.method<<8)+r)%31!=0){s.mode=mt,e.Le="incorrect header check",s.marker=5;break}if(!(32&r)){s.mode=7;break}s.mode=2;case 2:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St=(255&e.ft(e.nt++))<<24&4278190080,s.mode=3;case 3:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<16&16711680,s.mode=4;case 4:if(0===e.We)return n;n=t,e.We--,e.qe++,s.St+=(255&e.ft(e.nt++))<<8&65280,s.mode=5;case 5:return 0===e.We?n:(n=t,e.We--,e.qe++,s.St+=255&e.ft(e.nt++),s.mode=6,2);case 6:return s.mode=mt,e.Le="need dictionary",s.marker=0,rt;case 7:if(n=s.kt.ut(e,n),n==st){s.mode=mt,s.marker=0;break}if(0==n&&(n=t),1!=n)return n;n=t,s.kt.reset(e,s.vt),s.mode=12;case 12:return e.We=0,1;case mt:return st;default:return rt}},e._t=(e,t,n)=>{let r=0,s=n;if(!e||!e.gt||6!=e.gt.mode)return rt;const i=e.gt;return s<1<<i.zt||(s=(1<<i.zt)-1,r=n-s),i.kt.yt(t,r,s),i.mode=7,0},e.It=e=>{let n,r,s,i,o;if(!e||!e.gt)return rt;const c=e.gt;if(c.mode!=mt&&(c.mode=mt,c.marker=0),0===(n=e.We))return it;for(r=e.nt,s=c.marker;0!==n&&4>s;)e.ft(r)==bt[s]?s++:s=0!==e.ft(r)?0:4-s,r++,n--;return e.qe+=r-e.nt,e.nt=r,e.We=n,c.marker=s,4!=s?st:(i=e.qe,o=e.Ge,t(e),e.qe=i,e.Ge=o,c.mode=7,0)},e.Pt=e=>e&&e.gt&&e.gt.kt?e.gt.kt.bt():rt}function kt(){}function vt(e){const t=new kt,n=e&&e.chunkSize?r.floor(2*e.chunkSize):131072,o=new i(n);let c=!1;t.xt(),t.$e=o,this.append=(e,r)=>{const f=[];let a,l,u=0,w=0,h=0;if(0!==e.length){t.nt=0,t.et=e,t.We=e.length;do{if(t.rt=0,t.tt=n,0!==t.We||c||(t.nt=0,c=!0),a=t.At(0),c&&a===it){if(0!==t.We)throw new s("inflating: bad input")}else if(0!==a&&1!==a)throw new s("inflating: "+t.Le);if((c||1===a)&&t.We===e.length)throw new s("inflating: bad input");t.rt&&(t.rt===n?f.push(new i(o)):f.push(o.subarray(0,t.rt))),h+=t.rt,r&&t.nt>0&&t.nt!=u&&(r(t.nt),u=t.nt)}while(t.We>0||0===t.tt);return f.length>1?(l=new i(h),f.forEach((e=>{l.set(e,w),w+=e.length}))):l=f[0]?new i(f[0]):new i,l}},this.flush=()=>{t.Ct()}}kt.prototype={xt(e){const t=this;return t.gt=new gt,e||(e=15),t.gt.xt(t,e)},At(e){const t=this;return t.gt?t.gt.At(t,e):rt},Ct(){const e=this;if(!e.gt)return rt;const t=e.gt.Ct(e);return e.gt=null,t},It(){const e=this;return e.gt?e.gt.It(e):rt},_t(e,t){const n=this;return n.gt?n.gt._t(n,e,t):rt},ft(e){return this.et[e]},je(e,t){return this.et.subarray(e,e+t)}},self.initCodec=()=>{self.Deflate=nt,self.Inflate=vt};
`,r=()=>e.useDataURI?"data:text/javascript,"+encodeURIComponent(n):URL.createObjectURL(new Blob([n],{type:"text/javascript"}));t({workerScripts:{inflate:[r],deflate:[r]}})}const Ate="Writer iterator completed too soon",Mte="text/plain",Rte="Content-Type",Ite=64*1024,$M="writable";class gb{constructor(){this.size=0}init(){this.initialized=!0}}class VM extends gb{get readable(){const e=this,{chunkSize:n=Ite}=e,r=new ReadableStream({start(){this.chunkOffset=0},async pull(i){const{offset:s=0,size:a,diskNumberStart:o}=r,{chunkOffset:l}=this;i.enqueue(await d2(e,s+l,Math.min(n,a-l),o)),l+n>a?i.close():this.chunkOffset+=n}});return r}}class wo extends VM{constructor(e){super(),Object.assign(this,{blob:e,size:e.size})}async readUint8Array(e,n){const r=this,i=e+n;let a=await(e||i<r.size?r.blob.slice(e,i):r.blob).arrayBuffer();return a.byteLength>n&&(a=a.slice(e,i)),new Uint8Array(a)}}class Lte extends gb{constructor(e){super();const n=this,r=new TransformStream,i=[];e&&i.push([Rte,e]),Object.defineProperty(n,$M,{get(){return r.writable}}),n.blob=new Response(r.readable,{headers:i}).blob()}getData(){return this.blob}}class bn extends wo{constructor(e){super(new Blob([e],{type:Mte}))}}class Ote extends VM{constructor(e){super(),this.readers=e}async init(){const e=this,{readers:n}=e;e.lastDiskNumber=0,e.lastDiskOffset=0,await Promise.all(n.map(async(r,i)=>{await r.init(),i!=n.length-1&&(e.lastDiskOffset+=r.size),e.size+=r.size})),super.init()}async readUint8Array(e,n,r=0){const i=this,{readers:s}=this;let a,o=r;o==-1&&(o=s.length-1);let l=e;for(;l>=s[o].size;)l-=s[o].size,o++;const u=s[o],f=u.size;if(l+n<=f)a=await d2(u,l,n);else{const h=f-l;a=new Uint8Array(n),a.set(await d2(u,l,h)),a.set(await i.readUint8Array(e+h,n-h,r),h)}return i.lastDiskNumber=Math.max(o,i.lastDiskNumber),a}}class MP extends gb{constructor(e,n=4294967295){super();const r=this;Object.assign(r,{diskNumber:0,diskOffset:0,size:0,maxSize:n,availableSize:n});let i,s,a;const o=new WritableStream({async write(f){const{availableSize:h}=r;if(a)f.length>=h?(await l(f.slice(0,h)),await u(),r.diskOffset+=i.size,r.diskNumber++,a=null,await this.write(f.slice(h))):await l(f);else{const{value:p,done:v}=await e.next();if(v&&!p)throw new Error(Ate);i=p,i.size=0,i.maxSize&&(r.maxSize=i.maxSize),r.availableSize=r.maxSize,await Vu(i),s=p.writable,a=s.getWriter(),await this.write(f)}},async close(){await a.ready,await u()}});Object.defineProperty(r,$M,{get(){return o}});async function l(f){const h=f.length;h&&(await a.ready,await a.write(f),i.size+=h,r.size+=h,r.availableSize-=h)}async function u(){s.size=i.size,await a.close()}}}async function Vu(t,e){if(t.init&&!t.initialized)await t.init(e);else return Promise.resolve()}function Nte(t){return Array.isArray(t)&&(t=new Ote(t)),t instanceof ReadableStream&&(t={readable:t}),t}function Dte(t){t.writable===$n&&typeof t.next==df&&(t=new MP(t)),t instanceof WritableStream&&(t={writable:t});const{writable:e}=t;return e.size===$n&&(e.size=0),t instanceof MP||Object.assign(t,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),t}function d2(t,e,n,r){return t.readUint8Array(e,n,r)}const kte="\0 !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~ ".split("");kte.length==256;const Fte="filename",Ute="rawFilename",Bte="comment",$te="rawComment",Vte="uncompressedSize",qte="compressedSize",Hte="offset",RP="diskNumberStart",qM="lastModDate",zte="rawLastModDate",HM="lastAccessDate",zM="creationDate",GM="internalFileAttribute",XM="externalFileAttribute",WM="msDosCompatible",yb="zip64",YM="encrypted",jM="version",ZM="versionMadeBy",KM="zipCrypto",Gte=[Fte,Ute,qte,Vte,qM,zte,Bte,$te,HM,zM,Hte,RP,RP,GM,XM,WM,yb,YM,jM,ZM,KM,"directory","bitFlag","signature","filenameUTF8","commentUTF8","compressionMethod","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class JM{constructor(e){Gte.forEach(n=>this[n]=e[n])}}const Xte="File already exists",Wte="Zip file comment exceeds 64KB",Yte="File entry comment exceeds 64KB",jte="File entry name exceeds 64KB",IP="Version exceeds 65535",Zte="The strength must equal 1, 2, or 3",Kte="Extra field type exceeds 65535",Jte="Extra field data exceeds 64KB",_b="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",Qte="Undefined uncompressed size",LP=new Uint8Array([7,0,2,0,65,69,3,0,0]);let zy=0;const OP=[];class ene{constructor(e,n={}){e=Dte(e);const r=e.availableSize!==$n&&e.availableSize>0&&e.availableSize!==1/0&&e.maxSize!==$n&&e.maxSize>0&&e.maxSize!==1/0;Object.assign(this,{writer:e,addSplitZipSignature:r,options:n,config:Vee(),files:new Map,filenames:new Set,offset:n.offset===$n?e.writable.size:n.offset,pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}async add(e="",n,r={}){const i=this,{pendingAddFileCalls:s,config:a}=i;zy<a.maxWorkers?zy++:await new Promise(l=>OP.push(l));let o;try{if(e=e.trim(),i.filenames.has(e))throw new Error(Xte);return i.filenames.add(e),o=tne(i,e,n,r),s.add(o),await o}catch(l){throw i.filenames.delete(e),l}finally{s.delete(o);const l=OP.shift();l?l():zy--}}async close(e=new Uint8Array,n={}){const r=this,{pendingAddFileCalls:i,writer:s}=this,{writable:a}=s;for(;i.size;)await Promise.allSettled(Array.from(i));return await une(this,e,n),En(r,n,"preventClose")||await a.getWriter().close(),s.getData?s.getData():a}}async function tne(t,e,n,r){e=e.trim(),r.directory&&!e.endsWith(By)?e+=By:r.directory=e.endsWith(By);const i=En(t,r,"encodeText",eh);let s=i(e);if(s===$n&&(s=eh(e)),pn(s)>Zr)throw new Error(jte);const a=r.comment||"";let o=i(a);if(o===$n&&(o=eh(a)),pn(o)>Zr)throw new Error(Yte);const l=En(t,r,jM,Uee);if(l>Zr)throw new Error(IP);const u=En(t,r,ZM,20);if(u>Zr)throw new Error(IP);const f=En(t,r,qM,new Date),h=En(t,r,HM),p=En(t,r,zM),v=En(t,r,WM,!0),P=En(t,r,GM,0),S=En(t,r,XM,0),g=En(t,r,"passThrough");let m,x;g||(m=En(t,r,"password"),x=En(t,r,"rawPassword"));const w=En(t,r,"encryptionStrength",3),C=En(t,r,KM),A=En(t,r,"extendedTimestamp",!0),M=En(t,r,"keepOrder",!0),E=En(t,r,"level"),N=En(t,r,"useWebWorkers"),I=En(t,r,"bufferedWrite"),L=En(t,r,"dataDescriptorSignature",!1),R=En(t,r,"signal"),B=En(t,r,"useUnicodeFileNames",!0),V=En(t,r,"useCompressionStream"),z=En(t,r,"compressionMethod");let G=En(t,r,"dataDescriptor",!0),O=En(t,r,yb);if(!C&&(m!==$n||x!==$n)&&!(w>=1&&w<=3))throw new Error(Zte);let y=new Uint8Array;const{extraField:b}=r;if(b){let ut=0,tt=0;b.forEach(Pt=>ut+=4+pn(Pt)),y=new Uint8Array(ut),b.forEach((Pt,lt)=>{if(lt>Zr)throw new Error(Kte);if(pn(Pt)>Zr)throw new Error(Jte);dr(y,new Uint16Array([lt]),tt),dr(y,new Uint16Array([pn(Pt)]),tt+2),dr(y,Pt,tt+4),tt+=4+pn(Pt)})}let k=0,F=0,H=0;if(g&&({uncompressedSize:H}=r,H===$n))throw new Error(Qte);const W=O===!0;n&&(n=Nte(n),await Vu(n),g?k=NP(H):n.size===$n?(G=!0,(O||O===$n)&&(O=!0,H=k=Qr+1)):(H=n.size,k=NP(H)));const{diskOffset:ne,diskNumber:Z,maxSize:K}=t.writer,ae=W||H>Qr,se=W||k>Qr,ye=W||t.offset+t.pendingEntriesSize-ne>Qr,Ae=En(t,r,"supportZip64SplitFile",!0)&&W||Z+Math.ceil(t.pendingEntriesSize/K)>Zr;if(ye||ae||se||Ae){if(O===!1||!M)throw new Error(_b);O=!0}O=O||!1;const Ue=En(t,r,YM),{signature:He}=r;r=Object.assign({},r,{rawFilename:s,rawComment:o,version:l,versionMadeBy:u,lastModDate:f,lastAccessDate:h,creationDate:p,rawExtraField:y,zip64:O,zip64UncompressedSize:ae,zip64CompressedSize:se,zip64Offset:ye,zip64DiskNumberStart:Ae,password:m,rawPassword:x,level:!V&&t.config.CompressionStream===$n&&t.config.CompressionStreamNative===$n?0:E,useWebWorkers:N,encryptionStrength:w,extendedTimestamp:A,zipCrypto:C,bufferedWrite:I,keepOrder:M,useUnicodeFileNames:B,dataDescriptor:G,dataDescriptorSignature:L,signal:R,msDosCompatible:v,internalFileAttribute:P,externalFileAttribute:S,useCompressionStream:V,passThrough:g,encrypted:!!(m&&pn(m)||x&&pn(x))||g&&Ue,signature:He,compressionMethod:z});const Qe=ine(r),ie=ane(r),dt=pn(Qe.localHeaderArray,ie.dataDescriptorArray);F=dt+k,t.options.usdz&&(F+=F+64),t.pendingEntriesSize+=F;let ke;try{ke=await nne(t,e,n,{headerInfo:Qe,dataDescriptorInfo:ie,metadataSize:dt},r)}finally{t.pendingEntriesSize-=F}return Object.assign(ke,{name:e,comment:a,extraField:b}),new JM(ke)}async function nne(t,e,n,r,i){const{files:s,writer:a}=t,{keepOrder:o,dataDescriptor:l,signal:u}=i,{headerInfo:f}=r,{usdz:h}=t.options,p=Array.from(s.values()).pop();let v={},P,S,g,m,x,w,C;s.set(e,v);try{let N;o&&(N=p&&p.lock,A()),(i.bufferedWrite||t.writerLocked||t.bufferedWrites&&o||!l)&&!h?(w=new TransformStream,C=new Response(w.readable).blob(),w.writable.size=0,P=!0,t.bufferedWrites++,await Vu(a)):(w=a,await M()),await Vu(w);const{writable:I}=a;let{diskOffset:L}=a;if(t.addSplitZipSignature){delete t.addSplitZipSignature;const B=new Uint8Array(4),V=Sr(B);hn(V,0,dM),await bs(I,B),t.offset+=4}h&&sne(r,t.offset-L),P||(await N,await E(I));const{diskNumber:R}=a;if(x=!0,v.diskNumberStart=R,v=await rne(n,w,v,r,t.config,i),x=!1,s.set(e,v),v.filename=e,P){await w.writable.getWriter().close();let B=await C;await N,await M(),m=!0,l||(B=await lne(v,B,I,i)),await E(I),v.diskNumberStart=a.diskNumber,L=a.diskOffset,await B.stream().pipeTo(I,{preventClose:!0,preventAbort:!0,signal:u}),I.size+=B.size,m=!1}if(v.offset=t.offset-L,v.zip64)cne(v,i);else if(v.offset>Qr)throw new Error(_b);return t.offset+=v.size,v}catch(N){if(P&&m||!P&&x){if(t.hasCorruptedEntries=!0,N)try{N.corruptedEntry=!0}catch{}P?t.offset+=w.writable.size:t.offset=w.writable.size}throw s.delete(e),N}finally{P&&t.bufferedWrites--,g&&g(),S&&S()}function A(){v.lock=new Promise(N=>g=N)}async function M(){t.writerLocked=!0;const{lockWriter:N}=t;t.lockWriter=new Promise(I=>S=()=>{t.writerLocked=!1,I()}),await N}async function E(N){pn(f.localHeaderArray)>a.availableSize&&(a.availableSize=0,await bs(N,new Uint8Array))}}async function rne(t,e,{diskNumberStart:n,lock:r},i,s,a){const{headerInfo:o,dataDescriptorInfo:l,metadataSize:u}=i,{localHeaderArray:f,headerArray:h,lastModDate:p,rawLastModDate:v,encrypted:P,compressed:S,version:g,compressionMethod:m,rawExtraFieldExtendedTimestamp:x,extraFieldExtendedTimestampFlag:w,rawExtraFieldNTFS:C,rawExtraFieldAES:A}=o,{dataDescriptorArray:M}=l,{rawFilename:E,lastAccessDate:N,creationDate:I,password:L,rawPassword:R,level:B,zip64:V,zip64UncompressedSize:z,zip64CompressedSize:G,zip64Offset:O,zip64DiskNumberStart:y,zipCrypto:b,dataDescriptor:k,directory:F,versionMadeBy:H,rawComment:W,rawExtraField:ne,useWebWorkers:Z,onstart:K,onprogress:ae,onend:se,signal:ye,encryptionStrength:me,extendedTimestamp:Ae,msDosCompatible:Ue,internalFileAttribute:He,externalFileAttribute:Qe,useCompressionStream:ie,passThrough:dt}=a,ke={lock:r,versionMadeBy:H,zip64:V,directory:!!F,filenameUTF8:!0,rawFilename:E,commentUTF8:!0,rawComment:W,rawExtraFieldExtendedTimestamp:x,rawExtraFieldNTFS:C,rawExtraFieldAES:A,rawExtraField:ne,extendedTimestamp:Ae,msDosCompatible:Ue,internalFileAttribute:He,externalFileAttribute:Qe,diskNumberStart:n};let{signature:ut,uncompressedSize:tt}=a,Pt=0;dt||(tt=0);const{writable:lt}=e;if(t){t.chunkSize=qee(s),await bs(lt,f);const X=t.readable,te=X.size=t.size,fe={options:{codecType:FM,level:B,rawPassword:R,password:L,encryptionStrength:me,zipCrypto:P&&b,passwordVerification:P&&b&&v>>8&255,signed:!dt,compressed:S&&!dt,encrypted:P&&!dt,useWebWorkers:Z,useCompressionStream:ie,transferStreams:!1},config:s,streamOptions:{signal:ye,size:te,onstart:K,onprogress:ae,onend:se}},de=await Ete({readable:X,writable:lt},fe);Pt=de.outputSize,dt||(tt=de.inputSize,ut=de.signature),lt.size+=tt}else await bs(lt,f);let re;if(V){let X=4;z&&(X+=8),G&&(X+=8),O&&(X+=8),y&&(X+=4),re=new Uint8Array(X)}else re=new Uint8Array;return one({signature:ut,rawExtraFieldZip64:re,compressedSize:Pt,uncompressedSize:tt,headerInfo:o,dataDescriptorInfo:l},a),k&&await bs(lt,M),Object.assign(ke,{uncompressedSize:tt,compressedSize:Pt,lastModDate:p,rawLastModDate:v,creationDate:I,lastAccessDate:N,encrypted:P,zipCrypto:b,size:u+Pt,compressionMethod:m,version:g,headerArray:h,signature:ut,rawExtraFieldZip64:re,extraFieldExtendedTimestampFlag:w,zip64UncompressedSize:z,zip64CompressedSize:G,zip64Offset:O,zip64DiskNumberStart:y}),ke}function ine(t){const{rawFilename:e,lastModDate:n,lastAccessDate:r,creationDate:i,level:s,zip64:a,zipCrypto:o,useUnicodeFileNames:l,dataDescriptor:u,directory:f,rawExtraField:h,encryptionStrength:p,extendedTimestamp:v,encrypted:P}=t;let{version:S,compressionMethod:g}=t;const m=!f&&(s>0||s===$n&&g!==0);let x;if(P&&!o){x=new Uint8Array(pn(LP)+2);const O=Sr(x);yn(O,0,Ree),dr(x,LP,2),Eh(O,8,p)}else x=new Uint8Array;let w,C,A;if(v){C=new Uint8Array(9+(r?4:0)+(i?4:0));const O=Sr(C);yn(O,0,mM),yn(O,2,pn(C)-4),A=1+(r?2:0)+(i?4:0),Eh(O,4,A);let y=5;hn(O,y,Math.floor(n.getTime()/1e3)),y+=4,r&&(hn(O,y,Math.floor(r.getTime()/1e3)),y+=4),i&&hn(O,y,Math.floor(i.getTime()/1e3));try{w=new Uint8Array(36);const b=Sr(w),k=Gy(n);yn(b,0,Iee),yn(b,2,32),yn(b,8,Lee),yn(b,10,24),Kr(b,12,k),Kr(b,20,Gy(r)||k),Kr(b,28,Gy(i)||k)}catch{w=new Uint8Array}}else w=C=new Uint8Array;let M=0;l&&(M=M|kee),u&&(M=M|Dee),g===$n&&(g=m?fP:xee),g==fP&&(s>=1&&s<3&&(M=M|6),s>=3&&s<5&&(M=M|1),s===9&&(M=M|2)),a&&(S=S>dP?S:dP),P&&(M=M|Nee,o||(S=S>hP?S:hP,x[9]=g,g=bee));const E=new Uint8Array(26),N=Sr(E);yn(N,0,S),yn(N,2,M),yn(N,4,g);const I=new Uint32Array(1),L=Sr(I);let R;n<mP?R=mP:n>pP?R=pP:R=n,yn(L,0,(R.getHours()<<6|R.getMinutes())<<5|R.getSeconds()/2),yn(L,2,(R.getFullYear()-1980<<4|R.getMonth()+1)<<5|R.getDate());const B=I[0];hn(N,6,B),yn(N,22,pn(e));const V=pn(x,C,w,h);yn(N,24,V);const z=new Uint8Array(30+pn(e)+V),G=Sr(z);return hn(G,0,wee),dr(z,E,4),dr(z,e,30),dr(z,x,30+pn(e)),dr(z,C,30+pn(e,x)),dr(z,w,30+pn(e,x,C)),dr(z,h,30+pn(e,x,C,w)),{localHeaderArray:z,headerArray:E,headerView:N,lastModDate:n,rawLastModDate:B,encrypted:P,compressed:m,version:S,compressionMethod:g,extraFieldExtendedTimestampFlag:A,rawExtraFieldExtendedTimestamp:C,rawExtraFieldNTFS:w,rawExtraFieldAES:x,extraFieldLength:V}}function sne(t,e){const{headerInfo:n}=t;let{localHeaderArray:r,extraFieldLength:i}=n,s=Sr(r),a=64-(e+pn(r))%64;a<4&&(a+=64);const o=new Uint8Array(a),l=Sr(o);yn(l,0,Oee),yn(l,2,a-2);const u=r;n.localHeaderArray=r=new Uint8Array(pn(u)+a),dr(r,u),dr(r,o,pn(u)),s=Sr(r),yn(s,28,i+a),t.metadataSize+=a}function ane(t){const{zip64:e,dataDescriptor:n,dataDescriptorSignature:r}=t;let i=new Uint8Array,s,a=0;return n&&(i=new Uint8Array(e?r?24:20:r?16:12),s=Sr(i),r&&(a=4,hn(s,0,See))),{dataDescriptorArray:i,dataDescriptorView:s,dataDescriptorOffset:a}}function one(t,e){const{signature:n,rawExtraFieldZip64:r,compressedSize:i,uncompressedSize:s,headerInfo:a,dataDescriptorInfo:o}=t,{headerView:l,encrypted:u}=a,{dataDescriptorView:f,dataDescriptorOffset:h}=o,{zip64:p,zip64UncompressedSize:v,zip64CompressedSize:P,zipCrypto:S,dataDescriptor:g}=e;if((!u||S)&&n!==$n&&(hn(l,10,n),g&&hn(f,h,n)),p){const m=Sr(r);yn(m,0,Mee),yn(m,2,pn(r)-4);let x=4;v&&(hn(l,18,Qr),Kr(m,x,BigInt(s)),x+=8),P&&(hn(l,14,Qr),Kr(m,x,BigInt(i))),g&&(Kr(f,h+4,BigInt(i)),Kr(f,h+12,BigInt(s)))}else hn(l,14,i),hn(l,18,s),g&&(hn(f,h+4,i),hn(f,h+8,s))}async function lne(t,e,n,{zipCrypto:r}){let i;i=await e.slice(0,26).arrayBuffer(),i.byteLength!=26&&(i=i.slice(0,26));const s=new DataView(i);return(!t.encrypted||r)&&hn(s,14,t.signature),t.zip64?(hn(s,18,Qr),hn(s,22,Qr)):(hn(s,18,t.compressedSize),hn(s,22,t.uncompressedSize)),await bs(n,new Uint8Array(i)),e.slice(i.byteLength)}function cne(t,e){const{rawExtraFieldZip64:n,offset:r,diskNumberStart:i}=t,{zip64UncompressedSize:s,zip64CompressedSize:a,zip64Offset:o,zip64DiskNumberStart:l}=e,u=Sr(n);let f=4;s&&(f+=8),a&&(f+=8),o&&(Kr(u,f,BigInt(r)),f+=8),l&&hn(u,f,i)}async function une(t,e,n){const{files:r,writer:i}=t,{diskOffset:s,writable:a}=i;let{diskNumber:o}=i,l=0,u=0,f=t.offset-s,h=r.size;for(const[,A]of r){const{rawFilename:M,rawExtraFieldZip64:E,rawExtraFieldAES:N,rawComment:I,rawExtraFieldNTFS:L,rawExtraField:R,extendedTimestamp:B,extraFieldExtendedTimestampFlag:V,lastModDate:z}=A;let G;if(B){G=new Uint8Array(9);const O=Sr(G);yn(O,0,mM),yn(O,2,5),Eh(O,4,V),hn(O,5,Math.floor(z.getTime()/1e3))}else G=new Uint8Array;A.rawExtraFieldCDExtendedTimestamp=G,u+=46+pn(M,I,E,N,L,G,R)}const p=new Uint8Array(u),v=Sr(p);await Vu(i);let P=0;for(const[A,M]of Array.from(r.values()).entries()){const{offset:E,rawFilename:N,rawExtraFieldZip64:I,rawExtraFieldAES:L,rawExtraFieldCDExtendedTimestamp:R,rawExtraFieldNTFS:B,rawExtraField:V,rawComment:z,versionMadeBy:G,headerArray:O,directory:y,zip64:b,zip64UncompressedSize:k,zip64CompressedSize:F,zip64DiskNumberStart:H,zip64Offset:W,msDosCompatible:ne,internalFileAttribute:Z,externalFileAttribute:K,diskNumberStart:ae,uncompressedSize:se,compressedSize:ye}=M,me=pn(I,L,R,B,V);hn(v,l,Pee),yn(v,l+4,G);const Ae=Sr(O);k||hn(Ae,18,se),F||hn(Ae,14,ye),dr(p,O,l+6),yn(v,l+30,me),yn(v,l+32,pn(z)),yn(v,l+34,b&&H?Zr:ae),yn(v,l+36,Z),K?hn(v,l+38,K):y&&ne&&Eh(v,l+38,Fee),hn(v,l+42,b&&W?Qr:E),dr(p,N,l+46),dr(p,I,l+46+pn(N)),dr(p,L,l+46+pn(N,I)),dr(p,R,l+46+pn(N,I,L)),dr(p,B,l+46+pn(N,I,L,R)),dr(p,V,l+46+pn(N,I,L,R,B)),dr(p,z,l+46+pn(N)+me);const Ue=46+pn(N,z)+me;if(l-P>i.availableSize&&(i.availableSize=0,await bs(a,p.slice(P,l)),P=l),l+=Ue,n.onprogress)try{await n.onprogress(A+1,r.size,new JM(M))}catch{}}await bs(a,P?p.slice(P):p);let S=i.diskNumber;const{availableSize:g}=i;g<c2&&S++;let m=En(t,n,yb);if(f>Qr||u>Qr||h>Zr||S>Zr){if(m===!1)throw new Error(_b);m=!0}const x=new Uint8Array(m?Aee:c2),w=Sr(x);l=0,m&&(hn(w,0,Cee),Kr(w,4,BigInt(44)),yn(w,12,45),yn(w,14,45),hn(w,16,S),hn(w,20,o),Kr(w,24,BigInt(h)),Kr(w,32,BigInt(h)),Kr(w,40,BigInt(u)),Kr(w,48,BigInt(f)),hn(w,56,Tee),Kr(w,64,BigInt(f)+BigInt(u)),hn(w,72,S+1),En(t,n,"supportZip64SplitFile",!0)&&(S=Zr,o=Zr),h=Zr,f=Qr,u=Qr,l+=pM+hM),hn(w,l,Eee),yn(w,l+4,S),yn(w,l+6,o),yn(w,l+8,h),yn(w,l+10,h),hn(w,l+12,u),hn(w,l+16,f);const C=pn(e);if(C)if(C<=Zr)yn(w,l+20,C);else throw new Error(Wte);await bs(a,x),C&&await bs(a,e)}async function bs(t,e){const n=t.getWriter();try{await n.ready,t.size+=pn(e),await n.write(e)}finally{n.releaseLock()}}function Gy(t){if(t)return(BigInt(t.getTime())+BigInt(116444736e5))*BigInt(1e4)}function En(t,e,n,r){const i=e[n]===$n?t.options[n]:e[n];return i===$n?r:i}function NP(t){return t+5*(Math.floor(t/16383)+1)}function Eh(t,e,n){t.setUint8(e,n)}function yn(t,e,n){t.setUint16(e,n,!0)}function hn(t,e,n){t.setUint32(e,n,!0)}function Kr(t,e,n){t.setBigUint64(e,n,!0)}function dr(t,e,n){t.set(e,n)}function Sr(t){return new DataView(t.buffer)}function pn(...t){let e=0;return t.forEach(n=>n&&(e+=n.length)),e}let QM;try{QM=import.meta.url}catch{}pb({baseURL:QM});Tte(pb);pb({Deflate:JQ,Inflate:_ee});const e8=t=>t.reduce((e,n)=>Array.isArray(n)?e.concat(e8(n)):e.concat(n),[]);var $t=e8;const fne=t=>Object.assign({},t);var dne=fne;const hne=(t,e,n)=>(t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t);var pne=hne;const mne=()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var xb=mne;const vne=xb,gne=t=>{const e=vne();return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};var yne=gne;const _ne=(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t);var t8=_ne;const xne=(t,e)=>{const n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],f=e[8],h=e[9],p=e[10],v=e[11],P=e[12],S=e[13],g=e[14],m=e[15],x=n*o-r*a,w=n*l-i*a,C=n*u-s*a,A=r*l-i*o,M=r*u-s*o,E=i*u-s*l,N=f*S-h*P,I=f*g-p*P,L=f*m-v*P,R=h*g-p*S,B=h*m-v*S,V=p*m-v*g;let z=x*V-w*B+C*R+A*L-M*I+E*N;return z?(z=1/z,t[0]=(o*V-l*B+u*R)*z,t[1]=(i*B-r*V-s*R)*z,t[2]=(S*E-g*M+m*A)*z,t[3]=(p*M-h*E-v*A)*z,t[4]=(l*L-a*V-u*I)*z,t[5]=(n*V-i*L+s*I)*z,t[6]=(g*C-P*E-m*w)*z,t[7]=(f*E-p*C+v*w)*z,t[8]=(a*B-o*L+u*N)*z,t[9]=(r*L-n*B-s*N)*z,t[10]=(P*M-S*C+m*x)*z,t[11]=(h*C-f*M-v*x)*z,t[12]=(o*I-a*R-l*N)*z,t[13]=(n*R-r*I+i*N)*z,t[14]=(S*w-P*A-g*x)*z,t[15]=(f*A-h*w+p*x)*z,t):null};var bne=xne;const wne=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15];var Sne=wne;const Pne=1e5,Ene=1e-5,Cne=1e-13,Tne=Math.PI*2;var un={EPS:Ene,NEPS:Cne,TAU:Tne,spatialResolution:Pne};const{NEPS:Ane}=un,n8=t=>Math.abs(t)<Ane?0:t,Mne=t=>n8(Math.sin(t)),Rne=t=>n8(Math.cos(t));var Pr={sin:Mne,cos:Rne};const Ine=t=>(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t);var r8=Ine;const{EPS:Lne}=un,{sin:One,cos:Nne}=Pr,Dne=r8,kne=(t,e,n)=>{let[r,i,s]=n;const a=r*r+i*i+s*s;if(Math.abs(a)<Lne)return Dne(t);const o=1/Math.sqrt(a);r*=o,i*=o,s*=o;const l=One(e),u=Nne(e),f=1-u;return t[0]=r*r*f+u,t[1]=i*r*f+s*l,t[2]=s*r*f-i*l,t[3]=0,t[4]=r*i*f-s*l,t[5]=i*i*f+u,t[6]=s*i*f+r*l,t[7]=0,t[8]=r*s*f+i*l,t[9]=i*s*f-r*l,t[10]=s*s*f+u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var i8=kne;const Fne=(t,e)=>(t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t);var Une=Fne;const{sin:Xy,cos:Wy}=Pr,Bne=(t,e,n,r)=>{const i=Xy(e),s=Wy(e),a=Xy(n),o=Wy(n),l=Xy(r),u=Wy(r);return t[0]=o*s,t[1]=o*i,t[2]=-a,t[3]=0,t[4]=l*a*s-u*i,t[5]=u*s+l*a*i,t[6]=l*o,t[7]=0,t[8]=l*i+u*a*s,t[9]=u*a*i-l*s,t[10]=u*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var $ne=Bne;const Vne=(t,e)=>(t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t);var qne=Vne;const Hne=xb,zne=(t,e,n,r,i,s,a,o,l,u,f,h,p,v,P,S)=>{const g=Hne();return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=s,g[6]=a,g[7]=o,g[8]=l,g[9]=u,g[10]=f,g[11]=h,g[12]=p,g[13]=v,g[14]=P,g[15]=S,g};var Gne=zne;const Xne=(t,e)=>(t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t);var s8=Xne;const Wne=(t,e,n)=>(t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t);var a8=Wne;const Yne=(t,e)=>t[0]*e[0]+t[1]*e[1]+t[2]*e[2];var rg=Yne;const jne=rg,Zne=(t,e)=>{const n=t[0],r=t[1],i=t[2],s=e[0],a=e[1],o=e[2],l=Math.sqrt(n*n+r*r+i*i),u=Math.sqrt(s*s+a*a+o*o),f=l*u,h=f&&jne(t,e)/f;return Math.acos(Math.min(Math.max(h,-1),1))};var Kne=Zne;const Jne=()=>[0,0,0];var ig=Jne;const Qne=ig,ere=t=>{const e=Qne();return e[0]=t[0],e[1]=t[1],e[2]=t[2],e};var tre=ere;const nre=(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t);var o8=nre;const rre=(t,e,n)=>{const r=e[0],i=e[1],s=e[2],a=n[0],o=n[1],l=n[2];return t[0]=i*l-s*o,t[1]=s*a-r*l,t[2]=r*o-i*a,t};var pf=rre;const ire=(t,e)=>{const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)};var l8=ire;const sre=(t,e,n)=>(t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t);var are=sre;const ore=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2];var lre=ore;const cre=(t,e)=>(t[0]=e,t[1]=e,t[2]=e,t);var ure=cre;const fre=ig,dre=(t,e,n)=>{const r=fre();return r[0]=t,r[1]=e,r[2]=n,r};var hre=dre;const pre=(t,e,n=0)=>(t[0]=e[0],t[1]=e[1],t[2]=n,t);var mre=pre;const vre=t=>{const e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)};var c8=vre;const gre=(t,e,n,r)=>(t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t[2]=e[2]+r*(n[2]-e[2]),t);var yre=gre;const _re=(t,e,n)=>(t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t);var u8=_re;const xre=(t,e,n)=>(t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t);var f8=xre;const bre=(t,e,n)=>(t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t);var wre=bre;const Sre=(t,e)=>(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t);var Pre=Sre;const Ere=(t,e)=>{const n=e[0],r=e[1],i=e[2];let s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=i*s,t};var bb=Ere;const Cre=s8,Tre=ig,Are=pf,Mre=(t,e)=>{const n=Cre(Tre(),e),r=0+(n[0]<n[1]&&n[0]<n[2]),i=0+(n[1]<=n[0]&&n[1]<n[2]),s=0+(n[2]<=n[0]&&n[2]<=n[1]);return Are(t,e,[r,i,s])};var Rre=Mre;const Ire=(t,e,n,r)=>{const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t};var Lre=Ire;const Ore=(t,e,n,r)=>{const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t};var Nre=Ore;const Dre=(t,e,n,r)=>{const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=e[2],t};var kre=Dre;const Fre=(t,e,n)=>(t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t);var d8=Fre;const Ure=(t,e,n)=>(t[0]=Math.round(e[0]/n)*n+0,t[1]=Math.round(e[1]/n)*n+0,t[2]=Math.round(e[2]/n)*n+0,t);var Bre=Ure;const $re=(t,e)=>{const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i};var h8=$re;const Vre=t=>{const e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r};var p8=Vre;const qre=(t,e,n)=>(t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t);var sg=qre;const Hre=t=>`[${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)}]`;var zre=Hre;const Gre=(t,e,n)=>{const r=e[0],i=e[1],s=e[2];let a=n[3]*r+n[7]*i+n[11]*s+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/a,t};var Xre=Gre,Mt={abs:s8,add:a8,angle:Kne,clone:tre,copy:o8,create:ig,cross:pf,distance:l8,divide:are,dot:rg,equals:lre,fromScalar:ure,fromValues:hre,fromVec2:mre,length:c8,lerp:yre,max:u8,min:f8,multiply:wre,negate:Pre,normalize:bb,orthogonal:Rre,rotateX:Lre,rotateY:Nre,rotateZ:kre,scale:d8,snap:Bre,squaredDistance:h8,squaredLength:p8,subtract:sg,toString:zre,transform:Xre};const Ca=Mt,Wre=i8,Yre=(t,e,n)=>{const r=Ca.normalize(Ca.create(),e),i=Ca.normalize(Ca.create(),n),s=Ca.cross(Ca.create(),i,r),a=Ca.dot(i,r);if(a===-1)return Wre(t,Math.PI,Ca.orthogonal(s,r));const o=1/(1+a);return t[0]=s[0]*s[0]*o+a,t[1]=s[1]*s[0]*o-s[2],t[2]=s[2]*s[0]*o+s[1],t[3]=0,t[4]=s[0]*s[1]*o+s[2],t[5]=s[1]*s[1]*o+a,t[6]=s[2]*s[1]*o-s[0],t[7]=0,t[8]=s[0]*s[2]*o-s[1],t[9]=s[1]*s[2]*o+s[0],t[10]=s[2]*s[2]*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var jre=Yre;const{sin:Zre,cos:Kre}=Pr,Jre=(t,e)=>{const n=Zre(e),r=Kre(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var Qre=Jre;const{sin:eie,cos:tie}=Pr,nie=(t,e)=>{const n=eie(e),r=tie(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var rie=nie;const{sin:iie,cos:sie}=Pr,aie=(t,e)=>{const n=iie(e),r=sie(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var oie=aie;const lie=t=>t[0]===1&&t[1]===0&&t[2]===0&&t[3]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[7]===0&&t[8]===0&&t[9]===0&&t[10]===1&&t[11]===0&&t[12]===0&&t[13]===0&&t[14]===0&&t[15]===1;var cie=lie;const uie=t=>Hs(t[1])&&Hs(t[2])&&Hs(t[3])&&Hs(t[4])&&Hs(t[6])&&Hs(t[7])&&Hs(t[8])&&Hs(t[9])&&Hs(t[11])&&t[15]===1,Hs=t=>Math.abs(t)<Number.EPSILON;var fie=uie;const die=t=>{const e=t[4]*t[9]-t[8]*t[5],n=t[8]*t[1]-t[0]*t[9],r=t[0]*t[5]-t[4]*t[1];return e*t[2]+n*t[6]+r*t[10]<0};var hie=die;const pie=(t,e)=>{const[n,r,i,s]=e;return t[0]=1-2*n*n,t[1]=-2*r*n,t[2]=-2*i*n,t[3]=0,t[4]=-2*n*r,t[5]=1-2*r*r,t[6]=-2*i*r,t[7]=0,t[8]=-2*n*i,t[9]=-2*r*i,t[10]=1-2*i*i,t[11]=0,t[12]=2*n*s,t[13]=2*r*s,t[14]=2*i*s,t[15]=1,t};var mie=pie;const vie=(t,e,n)=>{const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5],u=e[6],f=e[7],h=e[8],p=e[9],v=e[10],P=e[11],S=e[12],g=e[13],m=e[14],x=e[15];let w=n[0],C=n[1],A=n[2],M=n[3];return t[0]=w*r+C*o+A*h+M*S,t[1]=w*i+C*l+A*p+M*g,t[2]=w*s+C*u+A*v+M*m,t[3]=w*a+C*f+A*P+M*x,w=n[4],C=n[5],A=n[6],M=n[7],t[4]=w*r+C*o+A*h+M*S,t[5]=w*i+C*l+A*p+M*g,t[6]=w*s+C*u+A*v+M*m,t[7]=w*a+C*f+A*P+M*x,w=n[8],C=n[9],A=n[10],M=n[11],t[8]=w*r+C*o+A*h+M*S,t[9]=w*i+C*l+A*p+M*g,t[10]=w*s+C*u+A*v+M*m,t[11]=w*a+C*f+A*P+M*x,w=n[12],C=n[13],A=n[14],M=n[15],t[12]=w*r+C*o+A*h+M*S,t[13]=w*i+C*l+A*p+M*g,t[14]=w*s+C*u+A*v+M*m,t[15]=w*a+C*f+A*P+M*x,t};var gie=vie;const{EPS:yie}=un,{sin:_ie,cos:xie}=Pr,bie=t8,wie=(t,e,n,r)=>{let[i,s,a]=r;const o=i*i+s*s+a*a;if(Math.abs(o)<yie)return bie(t,e);const l=1/Math.sqrt(o);i*=l,s*=l,a*=l;const u=_ie(n),f=xie(n),h=1-f,p=e[0],v=e[1],P=e[2],S=e[3],g=e[4],m=e[5],x=e[6],w=e[7],C=e[8],A=e[9],M=e[10],E=e[11],N=i*i*h+f,I=s*i*h+a*u,L=a*i*h-s*u,R=i*s*h-a*u,B=s*s*h+f,V=a*s*h+i*u,z=i*a*h+s*u,G=s*a*h-i*u,O=a*a*h+f;return t[0]=p*N+g*I+C*L,t[1]=v*N+m*I+A*L,t[2]=P*N+x*I+M*L,t[3]=S*N+w*I+E*L,t[4]=p*R+g*B+C*V,t[5]=v*R+m*B+A*V,t[6]=P*R+x*B+M*V,t[7]=S*R+w*B+E*V,t[8]=p*z+g*G+C*O,t[9]=v*z+m*G+A*O,t[10]=P*z+x*G+M*O,t[11]=S*z+w*G+E*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t};var Sie=wie;const{sin:Pie,cos:Eie}=Pr,Cie=(t,e,n)=>{const r=Pie(n),i=Eie(n),s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],f=e[9],h=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+u*r,t[5]=a*i+f*r,t[6]=o*i+h*r,t[7]=l*i+p*r,t[8]=u*i-s*r,t[9]=f*i-a*r,t[10]=h*i-o*r,t[11]=p*i-l*r,t};var Tie=Cie;const{sin:Aie,cos:Mie}=Pr,Rie=(t,e,n)=>{const r=Aie(n),i=Mie(n),s=e[0],a=e[1],o=e[2],l=e[3],u=e[8],f=e[9],h=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-u*r,t[1]=a*i-f*r,t[2]=o*i-h*r,t[3]=l*i-p*r,t[8]=s*r+u*i,t[9]=a*r+f*i,t[10]=o*r+h*i,t[11]=l*r+p*i,t};var Iie=Rie;const{sin:Lie,cos:Oie}=Pr,Nie=(t,e,n)=>{const r=Lie(n),i=Oie(n),s=e[0],a=e[1],o=e[2],l=e[3],u=e[4],f=e[5],h=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+u*r,t[1]=a*i+f*r,t[2]=o*i+h*r,t[3]=l*i+p*r,t[4]=u*i-s*r,t[5]=f*i-a*r,t[6]=h*i-o*r,t[7]=p*i-l*r,t};var Die=Nie;const kie=(t,e,n)=>{const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};var Fie=kie;const Uie=(t,e,n)=>(t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t);var Bie=Uie;const $ie=t=>t.map(e=>e.toFixed(7)).toString();var Vie=$ie;const qie=(t,e,n)=>{const r=n[0],i=n[1],s=n[2];let a,o,l,u,f,h,p,v,P,S,g,m;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(a=e[0],o=e[1],l=e[2],u=e[3],f=e[4],h=e[5],p=e[6],v=e[7],P=e[8],S=e[9],g=e[10],m=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=u,t[4]=f,t[5]=h,t[6]=p,t[7]=v,t[8]=P,t[9]=S,t[10]=g,t[11]=m,t[12]=a*r+f*i+P*s+e[12],t[13]=o*r+h*i+S*s+e[13],t[14]=l*r+p*i+g*s+e[14],t[15]=u*r+v*i+m*s+e[15]),t};var Hie=qie,Nn={add:pne,clone:yne,copy:t8,create:xb,invert:bne,equals:Sne,fromRotation:i8,fromScaling:Une,fromTaitBryanRotation:$ne,fromTranslation:qne,fromValues:Gne,fromVectorRotation:jre,fromXRotation:Qre,fromYRotation:rie,fromZRotation:oie,identity:r8,isIdentity:cie,isOnlyTransformScale:fie,isMirroring:hie,mirrorByPlane:mie,multiply:gie,rotate:Sie,rotateX:Tie,rotateY:Iie,rotateZ:Die,scale:Fie,subtract:Bie,toString:Vie,translate:Hie};const zie=Nn,Gie=t=>(t===void 0&&(t=[]),{sides:t,transforms:zie.create()});var ag=Gie;const Xie=(t,e)=>(t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t);var Wie=Xie;const Yie=(t,e,n)=>(t[0]=e[0]+n[0],t[1]=e[1]+n[1],t);var jie=Yie;const Zie=t=>Math.atan2(t[1],t[0]);var wb=Zie,Kie=wb;const Jie=wb,Qie=t=>Jie(t)*57.29577951308232;var ese=Qie;const tse=()=>[0,0];var og=tse;const nse=og,rse=t=>{const e=nse();return e[0]=t[0],e[1]=t[1],e};var ise=rse;const sse=(t,e)=>(t[0]=e[0],t[1]=e[1],t);var ase=sse;const ose=(t,e,n)=>(t[0]=0,t[1]=0,t[2]=e[0]*n[1]-e[1]*n[0],t);var lse=ose;const cse=(t,e)=>{const n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)};var use=cse;const fse=(t,e,n)=>(t[0]=e[0]/n[0],t[1]=e[1]/n[1],t);var dse=fse;const hse=(t,e)=>t[0]*e[0]+t[1]*e[1];var pse=hse;const mse=(t,e)=>t[0]===e[0]&&t[1]===e[1];var vse=mse;const{sin:gse,cos:yse}=Pr,_se=(t,e)=>(t[0]=yse(e),t[1]=gse(e),t);var m8=_se;const xse=m8,bse=(t,e)=>xse(t,e*.017453292519943295);var wse=bse;const Sse=(t,e)=>(t[0]=e,t[1]=e,t);var Pse=Sse;const Ese=og,Cse=(t,e)=>{const n=Ese();return n[0]=t,n[1]=e,n};var Tse=Cse;const Ase=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]);var Mse=Ase;const Rse=(t,e,n,r)=>{const i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t};var Ise=Rse;const Lse=(t,e,n)=>(t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t);var Ose=Lse;const Nse=(t,e,n)=>(t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t);var Dse=Nse;const kse=(t,e,n)=>(t[0]=e[0]*n[0],t[1]=e[1]*n[1],t);var Fse=kse;const Use=(t,e)=>(t[0]=-e[0],t[1]=-e[1],t);var Bse=Use;const $se=(t,e,n,r)=>{const i=e[0]-n[0],s=e[1]-n[1],a=Math.cos(r),o=Math.sin(r);return t[0]=i*a-s*o+n[0],t[1]=i*o+s*a+n[1],t};var v8=$se;const{TAU:Vse}=un,qse=og,Hse=v8,zse=(t,e)=>Hse(t,e,qse(),Vse/4);var Gse=zse;const Xse=(t,e)=>{const n=e[0],r=e[1];let i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=n*i,t[1]=r*i,t};var Wse=Xse;const Yse=(t,e,n)=>(t[0]=e[0]*n,t[1]=e[1]*n,t);var jse=Yse;const Zse=(t,e,n)=>(t[0]=Math.round(e[0]/n)*n+0,t[1]=Math.round(e[1]/n)*n+0,t);var Kse=Zse;const Jse=(t,e)=>{const n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r};var Qse=Jse;const eae=t=>{const e=t[0],n=t[1];return e*e+n*n};var tae=eae;const nae=(t,e,n)=>(t[0]=e[0]-n[0],t[1]=e[1]-n[1],t);var rae=nae;const iae=t=>`[${t[0].toFixed(7)}, ${t[1].toFixed(7)}]`;var sae=iae;const aae=(t,e,n)=>{const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t};var oae=aae,Zt={abs:Wie,add:jie,angle:Kie,angleDegrees:ese,angleRadians:wb,clone:ise,copy:ase,create:og,cross:lse,distance:use,divide:dse,dot:pse,equals:vse,fromAngleDegrees:wse,fromAngleRadians:m8,fromScalar:Pse,fromValues:Tse,length:Mse,lerp:Ise,max:Ose,min:Dse,multiply:Fse,negate:Bse,normal:Gse,normalize:Wse,rotate:v8,scale:jse,snap:Kse,squaredDistance:Qse,squaredLength:tae,subtract:rae,toString:sae,transform:oae};const Yy=Zt,lae=ag,cae=t=>{if(!Array.isArray(t))throw new Error("the given points must be an array");let e=t.length;if(e<3)throw new Error("the given points must define a closed geometry with three or more points");Yy.equals(t[0],t[e-1])&&--e;const n=[];let r=t[e-1];for(let i=0;i<e;i++){const s=t[i];n.push([Yy.clone(r),Yy.clone(s)]),r=s}return lae(n)};var uae=cae;const fae=Nn,DP=Zt,dae=ag,hae=t=>{if(t[0]!==0)throw new Error("invalid compact binary data");const e=dae();e.transforms=fae.clone(t.slice(1,17));for(let n=21;n<t.length;n+=4){const r=DP.fromValues(t[n+0],t[n+1]),i=DP.fromValues(t[n+2],t[n+3]);e.sides.push([r,i])}return t[17]>=0&&(e.color=[t[17],t[18],t[19],t[20]]),e};var pae=hae;const mae=t=>!!(t&&typeof t=="object"&&"sides"in t&&"transforms"in t&&Array.isArray(t.sides)&&"length"in t.transforms);var g8=mae;const kP=Nn,_d=Zt,vae=t=>(kP.isIdentity(t.transforms)||(t.sides=t.sides.map(e=>{const n=_d.transform(_d.create(),e[0],t.transforms),r=_d.transform(_d.create(),e[1],t.transforms);return[n,r]}),t.transforms=kP.create()),t);var gae=vae;const yae=gae,_ae=t=>yae(t).sides;var mf=_ae;const xae=ag,bae=mf,wae=t=>{const n=bae(t).map(r=>[r[1],r[0]]);return n.reverse(),xae(n)};var y8=wae;const eu=Zt,Sae=mf,Pae=t=>{const e=new Map,n=r=>{const i=r.toString();return e.has(i)?e.get(i):(e.set(i,r),r)};return t.map(r=>r.map(n))},Eae=t=>{const e=new Map;return Pae(t).forEach(r=>{e.has(r[0])?e.get(r[0]).push(r):e.set(r[0],[r])}),e},Cae=t=>{const e=Eae(Sae(t)),n=[];for(;;){let r;for(const[a,o]of e){if(r=o.shift(),!r){e.delete(a);continue}break}if(r===void 0)break;const i=[],s=r[0];for(;;){i.push(r[0]);const a=r[1];if(a===s)break;const o=e.get(a);if(!o)throw new Error(`geometry is not closed at vertex ${a}`);const l=Tae(r,o);o.length===0&&e.delete(a),r=l}i.length>0&&i.push(i.shift()),n.push(i)}return e.clear(),n},Tae=(t,e)=>{if(e.length===1)return e.pop();const n=eu.create(),r=eu.angleDegrees(eu.subtract(n,t[1],t[0]));let i,s;e.forEach((o,l)=>{let f=eu.angleDegrees(eu.subtract(n,o[1],o[0]))-r;f<-180&&(f+=360),f>=180&&(f-=360),(s===void 0||f>i)&&(s=l,i=f)});const a=e[s];return e.splice(s,1),a};var _8=Cae;const Aae=mf,Mae=t=>{const n=Aae(t).map(r=>r[0]);return n.length>0&&n.push(n.shift()),n};var Rae=Mae;const FP=Zt,Iae=mf,Lae=t=>{const e=Iae(t);let n="geom2 ("+e.length+` sides):
[
`;return e.forEach(r=>{n+="  ["+FP.toString(r[0])+", "+FP.toString(r[1])+`]
`}),n+=`]
`,n};var Oae=Lae;const Nae=t=>{const e=t.sides,n=t.transforms;let r=[-1,-1,-1,-1];t.color&&(r=t.color);const i=new Float32Array(21+e.length*4);i[0]=0,i[1]=n[0],i[2]=n[1],i[3]=n[2],i[4]=n[3],i[5]=n[4],i[6]=n[5],i[7]=n[6],i[8]=n[7],i[9]=n[8],i[10]=n[9],i[11]=n[10],i[12]=n[11],i[13]=n[12],i[14]=n[13],i[15]=n[14],i[16]=n[15],i[17]=r[0],i[18]=r[1],i[19]=r[2],i[20]=r[3];for(let s=0;s<e.length;s++){const a=s*4+21,o=e[s][0],l=e[s][1];i[a+0]=o[0],i[a+1]=o[1],i[a+2]=l[0],i[a+3]=l[1]}return i};var Dae=Nae;const UP=Nn,kae=y8,Fae=(t,e)=>{const n=UP.multiply(UP.create(),t,e.transforms),r=Object.assign({},e,{transforms:n});return t[0]*t[5]-t[4]*t[1]<0?kae(r):r};var Uae=Fae;const Bae=Zt,$ae=g8,Vae=_8,qae=t=>{if(!$ae(t))throw new Error("invalid geom2 structure");if(Vae(t),t.sides.forEach(e=>{if(Bae.equals(e[0],e[1]))throw new Error(`geom2 self-edge ${e[0]}`)}),!t.transforms.every(Number.isFinite))throw new Error(`geom2 invalid transforms ${t.transforms}`)};var Hae=qae,zt={clone:dne,create:ag,fromPoints:uae,fromCompactBinary:pae,isA:g8,reverse:y8,toOutlines:_8,toPoints:Rae,toSides:mf,toString:Oae,toCompactBinary:Dae,transform:Uae,validate:Hae};const zae=t=>Object.assign({},t);var Gae=zae;const Xae=Nn,Wae=t=>(t===void 0&&(t=[]),{polygons:t,transforms:Xae.create()});var vf=Wae;const Yae=pf,BP=sg,$P=p8,jae=(t,e,n)=>{const r=[],i=[],s=[];BP(r,n,e),BP(i,t,e);const a=$P(Yae(s,i,r)),o=$P(r);if(o===0)throw Error("a and b are the same point");return a/o},Zae=(t,e,n)=>Math.sqrt(jae(t,e,n));var Kae=Zae;const Jae=pf,Qae=bb,VP=sg,eoe=(t,e,n,r)=>{const i=[0,0,0];return VP(t,e,n),VP(i,n,r),Jae(t,t,i),Qae(t,t)};var toe=eoe;let noe=class{constructor(){this.head=null,this.tail=null}clear(){this.head=this.tail=null}insertBefore(e,n){n.prev=e.prev,n.next=e,n.prev?n.prev.next=n:this.head=n,e.prev=n}insertAfter(e,n){n.prev=e,n.next=e.next,n.next?n.next.prev=n:this.tail=n,e.next=n}add(e){this.head?this.tail.next=e:this.head=e,e.prev=this.tail,e.next=null,this.tail=e}addAll(e){for(this.head?this.tail.next=e:this.head=e,e.prev=this.tail;e.next;)e=e.next;this.tail=e}remove(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}removeChain(e,n){e.prev?e.prev.next=n.next:this.head=n.next,n.next?n.next.prev=e.prev:this.tail=e.prev}first(){return this.head}isEmpty(){return!this.head}};var roe=noe;let ioe=class{constructor(e,n){this.point=e,this.index=n,this.next=null,this.prev=null,this.face=null}};var soe=ioe;const aoe=l8,ooe=h8;let loe=class{constructor(e,n){this.vertex=e,this.face=n,this.next=null,this.prev=null,this.opposite=null}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){return this.tail()?aoe(this.tail().point,this.head().point):-1}lengthSquared(){return this.tail()?ooe(this.tail().point,this.head().point):-1}setOpposite(e){this.opposite=e,e.opposite=this}};var coe=loe;const jy=a8,uoe=o8,foe=pf,Zy=rg,doe=c8,hoe=bb,xd=d8,Ky=sg,Jy=coe,x8=0,poe=1,h2=2;let moe=class b8{constructor(){this.normal=[],this.centroid=[],this.offset=0,this.outside=null,this.mark=x8,this.edge=null,this.nVertices=0}getEdge(e){if(typeof e!="number")throw Error("requires a number");let n=this.edge;for(;e>0;)n=n.next,e-=1;for(;e<0;)n=n.prev,e+=1;return n}computeNormal(){const e=this.edge,n=e.next;let r=n.next;const i=Ky([],n.head().point,e.head().point),s=[],a=[];for(this.nVertices=2,this.normal=[0,0,0];r!==e;)uoe(a,i),Ky(i,r.head().point,e.head().point),jy(this.normal,this.normal,foe(s,a,i)),r=r.next,this.nVertices+=1;this.area=doe(this.normal),this.normal=xd(this.normal,this.normal,1/this.area)}computeNormalMinArea(e){if(this.computeNormal(),this.area<e){let n,r=0,i=this.edge;do{const f=i.lengthSquared();f>r&&(n=i,r=f),i=i.next}while(i!==this.edge);const s=n.tail().point,a=n.head().point,o=Ky([],a,s),l=Math.sqrt(r);xd(o,o,1/l);const u=Zy(this.normal,o);xd(o,o,-u),jy(this.normal,this.normal,o),hoe(this.normal,this.normal)}}computeCentroid(){this.centroid=[0,0,0];let e=this.edge;do jy(this.centroid,this.centroid,e.head().point),e=e.next;while(e!==this.edge);xd(this.centroid,this.centroid,1/this.nVertices)}computeNormalAndCentroid(e){typeof e<"u"?this.computeNormalMinArea(e):this.computeNormal(),this.computeCentroid(),this.offset=Zy(this.normal,this.centroid)}distanceToPlane(e){return Zy(this.normal,e)-this.offset}connectHalfEdges(e,n){let r;if(e.opposite.face===n.opposite.face){const i=n.opposite.face;let s;e===this.edge&&(this.edge=n),i.nVertices===3?(s=n.opposite.prev.opposite,i.mark=h2,r=i):(s=n.opposite.next,i.edge===s.prev&&(i.edge=s),s.prev=s.prev.prev,s.prev.next=s),n.prev=e.prev,n.prev.next=n,n.setOpposite(s),i.computeNormalAndCentroid()}else e.next=n,n.prev=e;return r}mergeAdjacentFaces(e,n){const r=e.opposite,i=r.face;n.push(i),i.mark=h2;let s=e.prev,a=e.next,o=r.prev,l=r.next;for(;s.opposite.face===i;)s=s.prev,l=l.next;for(;a.opposite.face===i;)a=a.next,o=o.prev;let u;for(u=l;u!==o.next;u=u.next)u.face=this;this.edge=a;let f;return f=this.connectHalfEdges(o,a),f&&n.push(f),f=this.connectHalfEdges(s,l),f&&n.push(f),this.computeNormalAndCentroid(),n}collectIndices(){const e=[];let n=this.edge;do e.push(n.head().index),n=n.next;while(n!==this.edge);return e}static createTriangle(e,n,r,i=0){const s=new b8,a=new Jy(e,s),o=new Jy(n,s),l=new Jy(r,s);return a.next=l.prev=o,o.next=a.prev=l,l.next=o.prev=a,s.edge=a,s.computeNormalAndCentroid(i),s}};var voe={VISIBLE:x8,NON_CONVEX:poe,DELETED:h2,Face:moe};const Qy=rg,goe=Kae,yoe=toe,qP=roe,_oe=soe,{Face:zs,VISIBLE:Tl,NON_CONVEX:HP,DELETED:xoe}=voe,boe=1,zP=2;let woe=class{constructor(e){if(!Array.isArray(e))throw TypeError("input is not a valid array");if(e.length<4)throw Error("cannot build a simplex out of <4 points");this.tolerance=-1,this.nFaces=0,this.nPoints=e.length,this.faces=[],this.newFaces=[],this.claimed=new qP,this.unclaimed=new qP,this.vertices=[];for(let n=0;n<e.length;n+=1)this.vertices.push(new _oe(e[n],n));this.discardedFaces=[],this.vertexPointIndices=[]}addVertexToFace(e,n){e.face=n,n.outside?this.claimed.insertBefore(n.outside,e):this.claimed.add(e),n.outside=e}removeVertexFromFace(e,n){e===n.outside&&(e.next&&e.next.face===n?n.outside=e.next:n.outside=null),this.claimed.remove(e)}removeAllVerticesFromFace(e){if(e.outside){let n=e.outside;for(;n.next&&n.next.face===e;)n=n.next;return this.claimed.removeChain(e.outside,n),n.next=null,e.outside}}deleteFaceVertices(e,n){const r=this.removeAllVerticesFromFace(e);if(r)if(!n)this.unclaimed.addAll(r);else{let i;for(let s=r;s;s=i)i=s.next,n.distanceToPlane(s.point)>this.tolerance?this.addVertexToFace(s,n):this.unclaimed.add(s)}}resolveUnclaimedPoints(e){let n=this.unclaimed.first();for(let r=n;r;r=n){n=r.next;let i=this.tolerance,s;for(let a=0;a<e.length;a+=1){const o=e[a];if(o.mark===Tl){const l=o.distanceToPlane(r.point);if(l>i&&(i=l,s=o),i>1e3*this.tolerance)break}}s&&this.addVertexToFace(r,s)}}computeExtremes(){const e=[],n=[],r=[],i=[];let s,a;for(s=0;s<3;s+=1)r[s]=i[s]=this.vertices[0];for(s=0;s<3;s+=1)e[s]=n[s]=this.vertices[0].point[s];for(s=1;s<this.vertices.length;s+=1){const o=this.vertices[s],l=o.point;for(a=0;a<3;a+=1)l[a]<e[a]&&(e[a]=l[a],r[a]=o);for(a=0;a<3;a+=1)l[a]>n[a]&&(n[a]=l[a],i[a]=o)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e[0]),Math.abs(n[0]))+Math.max(Math.abs(e[1]),Math.abs(n[1]))+Math.max(Math.abs(e[2]),Math.abs(n[2]))),[r,i]}createInitialSimplex(){const e=this.vertices,[n,r]=this.computeExtremes();let i,s,a,o,l=0,u=0;for(a=0;a<3;a+=1){const S=r[a].point[a]-n[a].point[a];S>l&&(l=S,u=a)}const f=n[u],h=r[u];for(l=0,a=0;a<this.vertices.length;a+=1){const S=this.vertices[a];if(S!==f&&S!==h){const g=goe(S.point,f.point,h.point);g>l&&(l=g,i=S)}}const p=yoe([],f.point,h.point,i.point),v=Qy(f.point,p);for(l=-1,a=0;a<this.vertices.length;a+=1){const S=this.vertices[a];if(S!==f&&S!==h&&S!==i){const g=Math.abs(Qy(p,S.point)-v);g>l&&(l=g,s=S)}}const P=[];if(Qy(s.point,p)-v<0)for(P.push(zs.createTriangle(f,h,i),zs.createTriangle(s,h,f),zs.createTriangle(s,i,h),zs.createTriangle(s,f,i)),a=0;a<3;a+=1){const S=(a+1)%3;P[a+1].getEdge(2).setOpposite(P[0].getEdge(S)),P[a+1].getEdge(1).setOpposite(P[S+1].getEdge(0))}else for(P.push(zs.createTriangle(f,i,h),zs.createTriangle(s,f,h),zs.createTriangle(s,h,i),zs.createTriangle(s,i,f)),a=0;a<3;a+=1){const S=(a+1)%3;P[a+1].getEdge(2).setOpposite(P[0].getEdge((3-a)%3)),P[a+1].getEdge(0).setOpposite(P[S+1].getEdge(1))}for(a=0;a<4;a+=1)this.faces.push(P[a]);for(a=0;a<e.length;a+=1){const S=e[a];if(S!==f&&S!==h&&S!==i&&S!==s){l=this.tolerance;let g;for(o=0;o<4;o+=1){const m=P[o].distanceToPlane(S.point);m>l&&(l=m,g=P[o])}g&&this.addVertexToFace(S,g)}}}reindexFaceAndVertices(){const e=[];for(let n=0;n<this.faces.length;n+=1){const r=this.faces[n];r.mark===Tl&&e.push(r)}this.faces=e}collectFaces(e){const n=[];for(let r=0;r<this.faces.length;r+=1){if(this.faces[r].mark!==Tl)throw Error("attempt to include a destroyed face in the hull");const i=this.faces[r].collectIndices();if(e)n.push(i);else for(let s=0;s<i.length-2;s+=1)n.push([i[0],i[s+1],i[s+2]])}return n}nextVertexToAdd(){if(!this.claimed.isEmpty()){let e,n,r=0;const i=this.claimed.first().face;for(n=i.outside;n&&n.face===i;n=n.next){const s=i.distanceToPlane(n.point);s>r&&(r=s,e=n)}return e}}computeHorizon(e,n,r,i){this.deleteFaceVertices(r),r.mark=xoe;let s;n?s=n.next:s=n=r.getEdge(0);do{const a=s.opposite,o=a.face;o.mark===Tl&&(o.distanceToPlane(e)>this.tolerance?this.computeHorizon(e,a,o,i):i.push(s)),s=s.next}while(s!==n)}addAdjoiningFace(e,n){const r=zs.createTriangle(e,n.tail(),n.head());return this.faces.push(r),r.getEdge(-1).setOpposite(n.opposite),r.getEdge(0)}addNewFaces(e,n){this.newFaces=[];let r,i;for(let s=0;s<n.length;s+=1){const a=n[s],o=this.addAdjoiningFace(e,a);r?o.next.setOpposite(i):r=o,this.newFaces.push(o.face),i=o}r.next.setOpposite(i)}oppositeFaceDistance(e){return e.face.distanceToPlane(e.opposite.face.centroid)}doAdjacentMerge(e,n){let r=e.edge,i=!0,s=0;do{if(s>=e.nVertices)throw Error("merge recursion limit exceeded");const a=r.opposite.face;let o=!1;if(n===zP?(this.oppositeFaceDistance(r)>-this.tolerance||this.oppositeFaceDistance(r.opposite)>-this.tolerance)&&(o=!0):e.area>a.area?this.oppositeFaceDistance(r)>-this.tolerance?o=!0:this.oppositeFaceDistance(r.opposite)>-this.tolerance&&(i=!1):this.oppositeFaceDistance(r.opposite)>-this.tolerance?o=!0:this.oppositeFaceDistance(r)>-this.tolerance&&(i=!1),o){const l=e.mergeAdjacentFaces(r,[]);for(let u=0;u<l.length;u+=1)this.deleteFaceVertices(l[u],e);return!0}r=r.next,s+=1}while(r!==e.edge);return i||(e.mark=HP),!1}addVertexToHull(e){const n=[];this.unclaimed.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,n),this.addNewFaces(e,n);for(let r=0;r<this.newFaces.length;r+=1){const i=this.newFaces[r];if(i.mark===Tl)for(;this.doAdjacentMerge(i,boe););}for(let r=0;r<this.newFaces.length;r+=1){const i=this.newFaces[r];if(i.mark===HP)for(i.mark=Tl;this.doAdjacentMerge(i,zP););}this.resolveUnclaimedPoints(this.newFaces)}build(){let e;for(this.createInitialSimplex();e=this.nextVertexToAdd();)this.addVertexToHull(e);this.reindexFaceAndVertices()}};var Soe=woe;const Poe=Soe,Eoe=(t,e={})=>{const n=new Poe(t);return n.build(),n.collectFaces(e.skipTriangulation)};var w8=Eoe;const Coe=t=>((t===void 0||t.length<3)&&(t=[]),{vertices:t});var Rc=Coe;const Toe=Rc,Aoe=Mt,Moe=(...t)=>{let e,n;return t.length===1?(e=Toe(),n=t[0]):(e=t[0],n=t[1]),e.vertices=n.vertices.map(r=>Aoe.clone(r)),e};var Roe=Moe;const Ioe=Mt,Loe=Rc,Ooe=t=>{const e=t.map(n=>Ioe.clone(n));return Loe(e)};var Noe=Ooe;const Doe=Rc,koe=(t,e)=>{const n=Doe(t);return n.plane=e,n};var Foe=koe;const Uoe=()=>[0,0,0,0];var lg=Uoe;const Boe=lg,$oe=t=>{const e=Boe();return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e};var S8=$oe;const Voe=(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t);var P8=Voe;const qoe=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3];var E8=qoe;const Hoe=(t,e)=>(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t);var C8=Hoe;const e_=Mt,zoe=(t,e,n)=>{const r=e_.normalize(e_.create(),e),i=e_.dot(n,r);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=i,t};var T8=zoe;const Goe=lg,Xoe=(t,e,n,r)=>{const i=Goe();return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i};var A8=Xoe;const di=Mt,Woe=T8,Yoe=(t,...e)=>{t[0]=0,t[1]=0,t[2]=0,t[3]=0;const n=e.length;e.forEach(v=>{di.add(t,t,v)}),di.scale(t,t,1/n);let r=0,i=0,s=0,a=0,o=0,l=0;const u=di.create();e.forEach(v=>{di.subtract(u,v,t),r+=u[0]*u[0],i+=u[0]*u[1],s+=u[0]*u[2],a+=u[1]*u[1],o+=u[1]*u[2],l+=u[2]*u[2]}),r/=n,i/=n,s/=n,a/=n,o/=n,l/=n,u[0]=0,u[1]=0,u[2]=0;const f=di.create();let h=a*l-o*o;f[0]=h,f[1]=s*o-i*l,f[2]=i*o-s*a;let p=h*h;return di.add(u,u,di.scale(f,f,p)),h=r*l-s*s,f[0]=s*o-i*l,f[1]=h,f[2]=i*s-o*r,p=h*h,di.dot(u,f)<0&&(p=-p),di.add(u,u,di.scale(f,f,p)),h=r*a-i*i,f[0]=i*o-s*a,f[1]=i*s-o*r,f[2]=h,p=h*h,di.dot(u,f)<0&&(p=-p),di.add(u,u,di.scale(f,f,p)),Woe(t,u,t)};var joe=Yoe;const us=Mt,Zoe=(t,...e)=>{const n=e.length,r=us.create(),i=us.create(),s=a=>{const o=e[a],l=e[(a+1)%n],u=e[(a+2)%n];return us.subtract(r,l,o),us.subtract(i,u,o),us.cross(r,r,i),us.normalize(r,r),r};return t[0]=0,t[1]=0,t[2]=0,n===3?us.copy(t,s(0)):(e.forEach((a,o)=>{us.add(t,t,s(o))}),us.normalize(t,t)),t[3]=us.dot(t,e[0]),t};var M8=Zoe;const{EPS:t_}=un,Lr=Mt,Koe=(t,e,n,r)=>{let i=Lr.subtract(Lr.create(),n,e),s=Lr.subtract(Lr.create(),r,e);Lr.length(i)<t_&&(i=Lr.orthogonal(i,s)),Lr.length(s)<t_&&(s=Lr.orthogonal(s,i));let a=Lr.cross(Lr.create(),i,s);Lr.length(a)<t_&&(s=Lr.orthogonal(s,i),a=Lr.cross(a,i,s)),a=Lr.normalize(a,a);const o=Lr.dot(a,e);return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=o,t};var Joe=Koe;const Qoe=Mt,ele=(t,e)=>{const n=e[0]*t[0]+e[1]*t[1]+e[2]*t[2]-t[3],r=e[0]-n*t[0],i=e[1]-n*t[1],s=e[2]-n*t[2];return Qoe.fromValues(r,i,s)};var tle=ele;const nle=Mt,rle=(t,e)=>nle.dot(t,e)-t[3];var R8=rle;const ile=t=>`(${t[0].toFixed(9)}, ${t[1].toFixed(9)}, ${t[2].toFixed(9)}, ${t[3].toFixed(9)})`;var I8=ile;const sle=Nn,Or=Mt,ale=M8,ole=C8,lle=(t,e,n)=>{const r=sle.isMirroring(n),i=Or.orthogonal(Or.create(),e),s=Or.cross(i,e,i),a=Or.cross(Or.create(),e,s);let o=Or.fromScalar(Or.create(),e[3]);Or.multiply(o,o,e);let l=Or.add(Or.create(),o,s),u=Or.add(Or.create(),o,a);return o=Or.transform(o,o,n),l=Or.transform(l,l,n),u=Or.transform(u,u,n),ale(t,o,l,u),r&&ole(t,t),t};var cle=lle,Os={clone:S8,copy:P8,create:lg,equals:E8,flip:C8,fromNormalAndPoint:T8,fromValues:A8,fromNoisyPoints:joe,fromPoints:M8,fromPointsRandom:Joe,projectionOfPoint:tle,signedDistanceToPoint:R8,toString:I8,transform:cle};const GP=Os,ule=Rc,fle=t=>{const e=t.vertices.slice().reverse(),n=ule(e);return t.plane&&(n.plane=GP.flip(GP.create(),t.plane)),n};var dle=fle;const hle=t=>!!(t&&typeof t=="object"&&"vertices"in t&&Array.isArray(t.vertices));var L8=hle;const XP=Os,ho=Mt,ple=t=>mle(t.vertices),mle=t=>{const e=t.length;if(e>2){const n=XP.fromPoints(XP.create(),...t);let r=t[e-2],i=t[e-1];for(let s=0;s<e;s++){const a=t[s];if(!vle(r,i,a,n))return!1;r=i,i=a}}return!0},vle=(t,e,n,r)=>{const i=ho.cross(ho.create(),ho.subtract(ho.create(),e,t),ho.subtract(ho.create(),n,e));return ho.dot(i,r)>=0};var O8=ple;const WP=Os,gle=t=>(t.plane||(t.plane=WP.fromPoints(WP.create(),...t.vertices)),t.plane);var Sb=gle;const yle=Sb,_le=t=>{const e=t.vertices.length;if(e<3)return 0;const n=t.vertices,r=yle(t),i=Math.abs(r[0]),s=Math.abs(r[1]),a=Math.abs(r[2]);if(i+s+a===0)return 0;let o=3;i>s&&i>a?o=1:s>a&&(o=2);let l=0,u=0,f=1,h=2;switch(o){case 1:for(f=1;f<e;f++)u=f-1,h=(f+1)%e,l+=n[f][1]*(n[h][2]-n[u][2]);l+=n[0][1]*(n[1][2]-n[e-1][2]),l/=2*r[0];break;case 2:for(f=1;f<e;f++)u=f-1,h=(f+1)%e,l+=n[f][2]*(n[h][0]-n[u][0]);l+=n[0][2]*(n[1][0]-n[e-1][0]),l/=2*r[1];break;case 3:default:for(f=1;f<e;f++)u=f-1,h=(f+1)%e,l+=n[f][0]*(n[h][1]-n[u][1]);l+=n[0][0]*(n[1][1]-n[e-1][1]),l/=2*r[2];break}return l};var N8=_le;const tu=Mt,xle=t=>{const e=t.vertices,n=e.length,r=n===0?tu.create():tu.clone(e[0]),i=tu.clone(r);for(let s=1;s<n;s++)tu.min(r,r,e[s]),tu.max(i,i,e[s]);return[r,i]};var ble=xle;const wle=(t,e)=>t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3];var Sle=wle;const Ple=(t,e)=>(t[0]=e,t[1]=e,t[2]=e,t[3]=e,t);var Ele=Ple;const Cle=(t,e,n)=>{const[r,i,s,a]=e;return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*a,t};var Tle=Cle,D8={clone:S8,copy:P8,create:lg,dot:Sle,equals:E8,fromScalar:Ele,fromValues:A8,toString:I8,transform:Tle};const Ale=D8,YP=new WeakMap,Mle=t=>{const e=YP.get(t);if(e)return e;const n=t.vertices,r=Ale.create();if(n.length===0)return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r;let i=n[0],s=i,a=i,o=i,l=i,u=i;n.forEach(v=>{i[0]>v[0]&&(i=v),s[1]>v[1]&&(s=v),a[2]>v[2]&&(a=v),o[0]<v[0]&&(o=v),l[1]<v[1]&&(l=v),u[2]<v[2]&&(u=v)}),r[0]=(i[0]+o[0])*.5,r[1]=(s[1]+l[1])*.5,r[2]=(a[2]+u[2])*.5;const f=r[0]-o[0],h=r[1]-l[1],p=r[2]-u[2];return r[3]=Math.sqrt(f*f+h*h+p*p),YP.set(t,r),r};var Rle=Mle;const n_=Mt,Ile=t=>{let e=0;const n=t.vertices,r=n_.create();for(let i=0;i<n.length-2;i++)n_.cross(r,n[i+1],n[i+2]),e+=n_.dot(n[0],r);return e/=6,e};var Lle=Ile;const Ole=t=>t.vertices;var Nle=Ole;const Dle=Mt,kle=t=>{let e="poly3: vertices: [";return t.vertices.forEach(n=>{e+=`${Dle.toString(n)}, `}),e+="]",e};var Fle=kle;const Ule=Nn,jP=Mt,Ble=Rc,$le=(t,e)=>{const n=e.vertices.map(r=>jP.transform(jP.create(),r,t));return Ule.isMirroring(t)&&n.reverse(),Ble(n)};var Vle=$le;const qle=R8,{NEPS:Hle}=un,zle=Mt,Gle=L8,Xle=O8,Wle=N8,Yle=Sb,jle=t=>{if(!Gle(t))throw new Error("invalid poly3 structure");if(t.vertices.length<3)throw new Error(`poly3 not enough vertices ${t.vertices.length}`);if(Wle(t)<=0)throw new Error("poly3 area must be greater than zero");for(let e=0;e<t.vertices.length;e++)if(zle.equals(t.vertices[e],t.vertices[(e+1)%t.vertices.length]))throw new Error(`poly3 duplicate vertex ${t.vertices[e]}`);if(!Xle(t))throw new Error("poly3 must be convex");if(t.vertices.forEach(e=>{if(!e.every(Number.isFinite))throw new Error(`poly3 invalid vertex ${e}`)}),t.vertices.length>3){const e=Yle(t);t.vertices.forEach(n=>{const r=Math.abs(qle(e,n));if(r>Hle)throw new Error(`poly3 must be coplanar: vertex ${n} distance ${r}`)})}};var Zle=jle,ln={clone:Roe,create:Rc,fromPoints:Noe,fromPointsAndPlane:Foe,invert:dle,isA:L8,isConvex:O8,measureArea:N8,measureBoundingBox:ble,measureBoundingSphere:Rle,measureSignedVolume:Lle,plane:Sb,toPoints:Nle,toString:Fle,transform:Vle,validate:Zle};const Kle=w8,Jle=vf,Qle=ln,ece=t=>{if(!Array.isArray(t))throw new Error("the given points must be an array");const n=Kle(t,{skipTriangulation:!0}).map(r=>{const i=r.map(s=>t[s]);return Qle.create(i)});return Jle(n)};var tce=ece;const nce=ln,rce=vf,ice=t=>{if(!Array.isArray(t))throw new Error("the given points must be an array");const e=t.map((r,i)=>nce.create(r));return rce(e)};var sce=ice;const ace=Mt,oce=Nn,lce=ln,cce=vf,uce=t=>{if(t[0]!==1)throw new Error("invalid compact binary data");const e=cce();e.transforms=oce.clone(t.slice(1,17));const n=t[21];let r=22,i=t.length-n*3;for(;i<t.length;){const s=t[r];r++;const a=[];for(let o=0;o<s;o++)a.push(ace.fromValues(t[i],t[i+1],t[i+2])),i+=3;e.polygons.push(lce.create(a))}return t[17]>=0&&(e.color=[t[17],t[18],t[19],t[20]]),e};var fce=uce;const ZP=Nn,dce=ln,hce=t=>(ZP.isIdentity(t.transforms)||(t.polygons=t.polygons.map(e=>dce.transform(t.transforms,e)),t.transforms=ZP.create()),t);var pce=hce;const mce=pce,vce=t=>mce(t).polygons;var cg=vce;const gce=ln,yce=vf,_ce=cg,xce=t=>{const n=_ce(t).map(r=>gce.invert(r));return yce(n)};var bce=xce;const wce=t=>!!(t&&typeof t=="object"&&"polygons"in t&&"transforms"in t&&Array.isArray(t.polygons)&&"length"in t.transforms);var k8=wce;const Sce=ln,Pce=cg,Ece=t=>Pce(t).map(r=>Sce.toPoints(r));var Cce=Ece;const Tce=ln,Ace=cg,Mce=t=>{const e=Ace(t);let n="geom3 ("+e.length+` polygons):
`;return e.forEach(r=>{n+="  "+Tce.toString(r)+`
`}),n};var Rce=Mce;const Ice=ln,Lce=t=>{const e=t.polygons,n=t.transforms,r=e.length,i=e.reduce((u,f)=>u+f.vertices.length,0);let s=[-1,-1,-1,-1];t.color&&(s=t.color);const a=new Float32Array(22+r+i*3);a[0]=1,a[1]=n[0],a[2]=n[1],a[3]=n[2],a[4]=n[3],a[5]=n[4],a[6]=n[5],a[7]=n[6],a[8]=n[7],a[9]=n[8],a[10]=n[9],a[11]=n[10],a[12]=n[11],a[13]=n[12],a[14]=n[13],a[15]=n[14],a[16]=n[15],a[17]=s[0],a[18]=s[1],a[19]=s[2],a[20]=s[3],a[21]=i;let o=22,l=o+r;return e.forEach(u=>{const f=Ice.toPoints(u);a[o]=f.length,o++;for(let h=0;h<f.length;h++){const p=f[h];a[l+0]=p[0],a[l+1]=p[1],a[l+2]=p[2],l+=3}}),a};var Oce=Lce;const KP=Nn,Nce=(t,e)=>{const n=KP.multiply(KP.create(),t,e.transforms);return Object.assign({},e,{transforms:n})};var Dce=Nce;const kce=ln,Fce=k8,Uce=t=>{if(!Fce(t))throw new Error("invalid geom3 structure");if(t.polygons.forEach(kce.validate),Bce(t),!t.transforms.every(Number.isFinite))throw new Error(`geom3 invalid transforms ${t.transforms}`)},Bce=t=>{const e=new Map;t.polygons.forEach(({vertices:r})=>{r.forEach((i,s)=>{const a=`${i}`,o=`${r[(s+1)%r.length]}`,l=`${a}/${o}`,u=e.has(l)?e.get(l):0;e.set(l,u+1)})});const n=[];if(e.forEach((r,i)=>{const s=i.split("/").reverse().join("/"),a=e.get(s);r!==a&&n.push(i.replace("/"," -> "))}),n.length>0)throw new Error(`non-manifold edges ${n.length}
${n.join(`
`)}`)};var $ce=Uce,Gt={clone:Gae,create:vf,fromPointsConvex:tce,fromPoints:sce,fromCompactBinary:fce,invert:bce,isA:k8,toPoints:Cce,toPolygons:cg,toString:Rce,toCompactBinary:Oce,transform:Dce,validate:$ce};const Vce=t=>Object.assign({},t);var Pb=Vce;const{EPS:JP}=un,qce=Zt,Hce=Pb,zce=t=>{if(t.isClosed)return t;const e=Hce(t);if(e.isClosed=!0,e.points.length>1){const n=e.points,r=n[0];let i=n[n.length-1];for(;qce.distance(r,i)<JP*JP&&(n.pop(),n.length!==1);)i=n[n.length-1]}return e};var F8=zce;const Gce=Nn,Xce=t=>(t===void 0&&(t=[]),{points:t,isClosed:!1,transforms:Gce.create()});var ug=Xce;const{EPS:QP}=un,eE=Zt,Wce=F8,Yce=ug,jce=(t,e)=>{const n={closed:!1};let{closed:r}=Object.assign({},n,t),i=Yce();if(i.points=e.map(s=>eE.clone(s)),i.points.length>1){const s=i.points[0],a=i.points[i.points.length-1];eE.distance(s,a)<QP*QP&&(r=!0)}return r===!0&&(i=Wce(i)),i};var Eb=jce;const tE=Nn,nE=Zt,Zce=t=>(tE.isIdentity(t.transforms)||(t.points=t.points.map(e=>nE.transform(nE.create(),e,t.transforms)),t.transforms=tE.create()),t);var Kce=Zce;const Jce=Kce,Qce=t=>Jce(t).points;var Ic=Qce;const{TAU:bd}=un,ur=Zt,eue=Eb,tue=Ic,nue=(t,e)=>{const n={radius:[0,0],xaxisrotation:0,clockwise:!1,large:!1,segments:16};let{endpoint:r,radius:i,xaxisrotation:s,clockwise:a,large:o,segments:l}=Object.assign({},n,t);if(!Array.isArray(r))throw new Error("endpoint must be an array of X and Y values");if(r.length<2)throw new Error("endpoint must contain X and Y values");if(r=ur.clone(r),!Array.isArray(i))throw new Error("radius must be an array of X and Y values");if(i.length<2)throw new Error("radius must contain X and Y values");if(l<4)throw new Error("segments must be four or more");const u=1e5;if(e.isClosed)throw new Error("the given path cannot be closed");const f=tue(e);if(f.length<1)throw new Error("the given path must contain one or more points (as the starting point for the arc)");let h=i[0],p=i[1];const v=f[f.length-1];h=Math.round(h*u)/u,p=Math.round(p*u)/u,r=ur.fromValues(Math.round(r[0]*u)/u,Math.round(r[1]*u)/u);const P=!a;let S=[];if(h===0||p===0)S.push(r);else{h=Math.abs(h),p=Math.abs(p);const m=s,x=Math.cos(m),w=Math.sin(m),C=ur.subtract(ur.create(),v,r);ur.scale(C,C,.5);const A=Math.round((x*C[0]+w*C[1])*u)/u,M=Math.round((-w*C[0]+x*C[1])*u)/u,E=ur.fromValues(A,M),N=E[0]*E[0]/(h*h)+E[1]*E[1]/(p*p);if(N>1){const b=Math.sqrt(N);h*=b,p*=b,h=Math.round(h*u)/u,p=Math.round(p*u)/u}let I=Math.sqrt((h*h*p*p-h*h*E[1]*E[1]-p*p*E[0]*E[0])/(h*h*E[1]*E[1]+p*p*E[0]*E[0]));P===o&&(I=-I);const L=ur.fromValues(h*E[1]/p,-p*E[0]/h);ur.scale(L,L,I);let R=ur.fromValues(x*L[0]-w*L[1],w*L[0]+x*L[1]);R=ur.add(R,R,ur.scale(ur.create(),ur.add(ur.create(),v,r),.5));const B=ur.fromValues((E[0]-L[0])/h,(E[1]-L[1])/p),V=ur.fromValues((-E[0]-L[0])/h,(-E[1]-L[1])/p),z=ur.angleRadians(B);let O=ur.angleRadians(V)-z;O=O%bd,!P&&O>0?O-=bd:P&&O<0&&(O+=bd);let y=Math.ceil(Math.abs(O)/bd*l)+1;y<1&&(y=1);for(let b=1;b<y;b++){const k=z+b/y*O,F=Math.cos(k),H=Math.sin(k),W=ur.fromValues(x*h*F-w*p*H,w*h*F+x*p*H);ur.add(W,W,R),S.push(W)}y&&S.push(t.endpoint)}return S=f.concat(S),eue({},S)};var rue=nue;const iue=Eb,sue=Ic,{equals:aue}=Zt,oue=(...t)=>{let e=!1,n=[];return t.forEach((r,i)=>{const s=sue(r).slice();if(n.length>0&&s.length>0&&aue(s[0],n[n.length-1])&&s.shift(),s.length>0&&e)throw new Error(`Cannot concatenate to a closed path; check the ${i}th path`);e=r.isClosed,n=n.concat(s)}),iue({closed:e},n)};var U8=oue;const lue=U8,cue=ug,uue=(t,e)=>lue(e,cue(t));var B8=uue;const{TAU:fue}=un,hi=Zt,due=Zt,hue=B8,pue=Ic,mue=(t,e)=>{const n={segments:16};let{controlPoints:r,segments:i}=Object.assign({},n,t);if(!Array.isArray(r))throw new Error("controlPoints must be an array of one or more points");if(r.length<1)throw new Error("controlPoints must be an array of one or more points");if(i<4)throw new Error("segments must be four or more");if(e.isClosed)throw new Error("the given geometry cannot be closed");const s=pue(e);if(s.length<1)throw new Error("the given path must contain one or more points (as the starting point for the bezier curve)");if(r=r.slice(),r[0]===null){if(r.length<2)throw new Error("a null control point must be passed with one more control points");let M=s[s.length-2];if("lastBezierControlPoint"in e&&(M=e.lastBezierControlPoint),!Array.isArray(M))throw new Error("the given path must contain TWO or more points if given a null control point");const E=hi.scale(hi.create(),s[s.length-1],2);hi.subtract(E,E,M),r[0]=E}r.unshift(s[s.length-1]);const o=r.length-1,l=[];let u=1;for(let M=0;M<=o;++M)M>0&&(u*=M),l.push(u);const f=[];for(let M=0;M<=o;++M){const E=l[o]/(l[M]*l[o-M]);f.push(E)}const h=hi.create(),p=hi.create(),v=due.create(),P=M=>{let E=1,N=Math.pow(1-M,o);const I=M!==1?1/(1-M):1,L=hi.create();for(let R=0;R<=o;++R){R===o&&(N=1);const B=f[R]*E*N,V=hi.scale(h,r[R],B);hi.add(L,L,V),E*=M,N*=I}return L},S=[],g=[],m=o+1;for(let M=0;M<m;++M){const E=M/(m-1),N=P(E);S.push(N),g.push(E)}let x=1;const w=fue/i,C=Math.sin(w);for(;x<S.length-1;){const M=hi.subtract(h,S[x],S[x-1]);hi.normalize(M,M);const E=hi.subtract(p,S[x+1],S[x]);hi.normalize(E,E);const N=hi.cross(v,M,E);if(Math.abs(N[2])>C){const I=g[x-1],L=g[x+1],R=I+(L-I)*1/3,B=I+(L-I)*2/3,V=P(R),z=P(B);S.splice(x,1,V,z),g.splice(x,1,R,B),x--,x<1&&(x=1)}else++x}S.shift();const A=hue(S,e);return A.lastBezierControlPoint=r[r.length-2],A};var vue=mue;const gue=Zt,rE=Ic,yue=(t,e)=>{if(t.isClosed!==e.isClosed||t.points.length!==e.points.length)return!1;const n=rE(t),r=rE(e),i=n.length;let s=0;do{let a=!1;for(let o=0;o<i;o++)if(!gue.equals(n[o],r[(o+s)%i])){a=!0;break}if(a===!1)return!0;if(!t.isClosed)return!1}while(++s<i);return!1};var _ue=yue;const xue=Nn,bue=Zt,wue=ug,Sue=t=>{if(t[0]!==2)throw new Error("invalid compact binary data");const e=wue();e.transforms=xue.clone(t.slice(1,17)),e.isClosed=!!t[17];for(let n=22;n<t.length;n+=2){const r=bue.fromValues(t[n],t[n+1]);e.points.push(r)}return t[18]>=0&&(e.color=[t[18],t[19],t[20],t[21]]),e};var Pue=Sue;const Eue=t=>!!(t&&typeof t=="object"&&"points"in t&&"transforms"in t&&"isClosed"in t&&Array.isArray(t.points)&&"length"in t.transforms);var $8=Eue;const Cue=Pb,Tue=t=>{const e=Cue(t);return e.points=t.points.slice().reverse(),e};var Aue=Tue;const Mue=Zt,Rue=Ic,Iue=t=>{const e=Rue(t);let n="path ("+e.length+" points, "+t.isClosed+`):
[
`;return e.forEach(r=>{n+="  "+Mue.toString(r)+`,
`}),n+=`]
`,n};var Lue=Iue;const Oue=t=>{const e=t.points,n=t.transforms;let r=[-1,-1,-1,-1];t.color&&(r=t.color);const i=new Float32Array(22+e.length*2);i[0]=2,i[1]=n[0],i[2]=n[1],i[3]=n[2],i[4]=n[3],i[5]=n[4],i[6]=n[5],i[7]=n[6],i[8]=n[7],i[9]=n[8],i[10]=n[9],i[11]=n[10],i[12]=n[11],i[13]=n[12],i[14]=n[13],i[15]=n[14],i[16]=n[15],i[17]=t.isClosed?1:0,i[18]=r[0],i[19]=r[1],i[20]=r[2],i[21]=r[3];for(let s=0;s<e.length;s++){const a=s*2+22,o=e[s];i[a]=o[0],i[a+1]=o[1]}return i};var Nue=Oue;const iE=Nn,Due=(t,e)=>{const n=iE.multiply(iE.create(),t,e.transforms);return Object.assign({},e,{transforms:n})};var kue=Due;const Fue=Zt,Uue=$8,Bue=t=>{if(!Uue(t))throw new Error("invalid path2 structure");if(t.points.length>1){for(let e=0;e<t.points.length;e++)if(Fue.equals(t.points[e],t.points[(e+1)%t.points.length]))throw new Error(`path2 duplicate points ${t.points[e]}`)}if(t.points.forEach(e=>{if(!e.every(Number.isFinite))throw new Error(`path2 invalid point ${e}`)}),!t.transforms.every(Number.isFinite))throw new Error(`path2 invalid transforms ${t.transforms}`)};var $ue=Bue,In={appendArc:rue,appendBezier:vue,appendPoints:B8,clone:Pb,close:F8,concat:U8,create:ug,equals:_ue,fromPoints:Eb,fromCompactBinary:Pue,isA:$8,reverse:Aue,toPoints:Ic,toString:Lue,toCompactBinary:Nue,transform:kue,validate:$ue};const Vue=$t,V8=zt,q8=Gt,H8=In,z8=ln,que=(t,e)=>{const n=V8.clone(e);return n.color=t,n},Hue=(t,e)=>{const n=q8.clone(e);return n.color=t,n},zue=(t,e)=>{const n=H8.clone(e);return n.color=t,n},Gue=(t,e)=>{const n=z8.clone(e);return n.color=t,n},Xue=(t,...e)=>{if(!Array.isArray(t))throw new Error("color must be an array");if(t.length<3)throw new Error("color must contain R, G and B values");if(t.length===3&&(t=[t[0],t[1],t[2],1]),e=Vue(e),e.length===0)throw new Error("wrong number of arguments");const n=e.map(r=>V8.isA(r)?que(t,r):q8.isA(r)?Hue(t,r):H8.isA(r)?zue(t,r):z8.isA(r)?Gue(t,r):(r.color=t,r));return n.length===1?n[0]:n};var Wue=Xue;const Yue={black:[0/255,0/255,0/255],silver:[192/255,192/255,192/255],gray:[128/255,128/255,128/255],white:[255/255,255/255,255/255],maroon:[128/255,0/255,0/255],red:[255/255,0/255,0/255],purple:[128/255,0/255,128/255],fuchsia:[255/255,0/255,255/255],green:[0/255,128/255,0/255],lime:[0/255,255/255,0/255],olive:[128/255,128/255,0/255],yellow:[255/255,255/255,0/255],navy:[0/255,0/255,128/255],blue:[0/255,0/255,255/255],teal:[0/255,128/255,128/255],aqua:[0/255,255/255,255/255],aliceblue:[240/255,248/255,255/255],antiquewhite:[250/255,235/255,215/255],aquamarine:[127/255,255/255,212/255],azure:[240/255,255/255,255/255],beige:[245/255,245/255,220/255],bisque:[255/255,228/255,196/255],blanchedalmond:[255/255,235/255,205/255],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,255/255,0/255],chocolate:[210/255,105/255,30/255],coral:[255/255,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[255/255,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0/255,255/255,255/255],darkblue:[0/255,0/255,139/255],darkcyan:[0/255,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0/255,100/255,0/255],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0/255,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[255/255,140/255,0/255],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0/255,0/255],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0/255,206/255,209/255],darkviolet:[148/255,0/255,211/255],deeppink:[255/255,20/255,147/255],deepskyblue:[0/255,191/255,255/255],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,255/255],firebrick:[178/255,34/255,34/255],floralwhite:[255/255,250/255,240/255],forestgreen:[34/255,139/255,34/255],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,255/255],gold:[255/255,215/255,0/255],goldenrod:[218/255,165/255,32/255],greenyellow:[173/255,255/255,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,255/255,240/255],hotpink:[255/255,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0/255,130/255],ivory:[255/255,255/255,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[255/255,240/255,245/255],lawngreen:[124/255,252/255,0/255],lemonchiffon:[255/255,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,255/255,255/255],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[255/255,182/255,193/255],lightsalmon:[255/255,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[255/255,255/255,224/255],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[255/255,0/255,255/255],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0/255,0/255,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0/255,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,255/255,250/255],mistyrose:[255/255,228/255,225/255],moccasin:[255/255,228/255,181/255],navajowhite:[255/255,222/255,173/255],oldlace:[253/255,245/255,230/255],olivedrab:[107/255,142/255,35/255],orange:[255/255,165/255,0/255],orangered:[255/255,69/255,0/255],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[255/255,239/255,213/255],peachpuff:[255/255,218/255,185/255],peru:[205/255,133/255,63/255],pink:[255/255,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[255/255,245/255,238/255],sienna:[160/255,82/255,45/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[255/255,250/255,250/255],springgreen:[0/255,255/255,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],thistle:[216/255,191/255,216/255],tomato:[255/255,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],whitesmoke:[245/255,245/255,245/255],yellowgreen:[154/255,205/255,50/255]};var G8=Yue;const jue=G8,Zue=t=>jue[t.toLowerCase()];var Kue=Zue;const Jue=t=>{if(t=t.replace("#",""),t.length<6)throw new Error("the given notation must contain 3 or more hex values");const e=parseInt(t.substring(0,2),16)/255,n=parseInt(t.substring(2,4),16)/255,r=parseInt(t.substring(4,6),16)/255;if(t.length>=8){const i=parseInt(t.substring(6,8),16)/255;return[e,n,r,i]}return[e,n,r]};var Que=Jue;const efe=(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t);var X8=efe;const tfe=$t,r_=X8,nfe=(...t)=>{if(t=tfe(t),t.length<3)throw new Error("values must contain H, S and L values");const e=t[0],n=t[1],r=t[2];let i=r,s=r,a=r;if(n!==0){const o=r<.5?r*(1+n):r+n-r*n,l=2*r-o;i=r_(l,o,e+1/3),s=r_(l,o,e),a=r_(l,o,e-1/3)}if(t.length>3){const o=t[3];return[i,s,a,o]}return[i,s,a]};var rfe=nfe;const ife=$t,sfe=(...t)=>{if(t=ife(t),t.length<3)throw new Error("values must contain H, S and V values");const e=t[0],n=t[1],r=t[2];let i=0,s=0,a=0;const o=Math.floor(e*6),l=e*6-o,u=r*(1-n),f=r*(1-l*n),h=r*(1-(1-l)*n);switch(o%6){case 0:i=r,s=h,a=u;break;case 1:i=f,s=r,a=u;break;case 2:i=u,s=r,a=h;break;case 3:i=u,s=f,a=r;break;case 4:i=h,s=u,a=r;break;case 5:i=r,s=u,a=f;break}if(t.length>3){const p=t[3];return[i,s,a,p]}return[i,s,a]};var afe=sfe;const ofe=$t,lfe=(...t)=>{if(t=ofe(t),t.length<3)throw new Error("values must contain R, G and B values");const e=t[0]*255,n=t[1]*255,r=t[2]*255;let i=`#${Number(16777216+e*65536+n*256+r).toString(16).substring(1,7)}`;return t.length>3&&(i=i+Number(t[3]*255).toString(16)),i};var cfe=lfe;const ufe=$t,ffe=(...t)=>{if(t=ufe(t),t.length<3)throw new Error("values must contain R, G and B values");const e=t[0],n=t[1],r=t[2],i=Math.max(e,n,r),s=Math.min(e,n,r);let a,o;const l=(i+s)/2;if(i===s)a=o=0;else{const u=i-s;switch(o=l>.5?u/(2-i-s):u/(i+s),i){case e:a=(n-r)/u+(n<r?6:0);break;case n:a=(r-e)/u+2;break;case r:a=(e-n)/u+4;break}a/=6}if(t.length>3){const u=t[3];return[a,o,l,u]}return[a,o,l]};var dfe=ffe;const hfe=$t,pfe=(...t)=>{if(t=hfe(t),t.length<3)throw new Error("values must contain R, G and B values");const e=t[0],n=t[1],r=t[2],i=Math.max(e,n,r),s=Math.min(e,n,r);let a;const o=i,l=i-s,u=i===0?0:l/i;if(i===s)a=0;else{switch(i){case e:a=(n-r)/l+(n<r?6:0);break;case n:a=(r-e)/l+2;break;case r:a=(e-n)/l+4;break}a/=6}if(t.length>3){const f=t[3];return[a,u,o,f]}return[a,u,o]};var mfe=pfe,vfe={colorize:Wue,colorNameToRgb:Kue,cssColors:G8,hexToRgb:Que,hslToRgb:rfe,hsvToRgb:afe,hueToColorComponent:X8,rgbToHex:cfe,rgbToHsl:dfe,rgbToHsv:mfe};const gfe=t=>{if(!Array.isArray(t))throw new Error("Bezier points must be a valid array/");if(t.length<2)throw new Error("Bezier points must contain at least 2 values.");const e=yfe(t);return{points:t,pointType:e,dimensions:e==="float_single"?0:t[0].length,permutations:sE(t.length-1),tangentPermutations:sE(t.length-2)}},yfe=function(t){let e=null;return t.forEach(n=>{let r="";if(Number.isFinite(n))r="float_single";else if(Array.isArray(n))n.forEach(i=>{if(!Number.isFinite(i))throw new Error("Bezier point values must all be numbers.")}),r="float_"+n.length;else throw new Error("Bezier points must all be numbers or arrays of number.");if(e==null)e=r;else if(e!==r)throw new Error("Bezier points must be either all numbers or all arrays of numbers of the same size.")}),e},sE=function(t){const e=[];for(let n=0;n<=t;n++)e.push(i_(t)/(i_(n)*i_(t-n)));return e},i_=function(t){let e=1;for(let n=2;n<=t;n++)e*=n;return e};var _fe=gfe;const xfe=(t,e)=>{if(t<0||t>1)throw new Error("Bezier valueAt() input must be between 0 and 1");if(e.pointType==="float_single")return aE(e,e.points,t);{const n=[];for(let r=0;r<e.dimensions;r++){const i=[];for(let s=0;s<e.points.length;s++)i.push(e.points[s][r]);n.push(aE(e,i,t))}return n}},aE=function(t,e,n){const r=e.length-1;let i=0;for(let s=0;s<=r;s++)i+=t.permutations[s]*Math.pow(1-n,r-s)*Math.pow(n,s)*e[s];return i};var W8=xfe;const bfe=(t,e)=>{if(t<0||t>1)throw new Error("Bezier tangentAt() input must be between 0 and 1");if(e.pointType==="float_single")return oE(e,e.points,t);{const n=[];for(let r=0;r<e.dimensions;r++){const i=[];for(let s=0;s<e.points.length;s++)i.push(e.points[s][r]);n.push(oE(e,i,t))}return n}},oE=function(t,e,n){const r=e.length-1;let i=0;for(let s=0;s<r;s++){const a=r*(e[s+1]-e[s]);i+=t.tangentPermutations[s]*Math.pow(1-n,r-1-s)*Math.pow(n,s)*a}return i};var wfe=bfe;const lE=W8,Sfe=(t,e)=>{let n=0;const r=[0];let i=lE(0,e);for(let s=1;s<=t;s++){const a=lE(s/t,e);n+=Pfe(a,i),r.push(n),i=a}return r},Pfe=(t,e)=>{if(Number.isFinite(t)&&Number.isFinite(e))return Math.abs(t-e);if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)throw new Error("The operands must have the same number of dimensions.");let n=0;for(let r=0;r<t.length;r++)n+=(e[r]-t[r])*(e[r]-t[r]);return Math.sqrt(n)}else throw new Error("The operands must be of the same type, either number or array.")};var Cb=Sfe;const Efe=Cb,Cfe=(t,e)=>Efe(t,e)[t];var Tfe=Cfe;const Afe=Cb,Mfe=(t,e)=>{const n={distance:0,segments:100},{distance:r,segments:i}=Object.assign({},n,t),s=Afe(i,e);let a=0,o=i;for(;a<=o;){const v=Math.floor(a+(o-a)/2),P=s[v]-r;if(P<0)a=v+1;else if(P>0)o=v-1;else{o=v;break}}const l=o;if(s[l]===r)return l/i;const u=s[l],h=s[l+1]-u,p=(r-u)/h;return(l+p)/i};var Rfe=Mfe,Ife={create:_fe,valueAt:W8,tangentAt:wfe,lengths:Cb,length:Tfe,arcLengthToT:Rfe},Lfe={bezier:Ife};const Ofe=t=>{let e=0;for(let n=0;n<t.length;n++){const r=(n+1)%t.length;e+=t[n][0]*t[r][1],e-=t[r][0]*t[n][1]}return e/2};var fg=Ofe;const Nfe=fg,Dfe=t=>Nfe(t.vertices);var Y8=Dfe;const kfe=t=>((t===void 0||t.length<3)&&(t=[]),{vertices:t});var j8=kfe;const Ffe=j8,Ufe=t=>{const e=t.vertices.slice().reverse();return Ffe(e)};var Z8=Ufe;const Bfe=Y8,$fe=Z8,Vfe=(t,e)=>{if(t.length===0)return 0;const n=e.vertices;return n.length<3?0:(Bfe(e)<0&&(e=$fe(e)),t.reduce((i,s)=>i+qfe(s,n),0)===t.length?1:0)},qfe=(t,e)=>{const n=e.length,r=t[0],i=t[1];let s=e[n-1],a=e[0],o=s[1]>i,l=0,u=0;for(let f=n+1;--f;){const h=a[1]>i;if(o!==h){const p=s[0]>r,v=a[0]>r;(p&&v||a[0]-(a[1]-i)*(s[0]-a[0])/(s[1]-a[1])>=r)&&(l=!l)}o=h,s=a,a=e[++u]}return l};var Hfe=Vfe,Tb={arePointsInside:Hfe,create:j8,flip:Z8,measureArea:Y8},Ab={geom2:zt,geom3:Gt,path2:In,poly2:Tb,poly3:ln};const zfe=()=>[0,1,0];var Mb=zfe;const Gfe=Mb,Xfe=t=>{const e=Gfe();return e[0]=t[0],e[1]=t[1],e[2]=t[2],e};var Wfe=Xfe;const s_=Zt,Yfe=t=>{const e=s_.normal(s_.create(),t);return s_.negate(e,e),e};var Rb=Yfe;const cE=Zt,jfe=t=>cE.scale(cE.create(),t,t[2]);var dg=jfe;const nu=Zt,Zfe=Rb,Kfe=dg,Jfe=(t,e)=>{const n=Kfe(t),r=Zfe(t),i=nu.subtract(nu.create(),e,n),s=nu.dot(i,r);return nu.scale(i,r,s),nu.add(i,i,n),i};var Qfe=Jfe;const ede=(t,e)=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t);var K8=ede;const tde=Zt,nde=(t,e)=>{let n=tde.dot(e,t);return n=Math.abs(n-t[2]),n};var rde=nde;const ide=(t,e)=>t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2];var sde=ide;const ru=Zt,ade=(t,e,n)=>{const r=ru.subtract(ru.create(),n,e);ru.normal(r,r),ru.normalize(r,r);const i=ru.dot(e,r);return t[0]=r[0],t[1]=r[1],t[2]=i,t};var J8=ade;const ode=Mb,lde=(t,e,n)=>{const r=ode();return r[0]=t,r[1]=e,r[2]=n,r};var Q8=lde;const{NEPS:a_}=un,cde=(t,e)=>Math.abs(t[0]-e[0])<=a_&&Math.abs(t[1]-e[1])<=a_&&Math.abs(t[2]-e[2])<=a_;var Ib=cde;const ude=(t,e,n)=>{let r=n-t[1],i=e[1]-t[1];i<0&&(r=-r,i=-i);let s;return r<=0?s=0:r>=i?s=1:i<1e-10?s=.5:s=r/i,t[0]+s*(e[0]-t[0])};var e5=ude;const fde=(t,e,n,r)=>{if(t[0]===e[0]&&t[1]===e[1]||n[0]===r[0]&&n[1]===r[1])return;const i=(r[1]-n[1])*(e[0]-t[0])-(r[0]-n[0])*(e[1]-t[1]);if(Math.abs(i)<Number.MIN_VALUE)return;const s=((r[0]-n[0])*(t[1]-n[1])-(r[1]-n[1])*(t[0]-n[0]))/i,a=((e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]))/i;if(s<0||s>1||a<0||a>1)return;const o=t[0]+s*(e[0]-t[0]),l=t[1]+s*(e[1]-t[1]);return[o,l]};var t5=fde;const dde=(t,e,n,r,i,s)=>{const o=1/(t*r-e*n);let l=i*r-e*s,u=-i*n+t*s;return l*=o,u*=o,[l,u]};var hde=dde,gf={aboutEqualNormals:Ib,area:fg,cos:Pr.cos,interpolateBetween2DPointsForY:e5,intersect:t5,sin:Pr.sin,solve2Linear:hde};const pde=Zt,{solve2Linear:mde}=gf,vde=(t,e)=>{const n=mde(t[0],t[1],e[0],e[1],t[2],e[2]);return pde.clone(n)};var gde=vde;const uE=Zt,yde=K8,_de=Q8,xde=(t,e)=>{const n=uE.negate(uE.create(),e),r=-e[2];return yde(t,_de(n[0],n[1],r))};var bde=xde;const wde=t=>`line2: (${t[0].toFixed(7)}, ${t[1].toFixed(7)}, ${t[2].toFixed(7)})`;var Sde=wde;const fE=Zt,Pde=J8,Ede=dg,Cde=Rb,Tde=(t,e,n)=>{const r=Ede(e),i=Cde(e);return fE.transform(r,r,n),fE.transform(i,i,n),Pde(t,r,i)};var Ade=Tde;const Mde=dg,Rde=(t,e)=>{let n=(t[2]-t[1]*e)/t[0];return Number.isNaN(n)&&(n=Mde(t)[0]),n};var Ide=Rde,Lb={clone:Wfe,closestPoint:Qfe,copy:K8,create:Mb,direction:Rb,distanceToPoint:rde,equals:sde,fromPoints:J8,fromValues:Q8,intersectPointOfLines:gde,origin:dg,reverse:bde,toString:Sde,transform:Ade,xAtY:Ide};const dE=Mt,Lde=()=>[dE.fromValues(0,0,0),dE.fromValues(0,0,1)];var n5=Lde;const hE=Mt,Ode=n5,Nde=t=>{const e=Ode();return hE.copy(e[0],t[0]),hE.copy(e[1],t[1]),e};var Dde=Nde;const po=Mt,kde=(t,e)=>{const n=t[0],r=t[1],i=po.dot(po.subtract(po.create(),e,n),r),s=po.dot(r,r),a=i/s,o=po.scale(po.create(),r,a);return po.add(o,o,n),o};var r5=kde;const pE=Mt,Fde=(t,e)=>(pE.copy(t[0],e[0]),pE.copy(t[1],e[1]),t);var Ude=Fde;const Bde=t=>t[1];var $de=Bde;const o_=Mt,Vde=r5,qde=(t,e)=>{const n=Vde(t,e),r=o_.subtract(o_.create(),e,n);return o_.length(r)};var Hde=qde;const mE=Mt,zde=(t,e)=>!(!mE.equals(t[1],e[1])||!mE.equals(t[0],e[0]));var Gde=zde;const wd=Mt,Xde=(t,e,n)=>{const r=wd.normalize(wd.create(),n);return wd.copy(t[0],e),wd.copy(t[1],r),t};var yf=Xde;const mo=Mt,{solve2Linear:l_}=gf,{EPS:Wde}=un,Yde=yf,jde=(t,e,n)=>{let r=mo.cross(mo.create(),e,n),i=mo.length(r);if(i<Wde)throw new Error("parallel planes do not intersect");i=1/i,r=mo.scale(r,r,i);const s=Math.abs(r[0]),a=Math.abs(r[1]),o=Math.abs(r[2]);let l,u;return s>=a&&s>=o?(u=l_(e[1],e[2],n[1],n[2],e[3],n[3]),l=mo.fromValues(0,u[0],u[1])):a>=s&&a>=o?(u=l_(e[0],e[2],n[0],n[2],e[3],n[3]),l=mo.fromValues(u[0],0,u[1])):(u=l_(e[0],e[1],n[0],n[1],e[3],n[3]),l=mo.fromValues(u[0],u[1],0)),Yde(t,l,r)};var Zde=jde;const vE=Mt,Kde=yf,Jde=(t,e,n)=>{const r=vE.subtract(vE.create(),n,e);return Kde(t,e,r)};var Qde=Jde;const Al=Mt,ehe=(t,e)=>{const n=e,r=e[3],i=t[0],s=t[1],a=(r-Al.dot(n,i))/Al.dot(n,s);return Al.add(Al.create(),i,Al.scale(Al.create(),s,a))};var the=ehe;const nhe=t=>t[0];var rhe=nhe;const c_=Mt,ihe=yf,she=(t,e)=>{const n=c_.clone(e[0]),r=c_.negate(c_.create(),e[1]);return ihe(t,n,r)};var ahe=she;const ohe=t=>{const e=t[0],n=t[1];return`line3: point: (${e[0].toFixed(7)}, ${e[1].toFixed(7)}, ${e[2].toFixed(7)}) direction: (${n[0].toFixed(7)}, ${n[1].toFixed(7)}, ${n[2].toFixed(7)})`};var lhe=ohe;const Ml=Mt,che=yf,uhe=(t,e,n)=>{const r=e[0],i=e[1],s=Ml.add(Ml.create(),r,i),a=Ml.transform(Ml.create(),r,n),o=Ml.transform(s,s,n),l=Ml.subtract(o,o,a);return che(t,a,l)};var fhe=uhe,dhe={clone:Dde,closestPoint:r5,copy:Ude,create:n5,direction:$de,distanceToPoint:Hde,equals:Gde,fromPlanes:Zde,fromPointAndDirection:yf,fromPoints:Qde,intersectPointOfLineAndPlane:the,origin:rhe,reverse:ahe,toString:lhe,transform:fhe},hhe={constants:un,line2:Lb,line3:dhe,mat4:Nn,plane:Os,utils:gf,vec2:Zt,vec3:Mt,vec4:D8};const phe=$t,i5=zt,s5=Gt,mhe=In,vhe=ln,Ch=new WeakMap,ghe=()=>0,yhe=t=>{let e=Ch.get(t);return e||(e=i5.toSides(t).reduce((r,i)=>r+(i[0][0]*i[1][1]-i[0][1]*i[1][0]),0),e*=.5,Ch.set(t,e),e)},_he=t=>{let e=Ch.get(t);return e||(e=s5.toPolygons(t).reduce((r,i)=>r+vhe.measureArea(i),0),Ch.set(t,e),e)},xhe=(...t)=>{if(t=phe(t),t.length===0)throw new Error("wrong number of arguments");const e=t.map(n=>mhe.isA(n)?ghe():i5.isA(n)?yhe(n):s5.isA(n)?_he(n):0);return e.length===1?e[0]:e};var a5=xhe;const bhe=$t,whe=a5,She=(...t)=>{if(t=bhe(t),t.length===0)throw new Error("measureAggregateArea: no geometries supplied");const e=whe(t);return t.length===1?e:e.reduce((r,i)=>r+i,0)};var Phe=She;const Ehe=$t,_s=Zt,iu=Mt,o5=zt,l5=Gt,c5=In,gE=ln,mc=new WeakMap,Che=t=>{let e=mc.get(t);if(e)return e;const n=c5.toPoints(t);let r;n.length===0?r=_s.create():r=_s.clone(n[0]);let i=_s.clone(r);return n.forEach(s=>{_s.min(r,r,s),_s.max(i,i,s)}),r=[r[0],r[1],0],i=[i[0],i[1],0],e=[r,i],mc.set(t,e),e},The=t=>{let e=mc.get(t);if(e)return e;const n=o5.toPoints(t);let r;n.length===0?r=_s.create():r=_s.clone(n[0]);let i=_s.clone(r);return n.forEach(s=>{_s.min(r,r,s),_s.max(i,i,s)}),r=[r[0],r[1],0],i=[i[0],i[1],0],e=[r,i],mc.set(t,e),e},Ahe=t=>{let e=mc.get(t);if(e)return e;const n=l5.toPolygons(t);let r=iu.create();if(n.length>0){const s=gE.toPoints(n[0]);iu.copy(r,s[0])}let i=iu.clone(r);return n.forEach(s=>{gE.toPoints(s).forEach(a=>{iu.min(r,r,a),iu.max(i,i,a)})}),r=[r[0],r[1],r[2]],i=[i[0],i[1],i[2]],e=[r,i],mc.set(t,e),e},Mhe=(...t)=>{if(t=Ehe(t),t.length===0)throw new Error("wrong number of arguments");const e=t.map(n=>c5.isA(n)?Che(n):o5.isA(n)?The(n):l5.isA(n)?Ahe(n):[[0,0,0],[0,0,0]]);return e.length===1?e[0]:e};var Zo=Mhe;const Rhe=$t,Ihe=f8,Lhe=u8,Ohe=Zo,Nhe=(...t)=>{if(t=Rhe(t),t.length===0)throw new Error("measureAggregateBoundingBox: no geometries supplied");const e=Ohe(t);if(t.length===1)return e;const n=[[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]];return e.reduce((r,i)=>(r=[Ihe(r[0],r[0],i[0]),Lhe(r[1],r[1],i[1])],r),n)};var Ob=Nhe;const{EPS:Dhe}=un,khe=(t,e)=>{let n=0;for(let r=0;r<e;r++)n+=t[1][r]-t[0][r];return Dhe*n/e};var u5=khe;const Fhe=$t,Uhe=Ob,Bhe=u5,{geom2:$he,geom3:Vhe,path2:qhe}=Ab,Hhe=(...t)=>{if(t=Fhe(t),t.length===0)throw new Error("measureAggregateEpsilon: no geometries supplied");const e=Uhe(t);let n=0;return n=t.reduce((r,i)=>qhe.isA(i)||$he.isA(i)?Math.max(r,2):Vhe.isA(i)?Math.max(r,3):0,n),Bhe(e,n)};var zhe=Hhe;const Ghe=$t,Xhe=zt,f5=Gt,Whe=In,Yhe=ln,yE=new WeakMap,jhe=()=>0,Zhe=()=>0,Khe=t=>{let e=yE.get(t);return e||(e=f5.toPolygons(t).reduce((r,i)=>r+Yhe.measureSignedVolume(i),0),yE.set(t,e),e)},Jhe=(...t)=>{if(t=Ghe(t),t.length===0)throw new Error("wrong number of arguments");const e=t.map(n=>Whe.isA(n)?jhe():Xhe.isA(n)?Zhe():f5.isA(n)?Khe(n):0);return e.length===1?e[0]:e};var d5=Jhe;const Qhe=$t,epe=d5,tpe=(...t)=>{if(t=Qhe(t),t.length===0)throw new Error("measureAggregateVolume: no geometries supplied");const e=epe(t);return t.length===1?e:e.reduce((r,i)=>r+i,0)};var npe=tpe;const rpe=$t,h5=Zt,ei=Mt,p5=zt,m5=Gt,v5=In,_E=ln,vc=new WeakMap,ipe=t=>{let e=vc.get(t);if(e!==void 0)return e;const n=ei.create();let r=0;const i=v5.toPoints(t);if(i.length>0){let s=0;const a=ei.create();i.forEach(o=>{ei.add(n,n,ei.fromVec2(a,o,0)),s++}),ei.scale(n,n,1/s),i.forEach(o=>{r=Math.max(r,h5.squaredDistance(n,o))}),r=Math.sqrt(r)}return e=[n,r],vc.set(t,e),e},spe=t=>{let e=vc.get(t);if(e!==void 0)return e;const n=ei.create();let r=0;const i=p5.toSides(t);if(i.length>0){let s=0;const a=ei.create();i.forEach(o=>{ei.add(n,n,ei.fromVec2(a,o[0],0)),s++}),ei.scale(n,n,1/s),i.forEach(o=>{r=Math.max(r,h5.squaredDistance(n,o[0]))}),r=Math.sqrt(r)}return e=[n,r],vc.set(t,e),e},ape=t=>{let e=vc.get(t);if(e!==void 0)return e;const n=ei.create();let r=0;const i=m5.toPolygons(t);if(i.length>0){let s=0;i.forEach(a=>{_E.toPoints(a).forEach(o=>{ei.add(n,n,o),s++})}),ei.scale(n,n,1/s),i.forEach(a=>{_E.toPoints(a).forEach(o=>{r=Math.max(r,ei.squaredDistance(n,o))})}),r=Math.sqrt(r)}return e=[n,r],vc.set(t,e),e},ope=(...t)=>{t=rpe(t);const e=t.map(n=>v5.isA(n)?ipe(n):p5.isA(n)?spe(n):m5.isA(n)?ape(n):[[0,0,0],0]);return e.length===1?e[0]:e};var lpe=ope;const cpe=$t,upe=Zo,fpe=(...t)=>{t=cpe(t);const e=t.map(n=>{const r=upe(n);return[r[0][0]+(r[1][0]-r[0][0])/2,r[0][1]+(r[1][1]-r[0][1])/2,r[0][2]+(r[1][2]-r[0][2])/2]});return e.length===1?e[0]:e};var dpe=fpe;const hpe=$t,ps=Mt,g5=zt,y5=Gt,Th=new WeakMap,ppe=t=>{let e=Th.get(t);if(e!==void 0)return e;const n=g5.toSides(t);let r=0,i=0,s=0;if(n.length>0){for(let o=0;o<n.length;o++){const l=n[o][0],u=n[o][1],f=l[0]*u[1]-l[1]*u[0];r+=f,i+=(l[0]+u[0])*f,s+=(l[1]+u[1])*f}r/=2;const a=1/(r*6);i*=a,s*=a}return e=ps.fromValues(i,s,0),Th.set(t,e),e},mpe=t=>{let e=Th.get(t);if(e!==void 0)return e;e=ps.create();const n=y5.toPolygons(t);if(n.length===0)return e;let r=0;const i=ps.create();return n.forEach(s=>{const a=s.vertices;for(let o=0;o<a.length-2;o++){ps.cross(i,a[o+1],a[o+2]);const l=ps.dot(a[0],i)/6;r+=l,ps.add(i,a[0],a[o+1]),ps.add(i,i,a[o+2]);const u=ps.scale(i,i,1/4*l);ps.add(e,e,u)}}),ps.scale(e,e,1/r),Th.set(t,e),e},vpe=(...t)=>{t=hpe(t);const e=t.map(n=>g5.isA(n)?ppe(n):y5.isA(n)?mpe(n):[0,0,0]);return e.length===1?e[0]:e};var gpe=vpe;const ype=$t,_pe=Zo,xpe=(...t)=>{t=ype(t);const e=t.map(n=>{const r=_pe(n);return[r[1][0]-r[0][0],r[1][1]-r[0][1],r[1][2]-r[0][2]]});return e.length===1?e[0]:e};var bpe=xpe;const wpe=$t,{geom2:Spe,geom3:Ppe,path2:Epe}=Ab,Nb=u5,Db=Zo,Cpe=t=>Nb(Db(t),2),Tpe=t=>Nb(Db(t),2),Ape=t=>Nb(Db(t),3),Mpe=(...t)=>{if(t=wpe(t),t.length===0)throw new Error("wrong number of arguments");const e=t.map(n=>Epe.isA(n)?Cpe(n):Spe.isA(n)?Tpe(n):Ppe.isA(n)?Ape(n):0);return e.length===1?e[0]:e};var to=Mpe,Rpe={measureAggregateArea:Phe,measureAggregateBoundingBox:Ob,measureAggregateEpsilon:zhe,measureAggregateVolume:npe,measureArea:a5,measureBoundingBox:Zo,measureBoundingSphere:lpe,measureCenter:dpe,measureCenterOfMass:gpe,measureDimensions:bpe,measureEpsilon:to,measureVolume:d5};const Ipe=(t,e)=>Array.isArray(t)&&t.length>=e?t.every(n=>Number.isFinite(n)):!1,Lpe=(t,e)=>Number.isFinite(t)&&t>e,Ope=(t,e)=>Number.isFinite(t)&&t>=e;var mr={isNumberArray:Ipe,isGT:Lpe,isGTE:Ope};const{EPS:xE,TAU:Rl}=un,Gs=Zt,Npe=In,{isGT:Dpe,isGTE:u_,isNumberArray:kpe}=mr,Fpe=t=>{const e={center:[0,0],radius:1,startAngle:0,endAngle:Rl,makeTangent:!1,segments:32};let{center:n,radius:r,startAngle:i,endAngle:s,makeTangent:a,segments:o}=Object.assign({},e,t);if(!kpe(n,2))throw new Error("center must be an array of X and Y values");if(!Dpe(r,0))throw new Error("radius must be greater than zero");if(!u_(i,0))throw new Error("startAngle must be positive");if(!u_(s,0))throw new Error("endAngle must be positive");if(!u_(o,4))throw new Error("segments must be four or more");i=i%Rl,s=s%Rl;let l=Rl;i<s&&(l=s-i),i>s&&(l=s+(Rl-i));const u=Math.acos((r*r+r*r-xE*xE)/(2*r*r)),f=Gs.clone(n);let h;const p=[];if(l<u)h=Gs.fromAngleRadians(Gs.create(),i),Gs.scale(h,h,r),Gs.add(h,h,f),p.push(h);else{const v=Math.max(1,Math.floor(o*(l/Rl)))+1;let P=v*.5/l;P>.25&&(P=.25);const S=a?v+2:v;for(let g=0;g<=S;g++){let m=g;a&&(m=(g-1)*(v-2*P)/v+P,m<0&&(m=0),m>v&&(m=v));const x=i+m*(l/v);h=Gs.fromAngleRadians(Gs.create(),x),Gs.scale(h,h,r),Gs.add(h,h,f),p.push(h)}}return Npe.fromPoints({closed:!1},p)};var Upe=Fpe;const{EPS:bE,TAU:Ta}=un,f_=Zt,wE=zt,{sin:Bpe,cos:$pe}=Pr,{isGTE:d_,isNumberArray:SE}=mr,Vpe=t=>{const e={center:[0,0],radius:[1,1],startAngle:0,endAngle:Ta,segments:32};let{center:n,radius:r,startAngle:i,endAngle:s,segments:a}=Object.assign({},e,t);if(!SE(n,2))throw new Error("center must be an array of X and Y values");if(!SE(r,2))throw new Error("radius must be an array of X and Y values");if(!r.every(v=>v>=0))throw new Error("radius values must be positive");if(!d_(i,0))throw new Error("startAngle must be positive");if(!d_(s,0))throw new Error("endAngle must be positive");if(!d_(a,3))throw new Error("segments must be three or more");if(r[0]===0||r[1]===0)return wE.create();i=i%Ta,s=s%Ta;let o=Ta;i<s&&(o=s-i),i>s&&(o=s+(Ta-i));const l=Math.min(r[0],r[1]),u=Math.acos((l*l+l*l-bE*bE)/(2*l*l));if(o<u)throw new Error("startAngle and endAngle do not define a significant rotation");a=Math.floor(a*(o/Ta));const f=f_.clone(n),h=o/a,p=[];a=o<Ta?a+1:a;for(let v=0;v<a;v++){const P=h*v+i,S=f_.fromValues(r[0]*$pe(P),r[1]*Bpe(P));f_.add(S,f,S),p.push(S)}return o<Ta&&p.push(f),wE.fromPoints(p)};var _5=Vpe;const{TAU:qpe}=un,Hpe=_5,{isGTE:zpe}=mr,Gpe=t=>{const e={center:[0,0],radius:1,startAngle:0,endAngle:qpe,segments:32};let{center:n,radius:r,startAngle:i,endAngle:s,segments:a}=Object.assign({},e,t);if(!zpe(r,0))throw new Error("radius must be positive");return r=[r,r],Hpe({center:n,radius:r,startAngle:i,endAngle:s,segments:a})};var x5=Gpe;const PE=Gt,Xpe=ln,{isNumberArray:EE}=mr,Wpe=t=>{const e={center:[0,0,0],size:[2,2,2]},{center:n,size:r}=Object.assign({},e,t);if(!EE(n,3))throw new Error("center must be an array of X, Y and Z values");if(!EE(r,3))throw new Error("size must be an array of width, depth and height values");if(!r.every(s=>s>=0))throw new Error("size values must be positive");return r[0]===0||r[1]===0||r[2]===0?PE.create():PE.create([[[0,4,6,2],[-1,0,0]],[[1,3,7,5],[1,0,0]],[[0,1,5,4],[0,-1,0]],[[2,6,7,3],[0,1,0]],[[0,2,3,1],[0,0,-1]],[[4,5,7,6],[0,0,1]]].map(s=>{const a=s[0].map(o=>[n[0]+r[0]/2*(2*!!(o&1)-1),n[1]+r[1]/2*(2*!!(o&2)-1),n[2]+r[2]/2*(2*!!(o&4)-1)]);return Xpe.create(a)}))};var kb=Wpe;const Ype=kb,{isGTE:jpe}=mr,Zpe=t=>{const e={center:[0,0,0],size:2};let{center:n,size:r}=Object.assign({},e,t);if(!jpe(r,0))throw new Error("size must be positive");return r=[r,r,r],Ype({center:n,size:r})};var Kpe=Zpe;const{EPS:CE,TAU:Aa}=un,yr=Mt,Jpe=Gt,Qpe=ln,{sin:e0e,cos:t0e}=Pr,{isGT:n0e,isGTE:h_,isNumberArray:p_}=mr,r0e=t=>{const e={center:[0,0,0],height:2,startRadius:[1,1],startAngle:0,endRadius:[1,1],endAngle:Aa,segments:32};let{center:n,height:r,startRadius:i,startAngle:s,endRadius:a,endAngle:o,segments:l}=Object.assign({},e,t);if(!p_(n,3))throw new Error("center must be an array of X, Y and Z values");if(!n0e(r,0))throw new Error("height must be greater then zero");if(!p_(i,2))throw new Error("startRadius must be an array of X and Y values");if(!i.every(I=>I>=0))throw new Error("startRadius values must be positive");if(!p_(a,2))throw new Error("endRadius must be an array of X and Y values");if(!a.every(I=>I>=0))throw new Error("endRadius values must be positive");if(a.every(I=>I===0)&&i.every(I=>I===0))throw new Error("at least one radius must be positive");if(!h_(s,0))throw new Error("startAngle must be positive");if(!h_(o,0))throw new Error("endAngle must be positive");if(!h_(l,4))throw new Error("segments must be four or more");s=s%Aa,o=o%Aa;let u=Aa;s<o&&(u=o-s),s>o&&(u=o+(Aa-s));const f=Math.min(i[0],i[1],a[0],a[1]),h=Math.acos((f*f+f*f-CE*CE)/(2*f*f));if(u<h)throw new Error("startAngle and endAngle do not define a significant rotation");const p=Math.floor(l*(u/Aa)),v=yr.fromValues(0,0,-(r/2)),P=yr.fromValues(0,0,r/2),S=yr.subtract(yr.create(),P,v),g=yr.fromValues(1,0,0),m=yr.fromValues(0,1,0),x=yr.create(),w=yr.create(),C=yr.create(),A=(I,L,R)=>{const B=L*u+s;return yr.scale(x,g,R[0]*t0e(B)),yr.scale(w,m,R[1]*e0e(B)),yr.add(x,x,w),yr.scale(C,S,I),yr.add(C,C,v),yr.add(yr.create(),x,C)},M=(...I)=>{const L=I.map(R=>yr.add(yr.create(),R,n));return Qpe.create(L)},E=[];for(let I=0;I<p;I++){const L=I/p;let R=(I+1)/p;u===Aa&&I===p-1&&(R=0),a[0]===i[0]&&a[1]===i[1]?(E.push(M(v,A(0,R,a),A(0,L,a))),E.push(M(A(0,R,a),A(1,R,a),A(1,L,a),A(0,L,a))),E.push(M(P,A(1,L,a),A(1,R,a)))):(i[0]>0&&i[1]>0&&E.push(M(v,A(0,R,i),A(0,L,i))),(i[0]>0||i[1]>0)&&E.push(M(A(0,L,i),A(0,R,i),A(1,L,a))),a[0]>0&&a[1]>0&&E.push(M(P,A(1,L,a),A(1,R,a))),(a[0]>0||a[1]>0)&&E.push(M(A(1,L,a),A(0,R,i),A(1,R,a))))}return u<Aa&&(E.push(M(v,A(0,0,i),P)),E.push(M(A(0,0,i),A(1,0,a),P)),E.push(M(v,P,A(0,1,i))),E.push(M(A(0,1,i),P,A(1,1,a)))),Jpe.create(E)};var b5=r0e;const i0e=Gt,s0e=b5,{isGTE:a0e}=mr,o0e=t=>{const e={center:[0,0,0],height:2,radius:1,segments:32},{center:n,height:r,radius:i,segments:s}=Object.assign({},e,t);if(!a0e(i,0))throw new Error("radius must be positive");return r===0||i===0?i0e.create():s0e({center:n,height:r,startRadius:[i,i],endRadius:[i,i],segments:s})};var w5=o0e;const{TAU:TE}=un,It=Mt,AE=Gt,ME=ln,{sin:RE,cos:IE}=Pr,{isGTE:l0e,isNumberArray:LE}=mr,c0e=t=>{const e={center:[0,0,0],radius:[1,1,1],segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]},{center:n,radius:r,segments:i,axes:s}=Object.assign({},e,t);if(!LE(n,3))throw new Error("center must be an array of X, Y and Z values");if(!LE(r,3))throw new Error("radius must be an array of X, Y and Z values");if(!r.every(P=>P>=0))throw new Error("radius values must be positive");if(!l0e(i,4))throw new Error("segments must be four or more");if(r[0]===0||r[1]===0||r[2]===0)return AE.create();const a=It.scale(It.create(),It.normalize(It.create(),s[0]),r[0]),o=It.scale(It.create(),It.normalize(It.create(),s[1]),r[1]),l=It.scale(It.create(),It.normalize(It.create(),s[2]),r[2]),u=Math.round(i/4);let f;const h=[],p=It.create(),v=It.create();for(let P=0;P<=i;P++){const S=TE*P/i,g=It.add(It.create(),It.scale(p,a,IE(S)),It.scale(v,o,RE(S)));if(P>0){let m,x;for(let w=0;w<=u;w++){const C=TE/4*w/u,A=IE(C),M=RE(C);if(w>0){let E=[],N;N=It.subtract(It.create(),It.scale(p,f,m),It.scale(v,l,x)),E.push(It.add(N,N,n)),N=It.subtract(It.create(),It.scale(p,g,m),It.scale(v,l,x)),E.push(It.add(N,N,n)),w<u&&(N=It.subtract(It.create(),It.scale(p,g,A),It.scale(v,l,M)),E.push(It.add(N,N,n))),N=It.subtract(It.create(),It.scale(p,f,A),It.scale(v,l,M)),E.push(It.add(N,N,n)),h.push(ME.create(E)),E=[],N=It.add(It.create(),It.scale(p,f,m),It.scale(v,l,x)),E.push(It.add(It.create(),n,N)),N=It.add(N,It.scale(p,g,m),It.scale(v,l,x)),E.push(It.add(It.create(),n,N)),w<u&&(N=It.add(N,It.scale(p,g,A),It.scale(v,l,M)),E.push(It.add(It.create(),n,N))),N=It.add(N,It.scale(p,f,A),It.scale(v,l,M)),E.push(It.add(It.create(),n,N)),E.reverse(),h.push(ME.create(E))}m=A,x=M}}f=g}return AE.create(h)};var S5=c0e;const u0e=Gt,f0e=ln,{isNumberArray:OE}=mr,d0e=t=>{const e={points:[],faces:[],colors:void 0,orientation:"outward"},{points:n,faces:r,colors:i,orientation:s}=Object.assign({},e,t);if(!(Array.isArray(n)&&Array.isArray(r)))throw new Error("points and faces must be arrays");if(n.length<3)throw new Error("three or more points are required");if(r.length<1)throw new Error("one or more faces are required");if(i){if(!Array.isArray(i))throw new Error("colors must be an array");if(i.length!==r.length)throw new Error("faces and colors must have the same length")}n.forEach((o,l)=>{if(!OE(o,3))throw new Error(`point ${l} must be an array of X, Y, Z values`)}),r.forEach((o,l)=>{if(o.length<3)throw new Error(`face ${l} must contain 3 or more indexes`);if(!OE(o,o.length))throw new Error(`face ${l} must be an array of numbers`)}),s!=="outward"&&r.forEach(o=>o.reverse());const a=r.map((o,l)=>{const u=f0e.create(o.map(f=>n[f]));return i&&i[l]&&(u.color=i[l]),u});return u0e.create(a)};var P5=d0e;const NE=Nn,DE=Mt,kE=Gt,h0e=P5,{isGTE:FE}=mr,p0e=t=>{const e={radius:1,frequency:6};let{radius:n,frequency:r}=Object.assign({},e,t);if(!FE(n,0))throw new Error("radius must be positive");if(!FE(r,6))throw new Error("frequency must be six or more");if(n===0)return kE.create();r=Math.floor(r/6);const i=[[.850651,0,-.525731],[.850651,-0,.525731],[-.850651,-0,.525731],[-.850651,0,-.525731],[0,-.525731,.850651],[0,.525731,.850651],[0,.525731,-.850651],[0,-.525731,-.850651],[-.525731,-.850651,-0],[.525731,-.850651,-0],[.525731,.850651,0],[-.525731,.850651,0]],s=[[0,9,1],[1,10,0],[6,7,0],[10,6,0],[7,9,0],[5,1,4],[4,1,9],[5,10,1],[2,8,3],[3,11,2],[2,5,4],[4,8,2],[2,11,5],[3,7,6],[6,11,3],[8,7,3],[9,8,4],[11,10,5],[10,11,6],[8,9,7]],a=(p,v,P)=>{const S=p[0],g=p[1],m=p[2];let x=P;const w=[],C=[];for(let A=0;A<v;A++)for(let M=0;M<v-A;M++){const E=A/v,N=(A+1)/v,I=M/(v-A),L=(M+1)/(v-A),R=v-A-1?M/(v-A-1):1,B=[];B[0]=o(o(S,g,I),m,E),B[1]=o(o(S,g,L),m,E),B[2]=o(o(S,g,R),m,N);for(let V=0;V<3;V++){const z=DE.length(B[V]);for(let G=0;G<3;G++)B[V][G]/=z}if(w.push(B[0],B[1],B[2]),C.push([x,x+1,x+2]),x+=3,M<v-A-1){const V=v-A-1?(M+1)/(v-A-1):1;B[0]=o(o(S,g,L),m,E),B[1]=o(o(S,g,V),m,N),B[2]=o(o(S,g,R),m,N);for(let z=0;z<3;z++){const G=DE.length(B[z]);for(let O=0;O<3;O++)B[z][O]/=G}w.push(B[0],B[1],B[2]),C.push([x,x+1,x+2]),x+=3}}return{points:w,triangles:C,offset:x}},o=(p,v,P)=>{const S=1-P,g=[];for(let m=0;m<3;m++)g[m]=p[m]*S+v[m]*P;return g};let l=[],u=[],f=0;for(let p=0;p<s.length;p++){const v=a([i[s[p][0]],i[s[p][1]],i[s[p][2]]],r,f);l=l.concat(v.points),u=u.concat(v.triangles),f=v.offset}let h=h0e({points:l,faces:u,orientation:"inward"});return n!==1&&(h=kE.transform(NE.fromScaling(NE.create(),[n,n,n]),h)),h};var m0e=p0e;const v0e=In,g0e=t=>{if(!Array.isArray(t))throw new Error("points must be an array");return v0e.fromPoints({},t)};var y0e=g0e;const Sd=zt,_0e=t=>{const e={points:[],paths:[],orientation:"counterclockwise"},{points:n,paths:r,orientation:i}=Object.assign({},e,t);if(!(Array.isArray(n)&&Array.isArray(r)))throw new Error("points and paths must be arrays");let s=n;Array.isArray(n[0])&&(Array.isArray(n[0][0])||(s=[n])),s.forEach((f,h)=>{if(!Array.isArray(f))throw new Error("list of points "+h+" must be an array");if(f.length<3)throw new Error("list of points "+h+" must contain three or more points");f.forEach((p,v)=>{if(!Array.isArray(p))throw new Error("list of points "+h+", point "+v+" must be an array");if(p.length<2)throw new Error("list of points "+h+", point "+v+" must contain by X and Y values")})});let a=r;if(r.length===0){let f=0;a=s.map(h=>h.map(p=>f++))}const o=[];s.forEach(f=>f.forEach(h=>o.push(h)));let l=[];a.forEach(f=>{const h=f.map(v=>o[v]),p=Sd.fromPoints(h);l=l.concat(Sd.toSides(p))});let u=Sd.create(l);return i==="clockwise"&&(u=Sd.reverse(u)),u};var x0e=_0e;const Ma=Zt,UE=zt,{isNumberArray:BE}=mr,b0e=t=>{const e={center:[0,0],size:[2,2]},{center:n,size:r}=Object.assign({},e,t);if(!BE(n,2))throw new Error("center must be an array of X and Y values");if(!BE(r,2))throw new Error("size must be an array of X and Y values");if(!r.every(o=>o>=0))throw new Error("size values must be positive");if(r[0]===0||r[1]===0)return UE.create();const i=[r[0]/2,r[1]/2],s=[i[0],-i[1]],a=[Ma.subtract(Ma.create(),n,i),Ma.add(Ma.create(),n,s),Ma.add(Ma.create(),n,i),Ma.subtract(Ma.create(),n,s)];return UE.fromPoints(a)};var Fb=b0e;const{EPS:nh,TAU:su}=un,m_=Zt,sr=Mt,$E=Gt,gc=ln,{sin:w0e,cos:S0e}=Pr,{isGTE:VE,isNumberArray:qE}=mr,P0e=kb,HE=(t,e,n,r,i,s)=>{const a=su/4*i/r,o=S0e(a),l=w0e(a),u=r-i;let f=n*o,h=e[2]-(n-n*l);s||(h=n-n*l-e[2]),f=f>nh?f:0;const p=sr.add(sr.create(),t,[e[0]-n,e[1]-n,h]),v=sr.add(sr.create(),t,[n-e[0],e[1]-n,h]),P=sr.add(sr.create(),t,[n-e[0],n-e[1],h]),S=sr.add(sr.create(),t,[e[0]-n,n-e[1],h]),g=[],m=[],x=[],w=[];for(let C=0;C<=u;C++){const A=u>0?su/4*C/u:0,M=m_.fromAngleRadians(m_.create(),A);m_.scale(M,M,f);const E=sr.fromVec2(sr.create(),M);g.push(sr.add(sr.create(),p,E)),sr.rotateZ(E,E,[0,0,0],su/4),m.push(sr.add(sr.create(),v,E)),sr.rotateZ(E,E,[0,0,0],su/4),x.push(sr.add(sr.create(),P,E)),sr.rotateZ(E,E,[0,0,0],su/4),w.push(sr.add(sr.create(),S,E))}return s?[g,m,x,w]:(g.reverse(),m.reverse(),x.reverse(),w.reverse(),[w,x,m,g])},zE=(t,e)=>{const n=[];for(let r=0;r<t.length;r++){const i=t[r],s=e[r];for(let a=0;a<i.length-1;a++)n.push(gc.create([i[a],i[a+1],s[a]])),a<s.length-1&&n.push(gc.create([s[a],i[a+1],s[a+1]]))}return n},GE=(t,e)=>{const n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e[r];const a=i[i.length-1],o=s[s.length-1],l=(r+1)%t.length;i=t[l],s=e[l];const u=i[0],f=s[0];n.push(gc.create([a,u,f,o]))}return n},E0e=(t,e)=>{t=[t[3],t[2],t[1],t[0]],t=t.map(s=>s.slice().reverse());const n=[];t.forEach(s=>{s.forEach(a=>n.push(a))});const r=[];e.forEach(s=>{s.forEach(a=>r.push(a))});const i=[];for(let s=0;s<r.length;s++){const a=(s+1)%r.length;i.push(gc.create([n[s],n[a],r[a],r[s]]))}return i},C0e=t=>{const e={center:[0,0,0],size:[2,2,2],roundRadius:.2,segments:32};let{center:n,size:r,roundRadius:i,segments:s}=Object.assign({},e,t);if(!qE(n,3))throw new Error("center must be an array of X, Y and Z values");if(!qE(r,3))throw new Error("size must be an array of X, Y and Z values");if(!r.every(u=>u>=0))throw new Error("size values must be positive");if(!VE(i,0))throw new Error("roundRadius must be positive");if(!VE(s,4))throw new Error("segments must be four or more");if(r[0]===0||r[1]===0||r[2]===0)return $E.create();if(i===0)return P0e({center:n,size:r});if(r=r.map(u=>u/2),i>r[0]-nh||i>r[1]-nh||i>r[2]-nh)throw new Error("roundRadius must be smaller than the radius of all dimensions");s=Math.floor(s/4);let a=null,o=null,l=[];for(let u=0;u<=s;u++){const f=HE(n,r,i,s,u,!0),h=HE(n,r,i,s,u,!1);if(u===0&&(l=l.concat(E0e(h,f))),a&&(l=l.concat(zE(a,f),GE(a,f))),o&&(l=l.concat(zE(o,h),GE(o,h))),u===s){let p=f.map(v=>v[0]);l.push(gc.create(p)),p=h.map(v=>v[0]),l.push(gc.create(p))}a=f,o=h}return $E.create(l)};var T0e=C0e;const{EPS:A0e,TAU:XE}=un,ht=Mt,WE=Gt,M0e=ln,{sin:YE,cos:jE}=Pr,{isGTE:Pd,isNumberArray:R0e}=mr,I0e=w5,L0e=t=>{const e={center:[0,0,0],height:2,radius:1,roundRadius:.2,segments:32},{center:n,height:r,radius:i,roundRadius:s,segments:a}=Object.assign({},e,t);if(!R0e(n,3))throw new Error("center must be an array of X, Y and Z values");if(!Pd(r,0))throw new Error("height must be positive");if(!Pd(i,0))throw new Error("radius must be positive");if(!Pd(s,0))throw new Error("roundRadius must be positive");if(s>i)throw new Error("roundRadius must be smaller than the radius");if(!Pd(a,4))throw new Error("segments must be four or more");if(r===0||i===0)return WE.create();if(s===0)return I0e({center:n,height:r,radius:i});const o=[0,0,-(r/2)],l=[0,0,r/2],u=ht.subtract(ht.create(),l,o),f=ht.length(u);if(2*s>f-A0e)throw new Error("height must be larger than twice roundRadius");let h;Math.abs(u[0])>Math.abs(u[1])?h=ht.fromValues(0,1,0):h=ht.fromValues(1,0,0);const p=ht.scale(ht.create(),ht.normalize(ht.create(),u),s),v=ht.scale(ht.create(),ht.normalize(ht.create(),ht.cross(ht.create(),p,h)),i),P=ht.scale(ht.create(),ht.normalize(ht.create(),ht.cross(ht.create(),v,p)),i);ht.add(o,o,p),ht.subtract(l,l,p);const S=Math.floor(.25*a),g=M=>{const E=M.map(N=>ht.add(N,N,n));return M0e.create(E)},m=[],x=ht.create(),w=ht.create();let C;for(let M=0;M<=a;M++){const E=XE*M/a,N=ht.add(ht.create(),ht.scale(x,v,jE(E)),ht.scale(w,P,YE(E)));if(M>0){let I=[];I.push(ht.add(ht.create(),o,N)),I.push(ht.add(ht.create(),o,C)),I.push(ht.add(ht.create(),l,C)),I.push(ht.add(ht.create(),l,N)),m.push(g(I));let L,R;for(let B=0;B<=S;B++){const V=XE/4*B/S,z=jE(V),G=YE(V);if(B>0){I=[];let O;O=ht.add(ht.create(),o,ht.subtract(x,ht.scale(x,C,L),ht.scale(w,p,R))),I.push(O),O=ht.add(ht.create(),o,ht.subtract(x,ht.scale(x,N,L),ht.scale(w,p,R))),I.push(O),B<S&&(O=ht.add(ht.create(),o,ht.subtract(x,ht.scale(x,N,z),ht.scale(w,p,G))),I.push(O)),O=ht.add(ht.create(),o,ht.subtract(x,ht.scale(x,C,z),ht.scale(w,p,G))),I.push(O),m.push(g(I)),I=[],O=ht.add(ht.create(),ht.scale(x,C,L),ht.scale(w,p,R)),ht.add(O,O,l),I.push(O),O=ht.add(ht.create(),ht.scale(x,N,L),ht.scale(w,p,R)),ht.add(O,O,l),I.push(O),B<S&&(O=ht.add(ht.create(),ht.scale(x,N,z),ht.scale(w,p,G)),ht.add(O,O,l),I.push(O)),O=ht.add(ht.create(),ht.scale(x,C,z),ht.scale(w,p,G)),ht.add(O,O,l),I.push(O),I.reverse(),m.push(g(I))}L=z,R=G}}C=N}return WE.create(m)};var O0e=L0e;const{EPS:ZE,TAU:Ed}=un,qn=Zt,KE=zt,{isGTE:JE,isNumberArray:QE}=mr,N0e=Fb,D0e=t=>{const e={center:[0,0],size:[2,2],roundRadius:.2,segments:32};let{center:n,size:r,roundRadius:i,segments:s}=Object.assign({},e,t);if(!QE(n,2))throw new Error("center must be an array of X and Y values");if(!QE(r,2))throw new Error("size must be an array of X and Y values");if(!r.every(S=>S>=0))throw new Error("size values must be positive");if(!JE(i,0))throw new Error("roundRadius must be positive");if(!JE(s,4))throw new Error("segments must be four or more");if(r[0]===0||r[1]===0)return KE.create();if(i===0)return N0e({center:n,size:r});if(r=r.map(S=>S/2),i>r[0]-ZE||i>r[1]-ZE)throw new Error("roundRadius must be smaller than the radius of all dimensions");const a=Math.floor(s/4),o=qn.add(qn.create(),n,[r[0]-i,r[1]-i]),l=qn.add(qn.create(),n,[i-r[0],r[1]-i]),u=qn.add(qn.create(),n,[i-r[0],i-r[1]]),f=qn.add(qn.create(),n,[r[0]-i,i-r[1]]),h=[],p=[],v=[],P=[];for(let S=0;S<=a;S++){const g=Ed/4*S/a,m=qn.fromAngleRadians(qn.create(),g);qn.scale(m,m,i),h.push(qn.add(qn.create(),o,m)),qn.rotate(m,m,qn.create(),Ed/4),p.push(qn.add(qn.create(),l,m)),qn.rotate(m,m,qn.create(),Ed/4),v.push(qn.add(qn.create(),u,m)),qn.rotate(m,m,qn.create(),Ed/4),P.push(qn.add(qn.create(),f,m))}return KE.fromPoints(h.concat(p,v,P))};var k0e=D0e;const F0e=S5,{isGTE:U0e}=mr,B0e=t=>{const e={center:[0,0,0],radius:1,segments:32,axes:[[1,0,0],[0,-1,0],[0,0,1]]};let{center:n,radius:r,segments:i,axes:s}=Object.assign({},e,t);if(!U0e(r,0))throw new Error("radius must be positive");return r=[r,r,r],F0e({center:n,radius:r,segments:i,axes:s})};var E5=B0e;const $0e=Fb,{isGTE:V0e}=mr,q0e=t=>{const e={center:[0,0],size:2};let{center:n,size:r}=Object.assign({},e,t);if(!V0e(r,0))throw new Error("size must be positive");return r=[r,r],$0e({center:n,size:r})};var H0e=q0e;const{TAU:C5}=un,mu=Zt,z0e=zt,{isGT:G0e,isGTE:Cd,isNumberArray:X0e}=mr,W0e=(t,e)=>t>0&&e>1&&e<t/2?Math.cos(Math.PI*e/t)/Math.cos(Math.PI*(e-1)/t):0,eC=(t,e,n,r)=>{const i=C5/t,s=[];for(let a=0;a<t;a++){const o=mu.fromAngleRadians(mu.create(),i*a+n);mu.scale(o,o,e),mu.add(o,r,o),s.push(o)}return s},Y0e=t=>{const e={center:[0,0],vertices:5,outerRadius:1,innerRadius:0,density:2,startAngle:0};let{center:n,vertices:r,outerRadius:i,innerRadius:s,density:a,startAngle:o}=Object.assign({},e,t);if(!X0e(n,2))throw new Error("center must be an array of X and Y values");if(!Cd(r,2))throw new Error("vertices must be two or more");if(!G0e(i,0))throw new Error("outerRadius must be greater than zero");if(!Cd(s,0))throw new Error("innerRadius must be greater than zero");if(!Cd(o,0))throw new Error("startAngle must be greater than zero");if(r=Math.floor(r),a=Math.floor(a),o=o%C5,s===0){if(!Cd(a,2))throw new Error("density must be two or more");s=i*W0e(r,a)}const l=mu.clone(n),u=eC(r,i,o,l),f=eC(r,s,o+Math.PI/r,l),h=[];for(let p=0;p<r;p++)h.push(u[p]),h.push(f[p]);return z0e.fromPoints(h)};var j0e=Y0e;const Z0e=$t,tC=Nn,nC=Os,rC=zt,iC=Gt,sC=In,hg=(t,...e)=>{const n={origin:[0,0,0],normal:[0,0,1]},{origin:r,normal:i}=Object.assign({},n,t);if(e=Z0e(e),e.length===0)throw new Error("wrong number of arguments");const s=nC.fromNormalAndPoint(nC.create(),i,r);if(Number.isNaN(s[0]))throw new Error("the given origin and normal do not define a proper plane");const a=tC.mirrorByPlane(tC.create(),s),o=e.map(l=>sC.isA(l)?sC.transform(a,l):rC.isA(l)?rC.transform(a,l):iC.isA(l)?iC.transform(a,l):l);return o.length===1?o[0]:o},K0e=(...t)=>hg({normal:[1,0,0]},t),J0e=(...t)=>hg({normal:[0,1,0]},t),Q0e=(...t)=>hg({normal:[0,0,1]},t);var vu={mirror:hg,mirrorX:K0e,mirrorY:J0e,mirrorZ:Q0e};const aC=Os,vo=Mt,eme=t=>{const e=t.edges;if(e.length<3)throw new Error("slices must have 3 or more edges to calculate a plane");const n=e.reduce((a,o)=>vo.add(vo.create(),a,o[0]),vo.create());vo.scale(n,n,1/e.length);let r,i=0;e.forEach(a=>{if(!vo.equals(a[0],a[1])){const o=vo.squaredDistance(n,a[0]);o>i&&(r=a,i=o)}});const s=e.find(a=>vo.equals(a[1],r[0]));return aC.fromPoints(aC.create(),s[0],r[0],r[1])};var T5=eme;const tme=t=>(t||(t=[]),{edges:t});var Ko=tme;const nme=Ko,oC=Mt,rme=(...t)=>{let e,n;return t.length===1?(e=nme(),n=t[0]):(e=t[0],n=t[1]),e.edges=n.edges.map(r=>[oC.clone(r[0]),oC.clone(r[1])]),e};var ime=rme;const sme=Mt,ame=(t,e)=>{const n=t.edges,r=e.edges;return n.length!==r.length?!1:n.reduce((s,a,o)=>{const l=r[o],u=sme.squaredDistance(a[0],l[0]);return s&&u<Number.EPSILON},!0)};var ome=ame;const Td=Mt,lme=Ko,cme=t=>{if(!Array.isArray(t))throw new Error("the given points must be an array");if(t.length<3)throw new Error("the given points must contain THREE or more points");const e=[];let n=t[t.length-1];return t.forEach(r=>{r.length===2&&e.push([Td.fromVec2(Td.create(),n),Td.fromVec2(Td.create(),r)]),r.length===3&&e.push([n,r]),n=r}),lme(e)};var ume=cme;const Ad=Mt,fme=Ko,dme=t=>{if(!Array.isArray(t))throw new Error("the given sides must be an array");const e=[];return t.forEach(n=>{e.push([Ad.fromVec2(Ad.create(),n[0]),Ad.fromVec2(Ad.create(),n[1])])}),fme(e)};var hme=dme;const pme=t=>!!(t&&typeof t=="object"&&"edges"in t&&Array.isArray(t.edges));var mme=pme;const vme=Ko,gme=(...t)=>{let e,n;return t.length===1?(e=vme(),n=t[0]):(e=t[0],n=t[1]),e.edges=n.edges.map(r=>[r[1],r[0]]),e};var yme=gme;const _me=t=>t.edges;var xme=_me;const bme=(t,e)=>{let n,r,i,s,a,o=1;do{r=t,t=null;let l=null;for(a=0;r;){a++,i=r;let u=0;for(n=0;n<o&&(u++,i=i.nextZ,!!i);n++);let f=o;for(;u>0||f>0&&i;)u!==0&&(f===0||!i||e(r)<=e(i))?(s=r,r=r.nextZ,u--):(s=i,i=i.nextZ,f--),l?l.nextZ=s:t=s,s.prevZ=l,l=s;r=i}l.nextZ=null,o*=2}while(a>1);return t};var wme=bme;const Sme=wme;let A5=class{constructor(e,n,r){this.i=e,this.x=n,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}};const Pme=(t,e,n,r)=>{const i=new A5(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i},Eme=t=>{t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)};var M5={Node:A5,insertNode:Pme,removeNode:Eme,sortLinked:Sme};const Cme=(t,e,n,r,i,s,a,o)=>(i-a)*(e-o)-(t-a)*(s-o)>=0&&(t-a)*(r-o)-(n-a)*(e-o)>=0&&(n-a)*(s-o)-(i-a)*(r-o)>=0,Tme=(t,e,n)=>(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y);var Ub={area:Tme,pointInTriangle:Cme};const{Node:lC,insertNode:cC,removeNode:Ah}=M5,{area:ti}=Ub,Ame=(t,e,n,r,i)=>{let s;if(i===Nme(t,e,n,r)>0)for(let a=e;a<n;a+=r)s=cC(a,t[a],t[a+1],s);else for(let a=n-r;a>=e;a-=r)s=cC(a,t[a],t[a+1],s);return s&&pg(s,s.next)&&(Ah(s),s=s.next),s},R5=(t,e)=>{if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(pg(n,n.next)||ti(n.prev,n,n.next)===0)){if(Ah(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e},Mme=(t,e,n)=>{let r=t;do{const i=r.prev,s=r.next.next;!pg(i,s)&&I5(i,r,r.next,s)&&qu(i,s)&&qu(s,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(s.i/n),Ah(r),Ah(r.next),r=t=s),r=r.next}while(r!==t);return R5(r)},Rme=(t,e)=>{let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&I5(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1},qu=(t,e)=>ti(t.prev,t,t.next)<0?ti(t,e,t.next)>=0&&ti(t,t.prev,e)>=0:ti(t,e,t.prev)<0||ti(t,t.next,e)<0,Ime=(t,e)=>{let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r},Lme=(t,e)=>{const n=new lC(t.i,t.x,t.y),r=new lC(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r},Ome=(t,e)=>t.next.i!==e.i&&t.prev.i!==e.i&&!Rme(t,e)&&(qu(t,e)&&qu(e,t)&&Ime(t,e)&&(ti(t.prev,t,e.prev)||ti(t,e.prev,e))||pg(t,e)&&ti(t.prev,t,t.next)>0&&ti(e.prev,e,e.next)>0),I5=(t,e,n,r)=>{const i=Math.sign(ti(t,e,n)),s=Math.sign(ti(t,e,r)),a=Math.sign(ti(n,r,t)),o=Math.sign(ti(n,r,e));return!!(i!==s&&a!==o||i===0&&Md(t,n,e)||s===0&&Md(t,r,e)||a===0&&Md(n,t,r)||o===0&&Md(n,e,r))},Md=(t,e,n)=>e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y),Nme=(t,e,n,r)=>{let i=0;for(let s=e,a=n-r;s<n;s+=r)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i},pg=(t,e)=>t.x===e.x&&t.y===e.y;var L5={cureLocalIntersections:Mme,filterPoints:R5,isValidDiagonal:Ome,linkedPolygon:Ame,locallyInside:qu,splitPolygon:Lme};const{filterPoints:p2,linkedPolygon:Dme,locallyInside:kme,splitPolygon:Fme}=L5,{area:uC,pointInTriangle:Ume}=Ub,Bme=(t,e,n,r)=>{const i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*r,l=s<a-1?e[s+1]*r:t.length,u=Dme(t,o,l,r,!1);u===u.next&&(u.steiner=!0),i.push(Hme(u))}i.sort((s,a)=>s.x-a.x);for(let s=0;s<i.length;s++)n=$me(i[s],n),n=p2(n,n.next);return n},$me=(t,e)=>{const n=Vme(t,e);if(!n)return e;const r=Fme(n,t),i=p2(n,n.next);return p2(r,r.next),e===n?i:e},Vme=(t,e)=>{let n=e;const r=t.x,i=t.y;let s=-1/0,a;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const h=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=r&&h>s){if(s=h,h===r){if(i===n.y)return n;if(i===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!a)return null;if(r===s)return a;const o=a,l=a.x,u=a.y;let f=1/0;n=a;do{if(r>=n.x&&n.x>=l&&r!==n.x&&Ume(i<u?r:s,i,l,u,i<u?s:r,i,n.x,n.y)){const h=Math.abs(i-n.y)/(r-n.x);kme(n,t)&&(h<f||h===f&&(n.x>a.x||n.x===a.x&&qme(a,n)))&&(a=n,f=h)}n=n.next}while(n!==o);return a},qme=(t,e)=>uC(t.prev,t,e.prev)<0&&uC(e.next,t,t.next)<0,Hme=t=>{let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n};var zme=Bme;const Gme=zme,{removeNode:Xme,sortLinked:Wme}=M5,{cureLocalIntersections:Yme,filterPoints:Mh,isValidDiagonal:jme,linkedPolygon:Zme,splitPolygon:Kme}=L5,{area:Ao,pointInTriangle:gu}=Ub,Jme=(t,e,n=2)=>{const r=e&&e.length,i=r?e[0]*n:t.length;let s=Zme(t,0,i,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u,f,h;if(r&&(s=Gme(t,e,s,n)),t.length>80*n){o=u=t[0],l=f=t[1];for(let p=n;p<i;p+=n){const v=t[p],P=t[p+1];v<o&&(o=v),P<l&&(l=P),v>u&&(u=v),P>f&&(f=P)}h=Math.max(u-o,f-l),h=h!==0?1/h:0}return Hu(s,a,n,o,l,h),a},Hu=(t,e,n,r,i,s,a)=>{if(!t)return;!a&&s&&n1e(t,r,i,s);let o=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?e1e(t,r,i,s):Qme(t)){e.push(l.i/n),e.push(t.i/n),e.push(u.i/n),Xme(t),t=u.next,o=u.next;continue}if(t=u,t===o){a?a===1?(t=Yme(Mh(t),e,n),Hu(t,e,n,r,i,s,2)):a===2&&t1e(t,e,n,r,i,s):Hu(Mh(t),e,n,r,i,s,1);break}}},Qme=t=>{const e=t.prev,n=t,r=t.next;if(Ao(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(gu(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ao(i.prev,i,i.next)>=0)return!1;i=i.next}return!0},e1e=(t,e,n,r)=>{const i=t.prev,s=t,a=t.next;if(Ao(i,s,a)>=0)return!1;const o=i.x<s.x?i.x<a.x?i.x:a.x:s.x<a.x?s.x:a.x,l=i.y<s.y?i.y<a.y?i.y:a.y:s.y<a.y?s.y:a.y,u=i.x>s.x?i.x>a.x?i.x:a.x:s.x>a.x?s.x:a.x,f=i.y>s.y?i.y>a.y?i.y:a.y:s.y>a.y?s.y:a.y,h=m2(o,l,e,n,r),p=m2(u,f,e,n,r);let v=t.prevZ,P=t.nextZ;for(;v&&v.z>=h&&P&&P.z<=p;){if(v!==t.prev&&v!==t.next&&gu(i.x,i.y,s.x,s.y,a.x,a.y,v.x,v.y)&&Ao(v.prev,v,v.next)>=0||(v=v.prevZ,P!==t.prev&&P!==t.next&&gu(i.x,i.y,s.x,s.y,a.x,a.y,P.x,P.y)&&Ao(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;v&&v.z>=h;){if(v!==t.prev&&v!==t.next&&gu(i.x,i.y,s.x,s.y,a.x,a.y,v.x,v.y)&&Ao(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;P&&P.z<=p;){if(P!==t.prev&&P!==t.next&&gu(i.x,i.y,s.x,s.y,a.x,a.y,P.x,P.y)&&Ao(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0},t1e=(t,e,n,r,i,s)=>{let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&jme(a,o)){let l=Kme(a,o);a=Mh(a,a.next),l=Mh(l,l.next),Hu(a,e,n,r,i,s),Hu(l,e,n,r,i,s);return}o=o.next}a=a.next}while(a!==t)},n1e=(t,e,n,r)=>{let i=t;do i.z===null&&(i.z=m2(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Wme(i,s=>s.z)},m2=(t,e,n,r,i)=>(t=32767*(t-n)*i,e=32767*(e-r)*i,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1);var r1e=Jme;const{area:i1e}=gf,{toOutlines:s1e}=zt,{arePointsInside:a1e}=Tb,o1e=t=>{const e=s1e(t),n=[],r=[];e.forEach((a,o)=>{const l=i1e(a);l<0?r.push(o):l>0&&n.push(o)});const i=[],s=[];return n.forEach((a,o)=>{const l=e[a];i[o]=[],r.forEach((u,f)=>{const h=e[u];a1e([h[0]],{vertices:l})&&(i[o].push(u),s[f]||(s[f]=[]),s[f].push(o))})}),r.forEach((a,o)=>{if(s[o]&&s[o].length>1){const l=l1e(s[o],u=>i[u].length);s[o].forEach((u,f)=>{f!==l&&(i[u]=i[u].filter(h=>h!==a))})}}),i.map((a,o)=>({solid:e[n[o]],holes:a.map(l=>e[l])}))},l1e=(t,e)=>{let n,r;return t.forEach((i,s)=>{const a=e(i);(r===void 0||a<r)&&(n=s,r=a)}),n};var c1e=o1e;const u1e=zt,fC=Os,f1e=Zt,br=Mt,d1e=T5,h1e=c1e;let p1e=class{constructor(e){this.plane=d1e(e);const n=br.orthogonal(br.create(),this.plane),r=br.cross(br.create(),this.plane,n);this.v=br.normalize(r,r),this.u=br.cross(br.create(),this.v,this.plane),this.basisMap=new Map;const i=e.edges.map(a=>a.map(o=>this.to2D(o))),s=u1e.create(i);this.roots=h1e(s)}to2D(e){const n=f1e.fromValues(br.dot(e,this.u),br.dot(e,this.v));return this.basisMap.set(n,e),n}to3D(e){const n=this.basisMap.get(e);if(n)return n;{console.log("Warning: point not in original slice");const r=br.scale(br.create(),this.u,e[0]),i=br.scale(br.create(),this.v,e[1]),s=br.scale(br.create(),fC,fC[3]),a=br.add(r,r,s);return br.add(i,i,a)}}};var m1e=p1e;const v1e=ln,g1e=r1e,y1e=m1e,_1e=t=>{const e=new y1e(t),n=[];return e.roots.forEach(({solid:r,holes:i})=>{let s=r.length;const a=[];i.forEach((h,p)=>{a.push(s),s+=h.length});const o=[r,...i].flat(),l=o.flat(),u=h=>e.to3D(o[h]),f=g1e(l,a);for(let h=0;h<f.length;h+=3){const p=f.slice(h,h+3).map(u);n.push(v1e.fromPointsAndPlane(p,e.plane))}}),n};var x1e=_1e;const dC=Mt,b1e=t=>t.reduce((e,n)=>e+=`[${dC.toString(n[0])}, ${dC.toString(n[1])}], `,""),w1e=t=>`[${b1e(t.edges)}]`;var S1e=w1e;const Rd=Mt,P1e=Ko,E1e=(t,e)=>{const n=e.edges.map(r=>[Rd.transform(Rd.create(),r[0],t),Rd.transform(Rd.create(),r[1],t)]);return P1e(n)};var C1e=E1e,Lc={calculatePlane:T5,clone:ime,create:Ko,equals:ome,fromPoints:ume,fromSides:hme,isA:mme,reverse:yme,toEdges:xme,toPolygons:x1e,toString:S1e,transform:C1e};const hC=Mt,T1e=Ko,A1e=t=>{if(!t.edges)return t;let e=t.edges;const n=new Map,r=new Map;e=e.filter(a=>!hC.equals(a[0],a[1])),e.forEach(a=>{const o=a[0].toString(),l=a[1].toString();n.set(o,a[0]),n.set(l,a[1]),r.set(o,(r.get(o)||0)+1),r.set(l,(r.get(l)||0)-1)});const i=[],s=[];return r.forEach((a,o)=>{a<0&&i.push(o),a>0&&s.push(o)}),i.forEach(a=>{const o=n.get(a);let l=1/0,u;s.forEach(f=>{const h=n.get(f),p=hC.distance(o,h);p<l&&(l=p,u=h)}),console.warn(`slice.repair: repairing vertex gap ${o} to ${u} distance ${l}`),e=e.map(f=>f[0].toString()===a?[u,f[1]]:f[1].toString()===a?[f[0],u]:f)}),T1e(e)};var M1e=A1e;const{EPS:pC}=un,Il=Mt,Id=ln,mC=Lc,v2=(t,e)=>t===e?t:t<e?v2(e,t):e===1?1:e===0?t:v2(e,t%e),R1e=(t,e)=>t*e/v2(t,e),vC=(t,e)=>{const n=t/e.length;if(n===1)return e;const r=Il.fromValues(n,n,n),i=[];return e.forEach(s=>{const a=Il.subtract(Il.create(),s[1],s[0]);Il.divide(a,a,r);let o=s[0];for(let l=1;l<=n;++l){const u=Il.add(Il.create(),o,a);i.push([o,u]),o=u}}),i},gC=pC*pC/2*Math.sin(Math.PI/3),I1e=(t,e)=>{let n=mC.toEdges(t),r=mC.toEdges(e);if(n.length!==r.length){const s=R1e(n.length,r.length);s!==n.length&&(n=vC(s,n)),s!==r.length&&(r=vC(s,r))}const i=[];return n.forEach((s,a)=>{const o=r[a],l=Id.create([s[0],s[1],o[1]]),u=Id.measureArea(l);Number.isFinite(u)&&u>gC&&i.push(l);const f=Id.create([s[0],o[1],o[0]]),h=Id.measureArea(f);Number.isFinite(h)&&h>gC&&i.push(f)}),i};var L1e=I1e;const yC=Nn,_C=zt,O1e=Gt,g2=ln,$a=Lc,N1e=M1e,xC=L1e,D1e=(t,e,n)=>{let r=null;return _C.isA(n)&&(r=$a.fromSides(_C.toSides(n))),g2.isA(n)&&(r=$a.fromPoints(g2.toPoints(n))),t===0||t===1?$a.transform(yC.fromTranslation(yC.create(),[0,0,t]),r):null},k1e=(t,e)=>{const n={numberOfSlices:2,capStart:!0,capEnd:!0,close:!1,repair:!0,callback:D1e},{numberOfSlices:r,capStart:i,capEnd:s,close:a,repair:o,callback:l}=Object.assign({},n,t);if(r<2)throw new Error("numberOfSlices must be 2 or more");o&&(e=N1e(e));const u=r-1;let f=null,h=null,p=null,v=[];for(let P=0;P<r;P++){const S=l(P/u,P,e);if(S){if(!$a.isA(S))throw new Error("the callback function must return slice objects");if($a.toEdges(S).length===0)throw new Error("the callback function must return slices with one or more edges");p&&(v=v.concat(xC(p,S))),P===0&&(f=S),P===r-1&&(h=S),p=S}}if(s){const P=$a.toPolygons(h);v=v.concat(P)}if(i){const P=$a.toPolygons(f).map(g2.invert);v=v.concat(P)}return!i&&!s&&a&&!$a.equals(h,f)&&(v=v.concat(xC(h,f))),O1e.create(v)};var mg=k1e;const{TAU:pi}=un,au=Nn,{mirrorX:F1e}=vu,Ld=zt,v_=Lc,U1e=mg,B1e=(t,e)=>{const n={segments:12,startAngle:0,angle:pi,overflow:"cap"};let{segments:r,startAngle:i,angle:s,overflow:a}=Object.assign({},n,t);if(r<3)throw new Error("segments must be greater then 3");i=Math.abs(i)>pi?i%pi:i,s=Math.abs(s)>pi?s%pi:s;let o=i+s;if(o=Math.abs(o)>pi?o%pi:o,o<i){const x=i;i=o,o=x}let l=o-i;if(l<=0&&(l=pi),Math.abs(l)<pi){const x=pi/r;r=Math.floor(Math.abs(l)/x),Math.abs(l)>r*x&&r++}let u=Ld.toSides(e);if(u.length===0)throw new Error("the given geometry cannot be empty");const f=u.filter(x=>x[0][0]<0),h=u.filter(x=>x[0][0]>=0);f.length>0&&h.length>0&&a==="cap"&&(f.length>h.length?(u=u.map(x=>{let w=x[0],C=x[1];return w=[Math.min(w[0],0),w[1]],C=[Math.min(C[0],0),C[1]],[w,C]}),e=Ld.create(u),e=F1e(e)):h.length>=f.length&&(u=u.map(x=>{let w=x[0],C=x[1];return w=[Math.max(w[0],0),w[1]],C=[Math.max(C[0],0),C[1]],[w,C]}),e=Ld.create(u)));const v=l/r,P=Math.abs(l)<pi,S=v_.fromSides(Ld.toSides(e));v_.reverse(S,S);const g=au.create(),m=(x,w,C)=>{let A=v*w+i;return l===pi&&w===r&&(A=i),au.multiply(g,au.fromZRotation(g,A),au.fromXRotation(au.create(),pi/4)),v_.transform(g,C)};return t={numberOfSlices:r+1,capStart:P,capEnd:P,close:!P,callback:m},U1e(t,S)};var O5=B1e;const $1e=$t,bC=Nn,wC=zt,SC=Gt,PC=In,vg=(t,...e)=>{if(!Array.isArray(t))throw new Error("angles must be an array");if(e=$1e(e),e.length===0)throw new Error("wrong number of arguments");for(t=t.slice();t.length<3;)t.push(0);const n=t[2],r=t[1],i=t[0],s=bC.fromTaitBryanRotation(bC.create(),n,r,i),a=e.map(o=>PC.isA(o)?PC.transform(s,o):wC.isA(o)?wC.transform(s,o):SC.isA(o)?SC.transform(s,o):o);return a.length===1?a[0]:a},V1e=(t,...e)=>vg([t,0,0],e),q1e=(t,...e)=>vg([0,t,0],e),H1e=(t,...e)=>vg([0,0,t],e);var yu={rotate:vg,rotateX:V1e,rotateY:q1e,rotateZ:H1e};const z1e=$t,EC=Nn,CC=zt,TC=Gt,AC=In,gg=(t,...e)=>{if(!Array.isArray(t))throw new Error("offset must be an array");if(e=z1e(e),e.length===0)throw new Error("wrong number of arguments");for(t=t.slice();t.length<3;)t.push(0);const n=EC.fromTranslation(EC.create(),t),r=e.map(i=>AC.isA(i)?AC.transform(n,i):CC.isA(i)?CC.transform(n,i):TC.isA(i)?TC.transform(n,i):i);return r.length===1?r[0]:r},G1e=(t,...e)=>gg([t,0,0],e),X1e=(t,...e)=>gg([0,t,0],e),W1e=(t,...e)=>gg([0,0,t],e);var Oo={translate:gg,translateX:G1e,translateY:X1e,translateZ:W1e};const{TAU:Y1e}=un,j1e=O5,{rotate:Z1e}=yu,{translate:K1e}=Oo,J1e=x5,{isGT:g_,isGTE:y_}=mr,Q1e=t=>{const e={innerRadius:1,innerSegments:32,outerRadius:4,outerSegments:32,innerRotation:0,startAngle:0,outerRotation:Y1e},{innerRadius:n,innerSegments:r,outerRadius:i,outerSegments:s,innerRotation:a,startAngle:o,outerRotation:l}=Object.assign({},e,t);if(!g_(n,0))throw new Error("innerRadius must be greater than zero");if(!y_(r,3))throw new Error("innerSegments must be three or more");if(!g_(i,0))throw new Error("outerRadius must be greater than zero");if(!y_(s,3))throw new Error("outerSegments must be three or more");if(!y_(o,0))throw new Error("startAngle must be positive");if(!g_(l,0))throw new Error("outerRotation must be greater than zero");if(n>=i)throw new Error("inner circle is too large to rotate about the outer circle");let u=J1e({radius:n,segments:r});return a!==0&&(u=Z1e([0,0,a],u)),u=K1e([i,0],u),j1e({startAngle:o,angle:l,segments:s},u)};var eve=Q1e;const{NEPS:yc}=un,ou=Zt,tve=zt,{isNumberArray:nve}=mr,y2=(t,e,n)=>Math.acos((t*t+e*e-n*n)/(2*t*e)),rve=(t,e,n)=>e>yc?Math.sqrt(t*t+n*n-2*t*n*Math.cos(e)):Math.sqrt((t-n)*(t-n)+t*n*e*e*(1-e*e/12)),ive=t=>{if(Math.abs(t[0]+t[1]+t[2]-Math.PI)>yc)throw new Error("AAA triangles require angles that sum to PI");const n=t[0],r=t[1],i=Math.PI-n-r,s=1,a=s/Math.sin(i)*Math.sin(n),o=s/Math.sin(i)*Math.sin(r);return Oc(n,r,i,a,o,s)},sve=t=>{const e=t[0],n=t[1],r=Math.PI+yc-e-n;if(r<yc)throw new Error("AAS triangles require angles that sum to PI");const i=t[2],s=i/Math.sin(e)*Math.sin(n),a=i/Math.sin(e)*Math.sin(r);return Oc(e,n,r,i,s,a)},ave=t=>{const e=t[0],n=t[2],r=Math.PI+yc-e-n;if(r<yc)throw new Error("ASA triangles require angles that sum to PI");const i=t[1],s=i/Math.sin(r)*Math.sin(e),a=i/Math.sin(r)*Math.sin(n);return Oc(e,n,r,s,a,i)},ove=t=>{const e=t[0],n=t[1],r=t[2],i=rve(e,n,r),s=y2(i,e,r),a=Math.PI-s-n;return Oc(s,n,a,r,i,e)},lve=t=>{const e=t[0],n=t[1],r=t[2],i=Math.asin(n*Math.sin(r)/e),s=Math.PI-i-r,a=e/Math.sin(r)*Math.sin(s);return Oc(i,s,r,n,a,e)},cve=t=>{const e=t[1],n=t[2],r=t[0];if(e+n<=r||n+r<=e||r+e<=n)throw new Error("SSS triangle is incorrect, as the longest side is longer than the sum of the other sides");const i=y2(n,r,e),s=y2(r,e,n),a=Math.PI-i-s;return Oc(i,s,a,e,n,r)},Oc=(t,e,n,r,i,s)=>{const a=ou.fromValues(0,0),o=ou.fromValues(s,0),l=ou.fromValues(r,0);return ou.add(l,ou.rotate(l,l,[0,0],Math.PI-e),o),tve.fromPoints([a,o,l])},uve=t=>{const e={type:"SSS",values:[1,1,1]};let{type:n,values:r}=Object.assign({},e,t);if(typeof n!="string")throw new Error("triangle type must be a string");if(n=n.toUpperCase(),!((n[0]==="A"||n[0]==="S")&&(n[1]==="A"||n[1]==="S")&&(n[2]==="A"||n[2]==="S")))throw new Error("triangle type must contain three letters; A or S");if(!nve(r,3))throw new Error("triangle values must contain three values");if(!r.every(i=>i>0))throw new Error("triangle values must be greater than zero");switch(n){case"AAA":return ive(r);case"AAS":return sve(r);case"ASA":return ave(r);case"SAS":return ove(r);case"SSA":return lve(r);case"SSS":return cve(r);default:throw new Error("invalid triangle type, try again")}};var fve=uve,dve={arc:Upe,circle:x5,cube:Kpe,cuboid:kb,cylinder:w5,cylinderElliptic:b5,ellipse:_5,ellipsoid:S5,geodesicSphere:m0e,line:y0e,polygon:x0e,polyhedron:P5,rectangle:Fb,roundedCuboid:T0e,roundedCylinder:O0e,roundedRectangle:k0e,sphere:E5,square:H0e,star:j0e,torus:eve,triangle:fve},hve={height:14,32:[16],33:[10,5,21,5,7,void 0,5,2,4,1,5,0,6,1,5,2],34:[16,4,21,4,14,void 0,12,21,12,14],35:[21,11,25,4,-7,void 0,17,25,10,-7,void 0,4,12,18,12,void 0,3,6,17,6],36:[20,8,25,8,-4,void 0,12,25,12,-4,void 0,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],37:[24,21,21,3,0,void 0,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,void 0,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7],38:[26,23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2],39:[10,5,19,4,20,5,21,6,20,6,18,5,16,4,15],40:[14,11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7],41:[14,3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7],42:[16,8,21,8,9,void 0,3,18,13,12,void 0,13,18,3,12],43:[26,13,18,13,0,void 0,4,9,22,9],44:[10,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],45:[26,4,9,22,9],46:[10,5,2,4,1,5,0,6,1,5,2],47:[22,20,25,2,-7],48:[20,9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21],49:[20,6,17,8,18,11,21,11,0],50:[20,4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0],51:[20,5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],52:[20,13,21,3,7,18,7,void 0,13,21,13,0],53:[20,15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4],54:[20,16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7],55:[20,17,21,7,0,void 0,3,21,17,21],56:[20,8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21],57:[20,16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3],58:[10,5,14,4,13,5,12,6,13,5,14,void 0,5,2,4,1,5,0,6,1,5,2],59:[10,5,14,4,13,5,12,6,13,5,14,void 0,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4],60:[24,20,18,4,9,20,0],61:[26,4,12,22,12,void 0,4,6,22,6],62:[24,4,18,20,9,4,0],63:[18,3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,void 0,9,2,8,1,9,0,10,1,9,2],64:[27,18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,void 0,12,16,10,14,9,11,9,8,10,6,11,5,void 0,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,void 0,19,16,18,8,18,6,19,5],65:[18,9,21,1,0,void 0,9,21,17,0,void 0,4,7,14,7],66:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,void 0,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0],67:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5],68:[21,4,21,4,0,void 0,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0],69:[19,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11,void 0,4,0,17,0],70:[18,4,21,4,0,void 0,4,21,17,21,void 0,4,11,12,11],71:[21,18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,void 0,13,8,18,8],72:[22,4,21,4,0,void 0,18,21,18,0,void 0,4,11,18,11],73:[8,4,21,4,0],74:[16,12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7],75:[21,4,21,4,0,void 0,18,21,4,7,void 0,9,12,18,0],76:[17,4,21,4,0,void 0,4,0,16,0],77:[24,4,21,4,0,void 0,4,21,12,0,void 0,20,21,12,0,void 0,20,21,20,0],78:[22,4,21,4,0,void 0,4,21,18,0,void 0,18,21,18,0],79:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21],80:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10],81:[22,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,void 0,12,4,18,-2],82:[21,4,21,4,0,void 0,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,void 0,11,11,18,0],83:[20,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3],84:[16,8,21,8,0,void 0,1,21,15,21],85:[22,4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21],86:[18,1,21,9,0,void 0,17,21,9,0],87:[24,2,21,7,0,void 0,12,21,7,0,void 0,12,21,17,0,void 0,22,21,17,0],88:[20,3,21,17,0,void 0,17,21,3,0],89:[18,1,21,9,11,9,0,void 0,17,21,9,11],90:[20,17,21,3,0,void 0,3,21,17,21,void 0,3,0,17,0],91:[14,4,25,4,-7,void 0,5,25,5,-7,void 0,4,25,11,25,void 0,4,-7,11,-7],92:[14,0,21,14,-3],93:[14,9,25,9,-7,void 0,10,25,10,-7,void 0,3,25,10,25,void 0,3,-7,10,-7],94:[16,6,15,8,18,10,15,void 0,3,12,8,17,13,12,void 0,8,17,8,0],95:[16,0,-2,16,-2],96:[10,6,21,5,20,4,18,4,16,5,15,6,16,5,17],97:[19,15,14,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],98:[19,4,21,4,0,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],99:[18,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],100:[19,15,21,15,0,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],101:[18,3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],102:[12,10,21,8,21,6,20,5,17,5,0,void 0,2,14,9,14],103:[19,15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],104:[19,4,21,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],105:[8,3,21,4,20,5,21,4,22,3,21,void 0,4,14,4,0],106:[10,5,21,6,20,7,21,6,22,5,21,void 0,6,14,6,-3,5,-6,3,-7,1,-7],107:[17,4,21,4,0,void 0,14,14,4,4,void 0,8,8,15,0],108:[8,4,21,4,0],109:[30,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0,void 0,15,10,18,13,20,14,23,14,25,13,26,10,26,0],110:[19,4,14,4,0,void 0,4,10,7,13,9,14,12,14,14,13,15,10,15,0],111:[19,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14],112:[19,4,14,4,-7,void 0,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3],113:[19,15,14,15,-7,void 0,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3],114:[13,4,14,4,0,void 0,4,8,5,11,7,13,9,14,12,14],115:[17,14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3],116:[12,5,21,5,4,6,1,8,0,10,0,void 0,2,14,9,14],117:[19,4,14,4,4,5,1,7,0,10,0,12,1,15,4,void 0,15,14,15,0],118:[16,2,14,8,0,void 0,14,14,8,0],119:[22,3,14,7,0,void 0,11,14,7,0,void 0,11,14,15,0,void 0,19,14,15,0],120:[17,3,14,14,0,void 0,14,14,3,0],121:[16,2,14,8,0,void 0,14,14,8,0,6,-4,4,-6,2,-7,1,-7],122:[17,14,14,3,0,void 0,3,14,14,14,void 0,3,0,14,0],123:[14,9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,void 0,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,void 0,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7],124:[8,4,25,4,-7],125:[14,5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,void 0,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,void 0,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7],126:[24,3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,void 0,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]};const pve=hve,mve={xOffset:0,yOffset:0,input:"?",align:"left",font:pve,height:14,lineSpacing:2.142857142857143,letterSpacing:1,extrudeOffset:0},vve=(t,e)=>{!e&&typeof t=="string"&&(t={input:t}),t=t||{};const n=Object.assign({},mve,t);return n.input=e||n.input,n};var N5=vve;const gve=N5,yve=(t,e)=>{const{xOffset:n,yOffset:r,input:i,font:s,height:a,extrudeOffset:o}=gve(t,e);let l=i.charCodeAt(0);(!l||!s[l])&&(l=63);const u=[].concat(s[l]),f=(a-o)/s.height,h=o/2,p=u.shift()*f,v=[];let P=[];for(let S=0,g=u.length;S<g;S+=2){const m=f*u[S]+n,x=f*u[S+1]+r+h;if(u[S]!==void 0){P.push([m,x]);continue}v.push(P),P=[],S--}return P.length&&v.push(P),{width:p,height:a,segments:v}};var D5=yve;const _ve=D5,xve=N5,MC=(t,e)=>{const{x:n,y:r}=Object.assign({x:0,y:0},t||{}),i=e.segments;let s=null,a=null;for(let o=0,l=i.length;o<l;o++){s=i[o];for(let u=0,f=s.length;u<f;u++)a=s[u],s[u]=[a[0]+n,a[1]+r]}return e},bve=(t,e)=>{const{xOffset:n,yOffset:r,input:i,font:s,height:a,align:o,extrudeOffset:l,lineSpacing:u,letterSpacing:f}=xve(t,e);let[h,p]=[n,r],v,P,S,g,m,x,w={width:0,segments:[]};const C=[];let A=[],M=0;const E=h,N=()=>{C.push(w),M=Math.max(M,w.width),w={width:0,segments:[]}};for(v=0,P=i.length;v<P;v++){if(S=i[v],g=_ve({xOffset:h,yOffset:p,font:s,height:a,extrudeOffset:l},S),S===`
`){h=E,p-=g.height*u,N();continue}m=g.width*f,w.width+=m,h+=m,S!==" "&&(w.segments=w.segments.concat(g.segments))}for(w.segments.length&&N(),v=0,P=C.length;v<P;v++)w=C[v],M>w.width&&(x=M-w.width,o==="right"?w=MC({x},w):o==="center"&&(w=MC({x:x/2},w))),A=A.concat(w.segments);return A};var wve=bve,Sve={vectorChar:D5,vectorText:wve};const Pve=zt,Eve=Gt,Cve=In,Tve=t=>{let e;for(const n of t){let r=0;if(Pve.isA(n)&&(r=1),Eve.isA(n)&&(r=2),Cve.isA(n)&&(r=3),e&&r!==e)return!1;e=r}return!0};var _f=Tve;const Ave=t=>t*.017453292519943295;var Mve=Ave;const Rve=(t,e)=>t-e;var k5=Rve;const Ive=(t,e,n)=>{let r=0,i=t.length;for(;i>r;){const s=Math.floor((r+i)/2),a=t[s];n(e,a)>0?r=s+1:i=s}t.splice(r,0,e)};var Lve=Ive;const{TAU:RC}=un,Ove=(t,e,n)=>{const r=e>0?t*RC/e:0,i=n>0?RC/n:0;return Math.ceil(Math.max(r,i,4))};var Nve=Ove;const Dve=t=>t*57.29577951308232;var kve=Dve,F5={areAllShapesTheSameType:_f,degToRad:Mve,flatten:$t,fnNumberSort:k5,insertSorted:Lve,radiusToSegments:Nve,radToDeg:kve};const IC=Zt,Fve=zt,Uve=(t,e)=>{if(e.vertices.length<4)return null;const n=[],r=e.vertices.filter((a,o)=>a[2]>0?(n.push(o),!0):!1);if(r.length!==2)throw new Error("Assertion failed: fromFakePolygon: not enough points found");const i=r.map(a=>{const o=Math.round(a[0]/t)*t+0,l=Math.round(a[1]/t)*t+0;return IC.fromValues(o,l)});if(IC.equals(i[0],i[1]))return null;const s=n[1]-n[0];if(s===1||s===3)s===1&&i.reverse();else throw new Error("Assertion failed: fromFakePolygon: unknown index ordering");return i},Bve=(t,e)=>{const n=e.map(r=>Uve(t,r)).filter(r=>r!==null);return Fve.create(n)};var Bb=Bve;const Ra=Mt,$ve=zt,Vve=Gt,qve=ln,Hve=(t,e,n)=>{const r=[Ra.fromVec2(Ra.create(),n[0],t),Ra.fromVec2(Ra.create(),n[1],t),Ra.fromVec2(Ra.create(),n[1],e),Ra.fromVec2(Ra.create(),n[0],e)];return qve.create(r)},zve=(t,e)=>{const r=$ve.toSides(e).map(s=>Hve(t.z0,t.z1,s));return Vve.create(r)};var $b=zve;const LC=Nn,Gve=Zt,fr=Mt,U5=function(t,e){arguments.length<2&&(e=fr.orthogonal(fr.create(),t)),this.v=fr.normalize(fr.create(),fr.cross(fr.create(),t,e)),this.u=fr.cross(fr.create(),this.v,t),this.plane=t,this.planeorigin=fr.scale(fr.create(),t,t[3])};U5.prototype={getProjectionMatrix:function(){return LC.fromValues(this.u[0],this.v[0],this.plane[0],0,this.u[1],this.v[1],this.plane[1],0,this.u[2],this.v[2],this.plane[2],0,0,0,-this.plane[3],1)},getInverseProjectionMatrix:function(){const t=fr.scale(fr.create(),this.plane,this.plane[3]);return LC.fromValues(this.u[0],this.u[1],this.u[2],0,this.v[0],this.v[1],this.v[2],0,this.plane[0],this.plane[1],this.plane[2],0,t[0],t[1],t[2],1)},to2D:function(t){return Gve.fromValues(fr.dot(t,this.u),fr.dot(t,this.v))},to3D:function(t){const e=fr.scale(fr.create(),this.u,t[0]),n=fr.scale(fr.create(),this.v,t[1]),r=fr.add(e,e,this.planeorigin);return fr.add(n,n,r)}};var Xve=U5;const{EPS:Xs}=un,Ia=Lb,zi=Zt,Wve=Xve,Ll=e5,{insertSorted:Yve,fnNumberSort:jve}=F5,OC=ln,Zve=t=>{if(t.length<2)return t;const e=[],n=t.length,r=OC.plane(t[0]),i=new Wve(r),s=[],a=[],o=new Map,l=new Map,u=new Map,f=10/Xs;for(let P=0;P<n;P++){const S=t[P];let g=[],m=S.vertices.length,x=-1;if(m>0){let w,C;for(let A=0;A<m;A++){let M=i.to2D(S.vertices[A]);const E=Math.floor(M[1]*f);let N;u.has(E)?N=u.get(E):u.has(E+1)?N=u.get(E+1):u.has(E-1)?N=u.get(E-1):(N=M[1],u.set(E,M[1])),M=zi.fromValues(M[0],N),g.push(M);const I=M[1];(A===0||I<w)&&(w=I,x=A),(A===0||I>C)&&(C=I);let L=l.get(I);L||(L={},l.set(I,L)),L[P]=!0}if(w>=C)g=[],m=0,x=-1;else{let A=o.get(w);A||(A=[],o.set(w,A)),A.push(P)}}g.reverse(),x=m-x-1,s.push(g),a.push(x)}const h=[];l.forEach((P,S)=>h.push(S)),h.sort(jve);let p=[],v=[];for(let P=0;P<h.length;P++){const S=[],g=h[P],m=l.get(g);for(let w=0;w<p.length;++w){const C=p[w],A=C.polygonindex;if(m[A]){const M=s[A],E=M.length;let N=C.leftvertexindex,I=C.rightvertexindex;for(;;){let R=N+1;if(R>=E&&(R=0),M[R][1]!==g)break;N=R}let L=I-1;if(L<0&&(L=E-1),M[L][1]===g&&(I=L),N!==C.leftvertexindex&&N===I)p.splice(w,1),--w;else{C.leftvertexindex=N,C.rightvertexindex=I,C.topleft=M[N],C.topright=M[I];let R=N+1;R>=E&&(R=0),C.bottomleft=M[R];let B=I-1;B<0&&(B=E-1),C.bottomright=M[B]}}}let x;if(P>=h.length-1)p=[],x=null;else{x=Number(h[P+1]);const w=.5*(g+x),C=o.get(g);for(const A in C){const M=C[A],E=s[M],N=E.length,I=a[M];let L=I;for(;;){let G=L+1;if(G>=N&&(G=0),E[G][1]!==g||G===I)break;L=G}let R=I;for(;;){let G=R-1;if(G<0&&(G=N-1),E[G][1]!==g||G===L)break;R=G}let B=L+1;B>=N&&(B=0);let V=R-1;V<0&&(V=N-1);const z={polygonindex:M,leftvertexindex:L,rightvertexindex:R,topleft:E[L],topright:E[R],bottomleft:E[B],bottomright:E[V]};Yve(p,z,(G,O)=>{const y=Ll(G.topleft,G.bottomleft,w),b=Ll(O.topleft,O.bottomleft,w);return y>b?1:y<b?-1:0})}}for(const w in p){const C=p[w];let A=Ll(C.topleft,C.bottomleft,g);const M=zi.fromValues(A,g);A=Ll(C.topright,C.bottomright,g);const E=zi.fromValues(A,g);A=Ll(C.topleft,C.bottomleft,x);const N=zi.fromValues(A,x);A=Ll(C.topright,C.bottomright,x);const I=zi.fromValues(A,x),L={topleft:M,topright:E,bottomleft:N,bottomright:I,leftline:Ia.fromPoints(Ia.create(),M,N),rightline:Ia.fromPoints(Ia.create(),I,E)};if(S.length>0){const R=S[S.length-1],B=zi.distance(L.topleft,R.topright),V=zi.distance(L.bottomleft,R.bottomright);B<Xs&&V<Xs&&(L.topleft=R.topleft,L.leftline=R.leftline,L.bottomleft=R.bottomleft,S.splice(S.length-1,1))}S.push(L)}if(P>0){const w=new Set,C=new Set;for(let A=0;A<S.length;A++){const M=S[A];for(let E=0;E<v.length;E++)if(!C.has(E)){const N=v[E];if(zi.distance(N.bottomleft,M.topleft)<Xs&&zi.distance(N.bottomright,M.topright)<Xs){C.add(E);const I=Ia.direction(M.leftline),L=Ia.direction(N.leftline),R=I[0]-L[0],B=Ia.direction(M.rightline),V=Ia.direction(N.rightline),z=B[0]-V[0],G=Math.abs(R)<Xs,O=Math.abs(z)<Xs,y=G||R>=0,b=O||z>=0;y&&b&&(M.outpolygon=N.outpolygon,M.leftlinecontinues=G,M.rightlinecontinues=O,w.add(E));break}}}for(let A=0;A<v.length;A++)if(!w.has(A)){const M=v[A];M.outpolygon.rightpoints.push(M.bottomright),zi.distance(M.bottomright,M.bottomleft)>Xs&&M.outpolygon.leftpoints.push(M.bottomleft),M.outpolygon.leftpoints.reverse();const N=M.outpolygon.rightpoints.concat(M.outpolygon.leftpoints).map(L=>i.to3D(L)),I=OC.fromPointsAndPlane(N,r);I.vertices.length&&e.push(I)}}for(let w=0;w<S.length;w++){const C=S[w];C.outpolygon?(C.leftlinecontinues||C.outpolygon.leftpoints.push(C.topleft),C.rightlinecontinues||C.outpolygon.rightpoints.push(C.topright)):(C.outpolygon={leftpoints:[],rightpoints:[]},C.outpolygon.leftpoints.push(C.topleft),zi.distance(C.topleft,C.topright)>Xs&&C.outpolygon.rightpoints.push(C.topright))}v=S}return e};var Kve=Zve;const NC=Gt,Jve=ln,{NEPS:Qve}=un,ege=Kve,tge=t=>{if(t.isRetesselated)return t;const e=NC.toPolygons(t).map((s,a)=>({vertices:s.vertices,plane:Jve.plane(s),index:a})),n=nge(e),r=[];n.forEach(s=>{if(Array.isArray(s)){const a=ege(s);r.push(...a)}else r.push(s)});const i=NC.create(r);return i.isRetesselated=!0,i},nge=t=>{let e=[t];const n=[];for(let i=3;i>=0;i--){const s=[],a=i===3?15e-9:Qve;e.forEach(o=>{o.sort(rge(i,a));let l=0;for(let u=1;u<o.length;u++)o[u].plane[i]-o[l].plane[i]>a&&(u-l===1?n.push(o[l]):s.push(o.slice(l,u)),l=u);o.length-l===1?n.push(o[l]):s.push(o.slice(l))}),e=s}const r=[];return e.forEach(i=>{i[0]&&(r[i[0].index]=i)}),n.forEach(i=>{r[i.index]=i}),r},rge=(t,e)=>(n,r)=>n.plane[t]-r.plane[t]>e?1:r.plane[t]-n.plane[t]>e?-1:0;var xf=tge;const{EPS:Ol}=un,DC=Zo,ige=(t,e)=>{if(t.polygons.length===0||e.polygons.length===0)return!1;const n=DC(t),r=n[0],i=n[1],s=DC(e),a=s[0],o=s[1];return!(a[0]-i[0]>Ol||r[0]-o[0]>Ol||a[1]-i[1]>Ol||r[1]-o[1]>Ol||a[2]-i[2]>Ol||r[2]-o[2]>Ol)};var Vb=ige;const kC=Os,sge=ln;let age=class _2{constructor(e){this.plane=null,this.front=null,this.back=null,this.polygontreenodes=[],this.parent=e}invert(){const e=[this];let n;for(let r=0;r<e.length;r++){n=e[r],n.plane&&(n.plane=kC.flip(kC.create(),n.plane)),n.front&&e.push(n.front),n.back&&e.push(n.back);const i=n.front;n.front=n.back,n.back=i}}clipPolygons(e,n){let r={node:this,polygontreenodes:e},i;const s=[];do{if(i=r.node,e=r.polygontreenodes,i.plane){const a=i.plane,o=[],l=[],u=n?o:l,f=e.length;for(let p=0;p<f;p++){const v=e[p];v.isRemoved()||v.splitByPlane(a,u,o,l,o)}i.front&&l.length>0&&s.push({node:i.front,polygontreenodes:l});const h=o.length;if(i.back&&h>0)s.push({node:i.back,polygontreenodes:o});else for(let p=0;p<h;p++)o[p].remove()}r=s.pop()}while(r!==void 0)}clipTo(e,n){let r=this;const i=[];do r.polygontreenodes.length>0&&e.rootnode.clipPolygons(r.polygontreenodes,n),r.front&&i.push(r.front),r.back&&i.push(r.back),r=i.pop();while(r!==void 0)}addPolygonTreeNodes(e){let n={node:this,polygontreenodes:e};const r=[];do{const i=n.node,s=n.polygontreenodes;if(s.length===0){n=r.pop();continue}if(!i.plane){let u=0;u=Math.floor(s.length/2);const f=s[u].getPolygon();i.plane=sge.plane(f)}const a=[],o=[],l=s.length;for(let u=0;u<l;++u)s[u].splitByPlane(i.plane,i.polygontreenodes,o,a,o);a.length>0&&(i.front||(i.front=new _2(i)),l===a.length&&o.length===0?i.front.polygontreenodes=a:r.push({node:i.front,polygontreenodes:a})),o.length>0&&(i.back||(i.back=new _2(i)),l===o.length&&a.length===0?i.back.polygontreenodes=o:r.push({node:i.back,polygontreenodes:o})),n=r.pop()}while(n!==void 0)}};var oge=age;const Nl=Mt,lge=(t,e,n)=>{const r=Nl.subtract(Nl.create(),n,e);let i=(t[3]-Nl.dot(t,e))/Nl.dot(t,r);return Number.isNaN(i)&&(i=0),i>1&&(i=1),i<0&&(i=0),Nl.scale(r,r,i),Nl.add(r,e,r),r};var cge=lge;const{EPS:Od}=un,uge=Os,Nd=Mt,__=ln,fge=cge,dge=(t,e)=>{const n={type:null,front:null,back:null},r=e.vertices,i=r.length,s=__.plane(e);if(uge.equals(s,t))n.type=0;else{let a=!1,o=!1;const l=[],u=-Od;for(let f=0;f<i;f++){const h=Nd.dot(t,r[f])-t[3],p=h<u;l.push(p),h>Od&&(a=!0),h<u&&(o=!0)}if(!a&&!o){const f=Nd.dot(t,s);n.type=f>=0?0:1}else if(!o)n.type=2;else if(!a)n.type=3;else{n.type=4;const f=[],h=[];let p=l[0];for(let P=0;P<i;P++){const S=r[P];let g=P+1;g>=i&&(g=0);const m=l[g];if(p===m)p?h.push(S):f.push(S);else{const x=r[g],w=fge(t,S,x);p?(h.push(S),h.push(w),f.push(w)):(f.push(S),f.push(w),h.push(w))}p=m}const v=Od*Od;if(h.length>=3){let P=h[h.length-1];for(let S=0;S<h.length;S++){const g=h[S];Nd.squaredDistance(g,P)<v&&(h.splice(S,1),S--),P=g}}if(f.length>=3){let P=f[f.length-1];for(let S=0;S<f.length;S++){const g=f[S];Nd.squaredDistance(g,P)<v&&(f.splice(S,1),S--),P=g}}f.length>=3&&(n.front=__.fromPointsAndPlane(f,s)),h.length>=3&&(n.back=__.fromPointsAndPlane(h,s))}}return n};var hge=dge;const{EPS:pge}=un,mge=Mt,FC=ln,vge=hge;let gge=class B5{constructor(e,n){this.parent=e,this.children=[],this.polygon=n,this.removed=!1}addPolygons(e){if(!this.isRootNode())throw new Error("Assertion failed");const n=this;e.forEach(r=>{n.addChild(r)})}remove(){if(!this.removed){this.removed=!0,this.polygon=null;const e=this.parent.children,n=e.indexOf(this);if(n<0)throw new Error("Assertion failed");e.splice(n,1),this.parent.recursivelyInvalidatePolygon()}}isRemoved(){return this.removed}isRootNode(){return!this.parent}invert(){if(!this.isRootNode())throw new Error("Assertion failed");this.invertSub()}getPolygon(){if(!this.polygon)throw new Error("Assertion failed");return this.polygon}getPolygons(e){let n=[this];const r=[n];let i,s,a,o;for(i=0;i<r.length;++i)for(n=r[i],s=0,a=n.length;s<a;s++)o=n[s],o.polygon?e.push(o.polygon):o.children.length>0&&r.push(o.children)}splitByPlane(e,n,r,i,s){if(this.children.length){const a=[this.children];let o,l,u,f,h;for(o=0;o<a.length;o++)for(h=a[o],l=0,u=h.length;l<u;l++)f=h[l],f.children.length>0?a.push(f.children):f._splitByPlane(e,n,r,i,s)}else this._splitByPlane(e,n,r,i,s)}_splitByPlane(e,n,r,i,s){const a=this.polygon;if(a){const o=FC.measureBoundingSphere(a),l=o[3]+pge,u=o,f=mge.dot(e,u)-e[3];if(f>l)i.push(this);else if(f<-l)s.push(this);else{const h=vge(e,a);switch(h.type){case 0:n.push(this);break;case 1:r.push(this);break;case 2:i.push(this);break;case 3:s.push(this);break;case 4:if(h.front){const p=this.addChild(h.front);i.push(p)}if(h.back){const p=this.addChild(h.back);s.push(p)}break}}}}addChild(e){const n=new B5(this,e);return this.children.push(n),n}invertSub(){let e=[this];const n=[e];let r,i,s,a;for(r=0;r<n.length;r++)for(e=n[r],i=0,s=e.length;i<s;i++)a=e[i],a.polygon&&(a.polygon=FC.invert(a.polygon)),a.children.length>0&&n.push(a.children)}recursivelyInvalidatePolygon(){this.polygon=null,this.parent&&this.parent.recursivelyInvalidatePolygon()}clear(){let e=[this];const n=[e];for(let r=0;r<n.length;++r){e=n[r];const i=e.length;for(let s=0;s<i;s++){const a=e[s];a.polygon&&(a.polygon=null),a.parent&&(a.parent=null),a.children.length>0&&n.push(a.children),a.children=[]}}}toString(){let e="",n=[this];const r=[n];let i,s,a,o;for(i=0;i<r.length;++i){n=r[i];const l=" ".repeat(i);for(s=0,a=n.length;s<a;s++)o=n[s],e+=`${l}PolygonTreeNode (${o.isRootNode()}): ${o.children.length}`,o.polygon?e+=`
 ${l}polygon: ${o.polygon.vertices}
`:e+=`
`,o.children.length>0&&r.push(o.children)}return e}};var yge=gge;const _ge=oge,xge=yge;let bge=class{constructor(e){this.polygonTree=new xge,this.rootnode=new _ge(null),e&&this.addPolygons(e)}invert(){this.polygonTree.invert(),this.rootnode.invert()}clipTo(e,n=!1){this.rootnode.clipTo(e,n)}allPolygons(){const e=[];return this.polygonTree.getPolygons(e),e}addPolygons(e){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=this.polygonTree.addChild(e[r]);this.rootnode.addPolygonTreeNodes(n)}clear(){this.polygonTree.clear()}toString(){return"Tree: "+this.polygonTree.toString("")}};var wge=bge,qb={Tree:wge};const Dd=Gt,Sge=Vb,{Tree:UC}=qb,Pge=(t,e)=>{if(!Sge(t,e))return Dd.create();const n=new UC(Dd.toPolygons(t)),r=new UC(Dd.toPolygons(e));n.invert(),r.clipTo(n),r.invert(),n.clipTo(r),r.clipTo(n),n.addPolygons(r.allPolygons()),n.invert();const i=n.allPolygons();return Dd.create(i)};var Ege=Pge;const Cge=$t,Tge=xf,Age=Ege,Mge=(...t)=>{t=Cge(t);let e=t.shift();return t.forEach(n=>{e=Age(e,n)}),e=Tge(e),e};var $5=Mge;const Rge=$t,Ige=Gt,Lge=to,Oge=Bb,Nge=$b,Dge=$5,kge=(...t)=>{t=Rge(t);const e=t.map(i=>Nge({z0:-1,z1:1},i)),n=Dge(e),r=Lge(n);return Oge(r,Ige.toPolygons(n))};var Fge=kge;const Uge=$t,Bge=_f,$ge=zt,Vge=Gt,qge=Fge,Hge=$5,zge=(...t)=>{if(t=Uge(t),t.length===0)throw new Error("wrong number of arguments");if(!Bge(t))throw new Error("only intersect of the types are supported");const e=t[0];return $ge.isA(e)?qge(t):Vge.isA(e)?Hge(t):e};var Gge=zge;const x_=Mt,Xge=to,BC=Gt,Wge=t=>t.sort((e,n)=>e-n).filter((e,n,r)=>!n||e!==r[n-1]),Yge=(t,e,n)=>{const r=`${e}`,i=t.get(r);i===void 0?t.set(r,[n]):i.push(n)},jge=(t,e)=>{const n=`${e}`;return t.get(n)},Zge=t=>{const e=Xge(t),n=BC.toPolygons(t),r=n.length,i=new Map,s=x_.create();n.forEach((f,h)=>{f.vertices.forEach(p=>{Yge(i,x_.snap(s,p,e),h)})});const a=n.map(f=>{let h=[];return f.vertices.forEach(p=>{h=h.concat(jge(i,x_.snap(s,p,e)))}),{e:1,d:Wge(h)}});i.clear();let o=0;const l=a.length;for(let f=0;f<l;f++){const h=a[f];if(h.e>0){const p=new Array(r);p[f]=!0;do o=0,p.forEach((v,P)=>{const S=a[P];if(S.e>0){S.e=-1;for(let g=0;g<S.d.length;g++)p[S.d[g]]=!0;o++}});while(o>0);h.indexes=p}}const u=[];for(let f=0;f<l;f++)if(a[f].indexes){const h=[];a[f].indexes.forEach((p,v)=>h.push(n[v])),u.push(BC.create(h))}return u};var Kge=Zge;const Jge=$t,Qge=Gt,eye=Kge,tye=(...t)=>{if(t=Jge(t),t.length===0)throw new Error("wrong number of arguments");const e=t.map(n=>Qge.isA(n)?eye(n):n);return e.length===1?e[0]:e};var nye=tye;const kd=Gt,rye=Vb,{Tree:$C}=qb,iye=(t,e)=>{if(!rye(t,e))return kd.clone(t);const n=new $C(kd.toPolygons(t)),r=new $C(kd.toPolygons(e));n.invert(),n.clipTo(r),r.clipTo(n,!0),n.addPolygons(r.allPolygons()),n.invert();const i=n.allPolygons();return kd.create(i)};var sye=iye;const aye=$t,oye=xf,lye=sye,cye=(...t)=>{t=aye(t);let e=t.shift();return t.forEach(n=>{e=lye(e,n)}),e=oye(e),e};var V5=cye;const uye=$t,fye=Gt,dye=to,hye=Bb,pye=$b,mye=V5,vye=(...t)=>{t=uye(t);const e=t.map(i=>pye({z0:-1,z1:1},i)),n=mye(e),r=dye(n);return hye(r,fye.toPolygons(n))};var gye=vye;const yye=$t,_ye=_f,xye=zt,bye=Gt,wye=gye,Sye=V5,Pye=(...t)=>{if(t=yye(t),t.length===0)throw new Error("wrong number of arguments");if(!_ye(t))throw new Error("only subtract of the types are supported");const e=t[0];return xye.isA(e)?wye(t):bye.isA(e)?Sye(t):e};var Eye=Pye;const rc=Gt,Cye=Vb,{Tree:VC}=qb,Tye=(t,e)=>{if(!Cye(t,e))return Aye(t,e);const n=new VC(rc.toPolygons(t)),r=new VC(rc.toPolygons(e));n.clipTo(r,!1),r.clipTo(n),r.invert(),r.clipTo(n),r.invert();const i=n.allPolygons().concat(r.allPolygons());return rc.create(i)},Aye=(t,e)=>{let n=rc.toPolygons(t);return n=n.concat(rc.toPolygons(e)),rc.create(n)};var q5=Tye;const Mye=$t,Rye=xf,Iye=q5,Lye=(...t)=>{t=Mye(t);let e;for(e=1;e<t.length;e+=2)t.push(Iye(t[e-1],t[e]));let n=t[e-1];return n=Rye(n),n};var H5=Lye;const Oye=$t,Nye=Gt,Dye=to,kye=Bb,Fye=$b,Uye=H5,Bye=(...t)=>{t=Oye(t);const e=t.map(i=>Fye({z0:-1,z1:1},i)),n=Uye(e),r=Dye(n);return kye(r,Nye.toPolygons(n))};var z5=Bye;const $ye=$t,Vye=_f,qye=zt,Hye=Gt,zye=z5,Gye=H5,Xye=(...t)=>{if(t=$ye(t),t.length===0)throw new Error("wrong number of arguments");if(!Vye(t))throw new Error("only unions of the same type are supported");const e=t[0];return qye.isA(e)?zye(t):Hye.isA(e)?Gye(t):e};var Hb=Xye,Wye={intersect:Gge,scission:nye,subtract:Eye,union:Hb};const{EPS:Yye,TAU:jye}=un,qC=t5,lu=Lb,Kn=Zt,Zye=fg,Kye=(t,e)=>{const n={delta:1,corners:"edge",closed:!1,segments:16};let{delta:r,corners:i,closed:s,segments:a}=Object.assign({},n,t);if(Math.abs(r)<Yye)return e;let o=t.closed?Zye(e):1;o===0&&(o=1);const l=o>0&&r>=0||o<0&&r<0;r=Math.abs(r);let u=null,f=[];const h=[],p=Kn.create(),v=e.length;for(let P=0;P<v;P++){const S=(P+1)%v,g=e[P],m=e[S];l?Kn.subtract(p,g,m):Kn.subtract(p,m,g),Kn.normal(p,p),Kn.normalize(p,p),Kn.scale(p,p,r);const x=Kn.add(Kn.create(),g,p),w=Kn.add(Kn.create(),m,p),C=[x,w];if(u!=null&&(s||!s&&S!==0)){const A=qC(u[0],u[1],C[0],C[1]);A?(f.pop(),C[0]=A):h.push({c:g,s0:u,s1:C})}u=[x,w],!(S===0&&!s)&&(f.push(C[0]),f.push(C[1]))}if(s&&u!=null){const P=f[0],S=f[1],g=qC(u[0],u[1],P,S);if(g)f[0]=g,f.pop();else{const m=e[0],x=[P,S];h.push({c:m,s0:u,s1:x})}}if(i==="edge"){const P=new Map;f.forEach((m,x)=>P.set(m,x));const S=lu.create(),g=lu.create();h.forEach(m=>{lu.fromPoints(S,m.s0[0],m.s0[1]),lu.fromPoints(g,m.s1[0],m.s1[1]);const x=lu.intersectPointOfLines(S,g);if(Number.isFinite(x[0])&&Number.isFinite(x[1])){const w=m.s0[1],C=P.get(w);f[C]=x,f[(C+1)%f.length]=void 0}else{const w=m.s1[0],C=P.get(w);f[C]=void 0}}),f=f.filter(m=>m!==void 0)}if(i==="round"){let P=Math.floor(a/4);const S=Kn.create();h.forEach(g=>{let m=Kn.angle(Kn.subtract(S,g.s1[0],g.c));if(m-=Kn.angle(Kn.subtract(S,g.s0[1],g.c)),l&&m<0&&(m=m+Math.PI,m<0&&(m=m+Math.PI)),!l&&m>0&&(m=m-Math.PI,m>0&&(m=m-Math.PI)),m!==0){P=Math.floor(a*(Math.abs(m)/jye));const x=m/P,w=Kn.angle(Kn.subtract(S,g.s0[1],g.c)),C=[];for(let A=1;A<P;A++){const M=w+x*A,E=Kn.fromAngleRadians(Kn.create(),M);Kn.scale(E,E,r),Kn.add(E,E,g.c),C.push(E)}if(C.length>0){const A=g.s0[1];let M=f.findIndex(E=>Kn.equals(A,E));M=(M+1)%f.length,f.splice(M,0,...C)}}else{const x=g.s1[0],w=f.findIndex(C=>Kn.equals(x,C));f.splice(w,1)}})}return f};var yg=Kye;const Fd=zt,Jye=yg,Qye=(t,e)=>{const n={delta:1,corners:"edge",segments:16},{delta:r,corners:i,segments:s}=Object.assign({},n,t);if(!(i==="edge"||i==="chamfer"||i==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');const l=Fd.toOutlines(e).map(u=>(t={delta:r,corners:i,closed:!0,segments:s},Jye(t,u))).reduce((u,f)=>u.concat(Fd.toSides(Fd.fromPoints(f))),[]);return Fd.create(l)};var e_e=Qye;const HC=Nn,t_e=Mt,n_e=Gt,cu=ln,r_e=(t,e)=>{t_e.dot(cu.plane(e),t)>0&&(e=cu.invert(e));const r=[e],i=cu.transform(HC.fromTranslation(HC.create(),t),e),s=e.vertices.length;for(let a=0;a<s;a++){const o=a<s-1?a+1:0,l=cu.create([e.vertices[a],i.vertices[a],i.vertices[o],e.vertices[o]]);r.push(l)}return r.push(cu.invert(i)),n_e.create(r)};var i_e=r_e;const{EPS:s_e,TAU:b_}=un,zC=Nn,Dn=Mt,a_e=k5,w_=Gt,go=ln,o_e=E5,l_e=xf,S_=q5,c_e=i_e,u_e=(t,e,n)=>{const r=e.toString();if(t.has(r))t.get(r)[1].push(n);else{const i=[e,[n]];t.set(r,i)}},f_e=(t,e,n)=>{const r=e[0].toString(),i=e[1].toString(),s=r<i?`${r},${i}`:`${i},${r}`;if(t.has(s))t.get(s)[1].push(n);else{const a=[e,[n]];t.set(s,a)}},P_=(t,e)=>{t.findIndex(r=>r===e)<0&&t.push(e)},d_e=(t,e)=>{const n={delta:1,segments:12},{delta:r,segments:i}=Object.assign({},n,t);let s=w_.create();const a=new Map,o=new Map,l=Dn.create(),u=Dn.create();return w_.toPolygons(e).forEach((h,p)=>{const v=Dn.scale(Dn.create(),go.plane(h),2*r),P=go.transform(zC.fromTranslation(zC.create(),Dn.scale(Dn.create(),v,-.5)),h),S=c_e(v,P);s=S_(s,S);const g=h.vertices;for(let m=0;m<g.length;m++){u_e(a,g[m],go.plane(h));const x=(m+1)%g.length,w=[g[m],g[x]];f_e(o,w,go.plane(h))}}),o.forEach(h=>{const p=h[0],v=h[1],P=p[0],S=p[1],g=Dn.subtract(Dn.create(),S,P);Dn.normalize(g,g);const m=v[0],x=Dn.cross(Dn.create(),m,g);let w=[];for(let R=0;R<i;R++)P_(w,R*b_/i);for(let R=0,B=v.length;R<B;R++){const V=v[R],z=Dn.dot(x,V),G=Dn.dot(m,V);let O=Math.atan2(z,G);O<0&&(O+=b_),P_(w,O),O=Math.atan2(-z,-G),O<0&&(O+=b_),P_(w,O)}w=w.sort(a_e);const C=w.length;let A,M;const E=[],N=[],I=[];for(let R=-1;R<C;R++){const B=w[R<0?R+C:R],V=Math.sin(B),z=Math.cos(B);Dn.scale(l,m,z*r),Dn.scale(u,x,V*r),Dn.add(l,l,u);const G=Dn.add(Dn.create(),P,l),O=Dn.add(Dn.create(),S,l);let y=!1;if(R>=0&&Dn.distance(G,A)<s_e&&(y=!0),!y){if(R>=0){E.push(G),N.push(O);const b=[M,O,G,A],k=go.create(b);I.push(k)}A=G,M=O}}N.reverse(),I.push(go.create(E)),I.push(go.create(N));const L=w_.create(I);s=S_(s,L)}),a.forEach(h=>{const p=h[0],v=h[1],P=v[0];let S=null,g=0;for(let C=1;C<v.length;C++){const A=v[C],M=Dn.cross(l,P,A),E=Dn.length(M);E>.05&&E>g&&(g=E,S=A)}S||(S=Dn.orthogonal(l,P));const m=Dn.cross(l,P,S);Dn.normalize(m,m);const x=Dn.cross(u,m,P),w=o_e({center:[p[0],p[1],p[2]],radius:r,segments:i,axes:[P,m,x]});s=S_(s,w)}),l_e(s)};var h_e=d_e;const p_e=Gt,m_e=Hb,v_e=h_e,g_e=(t,e)=>{const n={delta:1,corners:"round",segments:12},{delta:r,corners:i,segments:s}=Object.assign({},n,t);if(i!=="round")throw new Error('corners must be "round" for 3D geometries');if(p_e.toPolygons(e).length===0)throw new Error("the given geometry cannot be empty");t={delta:r,corners:i,segments:s};const o=v_e(t,e);return m_e(e,o)};var y_e=g_e;const __e=fg,Xr=Zt,Bl=zt,_u=In,GC=yg,x_e=t=>{let{external:e,internal:n}=t;__e(e)<0?e=e.reverse():n=n.reverse();const r=_u.fromPoints({closed:!0},e),i=_u.fromPoints({closed:!0},n),s=Bl.toSides(Bl.fromPoints(_u.toPoints(r))),a=Bl.toSides(Bl.fromPoints(_u.toPoints(i)));return s.push(...a),Bl.create(s)},b_e=(t,e,n,r)=>{const{points:i,external:s,internal:a}=t,o=Math.floor(e/2),l=[],u=[];if(n==="round"&&o>0){const h=Math.PI/o,p=i[i.length-1],v=Xr.angle(Xr.subtract(Xr.create(),s[s.length-1],p)),P=i[0],S=Xr.angle(Xr.subtract(Xr.create(),a[0],P));for(let g=1;g<o;g++){let m=v+h*g,x=Xr.fromAngleRadians(Xr.create(),m);Xr.scale(x,x,r),Xr.add(x,x,p),l.push(x),m=S+h*g,x=Xr.fromAngleRadians(Xr.create(),m),Xr.scale(x,x,r),Xr.add(x,x,P),u.push(x)}}const f=[];return f.push(...s,...l,...a.reverse(),...u),Bl.fromPoints(f)},w_e=(t,e)=>{t=Object.assign({},{delta:1,corners:"edge",segments:16},t);const{delta:r,corners:i,segments:s}=t;if(r<=0)throw new Error("the given delta must be positive for paths");if(!(i==="edge"||i==="chamfer"||i==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');const a=e.isClosed,o=_u.toPoints(e);if(o.length===0)throw new Error("the given geometry cannot be empty");const l={points:o,external:GC({delta:r,corners:i,segments:s,closed:a},o),internal:GC({delta:-r,corners:i,segments:s,closed:a},o)};return e.isClosed?x_e(l):b_e(l,s,i,r)};var S_e=w_e;const P_e=$t,E_e=zt,C_e=Gt,T_e=In,A_e=e_e,M_e=y_e,R_e=S_e,I_e=(t,...e)=>{if(e=P_e(e),e.length===0)throw new Error("wrong number of arguments");const n=e.map(r=>T_e.isA(r)?R_e(t,r):E_e.isA(r)?A_e(t,r):C_e.isA(r)?M_e(t,r):r);return n.length===1?n[0]:n};var zb=I_e;const Ud=zt,XC=Tb,L_e=yg,O_e=(t,e)=>{const n={delta:1,corners:"edge",segments:0},{delta:r,corners:i,segments:s}=Object.assign({},n,t);if(!(i==="edge"||i==="chamfer"||i==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');const a=Ud.toOutlines(e),l=a.map(u=>(t={delta:a.reduce((p,v)=>p+XC.arePointsInside(u,XC.create(v)),0)%2===0?r:-r,corners:i,closed:!0,segments:s},L_e(t,u))).reduce((u,f)=>u.concat(Ud.toSides(Ud.fromPoints(f))),[]);return Ud.create(l)};var N_e=O_e;const WC=In,D_e=yg,k_e=(t,e)=>{const n={delta:1,corners:"edge",closed:e.isClosed,segments:16},{delta:r,corners:i,closed:s,segments:a}=Object.assign({},n,t);if(!(i==="edge"||i==="chamfer"||i==="round"))throw new Error('corners must be "edge", "chamfer", or "round"');t={delta:r,corners:i,closed:s,segments:a};const o=D_e(t,WC.toPoints(e));return WC.fromPoints({closed:s},o)};var F_e=k_e;const U_e=$t,B_e=zt,$_e=In,V_e=N_e,q_e=F_e,H_e=(t,...e)=>{if(e=U_e(e),e.length===0)throw new Error("wrong number of arguments");const n=e.map(r=>$_e.isA(r)?q_e(t,r):B_e.isA(r)?V_e(t,r):r);return n.length===1?n[0]:n};var z_e=H_e,G_e={expand:zb,offset:z_e};const uu=Nn,E_=Mt,X_e=zt,C_=Lc,W_e=mg,Y_e=(t,e)=>{const n={offset:[0,0,1],twistAngle:0,twistSteps:12,repair:!0};let{offset:r,twistAngle:i,twistSteps:s,repair:a}=Object.assign({},n,t);if(s<1)throw new Error("twistSteps must be 1 or more");i===0&&(s=1);const o=E_.clone(r),l=X_e.toSides(e);if(l.length===0)throw new Error("the given geometry cannot be empty");const u=C_.fromSides(l);o[2]<0&&C_.reverse(u,u);const f=uu.create(),h=(p,v,P)=>{const S=v/s*i,g=E_.scale(E_.create(),o,v/s);return uu.multiply(f,uu.fromZRotation(f,S),uu.fromTranslation(uu.create(),g)),C_.transform(f,P)};return t={numberOfSlices:s+1,capStart:!0,capEnd:!0,repair:a,callback:h},W_e(t,u)};var _g=Y_e;const j_e=zt,Z_e=In,K_e=_g,J_e=(t,e)=>{if(!e.isClosed)throw new Error("extruded path must be closed");const n=Z_e.toPoints(e),r=j_e.fromPoints(n);return K_e(t,r)};var Q_e=J_e;const exe=$t,txe=zt,nxe=In,rxe=_g,ixe=Q_e,sxe=(t,...e)=>{const n={height:1,twistAngle:0,twistSteps:1,repair:!0},{height:r,twistAngle:i,twistSteps:s,repair:a}=Object.assign({},n,t);if(e=exe(e),e.length===0)throw new Error("wrong number of arguments");t={offset:[0,0,r],twistAngle:i,twistSteps:s,repair:a};const o=e.map(l=>nxe.isA(l)?ixe(t,l):txe.isA(l)?rxe(t,l):l);return o.length===1?o[0]:o};var axe=sxe;const oxe=In,lxe=zb,cxe=_g,uxe=(t,e)=>{const n={size:1,height:1},{size:r,height:i}=Object.assign({},n,t);if(t.delta=r,t.offset=[0,0,i],oxe.toPoints(e).length===0)throw new Error("the given geometry cannot be empty");const a=lxe(t,e);return cxe(t,a)};var fxe=uxe;const{area:dxe}=gf,T_=zt,hxe=In,pxe=zb,mxe=_g,vxe=(t,e)=>{const n={size:1,height:1},{size:r,height:i}=Object.assign({},n,t);t.delta=r,t.offset=[0,0,i];const s=T_.toOutlines(e);if(s.length===0)throw new Error("the given geometry cannot be empty");const o=s.map(u=>(dxe(u)<0&&u.reverse(),pxe(t,hxe.fromPoints({closed:!0},u)))).reduce((u,f)=>u.concat(T_.toSides(f)),[]),l=T_.create(o);return mxe(t,l)};var gxe=vxe;const yxe=$t,_xe=zt,xxe=In,bxe=fxe,wxe=gxe,Sxe=(t,...e)=>{const n={size:1,height:1},{size:r,height:i}=Object.assign({},n,t);if(e=yxe(e),e.length===0)throw new Error("wrong number of arguments");if(r<=0)throw new Error("size must be positive");if(i<=0)throw new Error("height must be positive");const s=e.map(a=>xxe.isA(a)?bxe(t,a):_xe.isA(a)?wxe(t,a):a);return s.length===1?s[0]:s};var Pxe=Sxe;const{TAU:fu}=un,A_=Lc,fs=Nn,Exe=mg,Cxe=zt,Txe=(t,e)=>{const n={angle:fu,startAngle:0,pitch:10,endOffset:0,segmentsPerRotation:32},{angle:r,endOffset:i,segmentsPerRotation:s,startAngle:a}=Object.assign({},n,t);let o;if(!t.pitch&&t.height?o=t.height/(r/fu):o=t.pitch?t.pitch:n.pitch,s<3)throw new Error("The number of segments per rotation needs to be at least 3.");const u=Cxe.toSides(e);if(u.length===0)throw new Error("the given geometry cannot be empty");const f=u.filter(m=>m[0][0]>=0);let h=A_.fromSides(u);f.length===0&&(h=A_.reverse(h));const p=Math.round(s/fu*Math.abs(r)),v=p>=2?p:2,P=fs.create();let S;const g=(m,x,w)=>{const C=a+r/v*x,A=i/v*x,M=(C-a)/fu*o;return fs.multiply(P,fs.fromTranslation(fs.create(),[A,0,M*Math.sign(r)]),fs.fromXRotation(fs.create(),-fu/4*Math.sign(r))),S=fs.create(),fs.multiply(S,fs.fromZRotation(fs.create(),C),P),A_.transform(S,w)};return Exe({numberOfSlices:v+1,callback:g},h)};var Axe=Txe;const Mxe=$t,YC=Ib,M_=Os,jC=Nn,ZC=zt,G5=Gt,Dl=ln,Rxe=to,Ixe=z5,Lxe=(t,e)=>{const n=M_.fromNormalAndPoint(M_.create(),t.axis,t.origin);if(Number.isNaN(n[0])||Number.isNaN(n[1])||Number.isNaN(n[2])||Number.isNaN(n[3]))throw new Error("project: invalid axis or origin");const r=Rxe(e),i=r*r*Math.sqrt(3)/4;if(r===0)return ZC.create();const s=G5.toPolygons(e);let a=[];for(let l=0;l<s.length;l++){const u=s[l].vertices.map(p=>M_.projectionOfPoint(n,p)),f=Dl.create(u),h=Dl.plane(f);YC(n,h)&&(Dl.measureArea(f)<i||a.push(f))}if(!YC(n,[0,0,1])){const l=jC.fromVectorRotation(jC.create(),n,[0,0,1]);a=a.map(u=>Dl.transform(l,u))}a=a.sort((l,u)=>Dl.measureArea(u)-Dl.measureArea(l));const o=a.map(l=>ZC.fromPoints(l.vertices));return Ixe(o)},Oxe=(t,...e)=>{const n={axis:[0,0,1],origin:[0,0,0]},{axis:r,origin:i}=Object.assign({},n,t);if(e=Mxe(e),e.length===0)throw new Error("wrong number of arguments");t={axis:r,origin:i};const s=e.map(a=>G5.isA(a)?Lxe(t,a):a);return s.length===1?s[0]:s};var Nxe=Oxe,Dxe={extrudeFromSlices:mg,extrudeLinear:axe,extrudeRectangular:Pxe,extrudeRotate:O5,extrudeHelical:Axe,project:Nxe,slice:Lc};const KC=Zt,kxe=t=>{let e=KC.fromValues(1/0,1/0);t.forEach(i=>{(i[1]<e[1]||i[1]===e[1]&&i[0]<e[0])&&(e=i)});const n=[];t.forEach(i=>{const s=Uxe(i[1]-e[1],i[0]-e[0]),a=KC.squaredDistance(i,e);n.push({point:i,angle:s,distSq:a})}),n.sort((i,s)=>i.angle!==s.angle?i.angle-s.angle:i.distSq-s.distSq);const r=[];return n.forEach(i=>{let s=r.length;for(;s>1&&Fxe(r[s-2],r[s-1],i.point)<=Number.EPSILON;)r.pop(),s=r.length;r.push(i.point)}),r},Fxe=(t,e,n)=>(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]),Uxe=(t,e)=>t===0&&e===0?-1/0:-e/t;var Gb=kxe;const JC=zt,QC=Gt,e3=In,Bxe=t=>{const e=new Set,n=[],r=i=>{const s=i.toString();e.has(s)||(n.push(i),e.add(s))};return t.forEach(i=>{JC.isA(i)?JC.toPoints(i).forEach(r):QC.isA(i)?QC.toPoints(i).forEach(s=>s.forEach(r)):e3.isA(i)&&e3.toPoints(i).forEach(r)}),n};var Xb=Bxe;const $xe=$t,Vxe=In,qxe=Gb,Hxe=Xb,zxe=(...t)=>{t=$xe(t);const e=Hxe(t),n=qxe(e);return Vxe.fromPoints({closed:!0},n)};var Gxe=zxe;const Xxe=$t,t3=zt,Wxe=Gb,Yxe=Xb,jxe=(...t)=>{t=Xxe(t);const e=Yxe(t),n=Wxe(e);return n.length<3?t3.create():t3.fromPoints(n)};var Zxe=jxe;const Kxe=ln,Jxe=w8,Qxe=t=>Jxe(t,{skipTriangulation:!0}).map(r=>{const i=r.map(s=>t[s]);return Kxe.create(i)});var X5=Qxe;const e2e=$t,n3=Gt,t2e=Xb,n2e=X5,r2e=(...t)=>{t=e2e(t);const e=t2e(t);return e.length===0?n3.create():n3.create(n2e(e))};var i2e=r2e;const s2e=$t,a2e=_f,o2e=zt,l2e=Gt,c2e=In,u2e=Gxe,f2e=Zxe,d2e=i2e,h2e=(...t)=>{if(t=s2e(t),t.length===0)throw new Error("wrong number of arguments");if(!a2e(t))throw new Error("only hulls of the same type are supported");const e=t[0];return c2e.isA(e)?u2e(t):o2e.isA(e)?f2e(t):l2e.isA(e)?d2e(t):e};var W5=h2e;const p2e=$t,m2e=Hb,v2e=W5,g2e=(...t)=>{if(t=p2e(t),t.length<2)throw new Error("wrong number of arguments");const e=[];for(let n=1;n<t.length;n++)e.push(v2e(t[n-1],t[n]));return m2e(e)};var y2e=g2e,_2e={hull:W5,hullChain:y2e,hullPoints2:Gb,hullPoints3:X5};const R_=Mt,Y5=ln,x2e=(t,e)=>{const n=Math.abs(Y5.measureArea(e));return Number.isFinite(n)&&n>t},b2e=(t,e)=>{let n=e.map(i=>{const s=i.vertices.map(l=>R_.snap(R_.create(),l,t)),a=[];for(let l=0;l<s.length;l++){const u=(l+1)%s.length;R_.equals(s[l],s[u])||a.push(s[l])}const o=Y5.create(a);return i.color&&(o.color=i.color),o});const r=t*t*Math.sqrt(3)/4;return n=n.filter(i=>x2e(r,i)),n};var j5=b2e;const w2e=Ib,Gl=Mt,Rh=ln,S2e=t=>{const e=Rh.toPoints(t),n=[];for(let r=0;r<e.length;r++){const i=(r+1)%e.length,s={v1:e[r],v2:e[i]};n.push(s)}for(let r=0;r<n.length;r++){const i=(r+1)%e.length;n[r].next=n[i],n[i].prev=n[r]}return n},P2e=(t,e)=>{const n=`${e.v1}:${e.v2}`;t.set(n,e)},I_=(t,e)=>{const n=`${e.v1}:${e.v2}`;t.delete(n)},E2e=(t,e)=>{const n=`${e.v2}:${e.v1}`;return t.get(n)},C2e=(t,e,n)=>{let r=t.prev.v1,i=t.prev.v2,s=e.next.v2;const a=r3(r,i,s,n);r=e.prev.v1,i=e.prev.v2,s=t.next.v2;const o=r3(r,i,s,n);return[a,o]},T2e=Gl.create(),A2e=Gl.create(),r3=(t,e,n,r)=>{const i=Gl.subtract(T2e,e,t),s=Gl.subtract(A2e,n,e);return Gl.cross(i,i,s),Gl.dot(i,r)},M2e=t=>{let e;const n=[];for(;t.next;){const r=t.next;n.push(t.v1),t.v1=null,t.v2=null,t.next=null,t.prev=null,t=r}return n.length>0&&(e=Rh.create(n)),e},R2e=t=>{if(t.length<2)return t;const e=t[0].plane,n=t.slice(),r=new Map;for(;n.length>0;){const s=n.shift(),a=S2e(s);for(let o=0;o<a.length;o++){const l=a[o],u=E2e(r,l);if(u){const f=C2e(l,u,e);if(f[0]>=0&&f[1]>=0){const h=u.next,p=l.next;l.prev.next=u.next,l.next.prev=u.prev,u.prev.next=l.next,u.next.prev=l.prev,l.v1=null,l.v2=null,l.next=null,l.prev=null,I_(r,u),u.v1=null,u.v2=null,u.next=null,u.prev=null;const v=(P,S,g)=>{const m={v1:g.v1,v2:S.v2,next:S.next,prev:g.prev};g.prev.next=m,S.next.prev=m,I_(P,S),S.v1=null,S.v2=null,S.next=null,S.prev=null,I_(P,g),g.v1=null,g.v2=null,g.next=null,g.prev=null};f[0]===0&&v(r,h,h.prev),f[1]===0&&v(r,p,p.prev)}}else l.next&&P2e(r,l)}}const i=[];return r.forEach(s=>{const a=M2e(s);a&&i.push(a)}),r.clear(),i},I2e=(t,e)=>Math.abs(t[3]-e[3])<15e-8?w2e(t,e):!1,L2e=(t,e)=>{const n=[];e.forEach(i=>{const s=n.find(a=>I2e(a[0],Rh.plane(i)));s?s[1].push(i):n.push([Rh.plane(i),[i]])});let r=[];return n.forEach(i=>{const s=i[1],a=R2e(s);r=r.concat(a)}),r};var O2e=L2e;const i3=un,ds=Mt,N2e=ln,Fr=t=>`${t}`,s3=(t,e,n,r,i,s)=>{const a=Fr(r),o=Fr(i),l=`${a}/${o}`,u=`${o}/${a}`;if(t.has(u))return rh(t,e,n,i,r,null),null;const f={vertex0:r,vertex1:i,polygonindex:s};return t.has(l)?t.get(l).push(f):t.set(l,[f]),e.has(a)?e.get(a).push(l):e.set(a,[l]),n.has(o)?n.get(o).push(l):n.set(o,[l]),l},rh=(t,e,n,r,i,s)=>{const a=Fr(r),o=Fr(i),l=`${a}/${o}`;let u=-1;const f=t.get(l);for(let h=0;h<f.length;h++){const p=f[h];let v=Fr(p.vertex0);if(v===a&&(v=Fr(p.vertex1),v===o&&!(s!==null&&p.polygonindex!==s))){u=h;break}}f.splice(u,1),f.length===0&&t.delete(l),u=e.get(a).indexOf(l),e.get(a).splice(u,1),e.get(a).length===0&&e.delete(a),u=n.get(o).indexOf(l),n.get(o).splice(u,1),n.get(o).length===0&&n.delete(o)},D2e=t=>{const e=new Map;for(let n=0;n<t.length;n++){const r=t[n],i=r.vertices.length;if(i>=3){let s=r.vertices[0],a=Fr(s);for(let o=0;o<i;o++){let l=o+1;l===i&&(l=0);const u=r.vertices[l],f=Fr(u),h=`${a}/${f}`,p=`${f}/${a}`;if(e.has(p)){const v=e.get(p);v.splice(-1,1),v.length===0&&e.delete(p)}else{const v={vertex0:s,vertex1:u,polygonindex:n};e.has(h)?e.get(h).push(v):e.set(h,[v])}s=u,a=f}}else console.warn("warning: invalid polygon found during insertTjunctions")}if(e.size>0){const n=new Map,r=new Map,i=new Map;for(const[a,o]of e)i.set(a,!0),o.forEach(l=>{const u=Fr(l.vertex0),f=Fr(l.vertex1);n.has(u)?n.get(u).push(a):n.set(u,[a]),r.has(f)?r.get(f).push(a):r.set(f,[a])});const s=t.slice(0);for(;e.size!==0;){for(const o of e.keys())i.set(o,!0);let a=!1;for(;;){const o=Array.from(i.keys());if(o.length===0)break;const l=o[0];let u=!0;if(e.has(l)){const h=e.get(l)[0];for(let p=0;p<2;p++){const v=p===0?h.vertex0:h.vertex1,P=p===0?h.vertex1:h.vertex0,S=Fr(v),g=Fr(P);let m=[];p===0?r.has(S)&&(m=r.get(S)):n.has(S)&&(m=n.get(S));for(let x=0;x<m.length;x++){const w=m[x],C=e.get(w)[0],A=p===0?C.vertex0:C.vertex1;if(p===0?C.vertex1:C.vertex0,Fr(A)===g){rh(e,n,r,v,P,null),rh(e,n,r,P,v,null),u=!1,p=2,a=!0;break}else{const E=v,N=P,I=A,L=ds.subtract(ds.create(),I,E),R=ds.dot(ds.subtract(ds.create(),N,E),L)/ds.dot(L,L);if(R>0&&R<1){const B=ds.scale(ds.create(),L,R);if(ds.add(B,B,E),ds.squaredDistance(B,N)<i3.EPS*i3.EPS){const z=C.polygonindex,G=s[z],O=Fr(C.vertex1);let y=-1;for(let W=0;W<G.vertices.length;W++)if(Fr(G.vertices[W])===O){y=W;break}const b=G.vertices.slice(0);b.splice(y,0,P);const k=N2e.create(b);s[z]=k,rh(e,n,r,C.vertex0,C.vertex1,z);const F=s3(e,n,r,C.vertex0,P,z),H=s3(e,n,r,P,C.vertex1,z);F!==null&&i.set(F,!0),H!==null&&i.set(H,!0),u=!1,p=2,a=!0;break}}}}}}u&&i.delete(l)}if(!a)break}t=s}return e.clear(),t};var k2e=D2e;const L_=Mt,O_=ln,F2e=(t,e,n)=>{const r=e.vertices.length;if(r>3){if(r>4){const a=[0,0,0];e.vertices.forEach(o=>L_.add(a,a,o)),L_.snap(a,L_.divide(a,a,[r,r,r]),t);for(let o=0;o<r;o++){const l=O_.create([a,e.vertices[o],e.vertices[(o+1)%r]]);e.color&&(l.color=e.color),n.push(l)}return}const i=O_.create([e.vertices[0],e.vertices[1],e.vertices[2]]),s=O_.create([e.vertices[0],e.vertices[2],e.vertices[3]]);e.color&&(i.color=e.color,s.color=e.color),n.push(i,s);return}n.push(e)},U2e=(t,e)=>{const n=[];return e.forEach(r=>{F2e(t,r,n)}),n};var B2e=U2e;const $2e=$t,V2e=to,q2e=zt,Z5=Gt,H2e=In,z2e=j5,G2e=O2e,X2e=k2e,W2e=B2e,Y2e=(t,e)=>e,j2e=(t,e)=>e,Z2e=(t,e)=>{const n={snap:!1,simplify:!1,triangulate:!1},{snap:r,simplify:i,triangulate:s}=Object.assign({},n,t),a=V2e(e);let o=Z5.toPolygons(e);r&&(o=z2e(a,o)),i&&(o=G2e(a,o)),s&&(o=X2e(o),o=W2e(a,o));const l=Object.assign({},e);return l.polygons=o,l},K2e=(t,...e)=>{if(e=$2e(e),e.length===0)throw new Error("wrong number of arguments");const n=e.map(r=>{if(H2e.isA(r))return Y2e(t,r);if(q2e.isA(r))return j2e(t,r);if(Z5.isA(r))return Z2e(t,r);throw new Error("invalid geometry")});return n.length===1?n[0]:n};var J2e=K2e;const Q2e=$t,Mo=Zt,x2=zt,b2=Gt,w2=In,Wb=to,ebe=j5,tbe=t=>{const e=Wb(t),r=w2.toPoints(t).map(i=>Mo.snap(Mo.create(),i,e));return w2.create(r)},nbe=t=>{const e=Wb(t);let r=x2.toSides(t).map(i=>[Mo.snap(Mo.create(),i[0],e),Mo.snap(Mo.create(),i[1],e)]);return r=r.filter(i=>!Mo.equals(i[0],i[1])),x2.create(r)},rbe=t=>{const e=Wb(t),n=b2.toPolygons(t),r=ebe(e,n);return b2.create(r)},ibe=(...t)=>{if(t=Q2e(t),t.length===0)throw new Error("wrong number of arguments");const e=t.map(n=>w2.isA(n)?tbe(n):x2.isA(n)?nbe(n):b2.isA(n)?rbe(n):n);return e.length===1?e[0]:e};var sbe=ibe,abe={generalize:J2e,snap:sbe,retessellate:xf};const obe=(t,e,n)=>{for(t=t.slice();t.length<n;)t.push(e);return t};var lbe=obe;const cbe=$t,a3=lbe,K5=Ob,{translate:ube}=Oo,fbe=t=>{if(!Array.isArray(t.modes)||t.modes.length>3)throw new Error("align(): modes must be an array of length <= 3");if(t.modes=a3(t.modes,"none",3),t.modes.filter(e=>["center","max","min","none"].includes(e)).length!==3)throw new Error('align(): all modes must be one of "center", "max" or "min"');if(!Array.isArray(t.relativeTo)||t.relativeTo.length>3)throw new Error("align(): relativeTo must be an array of length <= 3");if(t.relativeTo=a3(t.relativeTo,0,3),t.relativeTo.filter(e=>Number.isFinite(e)||e==null).length!==3)throw new Error("align(): all relativeTo values must be a number, or null.");if(typeof t.grouped!="boolean")throw new Error("align(): grouped must be a boolean value.");return t},dbe=(t,e,n)=>{for(let r=0;r<3;r++)t[r]==null&&(e[r]==="center"?t[r]=(n[0][r]+n[1][r])/2:e[r]==="max"?t[r]=n[1][r]:e[r]==="min"&&(t[r]=n[0][r]));return t},o3=(t,e,n)=>{const r=K5(t),i=[0,0,0];for(let s=0;s<3;s++)e[s]==="center"?i[s]=n[s]-(r[0][s]+r[1][s])/2:e[s]==="max"?i[s]=n[s]-r[1][s]:e[s]==="min"&&(i[s]=n[s]-r[0][s]);return ube(i,t)},hbe=(t,...e)=>{t=Object.assign({},{modes:["center","center","min"],relativeTo:[0,0,0],grouped:!1},t),t=fbe(t);let{modes:r,relativeTo:i,grouped:s}=t;if(e=cbe(e),e.length===0)throw new Error("align(): No geometries were provided to act upon");if(i.filter(a=>a==null).length){const a=K5(e);i=dbe(i,r,a)}return s?e=o3(e,r,i):e=e.map(a=>o3(a,r,i)),e.length===1?e[0]:e};var pbe=hbe;const mbe=$t,vbe=zt,gbe=Gt,ybe=In,_be=Zo,{translate:xbe}=Oo,N_=(t,e)=>{const n={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:r,relativeTo:i}=Object.assign({},n,t),s=_be(e),a=[0,0,0];return r[0]&&(a[0]=i[0]-(s[0][0]+(s[1][0]-s[0][0])/2)),r[1]&&(a[1]=i[1]-(s[0][1]+(s[1][1]-s[0][1])/2)),r[2]&&(a[2]=i[2]-(s[0][2]+(s[1][2]-s[0][2])/2)),xbe(a,e)},xg=(t,...e)=>{const n={axes:[!0,!0,!0],relativeTo:[0,0,0]},{axes:r,relativeTo:i}=Object.assign({},n,t);if(e=mbe(e),e.length===0)throw new Error("wrong number of arguments");if(i.length!==3)throw new Error("relativeTo must be an array of length 3");t={axes:r,relativeTo:i};const s=e.map(a=>ybe.isA(a)||vbe.isA(a)||gbe.isA(a)?N_(t,a):a);return s.length===1?s[0]:s},bbe=(...t)=>xg({axes:[!0,!1,!1]},t),wbe=(...t)=>xg({axes:[!1,!0,!1]},t),Sbe=(...t)=>xg({axes:[!1,!1,!0]},t);var Bd={center:xg,centerX:bbe,centerY:wbe,centerZ:Sbe};const Pbe=$t,l3=Nn,c3=zt,u3=Gt,f3=In,bg=(t,...e)=>{if(!Array.isArray(t))throw new Error("factors must be an array");if(e=Pbe(e),e.length===0)throw new Error("wrong number of arguments");for(t=t.slice();t.length<3;)t.push(1);if(t[0]<=0||t[1]<=0||t[2]<=0)throw new Error("factors must be positive");const n=l3.fromScaling(l3.create(),t),r=e.map(i=>f3.isA(i)?f3.transform(n,i):c3.isA(i)?c3.transform(n,i):u3.isA(i)?u3.transform(n,i):i);return r.length===1?r[0]:r},Ebe=(t,...e)=>bg([t,1,1],e),Cbe=(t,...e)=>bg([1,t,1],e),Tbe=(t,...e)=>bg([1,1,t],e);var $d={scale:bg,scaleX:Ebe,scaleY:Cbe,scaleZ:Tbe};const Abe=$t,d3=zt,h3=Gt,p3=In,Mbe=(t,...e)=>{if(e=Abe(e),e.length===0)throw new Error("wrong number of arguments");const n=e.map(r=>p3.isA(r)?p3.transform(t,r):d3.isA(r)?d3.transform(t,r):h3.isA(r)?h3.transform(t,r):r);return n.length===1?n[0]:n};var Rbe=Mbe,Ibe={align:pbe,center:Bd.center,centerX:Bd.centerX,centerY:Bd.centerY,centerZ:Bd.centerZ,mirror:vu.mirror,mirrorX:vu.mirrorX,mirrorY:vu.mirrorY,mirrorZ:vu.mirrorZ,rotate:yu.rotate,rotateX:yu.rotateX,rotateY:yu.rotateY,rotateZ:yu.rotateZ,scale:$d.scale,scaleX:$d.scaleX,scaleY:$d.scaleY,scaleZ:$d.scaleZ,transform:Rbe,translate:Oo.translate,translateX:Oo.translateX,translateY:Oo.translateY,translateZ:Oo.translateZ},Yb={colors:vfe,curves:Lfe,geometries:Ab,maths:hhe,measurements:Rpe,primitives:dve,text:Sve,utils:F5,booleans:Wye,expansions:G_e,extrusions:Dxe,hulls:_2e,modifiers:abe,transforms:Ibe};const J5=t=>t.reduce((e,n)=>Array.isArray(n)?e.concat(J5(n)):e.concat(n),[]);var Lbe=J5;const Obe=(t,e)=>t-e;var Nbe=Obe;const Dbe=t=>{if(!(!Array.isArray(t)||t.length===0))return t[0]};var kbe=Dbe;const Fbe=(t,e,n)=>{let r=0,i=t.length;for(;i>r;){const s=Math.floor((r+i)/2),a=t[s];n(e,a)>0?r=s+1:i=s}return t.splice(r,0,e),t};var Ube=Fbe;const Bbe=(t,e)=>{if(!(!Array.isArray(t)||t.length<e))return t[e]};var $be=Bbe;const Vbe=(t,e,n)=>{for(t=t.slice();t.length<n;)t.push(e);return t};var qbe=Vbe;const Hbe=t=>Array.isArray(t)?t:t==null?[]:[t];var zbe=Hbe,Gbe={flatten:Lbe,fnNumberSort:Nbe,head:kbe,insertSorted:Ube,nth:$be,padToLength:qbe,toArray:zbe};const{geometries:D_}=Yb,Xbe=(t,e)=>{e.statusCallback&&e.statusCallback({progress:0});const n=new ArrayBuffer(4),r=new Int32Array(n,0,1),i=new Int8Array(n,0,4);if(r[0]=287454020,i[0]!==68)throw new Error("Binary STL output is currently only supported on little-endian (Intel) processors");let s=0,a=0;t.forEach((g,m)=>{D_.geom3.toPolygons(g).forEach(w=>{const C=w.vertices.length,A=C>=3?C-2:0;s+=A,a+=1})});const o=new Uint8Array(80);for(let g=0;g<80;g++)o[g]=65;const l=new Uint32Array(1);l[0]=s;const u=new ArrayBuffer(50*s),f=new Int8Array(u),h=new ArrayBuffer(50),p=new Int8Array(h),v=new Float32Array(h,0,12),P=new Uint16Array(h,48,1);let S=0;return t.forEach(g=>{D_.geom3.toPolygons(g).forEach((x,w)=>{const C=x.vertices,A=C.length,M=D_.poly3.plane(x);for(let E=0;E<A-2;E++){v[0]=M[0],v[1]=M[1],v[2]=M[2];let N=3;for(let I=0;I<3;I++){const L=I+(I>0?E:0),R=C[L];v[N++]=R[0],v[N++]=R[1],v[N++]=R[2]}P[0]=0,f.set(p,S),S+=50}e.statusCallback&&e.statusCallback({progress:100*w/a})})}),e.statusCallback&&e.statusCallback({progress:100}),[o.buffer,l.buffer,u]};var Wbe={serializeBinary:Xbe};const{geometries:Q5}=Yb,Ybe=(t,e)=>{e.statusCallback&&e.statusCallback({progress:0});const n=`solid JSCAD
${jbe(t,e)}
endsolid JSCAD
`;return e.statusCallback&&e.statusCallback({progress:100}),[n]},jbe=(t,e)=>{const n=[];return t.forEach((r,i)=>{n.push(Zbe(r)),e.statusCallback&&e.statusCallback({progress:100*i/t.length})}),n.join(`
`)},Zbe=(t,e)=>{const n=[];return Q5.geom3.toPolygons(t).forEach((i,s)=>{n.push(Kbe(i))}),n.join(`
`)},eR=t=>`${t[0]} ${t[1]} ${t[2]}`,k_=t=>`vertex ${eR(t)}`,Kbe=t=>{const e=[];if(t.vertices.length>=3){const n=k_(t.vertices[0]);for(let r=0;r<t.vertices.length-2;r++){const i=`facet normal ${eR(Q5.poly3.plane(t))}
outer loop
${n}
${k_(t.vertices[r+1])}
${k_(t.vertices[r+2])}
endloop
endfacet`;e.push(i)}}return e.join(`
`)};var Jbe={serializeText:Ybe};const{geometries:Qbe,modifiers:e9e}=Yb,{flatten:t9e,toArray:n9e}=Gbe,{serializeBinary:r9e}=Wbe,{serializeText:i9e}=Jbe,s9e="application/sla",a9e=(t,...e)=>{t=Object.assign({},{binary:!0,statusCallback:null},t),e=t9e(e);let r=e.filter(i=>Qbe.geom3.isA(i));if(r.length===0)throw new Error("only 3D geometries can be serialized to STL");return e.length!==r.length&&console.warn("some objects could not be serialized to STL"),r=n9e(e9e.generalize({snap:!0,triangulate:!0},r)),t.binary?r9e(r,t):i9e(r,t)};var o9e={mimeType:s9e,serialize:a9e};function l9e(t,e,n,r,i,s){const a=t-r,o=e-i,l=n-s;return Math.sqrt(a*a+o*o+l*l)}function c9e(t,e){const r=[],i=new Uint32Array(e.length),s=[];for(let a=0;a<t.length;a+=3){const o=t[a],l=t[a+1],u=t[a+2];let f=!1;for(let h=0;h<r.length;h+=3)if(l9e(o,l,u,r[h],r[h+1],r[h+2])<.015){s[a/3]=h/3,f=!0;break}f||(s[a/3]=r.length/3,r.push(o,l,u))}for(let a=0;a<e.length;a++)i[a]=s[e[a]];return{uniqueVertices:new Float32Array(r),newIndices:i}}function u9e(t,e,n,r,i,s,a,o,l){const u=r-t,f=i-e,h=s-n,p=a-t,v=o-e,P=l-n,S=f*P-h*v,g=h*p-u*P,m=u*v-f*p;return Math.sqrt(S*S+g*g+m*m)*.5}function f9e(t,e){const n=new Set,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=t[i+1],o=t[i+2];if(s===a||a===o||o===s||u9e(e[s*3],e[s*3+1],e[s*3+2],e[a*3],e[a*3+1],e[a*3+2],e[o*3],e[o*3+1],e[o*3+2])<1e-10)continue;let u;s<=a&&s<=o?u=[s,a,o]:a<=s&&a<=o?u=[a,o,s]:u=[o,s,a];const f=u.join(",");n.has(f)||(n.add(f),r.push(s,a,o))}return new Uint32Array(r)}async function kl(t){const e=t.numProp===3?t.vertProperties:new Float32Array(t.numVert*3);if(t.numProp>3)for(let a=0;a<t.numVert;++a)for(let o=0;o<3;++o)e[a*3+o]=t.vertProperties[a*t.numProp+o];const n=t.triVerts,{uniqueVertices:r,newIndices:i}=c9e(e,n),s=f9e(i,r);return d9e(r,s)}async function d9e(t,e){let n=new Array(e.length/3);for(let s=0;s<e.length;s+=3)n[s/3]={vertices:[[t[e[s]*3],t[e[s]*3+1],t[e[s]*3+2]],[t[e[s+1]*3],t[e[s+1]*3+1],t[e[s+1]*3+2]],[t[e[s+2]*3],t[e[s+2]*3+1],t[e[s+2]*3+2]]]};const r={polygons:n,transforms:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},i=o9e.serialize({binary:!1},r);return new Blob([i],{type:"application/stl"})}function m3(t){const e=new eo;e.setAttribute("position",new Ri(t.vertProperties,3)),e.setIndex(new Ri(t.triVerts,1));let n=t.runOriginalID[0],r=t.runIndex[0];for(let i=0;i<t.numRun;++i){const s=t.runOriginalID[i+1];if(s!==n){const a=t.runIndex[i+1];e.addGroup(r,a-r,0),n=s,r=a}}return e}var h9e=an('<label>Switch Embankment: <input type="checkbox"></label>'),p9e=an('<label><input type="range" max="9" step="0.1"> </label> <label><input type="range" max="9" step="0.1"> </label> <label><input type="range" max="10" step="0.1"> </label> <label><input type="range" max="10" step="0.1"> </label> <label><input type="range" max="10" step="0.1"> </label> <!>',1);function m9e(t,e){$r(e,!0);let n=ko(e,"caseType",3,"unibody-or-left"),r=Tu(n()),i=Yt(()=>{if(r.board===void 0)return{minTiltAngle:5,minBottomThickness:3};const N=Z2(r.board,Et.parameters.topRim,Et.parameters.bottomRim,et.keyPitch),I=hW(r.board,N,Et.parameters);return{minTiltAngle:pW(r.board,N,Et.parameters),minBottomThickness:I}}),s=Yt(()=>Q(i).minTiltAngle),a=Yt(()=>Q(i).minBottomThickness);Qi(()=>{Et.parameters.tiltingAngle<Q(s)&&(Et.parameters.tiltingAngle=Q(s)),Et.parameters.bottomMinThickness<Q(a)&&(Et.parameters.bottomMinThickness=Q(a))});var o=p9e(),l=tr(o),u=bt(l),f=je(u),h=je(l,2),p=bt(h);Fn(p,"min",0);var v=je(p),P=je(h,2),S=bt(P),g=je(S),m=je(P,2),x=bt(m);Fn(x,"min",2.5);var w=je(x),C=je(m,2),A=bt(C);Fn(A,"min",2.5);var M=je(A),E=je(C,2);xr(E,()=>et.switchType.includes("choc2"),N=>{var I=h9e(),L=je(bt(I));L.__input=R=>{Et.parameters.switchEmbankment=R.target.checked?1:0},en(()=>hI(L,Et.parameters.switchEmbankment>0)),kt(N,I)}),en(()=>{Fn(u,"min",Q(s)),Jr(f,` tilt angle:
  ${Et.parameters.tiltingAngle??""}`),Jr(v,` tent angle:
  ${Et.parameters.tentingAngle??""}`),Fn(S,"min",Q(a)),Jr(g,` bottom thickness:
  ${Et.parameters.bottomMinThickness??""}`),Jr(w,` bottom rim:
  ${Et.parameters.bottomRim??""}`),Jr(M,` top rim:
  ${Et.parameters.topRim??""}`)}),So(u,()=>Et.parameters.tiltingAngle,N=>Et.parameters.tiltingAngle=N),So(p,()=>Et.parameters.tentingAngle,N=>Et.parameters.tentingAngle=N),So(S,()=>Et.parameters.bottomMinThickness,N=>Et.parameters.bottomMinThickness=N),So(x,()=>Et.parameters.bottomRim,N=>Et.parameters.bottomRim=N),So(A,()=>Et.parameters.topRim,N=>Et.parameters.topRim=N),kt(t,o),Vr()}Li(["input"]);function v9e(t,e,n,r,i,s,a,o,l,u){!Q(e)||!Q(n)||(Q(e).position.set(0,0,0),r.identity(),i(),Q(n).position.set(0,0,s),Q(n).zoom=1,Q(n).updateProjectionMatrix(),Q(n).quaternion.identity(),st(a,!1),st(o,!1),st(l,0),st(u,0))}var g9e=an('<div>Case editor</div> <form><label><input type="checkbox"> Top Case</label> <label><input type="checkbox"> Bottom Case</label></form> <!> <div class="container svelte-fboxxq"></div> <button>Reset</button>',1);function v3(t,e){$r(e,!0);let n=jt(void 0),r=Ct({liveUpdate:!0,top:!0,bottom:!0,autoRotate:!1}),i=Yt(()=>new dW(Et.parameters,e.manifold)),s=jt(void 0),a=jt(void 0),o=jt(void 0),l=jt(void 0),u=jt(!1),f=jt(!1),h=jt(0),p=jt(0),v=jt(void 0),P=jt(void 0),S=Ct(new na);const g=150,m=200;function x(){const G=new ts(-sn(Et.parameters.tiltingAngle),0,Math.PI,"ZXY"),O=new Un().makeRotationY(sn(e.caseType==="unibody-or-left"?Et.parameters.tentingAngle:-Et.parameters.tentingAngle)),y=new Un().makeRotationX(sn(90)),b=new Un().makeRotationX(-sn(45)),k=new Un().makeRotationZ(sn(e.caseType==="unibody-or-left"?-20:20)),F=new Un().makeRotationFromEuler(G).multiply(y).multiply(O).multiply(b).multiply(k),H=new na;return H.setFromRotationMatrix(F),H}function w(){if(!Q(v))return;const G=x();Q(v).quaternion.copy(G).multiply(S)}Qi(()=>{et.switchType;const G=Z2(Tu(e.caseType).board,Et.parameters.topRim,Et.parameters.bottomRim,et.keyPitch);Q(i).topCase(Tu(e.caseType).board,et.switchType,G,O=>{st(s,Ct(m3(O))),st(a,Ct(O)),e.caseType==="unibody-or-left"?Et.leftCase.top=O:Et.rightCase.top=O}),Q(i).bottomCase(Tu(e.caseType).board,G,e.caseType==="unibody-or-left"?"left":"right",O=>{st(o,Ct(m3(O))),st(l,Ct(O)),e.caseType==="unibody-or-left"?Et.leftCase.bottom=O:Et.rightCase.bottom=O})}),Qi(()=>{et.switchType,C()}),D2(()=>{if(!Q(n))return;const G=new zY,O=Q(n).clientWidth/Q(n).clientHeight;st(P,Ct(new fb(m*O/-2,m*O/2,m/2,m/-2,1,1e3)));const y=new DQ;y.setSize(Q(n).clientWidth,Q(n).clientHeight),y.setClearColor(16777215,1),Q(n).appendChild(y.domElement),st(v,Ct(new hu)),w(),G.add(Q(v));const b=new Ji(Q(s),new cS({color:16777198,flatShading:!0})),k=new Ji(Q(o),new cS({color:15658717,flatShading:!0}));Q(v).add(b),Q(v).add(k);const F=new dS(16777215,1);F.position.set(500,1e3,0),F.target.position.set(0,0,0),G.add(F);const H=new dS(16777215,1);H.position.set(-500,1e3,0),H.target.position.set(0,0,0),G.add(H),G.add(new KY(16777215,.3)),Q(P).position.set(0,0,g);const W=ye=>{if(ye.preventDefault(),!Q(P))return;const Ue=1-ye.deltaY*.1*.01,He=Q(P).zoom*Ue;He>=.5&&He<=20&&(Q(P).zoom=He,Q(P).updateProjectionMatrix())};y.domElement.addEventListener("wheel",W,{passive:!1});const ne=ye=>{ye.button===0?st(u,!0):ye.button===2&&(st(f,!0),ye.preventDefault()),st(h,Ct(ye.clientX)),st(p,Ct(ye.clientY))},Z=ye=>{var Ue,He;if(!Q(u)&&!Q(f)||Q(P)===void 0)return;const me=ye.clientX-Q(h),Ae=ye.clientY-Q(p);if(Q(f)){const Qe=new Re(1,0,0),ie=new Re(0,1,0);Qe.applyQuaternion(Q(P).quaternion),ie.applyQuaternion(Q(P).quaternion);const dt=.3;Qe.multiplyScalar(me*dt),ie.multiplyScalar(-Ae*dt),(Ue=Q(v))==null||Ue.position.add(Qe),(He=Q(v))==null||He.position.add(ie)}else if(Q(u)){const Qe=new Re(1,0,0),ie=new Re(0,0,1),dt=new na().setFromAxisAngle(Qe,-Ae*.01),ke=new na().setFromAxisAngle(ie,me*.01);S.premultiply(ke).premultiply(dt),w()}st(h,Ct(ye.clientX)),st(p,Ct(ye.clientY))},K=ye=>{st(u,!1),st(f,!1)},ae=ye=>{ye.preventDefault()};y.domElement.addEventListener("mousedown",ne),y.domElement.addEventListener("mousemove",Z),y.domElement.addEventListener("mouseup",K),y.domElement.addEventListener("mouseleave",K),y.domElement.addEventListener("contextmenu",ae);const se=function(){requestAnimationFrame(se),Q(P)!==void 0&&(b.geometry!=Q(s)&&Q(s)!==void 0&&(b.geometry.dispose(),b.geometry=Q(s)),b.visible=r.top,k.geometry!=Q(o)&&Q(o)!==void 0&&(k.geometry.dispose(),k.geometry=Q(o)),k.visible=r.bottom,F.position.copy(Q(P).position),F.target.position.set(0,0,0),F.target.updateMatrixWorld(),y.render(G,Q(P)))};return se(),()=>{y.domElement.removeEventListener("mousedown",ne),y.domElement.removeEventListener("mousemove",Z),y.domElement.removeEventListener("mouseup",K),y.domElement.removeEventListener("mouseleave",K),y.domElement.removeEventListener("wheel",W),y.domElement.removeEventListener("contextmenu",ae)}});function C(){et.switchType.includes("mx")?(Et.parameters.plateHeight=5,Et.parameters.topHeight=11.5,Et.parameters.switchEmbankment=0):(Et.parameters.plateHeight=2.2,Et.parameters.topHeight=5.5)}Qi(()=>{Et.parameters,Q(v)&&w()});var A=g9e(),M=tr(A);An(M,"margin-top","10px");var E=je(M,2),N=bt(E),I=bt(N),L=je(N,2),R=bt(L),B=je(E,2);m9e(B,{get caseType(){return e.caseType}});var V=je(B,2);uh(V,G=>st(n,G),()=>Q(n));var z=je(V,2);z.__click=[v9e,v,P,S,w,g,u,f,h,p],Iu(I,()=>r.top,G=>r.top=G),Iu(R,()=>r.bottom,G=>r.bottom=G),kt(t,A),Vr()}Li(["click"]);var y9e=an("<p> </p>"),_9e=an("<p> </p>"),x9e=an('<div id="sub" class="svelte-ea3md0"><!></div>'),b9e=an('<div id="container"><div id="main" class="svelte-ea3md0"><!></div> <!></div>');function w9e(t,e){$r(e,!1);const n=yh(),r=yh();Ju();var i=b9e(),s=bt(i),a=bt(s);y9(a,()=>n,null,(l,u)=>{var f=H_(()=>(Q(u).setup(),Q(u)));v3(l,{get manifold(){return Q(f)},caseType:"unibody-or-left"})},(l,u)=>{var f=y9e(),h=bt(f,!0);en(()=>Jr(h,Q(u).message)),kt(l,f)});var o=je(s,2);xr(o,()=>et.isSplit,l=>{var u=x9e(),f=bt(u);y9(f,()=>r,null,(h,p)=>{var v=H_(()=>(Q(p).setup(),Q(p)));v3(h,{get manifold(){return Q(v)},caseType:"right"})},(h,p)=>{var v=_9e(),P=bt(v,!0);en(()=>Jr(P,Q(p).message)),kt(h,v)}),kt(l,u)}),en(()=>Ku(i,`${(et.isSplit?"split":"")??""} svelte-ea3md0`)),kt(t,i),Vr()}function tR(t,e){var a,o;const n=t.left.netlist.filter(l=>l.net.includes("COL")).length,r=((a=t.right)==null?void 0:a.netlist.filter(l=>l.net.includes("COL")).length)??0,i=t.left.netlist.filter(l=>l.net.includes("ROW")).length,s=((o=t.right)==null?void 0:o.netlist.filter(l=>l.net.includes("ROW")).length)??0;if(i===0||n===0||e&&s===0||e&&r===0)throw new Error("Net list is empty. Please route the PCB first.");return{leftCol:n,rightCol:r,leftRow:i,rightRow:s,totalRows:Math.max(i,s),totalCols:n+r}}function S9e(t,e){var a,o;const n=t.left.netlist.filter(l=>l.net.includes("ROW")).length,r=((a=t.right)==null?void 0:a.netlist.filter(l=>l.net.includes("ROW")).length)??0,i=t.left.netlist.filter(l=>l.net.includes("COL")).length,s=((o=t.right)==null?void 0:o.netlist.filter(l=>l.net.includes("COL")).length)??0;if(n===0||i===0||e&&r===0||e&&s===0)throw new Error("Net list is empty. Please route the PCB first.");return{leftRow:n,rightRow:r,leftCol:i,rightCol:s,totalCols:Math.max(i,s),totalRows:n+r}}function jb(t){const e=Math.cos(sn(t.a)),n=Math.sin(sn(t.a)),r=t.x-t.width/2*e+t.height/2*n,i=t.y-t.width/2*n-t.height/2*e+.5;return{topLeftX:r,topLeftY:i}}function nR(t){const e=t.left.filter(o=>o.enabled&&o.moduleType==="switch"),n=t.right.filter(o=>o.enabled&&o.moduleType==="switch"),r=e.reduce((o,l)=>Math.max(o,l.col),0),i=e.reduce((o,l)=>Math.min(o,l.col),1/0),s=e.reduce((o,l)=>Math.max(o,l.x),0),a=n.reduce((o,l)=>Math.min(o,l.col),1/0);return{modules:[...t.left.map(o=>({...o,col:o.col-i})),...t.right.map(o=>({...o,x:o.x+s+2,col:o.col+r-i-a+1}))]}}function P9e(t){const e=t.left.filter(o=>o.enabled&&o.moduleType==="switch"),n=t.right.filter(o=>o.enabled&&o.moduleType==="switch"),r=e.reduce((o,l)=>Math.max(o,l.row),0),i=e.reduce((o,l)=>Math.min(o,l.row),1/0),s=e.reduce((o,l)=>Math.max(o,l.x),0),a=n.reduce((o,l)=>Math.min(o,l.row),1/0);return{modules:[...t.left.map(o=>({...o,row:o.row-i})),...t.right.map(o=>({...o,x:o.x+s+2,row:o.row+r-i-a+1}))]}}async function E9e(t,e,n,r,i){const s=M9e(t,e),{leftCol:a,leftRow:o,totalRows:l,totalCols:u}=tR(r,e);if(e&&n.right&&r.right){const f=F_(Object.values(n.left.modules),r.left.netlist,!0,0,Object.values(n.right.modules),r.right.netlist),h=F_(Object.values(n.right.modules),r.right.netlist,!0,a,Object.values(n.left.modules),r.left.netlist,!1),{modules:p}=nR({left:Object.values(n.left.modules),right:Object.values(n.right.modules)}),v=y3(p,l,u);await i.add(`zmk-config/boards/shields/${t}/layouts.dtsi`,new bn(v)),await i.add(`zmk-config/boards/shields/${t}/${t}_left.overlay`,new bn(f)),await i.add(`zmk-config/boards/shields/${t}/${t}_right.overlay`,new bn(h)),await i.add("zmk-config/config/keymap.keymap",new bn(_3(p,l,u)))}else{const f=F_(Object.values(n.left.modules),r.left.netlist,!1,0),h=y3(Object.values(n.left.modules),n.left.row,n.left.col);await i.add(`zmk-config/boards/shields/${t}/layouts.dtsi`,new bn(h)),await i.add(`zmk-config/boards/shields/${t}/${t}.overlay`,new bn(f)),await i.add("zmk-config/config/keymap.keymap",new bn(_3(Object.values(n.left.modules),o,a)))}await i.add(`zmk-config/boards/shields/${t}/Kconfig.defconfig`,new bn(s.defconfig)),await i.add(`zmk-config/boards/shields/${t}/Kconfig.shield`,new bn(s.configShiled)),await i.add(`zmk-config/boards/shields/${t}/${t}.zmk.yml`,new bn(s.zmkyml)),await i.add(`zmk-config/boards/shields/${t}/${t}.keymap`,new bn(`
#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>

#include "../../../config/keymap.keymap"`))}async function C9e(t,e){const n=[`${t}_defconfig`,`${t}.dts`,`${t}.yml`,"board.cmake","Kconfig","Kconfig.board","Kconfig.defconfig","pre_dt_board.cmake"];for(const r of n){const s=await(await fetch(`zmk-config/boards/arm/${t}/${r}`)).text();await e.add(`zmk-config/boards/arm/${t}/${r}`,new bn(s))}}async function T9e(t,e,n,r){const i=["zmk-config/.github/workflows/build.yml","zmk-config/config/west.yml","zmk-config/zephyr/module.yml"];for(const a of i){const l=await(await fetch(a)).text();await r.add(a,new bn(l))}const s=n?`
include:
  - board: ${t}
    shield: ${e}_left
    snippet: studio-rpc-usb-uart
    cmake-args: -DCONFIG_ZMK_STUDIO=y
    artificial-name: ${e}_left
  - board: ${t}
    shield: ${e}_right
    snippet: studio-rpc-usb-uart
    cmake-args: -DCONFIG_ZMK_STUDIO=y
    artificial-name: ${e}_right
`:`
include:
  - board: ${t}
    shield: ${e}
    snippet: studio-rpc-usb-uart
    cmake-args: -DCONFIG_ZMK_STUDIO=y
    artificial-name: ${e}
`;await r.add("zmk-config/build.yaml",new bn(s))}function A9e(t){const e=t.filter(a=>a.net.includes("COL")),n=t.filter(a=>a.net.includes("ROW")),r=n.sort((a,o)=>Number(a.net.slice(3))-Number(o.net.slice(3))).map(a=>`<&akdk_d ${a.pin.slice(3)} (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>`).join(`
			,`),i=e.sort((a,o)=>Number(a.net.slice(3))-Number(o.net.slice(3))).map(a=>`<&akdk_d ${a.pin.slice(3)} GPIO_ACTIVE_HIGH>`).join(`
			,`),s=Math.max(...e.map(a=>parseInt(a.net.slice(3))));return{rowGpios:r,colGpios:i,rowCount:n.length,colCount:e.length,colMax:s}}function g3(t,e,n=!0){const r=e.left.filter(g=>g.net.includes("COL")),i=e.left.filter(g=>g.net.includes("ROW")),s=Math.min(...r.map(g=>parseInt(g.net.slice(3)))),a=Math.min(...i.map(g=>parseInt(g.net.slice(3))));Math.max(...r.map(g=>parseInt(g.net.slice(3)))),Math.max(...i.map(g=>parseInt(g.net.slice(3))));const o=e.right.filter(g=>g.net.includes("COL")),l=e.right.filter(g=>g.net.includes("ROW")),u=Math.min(...o.map(g=>parseInt(g.net.slice(3)))),f=Math.min(...l.map(g=>parseInt(g.net.slice(3))));let h=t.left.filter(g=>r.some(m=>m.net===`COL${g.col}`)&&i.some(m=>m.net===`ROW${g.row}`)&&g.enabled).reduce((g,m)=>{const x=m.row-a,w=m.col-s;return g[x]||(g[x]=[]),g[x].push({rowIndex:x,colIndex:w}),g},{});h=t.right.filter(g=>o.some(m=>m.net===`COL${g.col}`)&&l.some(m=>m.net===`ROW${g.row}`)&&g.enabled).reduce((g,m)=>{const x=m.row-f,w=m.col-u+r.length;return g[x]||(g[x]=[]),g[x].push({rowIndex:x,colIndex:w}),g},h);const p=Object.values(h).map(g=>g.map(m=>`RC(${m.rowIndex},${m.colIndex})`).join(" ")).join(`
			`),v=Object.values(h).length,P=new Set(Object.values(h).flat().map(g=>g.colIndex)).size,S=n?0:r.length;return`compatible = "zmk,matrix-transform";
        columns = <${P}>;
        rows = <${v}>;
        map = <
            ${p}
        >;${S>0?`
		col-offset = <${S}>;`:""}`}function F_(t,e,n,r=0,i=[],s=[],a=!0){const o=A9e(e),{rowGpios:l,colGpios:u}=o;return`
#include <dt-bindings/zmk/matrix_transform.h>
#include "layouts.dtsi"

/ {
    chosen {
        zmk,physical-layout = &physical_layout0;
    };

    default_transform: keymap_transform_0 {
        ${n?g3({left:a?t:i,right:a?i:t},{left:a?e:s,right:a?s:e},a):g3({left:t,right:[]},{left:e,right:[]},!0)}
    };

    kscan0: kscan {
        compatible = "zmk,kscan-gpio-matrix";
        wakeup-source;

        diode-direction = "col2row";
        row-gpios
            = ${l}
            ;
        col-gpios
            = ${u}
            ;
    };
};

&physical_layout0 {
    kscan = <&kscan0>;
    transform = <&default_transform>;
};
`}function y3(t,e,n){const r=s=>{const a=Math.round(s*100);return a>=0?a.toString():`(${a})`};return`
#include <physical_layouts.dtsi>
/ {
    physical_layout0: physical_layout0 {
        compatible = "zmk,physical-layout";
        display-name = "Layout";
        keys
            = ${t.filter(s=>s.enabled&&s.col<n&&s.row<e).sort((s,a)=>s.row-a.row).map(s=>{const{topLeftX:a,topLeftY:o}=jb(s);return s.a==0?`<&key_physical_attrs ${r(s.width)} ${r(s.height)} ${r(a)} ${r(o)} 0 0 0>`:`<&key_physical_attrs ${r(s.width)} ${r(s.height)} ${r(a)} ${r(o)} ${r(s.a)} ${r(a)} ${r(o)}>`}).join(`
			,`)}
            ;
    };
};
    `}function M9e(t,e){return{defconfig:`
if SHIELD_${t.toUpperCase()}${e?"_LEFT":""}
config ZMK_KEYBOARD_NAME
    default "${t}"
${e?`config ZMK_SPLIT_ROLE_CENTRAL
    default y`:""}
endif
${e?`
if SHEILD_${t.toUpperCase()}_LEFT || SHIELD_${t.toUpperCase()}_RIGHT
config ZMK_SPLIT
    default y
endif`:""}`,configShiled:`
config SHILED_${t.toUpperCase()}
    def_bool $(shields_list_contains,${t})`,zmkyml:`
file_format: "1"
id: ${t}
name: ${t}
type: shield
features:
  - keys
  - studio
outputs:
  - usb
  - ble
${e?`siblings:
  - ${t}_left
  - ${t}_right`:""}`,conf:"CONFIG_ZMK_STUDIO_LOCKING=n"}}function _3(t,e,n){const r=t.filter(s=>s.enabled&&s.moduleType==="switch"&&s.col<n&&s.row<e).reduce((s,a)=>(s[a.row]===void 0?s[a.row]=["&none"]:s[a.row].push("&none"),s),{});return`
#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>

/ {
    keymap {
        compatible = "zmk,keymap";

        defualt_layer {
            bindings =<
                ${Object.values(r).map(s=>s.join(" ")).join(`
				`)}
            >;
        };
    };
};
`}function U_(t){var r,i,s,a;const e={name:t.keyboard_name,vendorId:t.usb.vid,productId:t.usb.pid,matrix:{rows:Object.values(t.layouts).map(o=>Object.values(o.layout)).flat().reduce((o,l)=>Math.max(o,l.matrix[0]),0)+1,cols:Object.values(t.layouts).map(o=>Object.values(o.layout)).flat().reduce((o,l)=>Math.max(o,l.matrix[1]),0)+1},layouts:{labels:[],keymap:[]}};let n=0;if(e.layouts.labels=[["Layout"].concat(Object.keys(t.layouts))],e.layouts.keymap=Object.values(t.layouts).map(o=>{const l=o.layout.sort((u,f)=>u.y===f.y?u.x-f.x:u.y-f.y).reduce((u,f)=>{let h=Math.round((f.x-u.prev_w-u.prev_x)*100)/100,p=Math.round((f.y-u.prev_y)*100)/100;const v=f.y-u.prev_y==0?u.col+1:0;v==0&&(u.layout.keymap.push([]),p-=1,h=f.x);const P={};return h!=0&&(P.x=h),p!=0&&(P.y=p),f.h!==void 0&&f.h!=1&&(P.h=f.h),f.w!==void 0&&f.w!=1&&(P.w=f.w),f.w==1.25&&f.h==2&&(P.w2=1,P.h2=1,P.x2=-.25),Object.entries(P).length>0&&u.layout.keymap[u.layout.keymap.length-1].push(P),u.layout.keymap[u.layout.keymap.length-1].push(`${f.matrix[0]},${f.matrix[1]}


0,${n}`),{layout:u.layout,prev_x:f.x,prev_y:f.y,prev_w:f.w??1,col:v}},{layout:{keymap:[]},prev_x:-1,prev_y:-1,prev_w:1,col:0});return n+=1,l.layout.keymap.push([]),l.layout.keymap}).flat(),((i=(r=t.encoder)==null?void 0:r.rotary)==null?void 0:i.length)??!1){e.layouts.keymap[0]=e.layouts.keymap[0].concat([{x:1}]);for(let o=0;o<(((a=(s=t.encoder)==null?void 0:s.rotary)==null?void 0:a.length)??0);o++)e.layouts.keymap[0]=e.layouts.keymap[0].concat([`${o},0








e`,`${o},1








e`])}return t.rgblight&&(e.lighting="qmk_rgblight"),e}const Vd=["GP12","GP11","GP10","GP9","GP8","GP5","GP4","GP3","GP2","GP1","GP0","GP14","GP16","GP17","GP22","GP23","GP24","GP25","GP26","GP27","GP28","GP29"],R9e="GP13";function I9e(t,e,n){return{layouts:{LAYOUT:{layout:t.filter(i=>i.enabled&&i.moduleType==="switch"&&i.col<n&&i.row<e).sort((i,s)=>i.row-s.row).map(i=>{const{topLeftX:s,topLeftY:a}=jb(i);return{row:i.row,col:i.col,x:s,y:a,w:i.width,h:i.height,r:i.a,rx:s,ry:a}})}}}}function L9e(t,e,n){return{layouts:{LAYOUT:{layout:t.filter(i=>i.enabled&&i.moduleType==="switch"&&i.col<n&&i.row<e).sort((i,s)=>i.row-s.row).map(i=>{const{topLeftX:s,topLeftY:a}=jb(i);return{matrix:[i.row,i.col],x:s+2,y:a+2,w:i.width,h:i.height,r:i.a,rx:s+2,ry:a+2}})}}}}function O9e(t,e,n){const{totalRows:r,totalCols:i}=tR(n,t),{modules:s}=nR({left:Object.values(e.left.modules),right:e.right===void 0?[]:Object.values(e.right.modules)});return I9e(s,r,i)}function N9e(t,e,n,r){var f,h;const{totalRows:i,totalCols:s}=S9e(r,e),{modules:a}=P9e({left:Object.values(n.left.modules),right:n.right===void 0?[]:Object.values(n.right.modules)}),o=L9e(a,i,s),l={rows:r.left.assignedPorts.rows.map(p=>Vd[p-1]),cols:r.left.assignedPorts.cols.map(p=>Vd[p-1])},u=e?{enabled:!0,matrix_pins:{right:{rows:(f=r.right)==null?void 0:f.assignedPorts.rows.map(p=>Vd[p-1]),cols:(h=r.right)==null?void 0:h.assignedPorts.cols.map(p=>Vd[p-1])}},serial:{pin:R9e,driver:"vendor"}}:{};return{manufacturer:"Auto-Keyboard-Design-Kit by sekigon-gonnoc",keyboard_name:rR(t),maintainer:"Auto-KDK",bootloader:"rp2040",diode_direction:"COL2ROW",features:{bootmagic:!0,command:!1,console:!1,extrakey:!0,mousekey:!0,nkro:!0},matrix_pins:l,split:u,processor:"RP2040",url:"https://sekigon-gonnoc.github.io/auto-kdk/",usb:{device_version:"1.0.0",pid:"0x0000",vid:"0xFEED"},layouts:o.layouts}}function rR(t){return t.toLowerCase().replace(/[^a-zA-Z0-9]/g,"_")}function B_(t){return`#include QMK_KEYBOARD_H
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {};`}function $_(t,e,n){const r=n.map(i=>"0x"+i.toString(16).padStart(2,"0")).join(", ");return t?`#pragma once
#define EE_HANDS
#define ${e?"INIT_EE_HANDS_RIGHT":"INIT_EE_HANDS_LEFT"}
#define VIAL_KEYBOARD_UID {${r}}
`:`#pragma once
#define VIAL_KEYBOARD_UID {${r}}`}function V_(){return`VIA_ENABLE = yes
VIAL_ENABLE = yes
VIAL_INSECURE = yes`}async function D9e(t){const e=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",e),r=new Uint8Array(n);return Array.from(r.slice(0,8))}async function k9e(t,e,n,r,i){const s=N9e(t,e,n,r),a=rR(t),o=await D9e(t);await i.add(`qmk_firmware/keyboards/${a}/keyboard.json`,new bn(JSON.stringify(s,void 0,4))),e&&n.right&&r.right?(await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial_left/keymap.c`,new bn(B_())),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial_left/config.h`,new bn($_(e,!1,o))),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial_left/vial.json`,new bn(JSON.stringify(U_(s),void 0,4))),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial_left/rules.mk`,new bn(V_())),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial_right/keymap.c`,new bn(B_())),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial_right/config.h`,new bn($_(e,!0,o))),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial_right/vial.json`,new bn(JSON.stringify(U_(s),void 0,4))),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial_right/rules.mk`,new bn(V_()))):(await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial/keymap.c`,new bn(B_())),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial/config.h`,new bn($_(!1,!1,o))),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial/vial.json`,new bn(JSON.stringify(U_(s),void 0,4))),await i.add(`qmk_firmware/keyboards/${a}/keymaps/vial/rules.mk`,new bn(V_())))}var F9e=(t,e)=>{var n;return(n=Q(e))==null?void 0:n.click()},U9e=(t,e)=>e(`${et.keyboardName}.json`),B9e=(t,e)=>e(`${et.keyboardName}-akd`),$9e=an("<button>Generate</button>"),V9e=an('<input type="file" accept=".json" class="svelte-buxgzt"> <button>Import</button> <button>Export</button> <!>',1);function q9e(t,e){$r(e,!0);let n=jt(null);function r(){return{layout:et.serialize(),case:Et.serialize()}}async function i(v){const P=new ene(new Lte("application/zip"));try{if(await P.add(`${et.keyboardName}.json`,new bn(JSON.stringify(r(),void 0,4))),et.controllerType==="wireless"?await s(P):await k9e(et.keyboardName,et.isSplit,{left:et.leftData,right:et.rightData},{left:ys.board,right:Qs.board},P),et.isSplit){if(await P.add(`pcb/${et.keyboardName}-left-pcb.json`,new bn(ys.board.serialize())),await P.add(`pcb/${et.keyboardName}-right-pcb.json`,new bn(Qs.board.serialize())),!Et.leftCase.top||!Et.leftCase.bottom||!Et.rightCase.top||!Et.rightCase.bottom)throw new Error("Left case is not available");await P.add(`case/${et.keyboardName}-left-top-case.stl`,new wo(await kl(Et.leftCase.top))),await P.add(`case/${et.keyboardName}-left-bottom-case.stl`,new wo(await kl(Et.leftCase.bottom))),await P.add(`case/${et.keyboardName}-right-top-case.stl`,new wo(await kl(Et.rightCase.top))),await P.add(`case/${et.keyboardName}-right-bottom-case.stl`,new wo(await kl(Et.rightCase.bottom)))}else{if(await P.add(`pcb/${et.keyboardName}-pcb.json`,new bn(ys.board.serialize())),!Et.leftCase.top||!Et.leftCase.bottom)throw new Error("Left case is not available");await P.add(`case/${et.keyboardName}-top-case.stl`,new wo(await kl(Et.leftCase.top))),await P.add(`case/${et.keyboardName}-bottom-case.stl`,new wo(await kl(Et.leftCase.bottom)))}}catch(x){console.log(x),alert(x);return}const S=await P.close(),g=URL.createObjectURL(S),m=document.createElement("a");m.href=g,m.download=v,m.click(),m.remove(),URL.revokeObjectURL(g)}async function s(v){await E9e(et.keyboardName,et.isSplit,{left:et.leftData,right:et.rightData},{left:ys.board,right:Qs.board},v),await C9e("akdk_bt1",v),await T9e("akdk_bt1",et.keyboardName,et.isSplit,v),await v.add("zmk-config/config/info.json",new bn(JSON.stringify(O9e(et.isSplit,{left:et.leftData,right:et.rightData},{left:ys.board,right:Qs.board}),void 0,4)))}const a=v=>{const P=r(),S=new Blob([JSON.stringify(P)]),g=URL.createObjectURL(S),m=document.createElement("a");m.href=g,m.download=v,m.click(),m.remove(),URL.revokeObjectURL(g)};D2(()=>{try{et.deserialize(localStorage.getItem("json")??"{}"),Et.deserialize(localStorage.getItem("json")??"{}")}catch(S){console.log(S)}let v=et.subscribe(()=>localStorage.setItem("json",JSON.stringify(r()))),P=Et.subscribe(()=>localStorage.setItem("json",JSON.stringify(r())));return()=>{v(),P()}});const o=!1;var l=V9e(),u=tr(l);u.__change=v=>{var S;const P=(S=v.target.files)==null?void 0:S[0];if(P){const g=new FileReader;g.onload=m=>{var w;const x=(w=m.target)==null?void 0:w.result;typeof x=="string"&&(et.deserialize(x),Et.deserialize(x))},g.readAsText(P)}v.target.value=""},uh(u,v=>st(n,v),()=>Q(n));var f=je(u,2);f.__click=[F9e,n];var h=je(f,2);h.__click=[U9e,a];var p=je(h,2);xr(p,()=>o,v=>{var P=$9e();P.__click=[B9e,i],kt(v,P)}),kt(t,l),Vr()}Li(["change","click"]);var H9e=(t,e,n)=>e(n),z9e=an("<button> </button>"),G9e=an('<main><div id="container" class="svelte-bzcauu"><div id="menu" class="svelte-bzcauu"><!> <div></div> <!></div> <div id="editor" class="svelte-bzcauu"><div id="layout"><!></div> <div id="pcb"><!></div> <div id="case"><!></div></div></div></main>');function X9e(t,e){$r(e,!1);let n=S4("LAYOUT");et.init(6,13);function r(m){st(n,m);const x=document.getElementById(m.toLowerCase());if(x){const w=x.getBoundingClientRect(),C=window.scrollY+w.bottom-window.innerHeight+20;window.scrollTo({top:C,left:0,behavior:"smooth"})}}Ju();var i=G9e(),s=bt(i),a=bt(s),o=bt(a);Mi(o,0,()=>["LAYOUT","PCB","CASE"],Vl,(m,x)=>{var w=z9e();w.__click=[H9e,r,x];var C=bt(w);en(()=>{Ku(w,`${"menu "+(x===Q(n)?"menu-selected":"")} svelte-bzcauu`),Jr(C,x)}),kt(m,w)});var l=je(o,2);An(l,"margin-top","10px");var u=je(l,2);q9e(u,{});var f=je(a,2),h=bt(f),p=bt(h);uX(p,{});var v=je(h,2),P=bt(v);AW(P,{});var S=je(v,2),g=bt(S);w9e(g,{}),kt(t,i),Vr()}Li(["click"]);oI(X9e,{target:document.getElementById("app")});
